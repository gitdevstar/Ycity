{"version":3,"file":"/js/filepond.js","mappings":";2FAGIA,QAA0B,GAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAOC,GAAI,q4BAAs4B,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,2FAA2F,MAAQ,GAAG,SAAW,qSAAqS,eAAiB,CAAC,ykCAAykC,WAAa,MAEx8E,yFCJIH,QAA0B,GAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAOC,GAAI,6tGAA8tG,GAAG,CAAC,QAAU,EAAE,QAAU,CAAC,iGAAiG,MAAQ,GAAG,SAAW,qjCAAqjC,eAAiB,CAAC,u9IAAu9I,WAAa,MAEp8R,iCCCAD,EAAOE,QAAU,SAAUC,GACzB,IAAIC,EAAO,GAuDX,OArDAA,EAAKC,SAAW,WACd,OAAOC,KAAKC,KAAI,SAAUC,GACxB,IAAIC,EAAUN,EAAuBK,GAErC,OAAIA,EAAK,GACA,UAAUE,OAAOF,EAAK,GAAI,MAAME,OAAOD,EAAS,KAGlDA,KACNE,KAAK,KAKVP,EAAKQ,EAAI,SAAUC,EAASC,EAAYC,GACf,iBAAZF,IAETA,EAAU,CAAC,CAAC,KAAMA,EAAS,MAG7B,IAAIG,EAAyB,GAE7B,GAAID,EACF,IAAK,IAAIH,EAAI,EAAGA,EAAIN,KAAKW,OAAQL,IAAK,CAEpC,IAAIX,EAAKK,KAAKM,GAAG,GAEP,MAANX,IACFe,EAAuBf,IAAM,GAKnC,IAAK,IAAIiB,EAAK,EAAGA,EAAKL,EAAQI,OAAQC,IAAM,CAC1C,IAAIV,EAAO,GAAGE,OAAOG,EAAQK,IAEzBH,GAAUC,EAAuBR,EAAK,MAKtCM,IACGN,EAAK,GAGRA,EAAK,GAAK,GAAGE,OAAOI,EAAY,SAASJ,OAAOF,EAAK,IAFrDA,EAAK,GAAKM,GAMdV,EAAKL,KAAKS,MAIPJ,0BC9DT,SAASe,EAAeC,EAAKR,GAAK,OAUlC,SAAyBQ,GAAO,GAAIC,MAAMC,QAAQF,GAAM,OAAOA,EAVtBG,CAAgBH,IAQzD,SAA+BA,EAAKR,GAAK,IAAIM,EAAKE,IAA0B,oBAAXI,QAA0BJ,EAAII,OAAOC,WAAaL,EAAI,eAAgB,GAAU,MAANF,EAAY,OAAQ,IAAkDQ,EAAIC,EAAlDC,EAAO,GAAQC,GAAK,EAAUC,GAAK,EAAmB,IAAM,IAAKZ,EAAKA,EAAGa,KAAKX,KAAQS,GAAMH,EAAKR,EAAGc,QAAQC,QAAoBL,EAAK7B,KAAK2B,EAAGQ,QAAYtB,GAAKgB,EAAKX,SAAWL,GAA3DiB,GAAK,IAAoE,MAAOM,GAAOL,GAAK,EAAMH,EAAKQ,EAAO,QAAU,IAAWN,GAAsB,MAAhBX,EAAW,QAAWA,EAAW,SAAO,QAAU,GAAIY,EAAI,MAAMH,GAAQ,OAAOC,EAR7aQ,CAAsBhB,EAAKR,IAI5F,SAAqCyB,EAAGC,GAAU,IAAKD,EAAG,OAAQ,GAAiB,iBAANA,EAAgB,OAAOE,EAAkBF,EAAGC,GAAS,IAAIE,EAAIC,OAAOC,UAAUrC,SAAS0B,KAAKM,GAAGM,MAAM,GAAI,GAAc,WAANH,GAAkBH,EAAEO,cAAaJ,EAAIH,EAAEO,YAAYC,MAAM,GAAU,QAANL,GAAqB,QAANA,EAAa,OAAOnB,MAAMyB,KAAKT,GAAI,GAAU,cAANG,GAAqB,2CAA2CO,KAAKP,GAAI,OAAOD,EAAkBF,EAAGC,GAJpTU,CAA4B5B,EAAKR,IAEnI,WAA8B,MAAM,IAAIqC,UAAU,6IAFuFC,GAMzI,SAASX,EAAkBnB,EAAK+B,IAAkB,MAAPA,GAAeA,EAAM/B,EAAIH,UAAQkC,EAAM/B,EAAIH,QAAQ,IAAK,IAAIL,EAAI,EAAGwC,EAAO,IAAI/B,MAAM8B,GAAMvC,EAAIuC,EAAKvC,IAAOwC,EAAKxC,GAAKQ,EAAIR,GAAM,OAAOwC,EAMhLpD,EAAOE,QAAU,SAAgCM,GAC/C,IAAI6C,EAAQlC,EAAeX,EAAM,GAC7BC,EAAU4C,EAAM,GAChBC,EAAaD,EAAM,GAEvB,IAAKC,EACH,OAAO7C,EAGT,GAAoB,mBAAT8C,KAAqB,CAE9B,IAAIC,EAASD,KAAKE,SAASC,mBAAmBC,KAAKC,UAAUN,MACzDO,EAAO,+DAA+DnD,OAAO8C,GAC7EM,EAAgB,OAAOpD,OAAOmD,EAAM,OACpCE,EAAaT,EAAWU,QAAQzD,KAAI,SAAU0D,GAChD,MAAO,iBAAiBvD,OAAO4C,EAAWY,YAAc,IAAIxD,OAAOuD,EAAQ,UAE7E,MAAO,CAACxD,GAASC,OAAOqD,GAAYrD,OAAO,CAACoD,IAAgBnD,KAAK,MAGnE,MAAO,CAACF,GAASE,KAAK,yBCxBjBX,EAAOE,QAKL,WACP,aAEA,IAAIiE,EAAgB,WAElBC,KAAKC,UAAY,SAASC,GACxBC,EAAQD,EAAET,KAAKW,SAAS,SAASC,GAC/BL,KAAKM,YAAY,CAAEzE,GAAIqE,EAAET,KAAK5D,GAAIuE,QAASC,QAK/C,IAAIF,EAAU,SAAiBI,EAASC,GACtC,IAAIC,EAAOF,EAAQE,KAEfC,EAAS,IAAIC,WACjBD,EAAOE,UAAY,WACjBJ,EAAGE,EAAOG,OAAOC,QAAQ,QAAS,IAAIA,QAAQ,OAAQ,MAExDJ,EAAOK,cAAcN,KAIrBO,EAAS,SAAgBC,GAC3B,IAAIC,EAAYD,EAAKC,UACnBC,EAAQF,EAAKE,MAGXC,EAAOD,EAAMC,KACfC,EAAeF,EAAME,aACrBC,EAAcH,EAAMG,YACpBC,EAASJ,EAAMI,OAEbC,EAAS,SAAgBC,GAC3B,IAAIhD,EAAOgD,EAAMhD,KACfgC,EAAOgB,EAAMhB,KACf,OAAO,IAAIiB,SAAQ,SAASC,GAC1B,IAAIC,EAASP,EAAatB,GAC1B6B,EAAOC,KAAK,CAAEpB,KAAMA,IAAQ,SAAShB,GACnCkC,EAAQ,CAAElD,KAAMA,EAAMgB,KAAMA,IAC5BmC,EAAOE,mBAMTC,EAAc,GAqHlB,OApHAb,EAAU,mBAAmB,SAAS9E,EAAM4F,IAGrCC,EAFOD,EAAMC,OAEP,2BAEX7F,EAAK8F,OAAO,6BAA6B,WACvC,OAAOH,EAAY3F,EAAKP,KAAOkG,EAAY3F,EAAKP,IAAI4D,QAEtDrD,EAAK8F,OAAO,wBAAwB,WAClC,MAAO,QACJ5F,OAAOF,EAAK+F,SAAU,YACtB7F,OAAOyF,EAAY3F,EAAKP,IAAI4D,aAInCyB,EAAU,yBAAyB,SAASkB,EAAqBC,GAC/D,IAAIJ,EAAQI,EAAMJ,MAClB,OAAO,IAAIP,SAAQ,SAASC,GAC1BA,EAAQM,EAAM,gCAIlBf,EAAU,2BAA2B,SAAST,EAAM6B,GAClD,IAAIlG,EAAOkG,EAAMlG,KACf6F,EAAQK,EAAML,MAChB,OAAO,IAAIP,SAAQ,SAASC,GAE1B,IACGM,EAAM,2BACLV,EAAOd,KAAUxD,MAAMC,QAAQuD,GAEjC,OAAOkB,EAAQlB,GAIjBsB,EAAY3F,EAAKP,IAAM,CACrB0G,SAAUnG,EAAKoG,cACf/C,KAAM,MAIRiC,QAAQe,KACLhC,aAAgBiC,KAAO,CAAC,CAAEjE,KAAM,KAAMgC,KAAMA,IAAUA,GAAMtE,IAC3DqF,IAEFmB,MAAK,SAASC,GACdb,EAAY3F,EAAKP,IAAI4D,KACnBgB,aAAgBiC,KAAOE,EAAU,GAAGnD,KAAOmD,EAC7CjB,EAAQlB,YAMdS,EAAU,eAAe,SAAS2B,GAEhC,IAAIC,EAAKD,EAAQC,GACfC,EAAOF,EAAQE,KACfd,EAAQY,EAAQZ,MAGba,EAAG,iBAAoBb,EAAM,0BAIlCc,EAAKC,eACH1B,EAAY,CACV2B,mBAAoB,SAA4BC,GAC9C,IAAIC,EAAOD,EAAMC,KACfC,EAASF,EAAME,OAGjB,IAAInB,EAAM,YAAV,CAIA,IAAI7F,EAAO6F,EAAM,WAAYmB,EAAOvH,IACpC,GAAKO,EAAL,CAGA,IAAIiH,EAAQtB,EAAY3F,EAAKP,IACzB0G,EAAWc,EAAMd,SACjB9C,EAAO4D,EAAM5D,KAGb3B,EAAQyB,KAAKC,UAAU,CACzB3D,GAAIO,EAAKP,GACT4C,KAAMrC,EAAKqE,KAAKhC,KAChB6E,KAAMlH,EAAKqE,KAAK6C,KAChBC,KAAMnH,EAAKqE,KAAK8C,KAChBhB,SAAUA,EACV9C,KAAMA,IAIJ0D,EAAKK,IAAI/D,KACX0D,EAAKK,IAAI/D,KAAK3B,MAAQA,EAItBqF,EAAKM,SAAS,mBAAoB,CAChC5H,GAAIO,EAAKP,GACTiC,MAAOA,OAIb4F,gBAAiB,SAAyBC,GACxC,IAAIP,EAASO,EAAMP,OACfhH,EAAO6F,EAAM,WAAYmB,EAAOvH,IAC/BO,UACE2F,EAAY3F,EAAKP,WAMzB,CACL0E,QAAS,CAEPqD,gBAAiB,EAAC,EAAMxC,EAAKyC,YAcnC,MAPoB,oBAAXC,aAAqD,IAApBA,OAAOC,UAE/CA,SAASC,cACP,IAAIC,YAAY,wBAAyB,CAAEC,OAAQlD,KAIhDA,EAzLemD,qBCAbvI,EAAOE,QAIT,WACL,aAEA,IAAIkF,EAAS,SAAgBC,GACzB,IAAIC,EAAYD,EAAKC,UACjBC,EAAQF,EAAKE,MAEbC,EAAOD,EAAMC,KACbgD,EAAkBjD,EAAMiD,gBACxBC,EAAoBlD,EAAMkD,kBAyG9B,OAtGAnD,EAAU,qBAAqB,SAAST,EAAMgB,GAC1C,IAAIQ,EAAQR,EAAMQ,MAClB,IAAKA,EAAM,kCACP,OAAO,EAGX,IAAIqC,EAAUrC,EAAM,qBACpB,GAAgB,OAAZqC,GAAoB7D,EAAK8C,MAAQe,EACjC,OAAO,EAGX,IAAIC,EAAUtC,EAAM,qBACpB,QAAgB,OAAZsC,GAAoB9D,EAAK8C,MAAQgB,MAUzCrD,EAAU,aAAa,SAAST,EAAMuB,GAClC,IAAIC,EAAQD,EAAMC,MAClB,OAAO,IAAIP,SAAQ,SAASC,EAAS6C,GAEjC,IAAKvC,EAAM,kCACP,OAAON,EAAQlB,GAInB,IAAIgE,EAAaxC,EAAM,iCACvB,GAAIwC,IAAeA,EAAWhE,GAC1B,OAAOkB,EAAQlB,GAInB,IAAI6D,EAAUrC,EAAM,qBACpB,GAAgB,OAAZqC,GAAoB7D,EAAK8C,MAAQe,EACjCE,EAAO,CACHE,OAAQ,CACJC,KAAM1C,EAAM,oCACZ2C,IAAKR,EAAgBnC,EAAM,2BAA4B,CACnD4C,SAAUR,EACNC,EACA,IACArC,EAAM,gCAR1B,CAkBA,IAAIsC,EAAUtC,EAAM,qBACpB,GAAgB,OAAZsC,GAAoB9D,EAAK8C,MAAQgB,EACjCC,EAAO,CACHE,OAAQ,CACJC,KAAM1C,EAAM,oCACZ2C,IAAKR,EAAgBnC,EAAM,2BAA4B,CACnD4C,SAAUR,EACNE,EACA,IACAtC,EAAM,gCAR1B,CAkBA,IAAI6C,EAAe7C,EAAM,2BACzB,GAAqB,OAAjB6C,GAEuB7C,EAAM,oBAAoB8C,QAAO,SAASC,EAAO5I,GACpE,OAAO4I,EAAQ5I,EAAK6I,WACrB,GAGoBH,EAUnB,YATAN,EAAO,CACHE,OAAQ,CACJC,KAAM1C,EAAM,0CACZ2C,IAAKR,EAAgBnC,EAAM,iCAAkC,CACzD4C,SAAUR,EAAkBS,QAUhDnD,EAAQlB,WAIT,CACHF,QAAS,CAEL2E,wBAAyB,EAAC,EAAM9D,EAAKyC,SAGrCsB,YAAa,CAAC,KAAM/D,EAAKgE,KAGzBC,YAAa,CAAC,KAAMjE,EAAKgE,KAGzBE,iBAAkB,CAAC,KAAMlE,EAAKgE,KAG9BG,uBAAwB,CAAC,KAAMnE,EAAKoE,UAGpCC,yBAA0B,CAAC,oBAAqBrE,EAAKsE,QACrDC,iBAAkB,CAAC,kCAAmCvE,EAAKsE,QAE3DE,yBAA0B,CAAC,oBAAqBxE,EAAKsE,QACrDG,iBAAkB,CAAC,kCAAmCzE,EAAKsE,QAE3DI,8BAA+B,CAAC,8BAA+B1E,EAAKsE,QACpEK,sBAAuB,CAAC,wCAAyC3E,EAAKsE,WAWlF,MALkC,oBAAX5B,aAAqD,IAApBA,OAAOC,UAE3DA,SAASC,cAAc,IAAIC,YAAY,wBAAyB,CAAEC,OAAQlD,KAGvEA,EA1JiBmD,oBCArBvI,EAAOE,QAKL,WACP,aAEA,IAAIkF,EAAS,SAAgBC,GAC3B,IAAIC,EAAYD,EAAKC,UACnBC,EAAQF,EAAKE,MAEXC,EAAOD,EAAMC,KACf4E,EAAW7E,EAAM6E,SACjB5B,EAAkBjD,EAAMiD,gBACxB6B,EAAsB9E,EAAM8E,oBAC5BC,EAA2B/E,EAAM+E,yBACjCC,EAAqBhF,EAAMgF,mBAEzBC,EAA0B,SAC5BC,EACAC,GAIA,OAFqB,SAASC,KAAKF,IAAa,IAAIG,QAChCF,EAAS/H,MAAM,GAAI,IAIrCkI,EAAkB,SACpBC,EACAC,GAEA,OAAOD,EAAcE,MAAK,SAASC,GAEjC,MAAI,MAAMlI,KAAKkI,GACNT,EAAwBO,EAAeE,GAIzCA,IAAiBF,MAIxBG,EAAc,SAAqB1K,GAErC,IAAIkH,EAAO,GACX,GAAI0C,EAAS5J,GAAO,CAClB,IAAI2K,EAAWZ,EAAmB/J,GAC9B4K,EAAYd,EAAyBa,GACrCC,IACF1D,EAAO2C,EAAoBe,SAG7B1D,EAAOlH,EAAKkH,KAGd,OAAOA,GAGL2D,EAAe,SACjB7K,EACA8K,EACAC,GAGA,GAAiC,IAA7BD,EAAkBrK,OACpB,OAAO,EAIT,IAAIyG,EAAOwD,EAAY1K,GAGvB,OAAK+K,EAKE,IAAIzF,SAAQ,SAASC,EAAS6C,GACnC2C,EAAa/K,EAAMkH,GAChBX,MAAK,SAASyE,GACTX,EAAgBS,EAAmBE,GACrCzF,IAEA6C,OAGH6C,MAAM7C,MAbFiC,EAAgBS,EAAmB5D,IAiB1CgE,EAAmB,SAA0BnL,GAC/C,OAAO,SAASoL,GACd,OAAiC,OAA1BpL,EAAIoL,KAEPpL,EAAIoL,IAAqBA,KA6FjC,OAxFArG,EAAU,+BAA+B,SAAS/E,GAChD,OAAOkC,OAAOmJ,OAAOrL,EAAK,CACxBsL,OAAQ,yBAKZvG,EAAU,qBAAqB,SAAST,EAAMgB,GAC5C,IAAIQ,EAAQR,EAAMQ,MAElB,OAAKA,EAAM,mCAKJgF,EAAaxG,EAAMwB,EAAM,+BAMlCf,EAAU,aAAa,SAAST,EAAMuB,GACpC,IAAIC,EAAQD,EAAMC,MAClB,OAAO,IAAIP,SAAQ,SAASC,EAAS6C,GACnC,GAAKvC,EAAM,kCAAX,CAKA,IAAIiF,EAAoBjF,EAAM,2BAG1BkF,EAAelF,EAAM,sCAGrByF,EAAmBT,EACrBxG,EACAyG,EACAC,GAGEQ,EAAkB,WACpB,IAAIC,EAA0BV,EAC3B/K,IACCmL,EACErF,EAAM,qDAGT4F,QAAO,SAASC,GACf,OAAiB,IAAVA,KAGXtD,EAAO,CACLE,OAAQ,CACNC,KAAM1C,EAAM,mCACZ2C,IAAKR,EACHnC,EAAM,+CACN,CACE8F,SAAUH,EAAwBrL,KAAK,MACvCyL,eAAgBJ,EACbrJ,MAAM,GAAI,GACVhC,KAAK,MACR0L,SACEL,EAAwBA,EAAwB/K,OAAS,SAQrE,GAAgC,kBAArB6K,EACT,OAAKA,EAGE/F,EAAQlB,GAFNkH,IAMXD,EACG/E,MAAK,WACJhB,EAAQlB,MAET4G,MAAMM,QA1DPhG,EAAQlB,SA+DP,CAELF,QAAS,CAEP2H,wBAAyB,EAAC,EAAM9G,EAAKyC,SAGrCqD,kBAAmB,CAAC,GAAI9F,EAAK+G,OAO7BC,wBAAyB,CAAC,0BAA2BhH,EAAKsE,QAG1D2C,mCAAoC,CAClC,yCACAjH,EAAKsE,QAIP4C,sCAAuC,CAAC,GAAIlH,EAAKmH,QAGjDC,2BAA4B,CAAC,KAAMpH,EAAKoE,aAc9C,MAPoB,oBAAX1B,aAAqD,IAApBA,OAAOC,UAE/CA,SAASC,cACP,IAAIC,YAAY,wBAAyB,CAAEC,OAAQlD,KAIhDA,EApOemD,qBCAjBvI,EAAOE,QAIL,WACP,aAEA,IAAI2M,EAAU,SAAiBhI,GAC7B,MAAO,SAAS9B,KAAK8B,EAAK6C,OAMxBtC,EAAS,SAAgBC,GAC3B,IAAIC,EAAYD,EAAKC,UACnBC,EAAQF,EAAKE,MACXC,EAAOD,EAAMC,KACfG,EAASJ,EAAMI,OACfmH,EAAkCvH,EAAMuH,gCAGtCC,EAAY,SAAmBvM,EAAM6F,GACvC,SAAUwG,EAAQrM,EAAKqE,QAAUwB,EAAM,0BAGrC2G,EAAW,SAAkB9K,GAC/B,MAAwB,iBAAVA,GAGZ+K,EAAW,SAAkB/K,GAC/B,MAAwB,iBAAVA,GAGZgL,EAAa,SAAoB1M,EAAM2M,GACzC,OAAO3M,EAAK4M,YACV,OACA3K,OAAOmJ,OAAO,GAAIpL,EAAKoG,YAAY,QAASuG,KAgHhD,OA3GA7H,EAAU,mBAAmB,SAAS9E,EAAMqF,GAC1C,IAAIQ,EAAQR,EAAMQ,MAElB7F,EAAK8F,OAAO,gBAAgB,SAAS+G,GACnC,GAAKN,EAAUvM,EAAM6F,IAAW2G,EAASM,QAEzC,OADA9M,EAAK4M,YAAY,OAAQC,GAClBA,KAGT7M,EAAK8F,OAAO,sBAAsB,SAASgH,GACzC,GAAKP,EAAUvM,EAAM6F,IAAW2G,EAASM,GACzC,OAAOJ,EAAW1M,EAAM,CAAE8M,OAAQA,OAGpC9M,EAAK8F,OAAO,oBAAoB,SAASiH,GACvC,GAAKR,EAAUvM,EAAM6F,IAAW4G,EAASM,GACzC,OAAOL,EAAW1M,EAAM,CAAE+M,KAAMC,KAAKC,IAAI,EAAGF,QAG9C/M,EAAK8F,OAAO,wBAAwB,SAASoH,GAC3C,GAAKX,EAAUvM,EAAM6F,IAAW4G,EAASS,GACzC,OAAOR,EAAW1M,EAAM,CAAEkN,SAAUA,OAGtClN,EAAK8F,OAAO,oBAAoB,SAASqH,GACvC,GAAKZ,EAAUvM,EAAM6F,IAAW2G,EAASW,GACzC,OAAOT,EAAW1M,EAAM,CAAEmN,KAAMA,OAGlCnN,EAAK8F,OAAO,2BAA2B,SAASsH,GAC9C,GAAKb,EAAUvM,EAAM6F,SAAoC,IAAnBuH,EAAtC,CAGA,IAAIC,EAAcrN,EAAKoG,YAAY,QAE/BkH,EAAchB,EAAgCc,GAE9CG,EAAU,CACZT,OAAQ,CACNU,EAAG,GACHC,EAAG,IAGLN,KAAME,EACFpL,OAAOmJ,OAAO,GAAIiC,EAAYF,MAC9B,CACEO,YAAY,EACZC,UAAU,GAGhBT,SAAU,EACVH,KAAM,EACNO,YAAaA,GAKf,OAFAtN,EAAK4M,YAAY,OAAQW,GAElBA,SAKXzI,EAAU,iBAAiB,SAAS9E,EAAM4F,GACxC,IAAIC,EAAQD,EAAMC,MAClB,OAAO,IAAIP,SAAQ,SAASC,EAAS6C,GAEnC,IAAI/D,EAAOrE,EAAKqE,KAGhB,IAAKc,EAAOd,KAAUgI,EAAQhI,KAAUwB,EAAM,wBAC5C,OAAON,EAAQvF,GAKjB,GADWA,EAAKoG,YAAY,QAE1B,OAAOb,EAAQvF,GAIjB,IAAI4N,EAAmB/H,EAAM,+BAG7B7F,EAAK4M,YAAY,OAAQ,CACvBE,OAAQ,CACNU,EAAG,GACHC,EAAG,IAGLN,KAAM,CACJO,YAAY,EACZC,UAAU,GAGZT,SAAU,EACVH,KAAM,EACNO,YAAaM,EACTtB,EAAgCsB,GAChC,OAINrI,EAAQvF,SAKL,CACLmE,QAAS,CAEP0J,eAAgB,EAAC,EAAM7I,EAAKyC,SAG5BqG,qBAAsB,CAAC,KAAM9I,EAAKsE,WAcxC,MAPoB,oBAAX5B,aAAqD,IAApBA,OAAOC,UAE/CA,SAASC,cACP,IAAIC,YAAY,wBAAyB,CAAEC,OAAQlD,KAIhDA,EAzKemD,qBCAjBvI,EAAOE,QAIL,WACP,aAEA,IAAIqO,EAAqB,SAA4B1J,GACnD,MAAO,SAAS9B,KAAK8B,EAAK6C,OAMxBtC,EAAS,SAAgBoJ,GAC3B,IAAIlJ,EAAYkJ,EAAElJ,UAChBC,EAAQiJ,EAAEjJ,MACVkJ,EAAQD,EAAEC,MACRjJ,EAAOD,EAAMC,KACfE,EAAcH,EAAMG,YACpBgJ,EAAuBnJ,EAAMoJ,cAC7BA,OAC2B,IAAzBD,EACI,SAASlO,GACP,OAAOA,GAETkO,EACJE,EAAmBH,EAAMG,iBAE7BtJ,EAAU,2BAA2B,SAASuJ,EAAcxJ,GAC1D,IAAI7E,EAAO6E,EAAK7E,KACd6F,EAAQhB,EAAKgB,MACf,OAAO,IAAIP,SAAQ,SAASC,GAC1B,IAAIlB,EAAOrE,EAAKqE,KAShBkB,IALEM,EAAM,yBACNA,EAAM,8BACNkI,EAAmB1J,WAQzBS,EAAU,iBAAiB,SAAS9E,EAAMqF,GACxC,IAAIQ,EAAQR,EAAMQ,MAChBwB,EAAWhC,EAAMgC,SACnB,OAAO,IAAI/B,SAAQ,SAASC,EAAS6C,GAEnC,GAAIpI,EAAKsO,OAAS,EAChB/I,EAAQvF,OADV,CAMA,IAAIqE,EAAOrE,EAAKqE,KAChB,GACGwB,EAAM,yBACNA,EAAM,+BAOT,GAAKkI,EAAmB1J,GAAxB,CAKA,IAAIkK,EAA8B,SAChCvO,EACAuF,EACA6C,GAEA,OAAO,SAASoG,GAEdC,EAAiBC,QAGbF,EACFjJ,EAAQvF,GAERoI,EAAOpI,GAITqH,EAAS,QAGTsH,MAIAA,EAAc,WAChB,GAAKF,EAAiBhO,OAAtB,CACA,IAAImO,EAAqBH,EAAiB,GACxCzO,EAAO4O,EAAmB5O,KAC1BuF,EAAUqJ,EAAmBrJ,QAC7B6C,EAASwG,EAAmBxG,OAE9Bf,EAAS,YAAa,CACpB5H,GAAIO,EAAKP,GACToP,qBAAsBN,EACpBvO,EACAuF,EACA6C,OAKN0G,EAAiB,CAAE9O,KAAMA,EAAMuF,QAASA,EAAS6C,OAAQA,IAEzB,IAA5BqG,EAAiBhO,QACnBkO,SAhDApJ,EAAQvF,QANRuF,EAAQvF,UA4Dd8E,EAAU,mBAAmB,SAAS9E,EAAM4F,GAC9BA,EAAMC,MAAlB,IACEwB,EAAWzB,EAAMyB,SACnBrH,EAAK8F,OAAO,QAAQ,WAClBuB,EAAS,YAAa,CAAE5H,GAAIO,EAAKP,WAIrC,IAAIgP,EAAmB,GACnBK,EAAmB,SAA0BC,GAE/C,OADAN,EAAiBlP,KAAKwP,GACfA,GAqRT,OAjRAjK,EAAU,eAAe,SAAS2B,GAEhC,IAAIC,EAAKD,EAAQC,GACfC,EAAOF,EAAQE,KACfd,EAAQY,EAAQZ,MAElB,GAAKA,EAAM,wBAAX,CAEA,IAAImJ,EAAsBnJ,EAAM,2BAOhC,GAHGa,EAAG,eAAiBsI,GACpBtI,EAAG,SAAWsI,EAEjB,CAGA,IAAIC,EAASpJ,EAAM,yBACnB,GAAKoJ,EAAL,CAGKA,EAAOC,yBACVD,EAAOE,YAAa,EACpBF,EAAOG,YAAa,EACpBH,EAAOC,uBAAyB,CAC9BG,UAAWJ,EAAOI,WAAa,aAC/BC,SAAUL,EAAOK,UAAY,eAKjC,IAAIC,EAAa,SAAoBtJ,GACnC,IAAIc,EAAOd,EAAMc,KACfyI,EAAQvJ,EAAMuJ,MACdxI,EAASf,EAAMe,OACbvH,EAAK+P,EAAM/P,GACXoP,EAAuB7H,EAAO6H,qBAGlCI,EAAOQ,gBACL1I,EAAKlB,MAAM,gCAAkCoJ,EAAOQ,gBACtDR,EAAOS,4BACL3I,EAAKlB,MAAM,gDACXoJ,EAAOS,4BAGT,IAAI1P,EAAO+G,EAAKlB,MAAM,WAAYpG,GAClC,GAAKO,EAAL,CAGA,IAAIqE,EAAOrE,EAAKqE,KAGZwI,EAAO7M,EAAKoG,YAAY,QACxBuJ,EAAc,CAChB7C,OAAQ,CACNU,EAAG,GACHC,EAAG,IAGLN,KAAM,CACJO,YAAY,EACZC,UAAU,GAGZZ,KAAM,EACNG,SAAU,EACVI,YAAa,MAIXsC,EAAS5P,EAAKoG,YAAY,UAG1BqF,EAASzL,EAAKoG,YAAY,WAAa,KACvCyJ,EAAU7P,EAAKoG,YAAY,YAAc,KACzC0J,EAAS9P,EAAKoG,YAAY,WAAa,KACvC2J,EAAS/P,EAAKoG,YAAY,WAAa,KAGvC4J,EAAkB,CACpBnD,KAAMA,GAAQ8C,EACdxI,KAAMyI,EACF,CACEK,QAASL,EAAOK,QAChBC,KAAMN,EAAOM,KACbC,MAAOP,EAAOzI,KAAKgJ,MACnBC,OAAQR,EAAOzI,KAAKiJ,QAEtB,KACJ3E,OAAQoE,EACJA,EAAQpQ,IAAMoQ,EAAQQ,OACtBtJ,EAAKlB,MAAM,2BACXkB,EAAKlB,MAAM,mCACViK,EACDrE,EACA,KACJ6E,MAAOR,EACPC,OAAQA,GAGVd,EAAOI,UAAY,SAASnJ,GAC1B,IAAI7C,EAAO6C,EAAM7C,KACbwJ,EAAOxJ,EAAKwJ,KACd1F,EAAO9D,EAAK8D,KACZsE,EAASpI,EAAKoI,OACd6E,EAAQjN,EAAKiN,MACbC,EAAclN,EAAKkN,YACnBR,EAAS1M,EAAK0M,OAGZ5J,EAAW,GAQf,GALI0G,IACF1G,EAAS0G,KAAOA,GAId1F,EAAM,CACR,IAAIqJ,GAAexQ,EAAKoG,YAAY,WAAa,IAAIe,KACjDsJ,EAAa,CACfN,MAAOhJ,EAAKgJ,MACZC,OAAQjJ,EAAKiJ,QAGTK,EAAWN,OAASM,EAAWL,SAAWI,IAC9CC,EAAWN,MAAQK,EAAYL,MAC/BM,EAAWL,OAASI,EAAYJ,SAG9BK,EAAWN,OAASM,EAAWL,UACjCjK,EAASyJ,OAAS,CAChBK,QAAS9I,EAAK8I,QACdC,KAAM/I,EAAK+I,KACX/I,KAAMsJ,IAKRV,IACF5J,EAAS4J,OAASA,GAIpB5J,EAAS2J,OAASQ,EAClBnK,EAAS0J,QAAUpE,EAGnBtF,EAASsF,OAAS8E,EAGlBvQ,EAAK4M,YAAYzG,GAGjB8I,EAAOC,uBAAuBG,UAAUhM,EAAM8K,EAAcnO,IAGvD6O,IACLI,EAAOyB,QAAU,WACf7B,GAAqB,GACrBI,EAAOyB,QAAU,QAIrBzB,EAAOK,SAAW,WAEhBL,EAAOC,uBAAuBI,SAASnB,EAAcnO,IAGhD6O,IACLI,EAAOyB,QAAU,WACf7B,GAAqB,GACrBI,EAAOyB,QAAU,QAIrBzB,EAAO0B,KAAKtM,EAAM2L,KAQhBY,EAAc,SAAqB9J,GACrC,IAAIC,EAAOD,EAAMC,KACfyI,EAAQ1I,EAAM0I,MAEhB,GAAK3J,EAAM,6BAAX,CACA,IAAIpG,EAAK+P,EAAM/P,GAGXO,EAAO6F,EAAM,WAAYpG,GAC7B,GAAKO,EAAL,CAGA,IAAIqE,EAAOrE,EAAKqE,KAGhB,GAAK0J,EAAmB1J,GAQxB,GALA0C,EAAKK,IAAIyJ,WAAa,SAAS/M,GAC7BA,EAAEgN,kBACF/J,EAAKM,SAAS,YAAa,CAAE5H,GAAIA,KAG/BuP,EAAqB,CAEvB,IAAI+B,EAAapK,EAAKqK,gBAAgB5C,EAAkB,CACtD1C,MAAO,OACPuF,KAAMpL,EAAM,4BACZqL,QAAS,IAIXH,EAAWI,QAAQC,UAAUC,IAAI,8BACjCN,EAAWI,QAAQG,QAAQC,MAAQ1L,EACjC,kDAEFkL,EAAWS,GAAG,QAASzK,EAAKK,IAAIyJ,YAEhC9J,EAAKK,IAAIqK,eAAiB9K,EAAK+K,gBAAgBX,OAC1C,CAEL,IAAIY,EAAkBhL,EAAKwK,QAAQS,cACjC,6BAEEC,EAAalK,SAASmK,cAAc,UACxCD,EAAWE,UAAY,iCACvBF,EAAWG,UACTnM,EAAM,4BAA8B,oBACtCgM,EAAWI,iBAAiB,QAASlL,EAAKK,IAAIyJ,YAC9Cc,EAAgBO,YAAYL,GAE5B9K,EAAKK,IAAIyK,WAAaA,MAI1BlL,EAAKwL,mBAAkB,SAAS5K,GAC9B,IAAIR,EAAOQ,EAAMR,KACbA,EAAKK,IAAIqK,gBACX1K,EAAKK,IAAIqK,eAAeW,IAAI,QAASrL,EAAKK,IAAIyJ,YAE5C9J,EAAKK,IAAIyK,YACX9K,EAAKK,IAAIyK,WAAWQ,oBAAoB,QAAStL,EAAKK,IAAIyJ,eAI9D,IAAIyB,EAAS,CACXC,UAAWhD,EACXiD,cAAe5B,GAGjB,GAAI5B,EAAqB,CAEvB,IAAIyD,EAAmB,SAA0BC,GAC/C,IAAI3L,EAAO2L,EAAM3L,KACZA,EAAKK,IAAIqK,iBACd1K,EAAKK,IAAIqK,eAAeP,QAAU,IAGpCoB,EAAOK,uBAAyBF,EAKlC9L,EAAKC,eAAe1B,EAAYoN,UAI3B,CACLnO,QAAS,CAEPyO,eAAgB,EAAC,EAAM5N,EAAKyC,SAG5BoL,qCAAsC,CAAC,gBAAiB7N,EAAKsE,QAG7DwJ,qBAAsB,EAAC,EAAO9N,EAAKyC,SAGnCsL,mBAAoB,EAAC,EAAM/N,EAAKyC,SAGhCuL,kBAAmB,CACjB,mVACAhO,EAAKsE,QAIP2J,gBAAiB,CAAC,KAAMjO,EAAKmH,WAcnC,MAPoB,oBAAXzE,aAAqD,IAApBA,OAAOC,UAE/CA,SAASC,cACP,IAAIC,YAAY,wBAAyB,CAAEC,OAAQlD,KAIhDA,EA9bemD,qBCAjBvI,EAAOE,QAKL,WACP,aAGA,IAAIwT,EAAS,SAAgB7O,GAC3B,MAAO,eAAe9B,KAAK8B,EAAK6C,OAG9BiM,EAAS,CACXC,KAAM,MACNC,KAAM,MACNC,KAAM,WACNC,KAAM,MACNC,YAAa,IACbC,QAAS,OAGPC,EAAY,SAAmB/M,EAAMgN,GACvC,IAAIC,EACFC,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,IAAmBA,UAAU,GACjE,OAAOlN,EAAK+M,UAAUC,EAAQC,IAE5BG,EAAY,SAAmBpN,EAAMgN,GACvC,IAAIC,EACFC,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,IAAmBA,UAAU,GACjE,OAAOlN,EAAKoN,UAAUJ,EAAQC,IAG5BI,EAAsB,SAA6B3P,GACrD,OAAO,IAAIiB,SAAQ,SAASC,EAAS6C,GACnC,IAAI9D,EAAS,IAAIC,WACjBD,EAAO2P,OAAS,SAASnQ,GACvB,IAAI6C,EAAO,IAAIuN,SAASpQ,EAAEqQ,OAAO1P,QAGjC,GAAIiP,EAAU/M,EAAM,KAAOwM,EAAOC,KAAlC,CASA,IAHA,IAAI3S,EAASkG,EAAKyN,WACdT,EAAS,EAENA,EAASlT,GAAQ,CACtB,IAAI4T,EAASX,EAAU/M,EAAMgN,GAI7B,GAHAA,GAAU,EAGNU,IAAWlB,EAAOE,KAAM,CAC1B,GAAIU,EAAUpN,EAAOgN,GAAU,KAAQR,EAAOG,KAE5C,MAIF,IAAIM,EAASF,EAAU/M,EAAOgN,GAAU,KAAQR,EAAOI,KACvDI,GAAUI,EAAUpN,EAAMgN,EAAS,EAAGC,GAEtC,IAAIU,EAAOZ,EAAU/M,EAAMgN,EAAQC,GACnCD,GAAU,EAEV,IAAK,IAAIvT,EAAI,EAAGA,EAAIkU,EAAMlU,IAExB,GACEsT,EAAU/M,EAAMgN,EAAa,GAAJvT,EAAQwT,KAAYT,EAAOK,YAIpD,YAFAjO,EAAQmO,EAAU/M,EAAMgN,EAAa,GAAJvT,EAAS,EAAGwT,QAK5C,KAAKS,EAASlB,EAAOM,WAAaN,EAAOM,QAE9C,MAEAE,GAAUD,EAAU/M,EAAMgN,IAK9BpO,GAAS,QA5CPA,GAAS,IAgDbjB,EAAOiQ,kBAAkBlQ,EAAKlC,MAAM,EAAG,YAIvCqS,EAEkB,oBAAX9M,aAAqD,IAApBA,OAAOC,SAQ/C8M,EACF,yTAGEC,OAAgBZ,EAChBa,EATKH,EASqB,IAAII,MAAU,GAC5CD,EAAUV,OAAS,WACjB,OAAQS,EAAgBC,EAAUE,aAAeF,EAAUG,eAE7DH,EAAUI,IAAMN,EAEhB,IAAIO,EAAoC,WACtC,OAAON,GAML9P,EAAS,SAAgBC,GAC3B,IAAIC,EAAYD,EAAKC,UACnBC,EAAQF,EAAKE,MACXC,EAAOD,EAAMC,KACfG,EAASJ,EAAMI,OA6BjB,OA1BAL,EAAU,iBAAiB,SAAS9E,EAAMqF,GACxC,IAAIQ,EAAQR,EAAMQ,MAClB,OAAO,IAAIP,SAAQ,SAASC,EAAS6C,GAEnC,IAAI/D,EAAOrE,EAAKqE,KAGhB,KACGc,EAAOd,IACP6O,EAAO7O,IACPwB,EAAM,qCACNmP,KAGD,OAAOzP,EAAQvF,GAIjBgU,EAAoB3P,GAAMkC,MAAK,SAAS0O,GACtCjV,EAAK4M,YAAY,OAAQ,CAAEqI,YAAaA,IACxC1P,EAAQvF,YAMP,CACLmE,QAAS,CAEP+Q,0BAA2B,EAAC,EAAMlQ,EAAKyC,YAc7C,MAPoB,oBAAXC,aAAqD,IAApBA,OAAOC,UAE/CA,SAASC,cACP,IAAIC,YAAY,wBAAyB,CAAEC,OAAQlD,KAIhDA,EA5KemD,qBCAjBvI,EAAOE,QAKL,WACP,aAGA,IAAIqO,EAAqB,SAA4B1J,GACnD,MAAO,SAAS9B,KAAK8B,EAAK6C,OA4F5B,SAASiO,EAAYzT,GACnB5B,KAAKsV,QAAU1T,EAGjB,SAAS2T,EAAgBC,GACvB,IAAIC,EAAOC,EAEX,SAASC,EAAKC,EAAKC,GACjB,OAAO,IAAIrQ,SAAQ,SAASC,EAAS6C,GACnC,IAAIwN,EAAU,CACZF,IAAKA,EACLC,IAAKA,EACLpQ,QAASA,EACT6C,OAAQA,EACR5G,KAAM,MAGJgU,EACFA,EAAOA,EAAKhU,KAAOoU,GAEnBL,EAAQC,EAAOI,EACfC,EAAOH,EAAKC,OAKlB,SAASE,EAAOH,EAAKC,GACnB,IACE,IAAIlR,EAAS6Q,EAAII,GAAKC,GAClBjU,EAAQ+C,EAAO/C,MACfoU,EAAepU,aAAiByT,EACpC7P,QAAQC,QAAQuQ,EAAepU,EAAM0T,QAAU1T,GAAO6E,MACpD,SAASoP,GACHG,EACFD,EAAO,OAAQF,GAIjBI,EAAOtR,EAAOhD,KAAO,SAAW,SAAUkU,MAE5C,SAAShU,GACPkU,EAAO,QAASlU,MAGpB,MAAOA,GACPoU,EAAO,QAASpU,IAIpB,SAASoU,EAAO7O,EAAMxF,GACpB,OAAQwF,GACN,IAAK,SACHqO,EAAMhQ,QAAQ,CACZ7D,MAAOA,EACPD,MAAM,IAER,MAEF,IAAK,QACH8T,EAAMnN,OAAO1G,GACb,MAEF,QACE6T,EAAMhQ,QAAQ,CACZ7D,MAAOA,EACPD,MAAM,KAKZ8T,EAAQA,EAAM/T,MAGZqU,EAAON,EAAMG,IAAKH,EAAMI,KAExBH,EAAO,KAIX1V,KAAKkW,QAAUP,EAEW,mBAAfH,EAAIW,SACbnW,KAAKmW,YAASnC,GA4kBlB,SAASnT,EAAeC,EAAKR,GAC3B,OACEW,EAAgBH,IAChBgB,EAAsBhB,EAAKR,IAC3BsC,IA+BJ,SAAS3B,EAAgBH,GACvB,GAAIC,MAAMC,QAAQF,GAAM,OAAOA,EAWjC,SAASgB,EAAsBhB,EAAKR,GAClC,IAAIgB,EAAO,GACPC,GAAK,EACLC,GAAK,EACLH,OAAK2S,EAET,IACE,IACE,IAAiC5S,EAA7BR,EAAKE,EAAII,OAAOC,cAClBI,GAAMH,EAAKR,EAAGc,QAAQC,QAGxBL,EAAK7B,KAAK2B,EAAGQ,QAETtB,GAAKgB,EAAKX,SAAWL,GAJzBiB,GAAK,IAMP,MAAOM,GACPL,GAAK,EACLH,EAAKQ,EACL,QACA,IACON,GAAsB,MAAhBX,EAAW,QAAWA,EAAW,SAC5C,QACA,GAAIY,EAAI,MAAMH,GAIlB,OAAOC,EAuBT,SAASsB,IACP,MAAM,IAAID,UAAU,wDA1qBA,mBAAXzB,QAAyBA,OAAOkV,gBACzCb,EAAgBnT,UAAUlB,OAAOkV,eAAiB,WAChD,OAAOpW,OAIXuV,EAAgBnT,UAAUV,KAAO,SAASmU,GACxC,OAAO7V,KAAKkW,QAAQ,OAAQL,IAG9BN,EAAgBnT,UAAUiU,MAAQ,SAASR,GACzC,OAAO7V,KAAKkW,QAAQ,QAASL,IAG/BN,EAAgBnT,UAAU+T,OAAS,SAASN,GAC1C,OAAO7V,KAAKkW,QAAQ,SAAUL,IA64ChC,IAAIS,EAAiB,SAAwBC,EAAGC,GAC9C,OAAOC,EAAaF,EAAE7I,EAAI8I,EAAQD,EAAE5I,EAAI6I,IAGtCE,EAAY,SAAmBC,EAAGC,GACpC,OAAOH,EAAaE,EAAEjJ,EAAIkJ,EAAElJ,EAAGiJ,EAAEhJ,EAAIiJ,EAAEjJ,IAGrCkJ,EAAkB,SAAyBN,GAC7C,IAAIO,EAAI5J,KAAK6J,KAAKR,EAAE7I,EAAI6I,EAAE7I,EAAI6I,EAAE5I,EAAI4I,EAAE5I,GACtC,OAAU,IAANmJ,EACK,CACLpJ,EAAG,EACHC,EAAG,GAGA8I,EAAaF,EAAE7I,EAAIoJ,EAAGP,EAAE5I,EAAImJ,IAGjCE,EAAe,SAAsBT,EAAGU,EAASzI,GACnD,IAAI0I,EAAMhK,KAAKgK,IAAID,GACfE,EAAMjK,KAAKiK,IAAIF,GACfG,EAAIX,EAAaF,EAAE7I,EAAIc,EAAOd,EAAG6I,EAAE5I,EAAIa,EAAOb,GAClD,OAAO8I,EACLjI,EAAOd,EAAIwJ,EAAME,EAAE1J,EAAIyJ,EAAMC,EAAEzJ,EAC/Ba,EAAOb,EAAIwJ,EAAMC,EAAE1J,EAAIwJ,EAAME,EAAEzJ,IAI/B8I,EAAe,WAKjB,MAAO,CAAE/I,EAHPqG,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,EAGvDpG,EADboG,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,IAIpEsD,EAAiB,SAAwBzV,EAAOyF,GAClD,IAAIiQ,EACFvD,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,EAClEwD,EAAOxD,UAAUpT,OAAS,EAAIoT,UAAU,QAAKC,EACjD,MAAqB,iBAAVpS,EACF4V,WAAW5V,GAAS0V,EAER,iBAAV1V,EACFA,GAAS2V,EAAOlQ,EAAKkQ,GAAQrK,KAAKuK,IAAIpQ,EAAKgJ,MAAOhJ,EAAKiJ,cADhE,GAMEoH,EAAkB,SAAyBzH,EAAQ5I,EAAMsQ,GAC3D,IAAIC,EAAY3H,EAAO4H,aAAe5H,EAAO2H,WAAa,QACtDE,EAAO7H,EAAO8H,iBAAmB9H,EAAO+H,WAAa,cACrDC,EAAShI,EAAOiI,aAAejI,EAAOkI,WAAa,cACnDC,EAAcf,EAChBpH,EAAOoI,aAAepI,EAAOqI,UAC7BjR,EACAsQ,GAaF,MAAO,CACL,iBAZY1H,EAAOsI,SAAW,QAa9B,kBAZatI,EAAOuI,UAAY,QAahC,eAAgBJ,GAAe,EAC/B,mBAZqB,iBAAdR,EACH,GACAA,EACG3X,KAAI,SAASsW,GACZ,OAAOc,EAAed,EAAGlP,EAAMsQ,MAEhCtX,KAAK,KAOZ4X,OAAQA,EACRH,KAAMA,EACN1G,QARYnB,EAAOmB,SAAW,IAY9BqH,EAAY,SAAmB7W,GACjC,OAAgB,MAATA,GAGL8W,EAAgB,SAAuBC,EAAMtR,GAC/C,IAAIiQ,EACFvD,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,EAElE6E,EACFvB,EAAesB,EAAKjL,EAAGrG,EAAMiQ,EAAQ,UACrCD,EAAesB,EAAKC,KAAMvR,EAAMiQ,EAAQ,SACtCuB,EACFxB,EAAesB,EAAKhL,EAAGtG,EAAMiQ,EAAQ,WACrCD,EAAesB,EAAKE,IAAKxR,EAAMiQ,EAAQ,UACrCjH,EAAQgH,EAAesB,EAAKtI,MAAOhJ,EAAMiQ,EAAQ,SACjDhH,EAAS+G,EAAesB,EAAKrI,OAAQjJ,EAAMiQ,EAAQ,UACnDwB,EAAQzB,EAAesB,EAAKG,MAAOzR,EAAMiQ,EAAQ,SACjDyB,EAAS1B,EAAesB,EAAKI,OAAQ1R,EAAMiQ,EAAQ,UAkCvD,OAhCKmB,EAAUI,KAEXA,EADEJ,EAAUnI,IAAWmI,EAAUM,GAC3B1R,EAAKiJ,OAASA,EAASyI,EAEvBA,GAILN,EAAUG,KAEXA,EADEH,EAAUpI,IAAUoI,EAAUK,GACzBzR,EAAKgJ,MAAQA,EAAQyI,EAErBA,GAINL,EAAUpI,KAEXA,EADEoI,EAAUG,IAASH,EAAUK,GACvBzR,EAAKgJ,MAAQuI,EAAOE,EAEpB,GAIPL,EAAUnI,KAEXA,EADEmI,EAAUI,IAAQJ,EAAUM,GACrB1R,EAAKiJ,OAASuI,EAAME,EAEpB,GAIN,CACLrL,EAAGkL,GAAQ,EACXjL,EAAGkL,GAAO,EACVxI,MAAOA,GAAS,EAChBC,OAAQA,GAAU,IAIlB0I,EAAoB,SAA2BC,GACjD,OAAOA,EACJhZ,KAAI,SAASiZ,EAAOC,GACnB,MAAO,GACJ/Y,OAAiB,IAAV+Y,EAAc,IAAM,IAAK,KAChC/Y,OAAO8Y,EAAMxL,EAAG,KAChBtN,OAAO8Y,EAAMvL,MAEjBtN,KAAK,MAGN+Y,EAAgB,SAAuB/H,EAASgI,GAClD,OAAOlX,OAAOmX,KAAKD,GAAME,SAAQ,SAAS3D,GACxC,OAAOvE,EAAQmI,aAAa5D,EAAKyD,EAAKzD,QAItC6D,EAAK,6BACLC,EAAM,SAAaC,EAAKN,GAC1B,IAAIhI,EAAUxJ,SAAS+R,gBAAgBH,EAAIE,GAI3C,OAHIN,GACFD,EAAc/H,EAASgI,GAElBhI,GAGLwI,EAAa,SAAoBxI,GACnC,OAAO+H,EACL/H,EACAlP,OAAOmJ,OAAO,GAAI+F,EAAQsH,KAAMtH,EAAQyI,UAIxCC,EAAgB,SAAuB1I,GACzC,IAAI2I,EAAK3I,EAAQsH,KAAKjL,EAAyB,GAArB2D,EAAQsH,KAAKtI,MACnC4J,EAAK5I,EAAQsH,KAAKhL,EAA0B,GAAtB0D,EAAQsH,KAAKrI,OACnC4J,EAA0B,GAArB7I,EAAQsH,KAAKtI,MAClB8J,EAA2B,GAAtB9I,EAAQsH,KAAKrI,OACtB,OAAO8I,EACL/H,EACAlP,OAAOmJ,OACL,CACE0O,GAAIA,EACJC,GAAIA,EACJC,GAAIA,EACJC,GAAIA,GAEN9I,EAAQyI,UAKVM,EAAkB,CACpBC,QAAS,gBACTC,MAAO,kBAGLC,EAAc,SAAqBlJ,EAASpB,GAC9CmJ,EACE/H,EACAlP,OAAOmJ,OAAO,GAAI+F,EAAQsH,KAAMtH,EAAQyI,OAAQ,CAC9CU,oBAAqBJ,EAAgBnK,EAAOwK,MAAQ,WAKtDC,EAAc,CAChB9B,KAAM,QACN5L,OAAQ,SACR8L,MAAO,OAGL6B,EAAa,SAAoBtJ,EAASpB,EAAQ5I,EAAMsQ,GAC1D,IAAIiD,EAAWvD,EAAepH,EAAO2K,SAAUvT,EAAMsQ,GACjDkD,EAAa5K,EAAO4K,YAAc,aAClCC,EAAa7K,EAAO6K,YAAc,SAClCC,EAAYL,EAAYzK,EAAO8K,YAAc,QAEjD3B,EACE/H,EACAlP,OAAOmJ,OAAO,GAAI+F,EAAQsH,KAAMtH,EAAQyI,OAAQ,CAC9C,eAAgB,EAChB,cAAegB,EACf,YAAaF,EACb,cAAeC,EACf,cAAeE,KAKf1J,EAAQ2J,OAAS/K,EAAO+K,OAC1B3J,EAAQ2J,KAAO/K,EAAO+K,KACtB3J,EAAQ4J,YAAchL,EAAO+K,KAAKra,OAASsP,EAAO+K,KAAO,MAIzDE,EAAa,SAAoB7J,EAASpB,EAAQ5I,EAAMsQ,GAC1DyB,EACE/H,EACAlP,OAAOmJ,OAAO,GAAI+F,EAAQsH,KAAMtH,EAAQyI,OAAQ,CAC9ChC,KAAM,UAIV,IAAIqD,EAAO9J,EAAQ+J,WAAW,GAC1BC,EAAQhK,EAAQ+J,WAAW,GAC3BE,EAAMjK,EAAQ+J,WAAW,GAEzB5M,EAAS6C,EAAQsH,KAEjBtE,EAAS,CACX3G,EAAG2D,EAAQsH,KAAKjL,EAAI2D,EAAQsH,KAAKtI,MACjC1C,EAAG0D,EAAQsH,KAAKhL,EAAI0D,EAAQsH,KAAKrI,QAUnC,GAPA8I,EAAc+B,EAAM,CAClBI,GAAI/M,EAAOd,EACX8N,GAAIhN,EAAOb,EACX8N,GAAIpH,EAAO3G,EACXgO,GAAIrH,EAAO1G,IAGRsC,EAAO0L,eAAZ,CAEAN,EAAMO,MAAMC,QAAU,OACtBP,EAAIM,MAAMC,QAAU,OAEpB,IAAItF,EAAIM,EAAgB,CACtBnJ,EAAG2G,EAAO3G,EAAIc,EAAOd,EACrBC,EAAG0G,EAAO1G,EAAIa,EAAOb,IAGnBmJ,EAAIO,EAAe,IAAMhQ,EAAMsQ,GAEnC,IAAsD,IAAlD1H,EAAO0L,eAAeG,QAAQ,eAAuB,CACvD,IAAIC,EAA0BzF,EAAeC,EAAGO,GAC5CkF,EAAmBtF,EAAUlI,EAAQuN,GACrCE,EAAcjF,EAAaxI,EAAQ,EAAGwN,GACtCE,EAAclF,EAAaxI,GAAS,EAAGwN,GAE3C5C,EAAciC,EAAO,CACnBO,MAAO,iBACPO,EAAG,IACA/b,OAAO6b,EAAYvO,EAAG,KACtBtN,OAAO6b,EAAYtO,EAAG,MACtBvN,OAAOoO,EAAOd,EAAG,KACjBtN,OAAOoO,EAAOb,EAAG,MACjBvN,OAAO8b,EAAYxO,EAAG,KACtBtN,OAAO8b,EAAYvO,KAI1B,IAAoD,IAAhDsC,EAAO0L,eAAeG,QAAQ,aAAqB,CACrD,IAAIM,EAAwB9F,EAAeC,GAAIO,GAC3CuF,EAAiB3F,EAAUrC,EAAQ+H,GACnCE,EAAYtF,EAAa3C,EAAQ,EAAGgI,GACpCE,EAAYvF,EAAa3C,GAAS,EAAGgI,GAEzCjD,EAAckC,EAAK,CACjBM,MAAO,iBACPO,EAAG,IACA/b,OAAOkc,EAAU5O,EAAG,KACpBtN,OAAOkc,EAAU3O,EAAG,MACpBvN,OAAOiU,EAAO3G,EAAG,KACjBtN,OAAOiU,EAAO1G,EAAG,MACjBvN,OAAOmc,EAAU7O,EAAG,KACpBtN,OAAOmc,EAAU5O,QAKtB6O,EAAa,SAAoBnL,EAASpB,EAAQ5I,EAAMsQ,GAC1DyB,EACE/H,EACAlP,OAAOmJ,OAAO,GAAI+F,EAAQyI,OAAQ,CAChChC,KAAM,OACNqE,EAAGnD,EACD/I,EAAOgJ,OAAOhZ,KAAI,SAASiZ,GACzB,MAAO,CACLxL,EAAG2J,EAAe6B,EAAMxL,EAAGrG,EAAMsQ,EAAO,SACxChK,EAAG0J,EAAe6B,EAAMvL,EAAGtG,EAAMsQ,EAAO,mBAQhD8E,EAAc,SAAqBC,GACrC,OAAO,SAASzM,GACd,OAAOyJ,EAAIgD,EAAM,CAAE/c,GAAIsQ,EAAOtQ,OAuB9Bgd,EAAa,SAAoB1M,GACnC,IAAI2M,EAAQlD,EAAI,IAAK,CACnB/Z,GAAIsQ,EAAOtQ,GACX,iBAAkB,QAClB,kBAAmB,UAGjBwb,EAAOzB,EAAI,QACfkD,EAAMxK,YAAY+I,GAElB,IAAIE,EAAQ3B,EAAI,QAChBkD,EAAMxK,YAAYiJ,GAElB,IAAIC,EAAM5B,EAAI,QAGd,OAFAkD,EAAMxK,YAAYkJ,GAEXsB,GAGLC,EAAqB,CACvBC,MAvCgB,SAAqB7M,GACrC,IAAI2M,EAAQlD,EAAI,QAAS,CACvB/Z,GAAIsQ,EAAOtQ,GACX,iBAAkB,QAClB,kBAAmB,QACnByR,QAAS,MAWX,OARAwL,EAAMzI,OAAS,WACbyI,EAAMpD,aAAa,UAAWvJ,EAAOmB,SAAW,IAElDwL,EAAMG,eACJ,+BACA,aACA9M,EAAOgF,KAEF2H,GAwBPjE,KAAM8D,EAAY,QAClBO,QAASP,EAAY,WACrBzB,KAAMyB,EAAY,QAClBQ,KAAMR,EAAY,QAClBtB,KAAMwB,GAGJO,EAAqB,CACvBvE,KAAMkB,EACNmD,QAASjD,EACT+C,MAAOvC,EACPS,KAAML,EACNsC,KAAMT,EACNrB,KAAMD,GAGJiC,EAAqB,SAA4B/V,EAAM6I,GACzD,OAAO4M,EAAmBzV,GAAM6I,IAG9BmN,EAAqB,SACvB/L,EACAjK,EACA6I,EACA5I,EACAsQ,GAEa,SAATvQ,IACFiK,EAAQsH,KAAOD,EAAczI,EAAQ5I,EAAMsQ,IAE7CtG,EAAQyI,OAASpC,EAAgBzH,EAAQ5I,EAAMsQ,GAC/CuF,EAAmB9V,GAAMiK,EAASpB,EAAQ5I,EAAMsQ,IAG9C0F,EAAc,CAChB,IACA,IACA,OACA,MACA,QACA,SACA,QACA,UAGEC,EAAqB,SAA4B1b,GACnD,MAAwB,iBAAVA,GAAsB,IAAIa,KAAKb,GACzC4V,WAAW5V,GAAS,IACpBA,GAIF2b,EAAgB,SAAuBtN,GACzC,IAAIuN,EAAU3c,EAAeoP,EAAQ,GACnC7I,EAAOoW,EAAQ,GACf9N,EAAQ8N,EAAQ,GAEd7E,EAAOjJ,EAAMuJ,OACb,GACAoE,EAAYxU,QAAO,SAAS4U,EAAMC,GAEhC,OADAD,EAAKC,GAAQJ,EAAmB5N,EAAMgO,IAC/BD,IACN,IAEP,MAAO,CACLrW,EACAjF,OAAOmJ,OACL,CACEqS,OAAQ,GAEVjO,EACAiJ,KAKFiF,EAAqB,SAA4BjH,EAAGC,GACtD,OAAID,EAAE,GAAGgH,OAAS/G,EAAE,GAAG+G,OACd,EAELhH,EAAE,GAAGgH,OAAS/G,EAAE,GAAG+G,QACb,EAEH,GAGLE,EAAmB,SAA0B3P,GAC/C,OAAOA,EAAEjJ,MAAM6Y,WAAW,CACxBvb,KAAM,uBACNoX,IAAK,MACLoE,YAAY,EACZC,OAAQ,CACNC,KAAM,CAAC,QAAS,SAAU,OAAQ,SAAU,SAAU,UAGxDC,MAAO,SAAenZ,GACpB,IAAIkC,EAAOlC,EAAKkC,KACdyI,EAAQ3K,EAAK2K,MAEf,GAAKA,EAAMyO,MAAX,CACA,IAAIpR,EAAO2C,EAAM3C,KACf+C,EAASJ,EAAMI,OACfG,EAASP,EAAMO,OAEbmO,EAAY1O,EAAMW,MAClBgO,EAAa3O,EAAMY,OAEnBgO,EAAYvR,EAAKsD,MACjBkO,EAAaxR,EAAKuD,OAEtB,GAAIR,EAAQ,CACV,IAAI0O,EAAQ1O,EAAOzI,KAEfoX,EAAcD,GAASA,EAAMnO,MAC7BqO,EAAeF,GAASA,EAAMlO,OAC9BqO,EAAY7O,EAAOM,KACnBwO,EAAgB9O,EAAOK,QAEvBsO,IAAgBC,IAAcA,EAAeD,GAC7CC,IAAiBD,IAAaA,EAAcC,GAEhD,IAAIG,EACFP,EAAYG,GAAeF,EAAaG,EAE1C,IAAKG,GAAkBA,GAAiBD,EAAgB,CACtD,IAOMtH,EAPFwH,EAAcL,EAAcH,EAC5BS,EAAeL,EAAeH,EAEhB,UAAdI,GACFL,EAAYG,EACZF,EAAaG,IAGK,UAAdC,EACFrH,EAASpK,KAAKC,IAAI2R,EAAaC,GACR,YAAdJ,IACTrH,EAASpK,KAAKuK,IAAIqH,EAAaC,IAEjCT,GAAwBhH,EACxBiH,GAA0BjH,IAKhC,IAAIjQ,EAAO,CACTgJ,MAAO+N,EACP9N,OAAQ+N,GAGVpX,EAAKoK,QAAQmI,aAAa,QAASnS,EAAKgJ,OACxCpJ,EAAKoK,QAAQmI,aAAa,SAAUnS,EAAKiJ,QAEzC,IAAIqH,EAAQzK,KAAKuK,IAAI2G,EAAYE,EAAWD,EAAaE,GAGzDtX,EAAKoK,QAAQa,UAAY,GAGzB,IAAI8M,EAAe/X,EAAKlB,MAAM,mCAG9BkK,EACGtE,OAAOqT,GACP/e,IAAIsd,GACJ0B,KAAKrB,GACLrE,SAAQ,SAAStJ,GAChB,IAAIuN,EAAU3c,EAAeoP,EAAQ,GACnC7I,EAAOoW,EAAQ,GACf0B,EAAW1B,EAAQ,GAGjBnM,EAAU8L,EAAmB/V,EAAM8X,GAGvC9B,EAAmB/L,EAASjK,EAAM8X,EAAU7X,EAAMsQ,GAGlD1Q,EAAKoK,QAAQe,YAAYf,WAM/B8N,EAAiB,SAAsBzR,EAAGC,GAC5C,MAAO,CAAED,EAAGA,EAAGC,EAAGA,IAGhByR,EAAY,SAAmBzI,EAAGC,GACpC,OAAOD,EAAEjJ,EAAIkJ,EAAElJ,EAAIiJ,EAAEhJ,EAAIiJ,EAAEjJ,GAGzB0R,EAAiB,SAAwB1I,EAAGC,GAC9C,OAAOuI,EAAexI,EAAEjJ,EAAIkJ,EAAElJ,EAAGiJ,EAAEhJ,EAAIiJ,EAAEjJ,IAGvC2R,EAAwB,SAA+B3I,EAAGC,GAC5D,OAAOwI,EAAUC,EAAe1I,EAAGC,GAAIyI,EAAe1I,EAAGC,KAGvD2I,EAAiB,SAAwB5I,EAAGC,GAC9C,OAAO1J,KAAK6J,KAAKuI,EAAsB3I,EAAGC,KAGxC4I,EAAuB,SAA8B7e,EAAQyM,GAC/D,IAAIuJ,EAAIhW,EAEJ8e,EAAI,mBACJC,EAAItS,EACJuS,EAAI,mBAAqBvS,EAEzBwS,EAAO1S,KAAKiK,IAAIsI,GAChBI,EAAO3S,KAAKiK,IAAIuI,GAChBI,EAAO5S,KAAKiK,IAAIwI,GAChBI,EAAO7S,KAAKgK,IAAIyI,GAChBK,EAAQrJ,EAAIiJ,EAIhB,OAAOT,EAAeY,GAHdC,EAAQH,GAGgBE,GAFxBC,EAAQF,KAKdG,EAAqB,SAA4BtH,EAAMvL,GACzD,IAAI8S,EAAIvH,EAAKtI,MACT8P,EAAIxH,EAAKrI,OAET8P,EAAMZ,EAAqBU,EAAG9S,GAC9BiT,EAAMb,EAAqBW,EAAG/S,GAE9BkT,EAAKnB,EAAexG,EAAKjL,EAAIR,KAAKqT,IAAIH,EAAI1S,GAAIiL,EAAKhL,EAAIT,KAAKqT,IAAIH,EAAIzS,IAEpE6S,EAAKrB,EACPxG,EAAKjL,EAAIiL,EAAKtI,MAAQnD,KAAKqT,IAAIF,EAAI1S,GACnCgL,EAAKhL,EAAIT,KAAKqT,IAAIF,EAAI3S,IAGpB+S,EAAKtB,EACPxG,EAAKjL,EAAIR,KAAKqT,IAAIF,EAAI1S,GACtBgL,EAAKhL,EAAIgL,EAAKrI,OAASpD,KAAKqT,IAAIF,EAAI3S,IAGtC,MAAO,CACL2C,MAAOkP,EAAee,EAAIE,GAC1BlQ,OAAQiP,EAAee,EAAIG,KAI3BC,EAAsB,SACxB5D,EACA6D,GAEA,IAAI1T,EACF8G,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,EAElE6M,EAAmB9D,EAAMxM,OAASwM,EAAMzM,MAGxCwQ,EAAc,EACdC,EAAeH,EACfI,EAAW,EACXC,EAAYJ,EACZI,EAAYF,IAEdC,GADAC,EAAYF,GACWF,GAGzB,IAAItJ,EAASpK,KAAKC,IAAI0T,EAAcE,EAAUD,EAAeE,GACzD3Q,EAAQyM,EAAMzM,OAASpD,EAAOqK,EAASyJ,GAG3C,MAAO,CACL1Q,MAAOA,EACPC,OAJWD,EAAQsQ,IAQnBM,EAAyB,SAC3BC,EACAC,EACA/T,EACAJ,GAGA,IAAIgN,EAAKhN,EAAOU,EAAI,GAAM,EAAIV,EAAOU,EAAIV,EAAOU,EAC5CuM,EAAKjN,EAAOW,EAAI,GAAM,EAAIX,EAAOW,EAAIX,EAAOW,EAC5CyT,EAAkB,EAALpH,EAASkH,EAAU7Q,MAChCgR,EAAmB,EAALpH,EAASiH,EAAU5Q,OAGjCgR,EAAkBrB,EAAmBkB,EAAU/T,GAGnD,OAAOF,KAAKC,IACVmU,EAAgBjR,MAAQ+Q,EACxBE,EAAgBhR,OAAS+Q,IAIzBE,EAAsB,SACxBC,EACAhU,GAEA,IAAI6C,EAAQmR,EAAUnR,MAClBC,EAASD,EAAQ7C,EAQrB,OAPI8C,EAASkR,EAAUlR,SAErBD,GADAC,EAASkR,EAAUlR,QACF9C,GAKZ,CACLE,EAJkC,IAA3B8T,EAAUnR,MAAQA,GAKzB1C,EAJoC,IAA7B6T,EAAUlR,OAASA,GAK1BD,MAAOA,EACPC,OAAQA,IAIRmR,EAAqB,SAA4BC,GACnD,IAAI3U,EACFgH,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,GAClE9G,EAAOF,EAAKE,KACdG,EAAWL,EAAKK,SAChBJ,EAASD,EAAKC,OACdQ,EAAcT,EAAKS,YAEhBA,IAAaA,EAAckU,EAAUpR,OAASoR,EAAUrR,OAE7D,IAAIsR,EAAajB,EAAoBgB,EAAWlU,EAAaP,GAEzD2U,EAAe,CACjBlU,EAAsB,GAAnBiU,EAAWtR,MACd1C,EAAuB,GAApBgU,EAAWrR,QAGZuR,EAAQ,CACVnU,EAAG,EACHC,EAAG,EACH0C,MAAOsR,EAAWtR,MAClBC,OAAQqR,EAAWrR,OACnBtD,OAAQ4U,GAGNE,OAAyC,IAApB/U,EAAKgV,YAA8BhV,EAAKgV,WAS7DpK,EAAQ1K,EAPUgU,EACpBS,EACAH,EAAoBM,EAAOrU,GAC3BJ,EACA0U,EAAc9U,EAAS,CAAEU,EAAG,GAAKC,EAAG,KAMtC,MAAO,CACLqU,WAAYL,EAAWtR,MAAQsH,EAC/BsK,YAAaN,EAAWrR,OAASqH,EACjCtH,MAAOnD,KAAKgV,MAAMP,EAAWtR,MAAQsH,GACrCrH,OAAQpD,KAAKgV,MAAMP,EAAWrR,OAASqH,KAIvCwK,EAA2B,CAC7B/a,KAAM,SACNgb,UAAW,GACXC,QAAS,IACTC,KAAM,IAIJC,EAAmB,SAA0BrU,GAC/C,OAAOA,EAAEjJ,MAAM6Y,WAAW,CACxBvb,KAAM,eACNwb,YAAY,EACZC,OAAQ,CAAElE,OAAQ,CAAC,SAAU,WAC7B0I,OAAQ,SAAgBzd,GACtB,IAAIkC,EAAOlC,EAAKkC,KACdyI,EAAQ3K,EAAK2K,MACfzI,EAAKmL,YAAY1C,EAAMoN,WAMzB2F,EAA2B,SAAkCvU,GAC/D,OAAOA,EAAEjJ,MAAM6Y,WAAW,CACxBvb,KAAM,uBACNoX,IAAK,MACLoE,YAAY,EACZC,OAAQ,CACNC,KAAM,CAAC,OAAQ,QAAS,UAExBnE,OAAQ,CACN,UACA,UACA,aACA,aACA,SACA,SACA,WAGF4I,WAAY,CACVC,QAASR,EACTS,QAAST,EACTU,OAAQV,EACRW,OAAQX,EACRY,WAAYZ,EACZa,WAAYb,EACZc,QAASd,IAIbK,OAAQ,SAAgBjd,GACtB,IAAI0B,EAAO1B,EAAM0B,KACfyI,EAAQnK,EAAMmK,MAChBA,EAAMW,MAAQX,EAAMoN,MAAMzM,MAC1BX,EAAMY,OAASZ,EAAMoN,MAAMxM,OAC3BrJ,EAAKK,IAAI4b,OAASjc,EAAK2K,gBACrB3K,EAAKiK,gBAAgBqR,EAAiBrU,GAAI,CAAE4O,MAAOpN,EAAMoN,UAG7DoB,MAAO,SAAepY,GACpB,IAAImB,EAAOnB,EAAMmB,KAEboG,EADMvH,EAAM4J,MACC3C,KAAKM,KAClB6V,EAASjc,EAAKK,IAAI4b,OACtBA,EAAOL,OAASxV,EAAKO,YAAc,EAAI,EACvCsV,EAAOJ,OAASzV,EAAKQ,UAAY,EAAI,MAMvCsV,EAAiB,SAAwBjV,GAC3C,OAAOA,EAAEjJ,MAAM6Y,WAAW,CACxBvb,KAAM,aACNoX,IAAK,MACLoE,YAAY,EACZC,OAAQ,CACNC,KAAM,CACJ,OACA,SACA,SACA,QACA,SACA,QACA,cAGFnE,OAAQ,CAAC,QAAS,SAAU,WAC5B4I,WAAY,CACVtR,QAAS,CAAEhK,KAAM,QAASgc,SAAU,OAIxCC,aAAc,SAAsBld,GAClC,IAAIc,EAAOd,EAAMc,KACfyI,EAAQvJ,EAAMuJ,MACXA,EAAM4T,aACXrc,EAAKoK,QAAQuK,MAAM7D,gBAAkBrI,EAAM4T,aAE7Cd,OAAQ,SAAgBpc,GACtB,IAAIa,EAAOb,EAAMa,KACfyI,EAAQtJ,EAAMsJ,MAEhBzI,EAAKK,IAAIwV,MAAQ7V,EAAK2K,gBACpB3K,EAAKiK,gBACHuR,EAAyBvU,GACzB/L,OAAOmJ,OAAO,GAAIoE,KAItBzI,EAAKK,IAAIic,aAAe,WAClBtc,EAAKK,IAAI2I,SACbhJ,EAAKK,IAAI2I,OAAShJ,EAAK2K,gBACrB3K,EAAKiK,gBAAgB2M,EAAiB3P,GAAI/L,OAAOmJ,OAAO,GAAIoE,OAIhEzI,EAAKK,IAAIkc,cAAgB,WAClBvc,EAAKK,IAAI2I,SACdhJ,EAAKwc,gBAAgBxc,EAAKK,IAAI2I,QAC9BhJ,EAAKK,IAAI2I,OAAS,OAIpB,IAAIyT,EAAwBzc,EAAKlB,MAC/B,4CAE4B,OAA1B2d,IAIFzc,EAAKoK,QAAQG,QAAQkS,sBADO,SAA1BA,EAC2CA,EAIA,UAGjDxF,MAAO,SAAelX,GACpB,IAAIC,EAAOD,EAAMC,KACfyI,EAAQ1I,EAAM0I,MACdiU,EAAiB3c,EAAM2c,eACrB5W,EAAO2C,EAAM3C,KACfkD,EAASP,EAAMO,OACfH,EAASJ,EAAMI,OACfqO,EAAQzO,EAAMyO,MACd9N,EAAQX,EAAMW,MACdC,EAASZ,EAAMY,OAEjBrJ,EAAKK,IAAIwV,MAAM/P,KAAOA,EAEtB,IAAI8U,EAAQ,CACVnU,EAAG,EACHC,EAAG,EACH0C,MAAOA,EACPC,OAAQA,EACRtD,OAAQ,CACNU,EAAW,GAAR2C,EACH1C,EAAY,GAAT2C,IAIHwM,EAAQ,CACVzM,MAAOpJ,EAAKK,IAAIwV,MAAMzM,MACtBC,OAAQrJ,EAAKK,IAAIwV,MAAMxM,QAGrB9B,EAAS,CACXd,EAAGX,EAAKC,OAAOU,EAAIoP,EAAMzM,MACzB1C,EAAGZ,EAAKC,OAAOW,EAAImP,EAAMxM,QAGvBsT,EAAc,CAChBlW,EAAGmU,EAAM7U,OAAOU,EAAIoP,EAAMzM,MAAQtD,EAAKC,OAAOU,EAC9CC,EAAGkU,EAAM7U,OAAOW,EAAImP,EAAMxM,OAASvD,EAAKC,OAAOW,GAG7CP,EAAqB,EAAVF,KAAK2W,GAAU9W,EAAKK,UAAsB,EAAVF,KAAK2W,IAEhDlU,EAAkB5C,EAAKS,aAAesP,EAAMxM,OAASwM,EAAMzM,MAE3DyR,OACyB,IAApB/U,EAAKgV,YAA8BhV,EAAKgV,WAE7C+B,EAAkB7C,EACpBnE,EACAyE,EAAoBM,EAAOlS,GAE3BvC,EACA0U,EAAc/U,EAAKC,OAAS,CAAEU,EAAG,GAAKC,EAAG,KAGvCgK,EAAQ5K,EAAKE,KAAO6W,EAGpB7T,GAAUA,EAAOtP,QACnBsG,EAAKK,IAAIic,eACTtc,EAAKK,IAAI2I,OAAOI,MAAQA,EACxBpJ,EAAKK,IAAI2I,OAAOK,OAASA,EACzBrJ,EAAKK,IAAI2I,OAAOH,OAASA,EACzB7I,EAAKK,IAAI2I,OAAOkO,MAAQA,EACxBlX,EAAKK,IAAI2I,OAAOA,OAASA,EACzBhJ,EAAKK,IAAI2I,OAAOlD,KAAO0U,EAAmB3E,EAAO/P,IACxC9F,EAAKK,IAAI2I,QAClBhJ,EAAKK,IAAIkc,gBAIX,IAAIO,EAAY9c,EAAKK,IAAIwV,MAGzB,GAAI6G,EAQF,OAPAI,EAAUpB,QAAU,KACpBoB,EAAUnB,QAAU,KACpBmB,EAAUhB,WAAa,KACvBgB,EAAUf,WAAa,KACvBe,EAAUd,QAAU,KACpBc,EAAUlB,OAAS,UACnBkB,EAAUjB,OAAS,MAIrBiB,EAAUpB,QAAUnU,EAAOd,EAC3BqW,EAAUnB,QAAUpU,EAAOb,EAC3BoW,EAAUhB,WAAaa,EAAYlW,EACnCqW,EAAUf,WAAaY,EAAYjW,EACnCoW,EAAUd,QAAU7V,EACpB2W,EAAUlB,OAASlL,EACnBoM,EAAUjB,OAASnL,MAKrBqM,GAAkB,SAAyB9V,GAC7C,OAAOA,EAAEjJ,MAAM6Y,WAAW,CACxBvb,KAAM,gBACNoX,IAAK,MACLoE,YAAY,EACZC,OAAQ,CACNC,KAAM,CAAC,QAAS,OAAQ,SAAU,SAAU,QAAS,cAErDnE,OAAQ,CAAC,aAAc,SAAU,SAAU,WAE3C4I,WAAY,CACVG,OAAQV,EACRW,OAAQX,EACRa,WAAYb,EACZ/Q,QAAS,CAAEhK,KAAM,QAASgc,SAAU,OAIxCZ,OAAQ,SAAgB/a,GACtB,IAAIR,EAAOQ,EAAMR,KACfyI,EAAQjI,EAAMiI,MAChBzI,EAAKK,IAAI2c,KAAOhd,EAAK2K,gBACnB3K,EAAKiK,gBAAgBiS,EAAejV,GAAI,CACtCvO,GAAI+P,EAAM/P,GACVmd,MAAOpN,EAAMoN,MACb/P,KAAM2C,EAAM3C,KACZkD,OAAQP,EAAMO,OACdH,OAAQJ,EAAMI,OACdqO,MAAOzO,EAAMyO,MACbmF,WAAY5T,EAAM4T,eAIxBpF,MAAO,SAAetL,GACpB,IAAI3L,EAAO2L,EAAM3L,KACfyI,EAAQkD,EAAMlD,MACdiU,EAAiB/Q,EAAM+Q,eACrBM,EAAOhd,EAAKK,IAAI2c,KAChBnH,EAAQpN,EAAMoN,MAChB/P,EAAO2C,EAAM3C,KACbkD,EAASP,EAAMO,OACfH,EAASJ,EAAMI,OACfqO,EAAQzO,EAAMyO,MAWhB,GATA8F,EAAKlX,KAAOA,EACZkX,EAAKhU,OAASA,EACdgU,EAAKnU,OAASA,EACdmU,EAAK9F,MAAQA,EAGb8F,EAAK7S,QAAUuS,EAAiB,EAAI,GAGhCA,IAAkB1c,EAAK0R,KAAKtH,QAAQ6S,OAAxC,CAGA,IAAItD,EAAmB9D,EAAMxM,OAASwM,EAAMzM,MACxC7C,EAAcT,EAAKS,aAAeoT,EAGlCuD,EAAiBld,EAAK0R,KAAKyL,MAAM/T,MACjCgU,EAAkBpd,EAAK0R,KAAKyL,MAAM9T,OAElCgU,EAAqBrd,EAAKlB,MAAM,4BAChCwe,EAAmBtd,EAAKlB,MAAM,gCAC9Bye,EAAmBvd,EAAKlB,MAAM,gCAE9B0e,EAAmBxd,EAAKlB,MAAM,0BAC9B2e,EAAgBzd,EAAKlB,MAAM,sBAE3B0e,IAAqBC,IACvBJ,EAAqBH,EAAiBM,EACtCjX,EAAciX,GAIhB,IAAIE,EACqB,OAAvBL,EACIA,EACApX,KAAKC,IACHoX,EACArX,KAAKuK,IAAI0M,EAAiB3W,EAAagX,IAG3CI,EAAYD,EAAanX,EACzBoX,EAAYT,IAEdQ,GADAC,EAAYT,GACa3W,GAGvBmX,EAAaN,IACfM,EAAaN,EACbO,EAAYP,EAAkB7W,GAGhCyW,EAAK5T,MAAQuU,EACbX,EAAK3T,OAASqU,OAKhBE,GACF,89BAEEC,GAAkB,EAElBC,GAAyB,SAAgCC,GAC3D,OAAOA,EAAM/f,MAAM6Y,WAAW,CAC5Bvb,KAAM,wBACNoX,IAAK,MACLoE,YAAY,EACZyE,OAAQ,SAAgBzd,GACtB,IAAIkC,EAAOlC,EAAKkC,KACdyI,EAAQ3K,EAAK2K,MACXuV,EAAOJ,GACX,GAAIhd,SAASiK,cAAc,QAAS,CAClC,IAAIoT,EAAMtd,OAAOud,SAASC,KAAKxgB,QAAQgD,OAAOud,SAASE,KAAM,IAC7DJ,EAAOA,EAAKrgB,QAAQ,WAAY,OAASsgB,EAAM,KAGjDJ,KACA7d,EAAKoK,QAAQC,UAAUC,IACrB,mCAAmCnR,OAAOsP,EAAMlH,SAGlDvB,EAAKoK,QAAQa,UAAY+S,EAAKrgB,QAAQ,WAAYkgB,KAEpD9G,OAAQ,CACNlE,OAAQ,CAAC,WACT4I,WAAY,CACVtR,QAAS,CAAEhK,KAAM,SAAUkb,KAAM,SASrCgD,GAAe,WACjBxhB,KAAKC,UAAY,SAASC,GACxBuhB,kBAAkBvhB,EAAET,KAAKW,QAAQK,MAAMkC,MAAK,SAASyc,GACnDpf,KAAKM,YAAY,CAAEzE,GAAIqE,EAAET,KAAK5D,GAAIuE,QAASgf,GAAU,CAACA,SAQxDsC,GAAoB,WACtB1hB,KAAKC,UAAY,SAASC,GAqCxB,IApCA,IAAIyhB,EAAYzhB,EAAET,KAAKW,QAAQuhB,UAC3BlV,EAASvM,EAAET,KAAKW,QAAQuM,YAExBlN,EAAOkiB,EAAUliB,KACjBuT,EAAIvT,EAAK5C,OAET+kB,EAAMnV,EAAO,GACboV,EAAMpV,EAAO,GACbqV,EAAMrV,EAAO,GACbsV,EAAMtV,EAAO,GACbuV,EAAMvV,EAAO,GAEbwV,EAAMxV,EAAO,GACbyV,EAAMzV,EAAO,GACb0V,EAAM1V,EAAO,GACb2V,EAAM3V,EAAO,GACb4V,EAAM5V,EAAO,GAEb6V,EAAM7V,EAAO,IACb8V,EAAM9V,EAAO,IACb+V,EAAM/V,EAAO,IACbgW,EAAMhW,EAAO,IACbiW,EAAMjW,EAAO,IAEbkW,EAAMlW,EAAO,IACbmW,EAAMnW,EAAO,IACboW,EAAMpW,EAAO,IACbqW,EAAMrW,EAAO,IACbsW,EAAMtW,EAAO,IAEb4I,EAAQ,EACV2N,EAAI,EACJC,EAAI,EACJnQ,EAAI,EACJD,EAAI,EAECwC,EAAQrC,EAAGqC,GAAS,EACzB2N,EAAIvjB,EAAK4V,GAAS,IAClB4N,EAAIxjB,EAAK4V,EAAQ,GAAK,IACtBvC,EAAIrT,EAAK4V,EAAQ,GAAK,IACtBxC,EAAIpT,EAAK4V,EAAQ,GAAK,IACtB5V,EAAK4V,GAASjM,KAAKC,IACjB,EACAD,KAAKuK,IAAoD,KAA/CqP,EAAIpB,EAAMqB,EAAIpB,EAAM/O,EAAIgP,EAAMjP,EAAIkP,EAAMC,GAAY,MAEhEviB,EAAK4V,EAAQ,GAAKjM,KAAKC,IACrB,EACAD,KAAKuK,IAAoD,KAA/CqP,EAAIf,EAAMgB,EAAIf,EAAMpP,EAAIqP,EAAMtP,EAAIuP,EAAMC,GAAY,MAEhE5iB,EAAK4V,EAAQ,GAAKjM,KAAKC,IACrB,EACAD,KAAKuK,IAAoD,KAA/CqP,EAAIV,EAAMW,EAAIV,EAAMzP,EAAI0P,EAAM3P,EAAI4P,EAAMC,GAAY,MAEhEjjB,EAAK4V,EAAQ,GAAKjM,KAAKC,IACrB,EACAD,KAAKuK,IAAoD,KAA/CqP,EAAIL,EAAMM,EAAIL,EAAM9P,EAAI+P,EAAMhQ,EAAIiQ,EAAMC,GAAY,MAIlE/iB,KAAKM,YAAY,CAAEzE,GAAIqE,EAAET,KAAK5D,GAAIuE,QAASuhB,GAAa,CACtDA,EAAUliB,KAAKyjB,WAKjBC,GAAe,SAAsB/B,EAAK5gB,GAC5C,IAAIwY,EAAQ,IAAIhI,MAChBgI,EAAM3I,OAAS,WACb,IAAI9D,EAAQyM,EAAM/H,aACdzE,EAASwM,EAAM9H,cACnB8H,EAAQ,KACRxY,EAAG+L,EAAOC,IAEZwM,EAAM7H,IAAMiQ,GAGVgC,GAAa,CACf,EAAG,WACD,MAAO,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,IAEzB,EAAG,SAAW7W,GACZ,MAAO,EAAE,EAAG,EAAG,EAAG,EAAGA,EAAO,IAE9B,EAAG,SAAWA,EAAOC,GACnB,MAAO,EAAE,EAAG,EAAG,GAAI,EAAGD,EAAOC,IAE/B,EAAG,SAAWD,EAAOC,GACnB,MAAO,CAAC,EAAG,EAAG,GAAI,EAAG,EAAGA,IAE1B,EAAG,WACD,MAAO,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,IAEzB,EAAG,SAAWD,EAAOC,GACnB,MAAO,CAAC,EAAG,GAAI,EAAG,EAAGA,EAAQ,IAE/B,EAAG,SAAWD,EAAOC,GACnB,MAAO,CAAC,GAAI,GAAI,EAAG,EAAGA,EAAQD,IAEhC,EAAG,SAAWA,GACZ,MAAO,CAAC,GAAI,EAAG,EAAG,EAAG,EAAGA,KAIxB8W,GAAsB,SACxBC,EACA/W,EACAC,EACA6E,IAGqB,IAAjBA,GAIJiS,EAAIC,UAAUC,MAAMF,EAAKF,GAAW/R,GAAa9E,EAAOC,KAItDiX,GAAqB,SACvBhkB,EACA8M,EACAC,EACA6E,GAGA9E,EAAQnD,KAAKgV,MAAM7R,GACnBC,EAASpD,KAAKgV,MAAM5R,GAGpB,IAAIkX,EAAS3f,SAASmK,cAAc,UACpCwV,EAAOnX,MAAQA,EACfmX,EAAOlX,OAASA,EAChB,IAAI8W,EAAMI,EAAOC,WAAW,MAG5B,GAAItS,GAAe,GAAKA,GAAe,EAAG,CACxC,IAAIpQ,EAAO,CAACuL,EAAQD,GACpBA,EAAQtL,EAAK,GACbuL,EAASvL,EAAK,GAShB,OALAoiB,GAAoBC,EAAK/W,EAAOC,EAAQ6E,GAGxCiS,EAAIM,UAAUnkB,EAAM,EAAG,EAAG8M,EAAOC,GAE1BkX,GAGLG,GAAW,SAAkBpjB,GAC/B,MAAO,SAAS9B,KAAK8B,EAAK6C,QAAU,MAAM3E,KAAK8B,EAAK6C,OAGlDwgB,GAAY,GACZC,GAAa,GAEbC,GAAwB,SAA+BhL,GACzD,IAAIxF,EAASpK,KAAKuK,IAAImQ,GAAY9K,EAAMzM,MAAOwX,GAAa/K,EAAMxM,QAE9DkX,EAAS3f,SAASmK,cAAc,UAChCoV,EAAMI,EAAOC,WAAW,MACxBpX,EAASmX,EAAOnX,MAAQnD,KAAK6a,KAAKjL,EAAMzM,MAAQiH,GAChDhH,EAAUkX,EAAOlX,OAASpD,KAAK6a,KAAKjL,EAAMxM,OAASgH,GACvD8P,EAAIM,UAAU5K,EAAO,EAAG,EAAGzM,EAAOC,GAClC,IAAI/M,EAAO,KACX,IACEA,EAAO6jB,EAAIY,aAAa,EAAG,EAAG3X,EAAOC,GAAQ/M,KAC7C,MAAOS,GACP,OAAO,KAST,IAPA,IAAI8S,EAAIvT,EAAK5C,OAETmmB,EAAI,EACJC,EAAI,EACJnQ,EAAI,EACJtW,EAAI,EAEDA,EAAIwW,EAAGxW,GAAK,EACjBwmB,GAAKvjB,EAAKjD,GAAKiD,EAAKjD,GACpBymB,GAAKxjB,EAAKjD,EAAI,GAAKiD,EAAKjD,EAAI,GAC5BsW,GAAKrT,EAAKjD,EAAI,GAAKiD,EAAKjD,EAAI,GAO9B,MAAO,CAAEwmB,EAJTA,EAAImB,GAAanB,EAAGhQ,GAILiQ,EAHfA,EAAIkB,GAAalB,EAAGjQ,GAGCF,EAFrBA,EAAIqR,GAAarR,EAAGE,KAKlBmR,GAAe,SAAsBC,EAAGpR,GAC1C,OAAO5J,KAAKib,MAAMjb,KAAK6J,KAAKmR,GAAKpR,EAAI,MAGnCsR,GAAc,SAAqB5Z,EAAQ6F,GAM7C,OALAA,EAASA,GAAUxM,SAASmK,cAAc,WACnC3B,MAAQ7B,EAAO6B,MACtBgE,EAAO/D,OAAS9B,EAAO8B,OACb+D,EAAOoT,WAAW,MACxBC,UAAUlZ,EAAQ,EAAG,GAClB6F,GAGLgU,GAAiB,SAAwB5C,GAC3C,IAAI9lB,EACJ,IACEA,EAAK,IAAI2oB,UAAU7C,EAAUpV,MAAOoV,EAAUnV,QAC9C,MAAOtM,GAGPrE,EAFakI,SAASmK,cAAc,UACnByV,WAAW,MACnBc,gBAAgB9C,EAAUpV,MAAOoV,EAAUnV,QAGtD,OADA3Q,EAAG4D,KAAKilB,IAAI,IAAIC,kBAAkBhD,EAAUliB,OACrC5D,GAGL+oB,GAAY,SAAmBxD,GACjC,OAAO,IAAI1f,SAAQ,SAASC,EAAS6C,GACnC,IAAIqgB,EAAM,IAAI7T,MACd6T,EAAIC,YAAc,YAClBD,EAAIxU,OAAS,WACX1O,EAAQkjB,IAEVA,EAAIE,QAAU,SAAS7kB,GACrBsE,EAAOtE,IAET2kB,EAAI1T,IAAMiQ,MAIV4D,GAAyB,SAAgC5a,GAE3D,IAAI6a,EAAchE,GAAuB7W,GAErC8a,EAAYhF,GAAgB9V,GAC5B/I,EAAe+I,EAAEjJ,MAAME,aAEvB8jB,EAAc,SAAqBhiB,EAAM0E,EAAQ0I,GACnD,OAAO,IAAI7O,SAAQ,SAASC,GAErBwB,EAAKK,IAAIme,YACZxe,EAAKK,IAAIme,UAAYpR,EAClBoT,WAAW,MACXO,aAAa,EAAG,EAAG3T,EAAOhE,MAAOgE,EAAO/D,SAI7C,IAAImV,EAAY4C,GAAephB,EAAKK,IAAIme,WAExC,IAAK9Z,GAA4B,KAAlBA,EAAOhL,OAEpB,OADA0T,EAAOoT,WAAW,MAAMyB,aAAazD,EAAW,EAAG,GAC5ChgB,IAGT,IAAIC,EAASP,EAAaqgB,IAC1B9f,EAAOC,KACL,CACE8f,UAAWA,EACXhV,YAAa9E,IAGf,SAASxH,GAEPkQ,EAAOoT,WAAW,MAAMyB,aAAa/kB,EAAU,EAAG,GAGlDuB,EAAOE,YAGPH,MAEF,CAACggB,EAAUliB,KAAKyjB,aAKlBmC,EAAkB,SAAyBliB,EAAM8c,GACnD9c,EAAKwc,gBAAgBM,GACrBA,EAAUjH,MAAMzM,MAAQ,EACxB0T,EAAUjH,MAAMxM,OAAS,EACzByT,EAAUqF,YAIRC,EAAa,SAAoBtkB,GACnC,IAAIkC,EAAOlC,EAAKkC,KACZ8c,EAAY9c,EAAKK,IAAIgiB,OAAO1a,QAIhC,OAHAmV,EAAU3S,QAAU,EACpB2S,EAAUf,YAAc,GACxB/b,EAAKK,IAAIiiB,aAAa9pB,KAAKskB,GACpBA,GAILyF,EAAY,SAAmBjkB,GACjC,IAAI0B,EAAO1B,EAAM0B,KACfyI,EAAQnK,EAAMmK,MACdoN,EAAQvX,EAAMuX,MACZnd,EAAK+P,EAAM/P,GACXO,EAAO+G,EAAKlB,MAAM,WAAY,CAAEpG,GAAIA,IACxC,GAAKO,EAAL,CAEA,IAoBI+P,EACAH,EArBA/C,EAAO7M,EAAKoG,YAAY,SAAW,CACrC0G,OAAQ,CACNU,EAAG,GACHC,EAAG,IAGLN,KAAM,CACJO,YAAY,EACZC,UAAU,GAGZZ,KAAM,EACNG,SAAU,EACVI,YAAa,MAGX8V,EAAarc,EAAKlB,MACpB,+CAKEoY,GAAQ,EACRlX,EAAKlB,MAAM,mCACbkK,EAAS/P,EAAKoG,YAAY,WAAa,GACvCwJ,EAAS5P,EAAKoG,YAAY,UAC1B6X,GAAQ,GAIV,IAAI4F,EAAY9c,EAAK2K,gBACnB3K,EAAKiK,gBAAgB8X,EAAW,CAC9BrpB,GAAIA,EACJmd,MAAOA,EACP/P,KAAMA,EACN+C,OAAQA,EACRG,OAAQA,EACRkO,MAAOA,EACPmF,WAAYA,EACZlS,QAAS,EACTyR,OAAQ,KACRC,OAAQ,KACRE,WAAY,KAGd/b,EAAKwiB,WAAW9oB,QAGlBsG,EAAKK,IAAIgiB,OAAO7pB,KAAKskB,GAGrBA,EAAU3S,QAAU,EACpB2S,EAAUlB,OAAS,EACnBkB,EAAUjB,OAAS,EACnBiB,EAAUf,WAAa,EAGvB0G,YAAW,WACTziB,EAAKM,SAAS,yBAA0B,CAAE5H,GAAIA,MAC7C,OAGD4a,EAAc,SAAqBzU,GACrC,IAAImB,EAAOnB,EAAMmB,KACfyI,EAAQ5J,EAAM4J,MACZxP,EAAO+G,EAAKlB,MAAM,WAAY,CAAEpG,GAAI+P,EAAM/P,KAC9C,GAAKO,EAAL,CACA,IAAI6jB,EAAY9c,EAAKK,IAAIgiB,OAAOriB,EAAKK,IAAIgiB,OAAO3oB,OAAS,GACzDojB,EAAUhX,KAAO7M,EAAKoG,YAAY,QAClCyd,EAAUT,WAAarc,EAAKlB,MAC1B,+CAGEkB,EAAKlB,MAAM,mCACbge,EAAU5F,OAAQ,EAClB4F,EAAUjU,OAAS5P,EAAKoG,YAAY,UACpCyd,EAAU9T,OAAS/P,EAAKoG,YAAY,aAKpCqjB,EAAwB,SAA+BxjB,GACzD,IAAIc,EAAOd,EAAMc,KACfyI,EAAQvJ,EAAMuJ,MACdxI,EAASf,EAAMe,OAEjB,GAAK,4BAA4BzE,KAAKyE,EAAO0iB,OAAOhU,MAG/C3O,EAAKK,IAAIgiB,OAAO3oB,OAArB,CAGA,IAAIT,EAAO+G,EAAKlB,MAAM,WAAY,CAAEpG,GAAI+P,EAAM/P,KAC9C,GAAKO,EAGL,GAAI,SAASuC,KAAKyE,EAAO0iB,OAAOhU,KAAhC,CACE,IAAImO,EAAY9c,EAAKK,IAAIgiB,OAAOriB,EAAKK,IAAIgiB,OAAO3oB,OAAS,GACzDsoB,EAAYhiB,EAAMC,EAAO0iB,OAAOhoB,MAAOmiB,EAAUjH,YAInD,GAAI,qBAAqBra,KAAKyE,EAAO0iB,OAAOhU,KAAM,CAChD,IAAI7I,EAAO7M,EAAKoG,YAAY,QACxBwW,EAAQ7V,EAAKK,IAAIgiB,OAAOriB,EAAKK,IAAIgiB,OAAO3oB,OAAS,GAGrD,GACEoM,GACAA,EAAKS,aACLsP,EAAM/P,MACN+P,EAAM/P,KAAKS,aACXN,KAAKqT,IAAIxT,EAAKS,YAAcsP,EAAM/P,KAAKS,aAAe,KACtD,CACA,IAAIqc,EAAaR,EAAW,CAAEpiB,KAAMA,IACpCuiB,EAAU,CACRviB,KAAMA,EACNyI,MAAOA,EACPoN,MAAOsL,GAAYyB,EAAW/M,cAKhCvC,EAAY,CAAEtT,KAAMA,EAAMyI,MAAOA,OAKnCoa,EAAuB,SAA8BvlB,GAGvD,IACIwlB,EADYniB,OAAOoiB,UAAUC,UACPC,MAAM,uBAEhC,SADqBH,EAAYI,SAASJ,EAAU,IAAM,OACpC,KAEf,sBAAuBniB,QAAU+f,GAASpjB,IAM/C6lB,EAA4B,SAAmChkB,GACjE,IAAIa,EAAOb,EAAMa,KAEbtH,EADMyG,EAAMsJ,MACD/P,GAGXO,EAAO+G,EAAKlB,MAAM,WAAYpG,GAClC,GAAKO,EAAL,CAGA,IAAImqB,EAAUC,IAAIC,gBAAgBrqB,EAAKqE,MAGvC0iB,GAAaoD,GAAS,SAASha,EAAOC,GAEpCrJ,EAAKM,SAAS,mCAAoC,CAChD5H,GAAIA,EACJ0Q,MAAOA,EACPC,OAAQA,SAKVka,EAAc,SAAqBxjB,GACrC,IAAIC,EAAOD,EAAMC,KACfyI,EAAQ1I,EAAM0I,MACZ/P,EAAK+P,EAAM/P,GAGXO,EAAO+G,EAAKlB,MAAM,WAAYpG,GAClC,GAAKO,EAAL,CAGA,IAAImqB,EAAUC,IAAIC,gBAAgBrqB,EAAKqE,MAGnCkmB,EAAsB,WAExB/B,GAAU2B,GAAS5jB,KAAKikB,IAItBA,EAAqB,SAA4BjF,GAEnD6E,IAAIK,gBAAgBN,GAIpB,IACIlV,GADOjV,EAAKoG,YAAY,SAAW,IAChB6O,cAAgB,EAGnC9E,EAAQoV,EAAUpV,MACpBC,EAASmV,EAAUnV,OAGrB,GAAKD,GAAUC,EAAf,CAEA,GAAI6E,GAAe,GAAKA,GAAe,EAAG,CACxC,IAAI1N,EAAQ,CAAC6I,EAAQD,GACrBA,EAAQ5I,EAAM,GACd6I,EAAS7I,EAAM,GAKjB,IAAImjB,EAAqB1d,KAAKC,IAAI,EAA6B,IAA1BvF,OAAOijB,kBAQxCC,EAHa7jB,EAAKlB,MAAM,iCAGG6kB,EAG3BG,EAAoBza,EAASD,EAG7B2a,EAAwB/jB,EAAK0R,KAAKtH,QAAQhB,MAC1C4a,EAAyBhkB,EAAK0R,KAAKtH,QAAQf,OAE3C8Q,EAAa4J,EACb3J,EAAcD,EAAa2J,EAE3BA,EAAoB,EAEtB1J,GADAD,EAAalU,KAAKuK,IAAIpH,EAAO2a,EAAwBF,IAC1BC,EAG3B3J,GADAC,EAAcnU,KAAKuK,IAAInH,EAAQ2a,EAAyBH,IAC7BC,EAI7B,IAAIG,EAAe3D,GACjB9B,EACArE,EACAC,EACAlM,GAIExT,EAAO,WAET,IAAIsmB,EAAehhB,EAAKlB,MACtB,mDAEE+hB,GAAsBvkB,MACtB,KACJrD,EAAK4M,YAAY,QAASmb,GAAc,GAGpC,UAAWxC,GACbA,EAAU0F,QAIZlkB,EAAKK,IAAI8jB,cAAcha,QAAU,EAGjCoY,EAAU,CAAEviB,KAAMA,EAAMyI,MAAOA,EAAOoN,MAAOoO,KAI3Cvf,EAASzL,EAAKoG,YAAY,UAC1BqF,EACFsd,EAAYhiB,EAAM0E,EAAQuf,GAAczkB,KAAK9E,GAE7CA,MAKJ,GAAImoB,EAAqB5pB,EAAKqE,MAAO,CAEnC,IAAImB,EAASP,EAAamgB,IAE1B5f,EAAOC,KACL,CACEpB,KAAMrE,EAAKqE,OAGb,SAAS8mB,GAEP3lB,EAAOE,YAIFylB,EAMLX,EAAmBW,GALjBZ,YAUNA,MAOAa,EAAiB,SAAwB1Y,GAC3C,IAAI3L,EAAO2L,EAAM3L,KAEb6V,EAAQ7V,EAAKK,IAAIgiB,OAAOriB,EAAKK,IAAIgiB,OAAO3oB,OAAS,GACrDmc,EAAMkG,WAAa,EACnBlG,EAAM+F,OAAS,EACf/F,EAAMgG,OAAS,EACfhG,EAAM1L,QAAU,GAMdma,EAAiB,SAAwBC,GAC3C,IAAIvkB,EAAOukB,EAAMvkB,KACjBA,EAAKK,IAAI8jB,cAAcha,QAAU,EACjCnK,EAAKK,IAAImkB,aAAara,QAAU,EAChCnK,EAAKK,IAAIokB,eAAeta,QAAU,GAGhCua,EAAgB,SAAuBC,GACzC,IAAI3kB,EAAO2kB,EAAO3kB,KAClBA,EAAKK,IAAI8jB,cAAcha,QAAU,IACjCnK,EAAKK,IAAImkB,aAAara,QAAU,GAG9Bya,EAAwB,SAA+BC,GACzD,IAAI7kB,EAAO6kB,EAAO7kB,KAClBA,EAAKK,IAAI8jB,cAAcha,QAAU,IACjCnK,EAAKK,IAAIokB,eAAeta,QAAU,GAMhCoR,EAAS,SAAgBuJ,GAC3B,IAAI9kB,EAAO8kB,EAAO9kB,KAElBA,EAAKK,IAAIgiB,OAAS,GAGlBriB,EAAKK,IAAIme,UAAY,KAGrBxe,EAAKK,IAAIiiB,aAAe,GAGxBtiB,EAAKK,IAAI8jB,cAAgBnkB,EAAK2K,gBAC5B3K,EAAKiK,gBAAgB6X,EAAa,CAChC3X,QAAS,EACT5I,OAAQ,UAIZvB,EAAKK,IAAIokB,eAAiBzkB,EAAK2K,gBAC7B3K,EAAKiK,gBAAgB6X,EAAa,CAChC3X,QAAS,EACT5I,OAAQ,aAIZvB,EAAKK,IAAImkB,aAAexkB,EAAK2K,gBAC3B3K,EAAKiK,gBAAgB6X,EAAa,CAChC3X,QAAS,EACT5I,OAAQ,cAKd,OAAO0F,EAAEjJ,MAAM6Y,WAAW,CACxBvb,KAAM,wBACNigB,OAAQA,EACR1I,OAAQ,CAAC,UACTmE,KAAM,CAAC,UACP+N,QAAS,SAAiBC,GACbA,EAAOhlB,KAEbK,IAAIgiB,OAAO/P,SAAQ,SAASwK,GAC/BA,EAAUjH,MAAMzM,MAAQ,EACxB0T,EAAUjH,MAAMxM,OAAS,MAG7B+S,aAAc,SAAsB6I,GACvBA,EAAOjlB,KACbK,IAAIgiB,OAAO/P,SAAQ,SAASwK,GAC/BA,EAAU5F,OAAQ,MAGtBD,MAAOhQ,EAAEjJ,MAAMG,YACb,CAEE+mB,uBAAwBb,EACxBc,mCAAoChC,EACpCiC,iCAAkC7B,EAClC8B,yBAA0B3C,EAG1B4C,0BAA2BZ,EAC3Ba,gCAAiCb,EACjCc,uBAAwBd,EACxBe,6BAA8Bb,EAC9Bc,0BAA2BpB,EAC3BqB,2BAA4BrB,IAG9B,SAASsB,GACP,IAAI5lB,EAAO4lB,EAAO5lB,KAEd6lB,EAAgB7lB,EAAKK,IAAIiiB,aAAa5d,QAAO,SAASoY,GACxD,OAA6B,IAAtBA,EAAU3S,WAInBnK,EAAKK,IAAIiiB,aAAetiB,EAAKK,IAAIiiB,aAAa5d,QAAO,SACnDoY,GAEA,OAAOA,EAAU3S,QAAU,KAI7B0b,EAAcvT,SAAQ,SAASwK,GAC7B,OAAOoF,EAAgBliB,EAAM8c,MAE/B+I,EAAcnsB,OAAS,QAS3BmE,GAAS,SAAgBkgB,GAC3B,IAAIhgB,EAAYggB,EAAMhgB,UACpBC,EAAQ+f,EAAM/f,MACZC,EAAOD,EAAMC,KACfE,EAAcH,EAAMG,YACpBC,EAASJ,EAAMI,OAGb0nB,EAAmBjE,GAAuB9D,GA+M9C,OA5MAhgB,EAAU,eAAe,SAAS2B,GAEhC,IAAIC,EAAKD,EAAQC,GACfC,EAAOF,EAAQE,KACfd,EAAQY,EAAQZ,MAGlB,GAAKa,EAAG,SAAYb,EAAM,2BAA1B,CAGA,IAAI+K,EAAc,SAAqB/L,GACrC,IAAIkC,EAAOlC,EAAKkC,KAEZtH,EADMoF,EAAK2K,MACA/P,GACXO,EAAO6F,EAAM,WAAYpG,GAG7B,GAAKO,GAASmF,EAAOnF,EAAKqE,QAASrE,EAAK8sB,SAAxC,CAGA,IAAIzoB,EAAOrE,EAAKqE,KAGhB,GAAK0J,EAAmB1J,IAGnBwB,EAAM,gCAANA,CAAuC7F,GAA5C,CAIA,IAAI+sB,EAA4B,sBAAwBrlB,QAAU,IAC9DslB,EAAqBnnB,EAAM,mCAC/B,MACGknB,GACDC,GACA3oB,EAAK8C,KAAO6lB,GAHd,CAQAjmB,EAAKK,IAAI6lB,aAAetmB,EAAK+K,gBAC3B/K,EAAKqK,gBAAgB6b,EAAkB,CAAEptB,GAAIA,KAI/C,IAAI2kB,EAAqBrd,EAAKlB,MAAM,4BAChCue,GACFrd,EAAKM,SAAS,0BAA2B,CACvC5H,GAAIO,EAAKP,GACT2Q,OAAQgU,IAKZ,IAAI8I,GACDH,GACD1oB,EAAK8C,KAAOtB,EAAM,mDACpBkB,EAAKM,SAAS,qCAAsC,CAAE5H,GAAIA,GAAMytB,OAG9DC,EAAc,SAAqBpmB,EAAMyI,GAC3C,GAAKzI,EAAKK,IAAI6lB,aAAd,CACA,IAAIxtB,EAAK+P,EAAM/P,GAGXO,EAAO+G,EAAKlB,MAAM,WAAY,CAAEpG,GAAIA,IACxC,GAAKO,EAAL,CAGA,IAAIukB,EAAmBxd,EAAKlB,MAAM,0BAC9BunB,EAAuBrmB,EAAKlB,MAAM,+BAClCwnB,EAActmB,EAAKlB,MAAM,4BAC7B,KAAI0e,GAAoB6I,GAAwBC,GAAhD,CAGA,IAAIC,EAAYvmB,EAAKK,IACnB8Z,EAAaoM,EAAUpM,WACvBC,EAAcmM,EAAUnM,YAC1B,GAAKD,GAAeC,EAApB,CAGA,IAAIkD,EAAmBtd,EAAKlB,MAAM,gCAC9Bye,EAAmBvd,EAAKlB,MAAM,gCAI9BoP,GADOjV,EAAKoG,YAAY,SAAW,IAChB6O,cAAgB,EAGvC,GAAIA,GAAe,GAAKA,GAAe,EAAG,CACxC,IAAI5P,EAAQ,CAAC8b,EAAaD,GAC1BA,EAAa7b,EAAM,GACnB8b,EAAc9b,EAAM,GAItB,IAAKoiB,GAASznB,EAAKqE,OAAS0C,EAAKlB,MAAM,6BAA8B,CACnE,IAAIuR,EAAS,KAAO8J,EACpBA,GAAc9J,EACd+J,GAAe/J,EAIjB,IAAIsJ,EAAmBS,EAAcD,EAGjCqM,GACDvtB,EAAKoG,YAAY,SAAW,IAAIkH,aAAeoT,EAG9C8M,EAAmBxgB,KAAKC,IAC1BoX,EACArX,KAAKuK,IAAI4J,EAAamD,IAGpBmJ,EAAY1mB,EAAK0R,KAAKtH,QAAQhB,MAC9Bud,EAAgB1gB,KAAKuK,IACvBkW,EAAYF,EACZC,GAIFzmB,EAAKM,SAAS,0BAA2B,CACvC5H,GAAIO,EAAKP,GACT2Q,OAAQsd,SAIRC,EAAgB,SAAuB/nB,GAC9BA,EAAMmB,KAEZK,IAAIwmB,eAAgB,GAGvBnE,EAAwB,SAA+BxjB,GACzD,IAAIc,EAAOd,EAAMc,KAES,SADfd,EAAMe,OACN0iB,OAAOhU,MAGlB3O,EAAKK,IAAIwmB,eAAgB,IAGvBC,EAA0B,SAAiC3nB,GAC7D,IAAIa,EAAOb,EAAMa,KACfC,EAASd,EAAMc,OAEjBD,EAAKK,IAAI8Z,WAAala,EAAOmJ,MAC7BpJ,EAAKK,IAAI+Z,YAAcna,EAAOoJ,OAG9BrJ,EAAKK,IAAIwmB,eAAgB,EACzB7mB,EAAKK,IAAI0mB,mBAAoB,EAG7B/mB,EAAKM,SAAS,SAIhBV,EAAKC,eACH1B,EACE,CACE6oB,gBAAiBJ,EACjBK,gBAAiBL,EACjBnb,cAAe5B,EACfqd,iCAAkCJ,EAClCzB,yBAA0B3C,IAG5B,SAAS3iB,GACP,IAAIC,EAAOD,EAAMC,KACfyI,EAAQ1I,EAAM0I,MAEXzI,EAAKK,IAAI6lB,eAGVlmB,EAAK0R,KAAKtH,QAAQ6S,SAGlBjd,EAAKK,IAAIwmB,gBACXT,EAAYpmB,EAAMyI,GAClBzI,EAAKK,IAAIwmB,eAAgB,GAGvB7mB,EAAKK,IAAI0mB,oBAEXI,uBAAsB,WAGpBA,uBAAsB,WACpBnnB,EAAKM,SAAS,mCAAoC,CAChD5H,GAAI+P,EAAM/P,WAKhBsH,EAAKK,IAAI0mB,mBAAoB,aAQhC,CACL3pB,QAAS,CAEPgqB,kBAAmB,EAAC,EAAMnpB,EAAKyC,SAG/B2mB,uBAAwB,CACtB,WACE,OAAO,GAETppB,EAAKoE,UAIPilB,mBAAoB,CAAC,KAAMrpB,EAAKgE,KAGhCslB,sBAAuB,CAAC,GAAItpB,EAAKgE,KAGjCulB,sBAAuB,CAAC,IAAKvpB,EAAKgE,KAGlCwlB,wBAAyB,CAAC,KAAMxpB,EAAKgE,KAGrCylB,uBAAwB,CAAC,EAAGzpB,EAAKgE,KAGjC0lB,oBAAqB,EAAC,EAAO1pB,EAAKyC,SAGlCknB,sCAAuC,CAAC,IAAS3pB,EAAKgE,KAGtD4lB,kCAAmC,CAAC,KAAM5pB,EAAKsE,QAG/CulB,uCAAwC,EAAC,EAAO7pB,EAAKyC,SAGrDqnB,uBAAwB,EAAC,EAAM9pB,EAAKyC,SAGpCsnB,yBAA0B,CACxB,WACE,OAAO,GAET/pB,EAAKoE,aAeb,MAPoB,oBAAX1B,aAAqD,IAApBA,OAAOC,UAE/CA,SAASC,cACP,IAAIC,YAAY,wBAAyB,CAAEC,OAAQlD,MAIhDA,GAzrHemD,qBCAbvI,EAAOE,QAIT,WACL,aAGA,IAAI2M,EAAU,SAAiBhI,GAC3B,MAAO,SAAS9B,KAAK8B,EAAK6C,OAG1B6f,EAAe,SAAsB/B,EAAK5gB,GAC1C,IAAIwY,EAAQ,IAAIhI,MAChBgI,EAAM3I,OAAS,WACX,IAAI9D,EAAQyM,EAAM/H,aACdzE,EAASwM,EAAM9H,cACnB8H,EAAQ,KACRxY,EAAG,CAAE+L,MAAOA,EAAOC,OAAQA,KAE/BwM,EAAM+L,QAAU,WACZ,OAAOvkB,EAAG,OAEdwY,EAAM7H,IAAMiQ,GAMZpgB,EAAS,SAAgBC,GACzB,IAAIC,EAAYD,EAAKC,UAEjBE,EADQH,EAAKE,MACAC,KAkFjB,OA/EAF,EAAU,iBAAiB,SAAS9E,EAAMqF,GACtC,IAAIQ,EAAQR,EAAMQ,MAClB,OAAO,IAAIP,SAAQ,SAASC,EAAS6C,GAEjC,IAAI/D,EAAOrE,EAAKqE,KAGhB,IAAKgI,EAAQhI,KAAUwB,EAAM,0BAEzB,OAAON,EAAQvF,GAGnB,IAAIkQ,EAAOrK,EAAM,yBACbsK,EAAQtK,EAAM,iCACduK,EAASvK,EAAM,kCACfoK,EAAUpK,EAAM,4BAGpB,GAAc,OAAVsK,GAA6B,OAAXC,EAAiB,OAAO7K,EAAQvF,GAEtD,IAAIgvB,EAAwB,OAAV7e,EAAiBC,EAASD,EACxC8e,EAA0B,OAAX7e,EAAkB4e,EAAc5e,EAG/C+Z,EAAUC,IAAIC,gBAAgBhmB,GAClC0iB,EAAaoD,GAAS,SAAShjB,GAI3B,GAHAijB,IAAIK,gBAAgBN,IAGfhjB,EAAM,OAAO5B,EAAQvF,GAC1B,IAAIkhB,EAAa/Z,EAAKgJ,MAClBgR,EAAcha,EAAKiJ,OAGnB6E,GAAejV,EAAKoG,YAAY,SAAW,IAAI6O,cAAgB,EAGnE,GAAIA,GAAe,GAAKA,GAAe,EAAG,CACtC,IAAIrP,EAAQ,CAACub,EAAaD,GAC1BA,EAAatb,EAAM,GACnBub,EAAcvb,EAAM,GAIxB,GAAIsb,IAAe8N,GAAe7N,IAAgB8N,EAC9C,OAAO1pB,EAAQvF,GAInB,IAAKiQ,EAED,GAAa,UAATC,GAEA,GAAIgR,GAAc8N,GAAe7N,GAAe8N,EAC5C,OAAO1pB,EAAQvF,QAIlB,GAAIkhB,GAAc8N,GAAe7N,GAAe6N,EACjD,OAAOzpB,EAAQvF,GAKvBA,EAAK4M,YAAY,SAAU,CACvBsD,KAAMA,EACND,QAASA,EACT9I,KAAM,CACFgJ,MAAO6e,EACP5e,OAAQ6e,KAIhB1pB,EAAQvF,YAMb,CACHmE,QAAS,CAEL+qB,iBAAkB,EAAC,EAAMlqB,EAAKyC,SAM9B0nB,gBAAiB,CAAC,QAASnqB,EAAKsE,QAGhC8lB,mBAAoB,EAAC,EAAMpqB,EAAKyC,SAGhC4nB,uBAAwB,CAAC,KAAMrqB,EAAKgE,KAGpCsmB,wBAAyB,CAAC,KAAMtqB,EAAKgE,QAWjD,MALkC,oBAAXtB,aAAqD,IAApBA,OAAOC,UAE3DA,SAASC,cAAc,IAAIC,YAAY,wBAAyB,CAAEC,OAAQlD,KAGvEA,EA/IiBmD,qBCAjBvI,EAAOE,QAIT,WACL,aAGA,IAAI2M,EAAU,SAAiBhI,GAC3B,MAAO,SAAS9B,KAAK8B,EAAK6C,OAG1BqoB,EAA8B,SAAqCltB,GACnE,OAAOA,EAAKmtB,OAAO,EAAGntB,EAAKotB,YAAY,OAASptB,GAIhDqtB,EAAe,CACfC,KAAM,MACN,UAAW,OAGXC,EAA4B,SAAmCjlB,EAAUV,GACzE,IAAI5H,EAAOktB,EAA4B5kB,GACnCzD,EAAO+C,EAAS4lB,MAAM,KAAK,GAC3BjlB,EAAY8kB,EAAaxoB,IAASA,EACtC,MAAO,GAAGhH,OAAOmC,EAAM,KAAKnC,OAAO0K,IAInCklB,EAAyB,SAAgC5oB,GACzD,MAAO,oBAAoB3E,KAAK2E,GAAQA,EAAO,cAI/C6oB,EAAY,SAAiB1rB,GAC7B,MAAO,SAAS9B,KAAK8B,EAAK6C,OAG1B8oB,EAAW,CACX,EAAG,WACC,MAAO,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,IAE3B,EAAG,SAAW7f,GACV,MAAO,EAAE,EAAG,EAAG,EAAG,EAAGA,EAAO,IAEhC,EAAG,SAAWA,EAAOC,GACjB,MAAO,EAAE,EAAG,EAAG,GAAI,EAAGD,EAAOC,IAEjC,EAAG,SAAWD,EAAOC,GACjB,MAAO,CAAC,EAAG,EAAG,GAAI,EAAG,EAAGA,IAE5B,EAAG,WACC,MAAO,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,IAE3B,EAAG,SAAWD,EAAOC,GACjB,MAAO,CAAC,EAAG,GAAI,EAAG,EAAGA,EAAQ,IAEjC,EAAG,SAAWD,EAAOC,GACjB,MAAO,CAAC,GAAI,GAAI,EAAG,EAAGA,EAAQD,IAElC,EAAG,SAAWA,GACV,MAAO,CAAC,GAAI,EAAG,EAAG,EAAG,EAAGA,KAI5B8f,EAA4B,SAAmC9f,EAAOC,EAAQ6E,GAI9E,OAHqB,IAAjBA,IACAA,EAAc,GAEX+a,EAAS/a,GAAa9E,EAAOC,IAGpCmG,EAAe,SAAsB/I,EAAGC,GACxC,MAAO,CAAED,EAAGA,EAAGC,EAAGA,IAGlByR,EAAY,SAAmBzI,EAAGC,GAClC,OAAOD,EAAEjJ,EAAIkJ,EAAElJ,EAAIiJ,EAAEhJ,EAAIiJ,EAAEjJ,GAG3B0R,EAAiB,SAAwB1I,EAAGC,GAC5C,OAAOH,EAAaE,EAAEjJ,EAAIkJ,EAAElJ,EAAGiJ,EAAEhJ,EAAIiJ,EAAEjJ,IAGvC2R,EAAwB,SAA+B3I,EAAGC,GAC1D,OAAOwI,EAAUC,EAAe1I,EAAGC,GAAIyI,EAAe1I,EAAGC,KAGzD2I,EAAiB,SAAwB5I,EAAGC,GAC5C,OAAO1J,KAAK6J,KAAKuI,EAAsB3I,EAAGC,KAG1C4I,EAAuB,SAA8B7e,EAAQyM,GAC7D,IAAIuJ,EAAIhW,EAEJ8e,EAAI,mBACJC,EAAItS,EACJuS,EAAI,mBAAqBvS,EAEzBwS,EAAO1S,KAAKiK,IAAIsI,GAChBI,EAAO3S,KAAKiK,IAAIuI,GAChBI,EAAO5S,KAAKiK,IAAIwI,GAChBI,EAAO7S,KAAKgK,IAAIyI,GAChBK,EAAQrJ,EAAIiJ,EAIhB,OAAOnJ,EAAasJ,GAHZC,EAAQH,GAGcE,GAFtBC,EAAQF,KAKhBG,EAAqB,SAA4BtH,EAAMvL,GACvD,IAAI8S,EAAIvH,EAAKtI,MACT8P,EAAIxH,EAAKrI,OAET8P,EAAMZ,EAAqBU,EAAG9S,GAC9BiT,EAAMb,EAAqBW,EAAG/S,GAE9BkT,EAAK7J,EAAakC,EAAKjL,EAAIR,KAAKqT,IAAIH,EAAI1S,GAAIiL,EAAKhL,EAAIT,KAAKqT,IAAIH,EAAIzS,IAElE6S,EAAK/J,EAAakC,EAAKjL,EAAIiL,EAAKtI,MAAQnD,KAAKqT,IAAIF,EAAI1S,GAAIgL,EAAKhL,EAAIT,KAAKqT,IAAIF,EAAI3S,IAE/E+S,EAAKhK,EAAakC,EAAKjL,EAAIR,KAAKqT,IAAIF,EAAI1S,GAAIgL,EAAKhL,EAAIgL,EAAKrI,OAASpD,KAAKqT,IAAIF,EAAI3S,IAEpF,MAAO,CACH2C,MAAOkP,EAAee,EAAIE,GAC1BlQ,OAAQiP,EAAee,EAAIG,KAI/BQ,EAAyB,SAAgCC,EAAWC,GACpE,IAAI/T,EAAW2G,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,EAC/E/G,EACA+G,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,CAAErG,EAAG,GAAKC,EAAG,IAGjFqM,EAAKhN,EAAOU,EAAI,GAAM,EAAIV,EAAOU,EAAIV,EAAOU,EAC5CuM,EAAKjN,EAAOW,EAAI,GAAM,EAAIX,EAAOW,EAAIX,EAAOW,EAC5CyT,EAAkB,EAALpH,EAASkH,EAAU7Q,MAChCgR,EAAmB,EAALpH,EAASiH,EAAU5Q,OAGjCgR,EAAkBrB,EAAmBkB,EAAU/T,GAEnD,OAAOF,KAAKC,IAAImU,EAAgBjR,MAAQ+Q,EAAYE,EAAgBhR,OAAS+Q,IAG7EE,EAAsB,SAA6BC,EAAWhU,GAC9D,IAAI6C,EAAQmR,EAAUnR,MAClBC,EAASD,EAAQ7C,EAQrB,OAPI8C,EAASkR,EAAUlR,SAEnBD,GADAC,EAASkR,EAAUlR,QACF9C,GAKd,CACHE,EAJgC,IAA3B8T,EAAUnR,MAAQA,GAKvB1C,EAJkC,IAA7B6T,EAAUlR,OAASA,GAKxBD,MAAOA,EACPC,OAAQA,IAIZoQ,EAAsB,SAA6B5D,EAAO6D,GAC1D,IAAI1T,EAAO8G,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,EAE3E6M,EAAmB9D,EAAMxM,OAASwM,EAAMzM,MAGxCwQ,EAAc,EACdC,EAAeH,EACfI,EAAW,EACXC,EAAYJ,EACZI,EAAYF,IAEZC,GADAC,EAAYF,GACWF,GAG3B,IAAItJ,EAASpK,KAAKC,IAAI0T,EAAcE,EAAUD,EAAeE,GACzD3Q,EAAQyM,EAAMzM,OAASpD,EAAOqK,EAASyJ,GAG3C,MAAO,CACH1Q,MAAOA,EACPC,OAJSD,EAAQsQ,IAQrByP,EAAgB,SAAuB5I,GACvCA,EAAOnX,MAAQ,EACfmX,EAAOlX,OAAS,EACNkX,EAAOC,WAAW,MACxB4I,UAAU,EAAG,EAAG,EAAG,IAGvBC,EAAY,SAAmBjjB,GAC/B,OAAOA,IAASA,EAAKO,YAAcP,EAAKQ,WAGxC0iB,EAAY,SAAmBzT,EAAO3H,EAAa9H,GACnD,GAAI8H,GAAe,IAAMmb,EAAUjjB,GAG/B,OAFAyP,EAAMzM,MAAQyM,EAAM/H,aACpB+H,EAAMxM,OAASwM,EAAM9H,cACd8H,EAGX,IAAI0K,EAAS3f,SAASmK,cAAc,UAChC3B,EAAQyM,EAAM/H,aACdzE,EAASwM,EAAM9H,cAGfwb,EAAUrb,GAAe,GAAKA,GAAe,EAC7Cqb,GACAhJ,EAAOnX,MAAQC,EACfkX,EAAOlX,OAASD,IAEhBmX,EAAOnX,MAAQA,EACfmX,EAAOlX,OAASA,GAIpB,IAAI8W,EAAMI,EAAOC,WAAW,MAO5B,GAJItS,GACAiS,EAAIC,UAAUC,MAAMF,EAAK+I,EAA0B9f,EAAOC,EAAQ6E,IAGlEmb,EAAUjjB,GAAO,CAGjB,IAAIkD,EAAS,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,KACvBigB,GAAWnjB,EAAKO,YAAe4iB,EAAUnjB,EAAKQ,YAChD0C,EAAO,IAAM,EACbA,EAAO,GAAKF,KAKVmgB,GAAWnjB,EAAKQ,UAAc2iB,GAAWnjB,EAAKO,cAChD2C,EAAO,IAAM,EACbA,EAAO,GAAKD,GAGhB8W,EAAIC,UAAUC,MAAMF,EAAK7W,GAK7B,OAFA6W,EAAIM,UAAU5K,EAAO,EAAG,EAAGzM,EAAOC,GAE3BkX,GAGPiJ,EAAmB,SAA0BC,EAAcvb,GAC3D,IAAIpI,EAAOgH,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,GAC3E1P,EAAU0P,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,GAC9E4c,EAAoBtsB,EAAQssB,kBAC5BC,EAAsBvsB,EAAQif,WAC9BA,OAAqC,IAAxBsN,EAAiC,KAAOA,EAErD3jB,EAAOF,EAAKE,MAAQ,EAGpBiW,EAASqN,EAAUG,EAAcvb,EAAapI,EAAKM,MACnDqU,EAAY,CACZrR,MAAO6S,EAAO7S,MACdC,OAAQ4S,EAAO5S,QAGf9C,EAAcT,EAAKS,aAAekU,EAAUpR,OAASoR,EAAUrR,MAE/DsR,EAAajB,EAAoBgB,EAAWlU,EAAaP,GAE7D,GAAI0jB,EAAmB,CACnB,IAAIE,EAAiBlP,EAAWtR,MAAQsR,EAAWrR,OACnD,GAAIugB,EAAiBF,EAAmB,CACpC,IAAIrZ,EAASpK,KAAK6J,KAAK4Z,GAAqBzjB,KAAK6J,KAAK8Z,GACtDnP,EAAUrR,MAAQnD,KAAKib,MAAMzG,EAAUrR,MAAQiH,GAC/CoK,EAAUpR,OAASpD,KAAKib,MAAMzG,EAAUpR,OAASgH,GACjDqK,EAAajB,EAAoBgB,EAAWlU,EAAaP,IAIjE,IAAIua,EAAS3f,SAASmK,cAAc,UAEhC4P,EAAe,CACflU,EAAsB,GAAnBiU,EAAWtR,MACd1C,EAAuB,GAApBgU,EAAWrR,QAGduR,EAAQ,CACRnU,EAAG,EACHC,EAAG,EACH0C,MAAOsR,EAAWtR,MAClBC,OAAQqR,EAAWrR,OACnBtD,OAAQ4U,GAGRE,OAAyC,IAApB/U,EAAKgV,YAA8BhV,EAAKgV,WAE7DpK,EACA1K,EACAgU,EACIS,EACAH,EAAoBM,EAAOrU,GAC3BT,EAAKK,SACL0U,EAAc/U,EAAKC,OAAS,CAAEU,EAAG,GAAKC,EAAG,KAIjD6Z,EAAOnX,MAAQnD,KAAKgV,MAAMP,EAAWtR,MAAQsH,GAC7C6P,EAAOlX,OAASpD,KAAKgV,MAAMP,EAAWrR,OAASqH,GAE/CiK,EAAalU,GAAKiK,EAClBiK,EAAajU,GAAKgK,EAElB,IAAImZ,EAAc,CACdpjB,EAAGkU,EAAalU,EAAIgU,EAAUrR,OAAStD,EAAKC,OAASD,EAAKC,OAAOU,EAAI,IACrEC,EAAGiU,EAAajU,EAAI+T,EAAUpR,QAAUvD,EAAKC,OAASD,EAAKC,OAAOW,EAAI,KAGtEyZ,EAAMI,EAAOC,WAAW,MACxBnE,IACA8D,EAAI2J,UAAYzN,EAChB8D,EAAI4J,SAAS,EAAG,EAAGxJ,EAAOnX,MAAOmX,EAAOlX,SAI5C8W,EAAI6J,UAAUrP,EAAalU,EAAGkU,EAAajU,GAC3CyZ,EAAI8J,OAAOnkB,EAAKK,UAAY,GAG5Bga,EAAIM,UACAxE,EACA4N,EAAYpjB,EAAIkU,EAAalU,EAC7BojB,EAAYnjB,EAAIiU,EAAajU,EAC7B+T,EAAUrR,MACVqR,EAAUpR,QAId,IAAImV,EAAY2B,EAAIY,aAAa,EAAG,EAAGR,EAAOnX,MAAOmX,EAAOlX,QAM5D,OAHA8f,EAAc5I,GAGP/B,GAOkB,oBAAX7d,aAAqD,IAApBA,OAAOC,WAGjDspB,kBAAkB/uB,UAAUgvB,QAC7BjvB,OAAOkvB,eAAeF,kBAAkB/uB,UAAW,SAAU,CACzDR,MAAO,SAAe0vB,EAAUlqB,EAAMmqB,GAClC,IAAIC,EAAUxxB,KAAKyxB,UAAUrqB,EAAMmqB,GAASxB,MAAM,KAAK,GACvDrG,YAAW,WAIP,IAHA,IAAIgI,EAASC,KAAKH,GACd3uB,EAAM6uB,EAAO/wB,OACbG,EAAM,IAAI8wB,WAAW/uB,GAChBvC,EAAI,EAAGA,EAAIuC,EAAKvC,IACrBQ,EAAIR,GAAKoxB,EAAOG,WAAWvxB,GAE/BgxB,EAAS,IAAI9qB,KAAK,CAAC1F,GAAM,CAAEsG,KAAMA,GAAQ,sBAO7D,IAAI0qB,EAAe,SAAsBtK,EAAQnjB,GAC7C,IAAI0tB,EACAhe,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,KACxE,OAAO,IAAIvO,SAAQ,SAASC,GACxB,IAAIusB,EAAgBD,EAAmBA,EAAiBvK,GAAUA,EAClEhiB,QAAQC,QAAQusB,GAAevrB,MAAK,SAAS+gB,GACzCA,EAAO4J,OAAO3rB,EAASpB,EAAQ+C,KAAM/C,EAAQktB,gBAKrDjb,EAAiB,SAAwBC,EAAGC,GAC5C,OAAO2I,EAAe5I,EAAE7I,EAAI8I,EAAQD,EAAE5I,EAAI6I,IAG1CE,EAAY,SAAmBC,EAAGC,GAClC,OAAOuI,EAAexI,EAAEjJ,EAAIkJ,EAAElJ,EAAGiJ,EAAEhJ,EAAIiJ,EAAEjJ,IAGzCkJ,EAAkB,SAAyBN,GAC3C,IAAIO,EAAI5J,KAAK6J,KAAKR,EAAE7I,EAAI6I,EAAE7I,EAAI6I,EAAE5I,EAAI4I,EAAE5I,GACtC,OAAU,IAANmJ,EACO,CACHpJ,EAAG,EACHC,EAAG,GAGJwR,EAAe5I,EAAE7I,EAAIoJ,EAAGP,EAAE5I,EAAImJ,IAGrCE,EAAe,SAAsBT,EAAGU,EAASzI,GACjD,IAAI0I,EAAMhK,KAAKgK,IAAID,GACfE,EAAMjK,KAAKiK,IAAIF,GACfG,EAAI+H,EAAe5I,EAAE7I,EAAIc,EAAOd,EAAG6I,EAAE5I,EAAIa,EAAOb,GACpD,OAAOwR,EAAe3Q,EAAOd,EAAIwJ,EAAME,EAAE1J,EAAIyJ,EAAMC,EAAEzJ,EAAGa,EAAOb,EAAIwJ,EAAMC,EAAE1J,EAAIwJ,EAAME,EAAEzJ,IAGvFwR,EAAiB,WAGjB,MAAO,CAAEzR,EAFDqG,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,EAE7DpG,EADPoG,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,IAI5EsD,EAAiB,SAAwBzV,EAAOyF,GAChD,IAAIiQ,EAASvD,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,EAC7EwD,EAAOxD,UAAUpT,OAAS,EAAIoT,UAAU,QAAKC,EACjD,MAAqB,iBAAVpS,EACA4V,WAAW5V,GAAS0V,EAEV,iBAAV1V,EACAA,GAAS2V,EAAOlQ,EAAKkQ,GAAQrK,KAAKuK,IAAIpQ,EAAKgJ,MAAOhJ,EAAKiJ,cADlE,GAMAoH,EAAkB,SAAyBzH,EAAQ5I,EAAMsQ,GACzD,IAAIC,EAAY3H,EAAO4H,aAAe5H,EAAO2H,WAAa,QACtDE,EAAO7H,EAAO8H,iBAAmB9H,EAAO+H,WAAa,cACrDC,EAAShI,EAAOiI,aAAejI,EAAOkI,WAAa,cACnDC,EAAcf,EAAepH,EAAOoI,aAAepI,EAAOqI,UAAWjR,EAAMsQ,GAY/E,MAAO,CACH,iBAZU1H,EAAOsI,SAAW,QAa5B,kBAZWtI,EAAOuI,UAAY,QAa9B,eAAgBJ,GAAe,EAC/B,mBAZqB,iBAAdR,EACD,GACAA,EACK3X,KAAI,SAASsW,GACV,OAAOc,EAAed,EAAGlP,EAAMsQ,MAElCtX,KAAK,KAOhB4X,OAAQA,EACRH,KAAMA,EACN1G,QARUnB,EAAOmB,SAAW,IAYhCqH,EAAY,SAAmB7W,GAC/B,OAAgB,MAATA,GAGP8W,EAAgB,SAAuBC,EAAMtR,GAC7C,IAAIiQ,EAASvD,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,EAE7E6E,EACAvB,EAAesB,EAAKjL,EAAGrG,EAAMiQ,EAAQ,UACrCD,EAAesB,EAAKC,KAAMvR,EAAMiQ,EAAQ,SACxCuB,EACAxB,EAAesB,EAAKhL,EAAGtG,EAAMiQ,EAAQ,WACrCD,EAAesB,EAAKE,IAAKxR,EAAMiQ,EAAQ,UACvCjH,EAAQgH,EAAesB,EAAKtI,MAAOhJ,EAAMiQ,EAAQ,SACjDhH,EAAS+G,EAAesB,EAAKrI,OAAQjJ,EAAMiQ,EAAQ,UACnDwB,EAAQzB,EAAesB,EAAKG,MAAOzR,EAAMiQ,EAAQ,SACjDyB,EAAS1B,EAAesB,EAAKI,OAAQ1R,EAAMiQ,EAAQ,UAkCvD,OAhCKmB,EAAUI,KAEPA,EADAJ,EAAUnI,IAAWmI,EAAUM,GACzB1R,EAAKiJ,OAASA,EAASyI,EAEvBA,GAITN,EAAUG,KAEPA,EADAH,EAAUpI,IAAUoI,EAAUK,GACvBzR,EAAKgJ,MAAQA,EAAQyI,EAErBA,GAIVL,EAAUpI,KAEPA,EADAoI,EAAUG,IAASH,EAAUK,GACrBzR,EAAKgJ,MAAQuI,EAAOE,EAEpB,GAIXL,EAAUnI,KAEPA,EADAmI,EAAUI,IAAQJ,EAAUM,GACnB1R,EAAKiJ,OAASuI,EAAME,EAEpB,GAIV,CACHrL,EAAGkL,GAAQ,EACXjL,EAAGkL,GAAO,EACVxI,MAAOA,GAAS,EAChBC,OAAQA,GAAU,IAItB0I,EAAoB,SAA2BC,GAC/C,OAAOA,EACFhZ,KAAI,SAASiZ,EAAOC,GACjB,MAAO,GACF/Y,OAAiB,IAAV+Y,EAAc,IAAM,IAAK,KAChC/Y,OAAO8Y,EAAMxL,EAAG,KAChBtN,OAAO8Y,EAAMvL,MAErBtN,KAAK,MAGV+Y,EAAgB,SAAuB/H,EAASgI,GAChD,OAAOlX,OAAOmX,KAAKD,GAAME,SAAQ,SAAS3D,GACtC,OAAOvE,EAAQmI,aAAa5D,EAAKyD,EAAKzD,QAI1C6D,EAAK,6BACLC,EAAM,SAAaC,EAAKN,GACxB,IAAIhI,EAAUxJ,SAAS+R,gBAAgBH,EAAIE,GAI3C,OAHIN,GACAD,EAAc/H,EAASgI,GAEpBhI,GAGPwI,EAAa,SAAoBxI,GACjC,OAAO+H,EAAc/H,EAASlP,OAAOmJ,OAAO,GAAI+F,EAAQsH,KAAMtH,EAAQyI,UAGtEC,EAAgB,SAAuB1I,GACvC,IAAI2I,EAAK3I,EAAQsH,KAAKjL,EAAyB,GAArB2D,EAAQsH,KAAKtI,MACnC4J,EAAK5I,EAAQsH,KAAKhL,EAA0B,GAAtB0D,EAAQsH,KAAKrI,OACnC4J,EAA0B,GAArB7I,EAAQsH,KAAKtI,MAClB8J,EAA2B,GAAtB9I,EAAQsH,KAAKrI,OACtB,OAAO8I,EACH/H,EACAlP,OAAOmJ,OACH,CACI0O,GAAIA,EACJC,GAAIA,EACJC,GAAIA,EACJC,GAAIA,GAER9I,EAAQyI,UAKhBM,EAAkB,CAClBC,QAAS,gBACTC,MAAO,kBAGPC,EAAc,SAAqBlJ,EAASpB,GAC5CmJ,EACI/H,EACAlP,OAAOmJ,OAAO,GAAI+F,EAAQsH,KAAMtH,EAAQyI,OAAQ,CAC5CU,oBAAqBJ,EAAgBnK,EAAOwK,MAAQ,WAK5DC,EAAc,CACd9B,KAAM,QACN5L,OAAQ,SACR8L,MAAO,OAGP6B,EAAa,SAAoBtJ,EAASpB,EAAQ5I,EAAMsQ,GACxD,IAAIiD,EAAWvD,EAAepH,EAAO2K,SAAUvT,EAAMsQ,GACjDkD,EAAa5K,EAAO4K,YAAc,aAClCC,EAAa7K,EAAO6K,YAAc,SAClCC,EAAYL,EAAYzK,EAAO8K,YAAc,QAEjD3B,EACI/H,EACAlP,OAAOmJ,OAAO,GAAI+F,EAAQsH,KAAMtH,EAAQyI,OAAQ,CAC5C,eAAgB,EAChB,cAAegB,EACf,YAAaF,EACb,cAAeC,EACf,cAAeE,KAKnB1J,EAAQ2J,OAAS/K,EAAO+K,OACxB3J,EAAQ2J,KAAO/K,EAAO+K,KACtB3J,EAAQ4J,YAAchL,EAAO+K,KAAKra,OAASsP,EAAO+K,KAAO,MAI7DE,EAAa,SAAoB7J,EAASpB,EAAQ5I,EAAMsQ,GACxDyB,EACI/H,EACAlP,OAAOmJ,OAAO,GAAI+F,EAAQsH,KAAMtH,EAAQyI,OAAQ,CAC5ChC,KAAM,UAId,IAAIqD,EAAO9J,EAAQ+J,WAAW,GAC1BC,EAAQhK,EAAQ+J,WAAW,GAC3BE,EAAMjK,EAAQ+J,WAAW,GAEzB5M,EAAS6C,EAAQsH,KAEjBtE,EAAS,CACT3G,EAAG2D,EAAQsH,KAAKjL,EAAI2D,EAAQsH,KAAKtI,MACjC1C,EAAG0D,EAAQsH,KAAKhL,EAAI0D,EAAQsH,KAAKrI,QAUrC,GAPA8I,EAAc+B,EAAM,CAChBI,GAAI/M,EAAOd,EACX8N,GAAIhN,EAAOb,EACX8N,GAAIpH,EAAO3G,EACXgO,GAAIrH,EAAO1G,IAGVsC,EAAO0L,eAAZ,CAEAN,EAAMO,MAAMC,QAAU,OACtBP,EAAIM,MAAMC,QAAU,OAEpB,IAAItF,EAAIM,EAAgB,CACpBnJ,EAAG2G,EAAO3G,EAAIc,EAAOd,EACrBC,EAAG0G,EAAO1G,EAAIa,EAAOb,IAGrBmJ,EAAIO,EAAe,IAAMhQ,EAAMsQ,GAEnC,IAAsD,IAAlD1H,EAAO0L,eAAeG,QAAQ,eAAuB,CACrD,IAAIC,EAA0BzF,EAAeC,EAAGO,GAC5CkF,EAAmBtF,EAAUlI,EAAQuN,GACrCE,EAAcjF,EAAaxI,EAAQ,EAAGwN,GACtCE,EAAclF,EAAaxI,GAAS,EAAGwN,GAE3C5C,EAAciC,EAAO,CACjBO,MAAO,iBACPO,EAAG,IACE/b,OAAO6b,EAAYvO,EAAG,KACtBtN,OAAO6b,EAAYtO,EAAG,MACtBvN,OAAOoO,EAAOd,EAAG,KACjBtN,OAAOoO,EAAOb,EAAG,MACjBvN,OAAO8b,EAAYxO,EAAG,KACtBtN,OAAO8b,EAAYvO,KAIhC,IAAoD,IAAhDsC,EAAO0L,eAAeG,QAAQ,aAAqB,CACnD,IAAIM,EAAwB9F,EAAeC,GAAIO,GAC3CuF,EAAiB3F,EAAUrC,EAAQ+H,GACnCE,EAAYtF,EAAa3C,EAAQ,EAAGgI,GACpCE,EAAYvF,EAAa3C,GAAS,EAAGgI,GAEzCjD,EAAckC,EAAK,CACfM,MAAO,iBACPO,EAAG,IACE/b,OAAOkc,EAAU5O,EAAG,KACpBtN,OAAOkc,EAAU3O,EAAG,MACpBvN,OAAOiU,EAAO3G,EAAG,KACjBtN,OAAOiU,EAAO1G,EAAG,MACjBvN,OAAOmc,EAAU7O,EAAG,KACpBtN,OAAOmc,EAAU5O,QAK9B6O,EAAa,SAAoBnL,EAASpB,EAAQ5I,EAAMsQ,GACxDyB,EACI/H,EACAlP,OAAOmJ,OAAO,GAAI+F,EAAQyI,OAAQ,CAC9BhC,KAAM,OACNqE,EAAGnD,EACC/I,EAAOgJ,OAAOhZ,KAAI,SAASiZ,GACvB,MAAO,CACHxL,EAAG2J,EAAe6B,EAAMxL,EAAGrG,EAAMsQ,EAAO,SACxChK,EAAG0J,EAAe6B,EAAMvL,EAAGtG,EAAMsQ,EAAO,mBAQ5D8E,EAAc,SAAqBC,GACnC,OAAO,SAASzM,GACZ,OAAOyJ,EAAIgD,EAAM,CAAE/c,GAAIsQ,EAAOtQ,OAmBlCgd,EAAa,SAAoB1M,GACjC,IAAI2M,EAAQlD,EAAI,IAAK,CACjB/Z,GAAIsQ,EAAOtQ,GACX,iBAAkB,QAClB,kBAAmB,UAGnBwb,EAAOzB,EAAI,QACfkD,EAAMxK,YAAY+I,GAElB,IAAIE,EAAQ3B,EAAI,QAChBkD,EAAMxK,YAAYiJ,GAElB,IAAIC,EAAM5B,EAAI,QAGd,OAFAkD,EAAMxK,YAAYkJ,GAEXsB,GAGPC,EAAqB,CACrBC,MAnCc,SAAqB7M,GACnC,IAAI2M,EAAQlD,EAAI,QAAS,CACrB/Z,GAAIsQ,EAAOtQ,GACX,iBAAkB,QAClB,kBAAmB,QACnByR,QAAS,MAOb,OAJAwL,EAAMzI,OAAS,WACXyI,EAAMpD,aAAa,UAAWvJ,EAAOmB,SAAW,IAEpDwL,EAAMG,eAAe,+BAAgC,aAAc9M,EAAOgF,KACnE2H,GAwBPjE,KAAM8D,EAAY,QAClBO,QAASP,EAAY,WACrBzB,KAAMyB,EAAY,QAClBQ,KAAMR,EAAY,QAClBtB,KAAMwB,GAGNO,EAAqB,CACrBvE,KAAMkB,EACNmD,QAASjD,EACT+C,MAAOvC,EACPS,KAAML,EACNsC,KAAMT,EACNrB,KAAMD,GAGNiC,EAAqB,SAA4B/V,EAAM6I,GACvD,OAAO4M,EAAmBzV,GAAM6I,IAGhCmN,EAAqB,SAA4B/L,EAASjK,EAAM6I,EAAQ5I,EAAMsQ,GACjE,SAATvQ,IACAiK,EAAQsH,KAAOD,EAAczI,EAAQ5I,EAAMsQ,IAE/CtG,EAAQyI,OAASpC,EAAgBzH,EAAQ5I,EAAMsQ,GAC/CuF,EAAmB9V,GAAMiK,EAASpB,EAAQ5I,EAAMsQ,IAGhDiG,EAAqB,SAA4BjH,EAAGC,GACpD,OAAID,EAAE,GAAGgH,OAAS/G,EAAE,GAAG+G,OACZ,EAEPhH,EAAE,GAAGgH,OAAS/G,EAAE,GAAG+G,QACX,EAEL,GAGPsU,EAAU,SAAiBC,GAC3B,IAAInlB,EAAOgH,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,GAC3E9D,EAAS8D,UAAUpT,OAAS,EAAIoT,UAAU,QAAKC,EAC/C3P,EAAU0P,UAAUpT,OAAS,EAAIoT,UAAU,QAAKC,EACpD,OAAO,IAAIxO,SAAQ,SAASC,GACxB,IAAImrB,EAAsBvsB,EAAQif,WAC9BA,OAAqC,IAAxBsN,EAAiC,KAAOA,EAGrDuB,EAAK,IAAI1tB,WACb0tB,EAAGztB,UAAY,WAEX,IAAIsW,EAAOmX,EAAGxtB,OAGVytB,EAAWvqB,SAASmK,cAAc,OACtCogB,EAASxW,MAAMyW,QACX,4EACJD,EAASlgB,UAAY8I,EACrB,IAAIsX,EAAeF,EAAStgB,cAAc,OAC1CjK,SAAS0qB,KAAKngB,YAAYggB,GAG1B,IAAII,EAAOF,EAAaG,UACxBL,EAASM,WAAWC,YAAYP,GAGhC,IAAIQ,EAAYR,EAAStgB,cAAc,SAGnC+gB,EAAmBP,EAAaQ,aAAa,YAAc,GAC3DC,EAAiBT,EAAaQ,aAAa,UAAY,GACvDE,EAAkBV,EAAaQ,aAAa,WAAa,GACzDziB,EAAQmH,WAAWub,IAAmB,KACtCziB,EAASkH,WAAWwb,IAAoB,KACxCC,GAAcF,EAAe7I,MAAM,WAAa,IAAI,IAAM,GAC1DgJ,GAAeF,EAAgB9I,MAAM,WAAa,IAAI,IAAM,GAG5DiJ,EAAcN,EAAiB9C,MAAM,KAAK9vB,IAAIuX,YAC9C4b,EAAUD,EAAYxyB,OACpB,CACI+M,EAAGylB,EAAY,GACfxlB,EAAGwlB,EAAY,GACf9iB,MAAO8iB,EAAY,GACnB7iB,OAAQ6iB,EAAY,IAExBX,EAEFpR,EAAsB,MAAT/Q,EAAgBA,EAAQ+iB,EAAQ/iB,MAC7CgR,EAAwB,MAAV/Q,EAAiBA,EAAS8iB,EAAQ9iB,OAEpDgiB,EAAa1W,MAAMyX,SAAW,UAC9Bf,EAAa9Y,aAAa,QAAS4H,GACnCkR,EAAa9Y,aAAa,SAAU6H,GAGpC,IAAIiS,EAAY,GAChB,GAAIrjB,GAAUA,EAAOtP,OAAQ,CACzB,IAAI0G,EAAO,CACPgJ,MAAO+Q,EACP9Q,OAAQ+Q,GAGZiS,EAAYrjB,EAAOgP,KAAKrB,GAAoB/U,QAAO,SAAS4U,EAAMb,GAC9D,IAAI2W,EAAKpW,EAAmBP,EAAM,GAAIA,EAAM,IAM5C,OALAQ,EAAmBmW,EAAI3W,EAAM,GAAIA,EAAM,GAAIvV,GAC3CksB,EAAGC,gBAAgB,MACgB,IAA/BD,EAAGT,aAAa,YAChBS,EAAGC,gBAAgB,WAEhB/V,EAAO,KAAO8V,EAAGE,UAAY,OACrC,IACHH,EAAY,UAAUlzB,OAAOkzB,EAAU1uB,QAAQ,UAAW,KAAM,YAGpE,IAAI4I,EAAcT,EAAKS,aAAe6T,EAAcD,EAEhDP,EAAcO,EACdN,EAAeD,EAAcrT,EAE7BsU,OAAyC,IAApB/U,EAAKgV,YAA8BhV,EAAKgV,WAE7D2R,EAAc3mB,EAAKC,OAASD,EAAKC,OAAOU,EAAI,GAC5CimB,EAAc5mB,EAAKC,OAASD,EAAKC,OAAOW,EAAI,GAE5CimB,EAAmB3S,EACnB,CACI5Q,MAAO+Q,EACP9Q,OAAQ+Q,GAGZE,EACI,CACIlR,MAAOwQ,EACPvQ,OAAQwQ,GAGZtT,GAGJT,EAAKK,SACL0U,EACM,CAAEpU,EAAGgmB,EAAa/lB,EAAGgmB,GACrB,CACIjmB,EAAG,GACHC,EAAG,KAIbgK,EAAQ5K,EAAKE,KAAO2mB,EAEpBxmB,EAAWL,EAAKK,UAAY,IAAMF,KAAK2W,IAEvCjC,EAAe,CACflU,EAAiB,GAAdmT,EACHlT,EAAkB,GAAfmT,GAGHgQ,EAAc,CACdpjB,EAAGkU,EAAalU,EAAI0T,EAAasS,EACjC/lB,EAAGiU,EAAajU,EAAI0T,EAAcsS,GAGlCE,EAAiB,CAEjB,UACKzzB,OAAOgN,EAAU,KACjBhN,OAAOwhB,EAAalU,EAAG,KACvBtN,OAAOwhB,EAAajU,EAAG,KAG5B,aAAavN,OAAOwhB,EAAalU,EAAG,KAAKtN,OAAOwhB,EAAajU,EAAG,KAChE,SAASvN,OAAOuX,EAAO,KACvB,aAAavX,QAAQwhB,EAAalU,EAAG,KAAKtN,QAAQwhB,EAAajU,EAAG,KAGlE,aAAavN,OAAO0wB,EAAYpjB,EAAG,KAAKtN,OAAO0wB,EAAYnjB,EAAG,MAG9DmmB,EAAqB/mB,EAAKM,MAAQN,EAAKM,KAAKO,WAC5CmmB,EAAmBhnB,EAAKM,MAAQN,EAAKM,KAAKQ,SAE1CmmB,EAAiB,CACjB,SACK5zB,OAAO0zB,GAAsB,EAAI,EAAG,KACpC1zB,OAAO2zB,GAAoB,EAAI,EAAG,KACvC,aACK3zB,OAAO0zB,GAAsB1S,EAAa,EAAG,KAC7ChhB,OAAO2zB,GAAoB1S,EAAc,EAAG,MAIjD4S,EAAc,uDACb7zB,OAAOygB,GACPzgB,OAAO6yB,EAAY,cACnB7yB,OAAO0gB,GACP1gB,OAAO8yB,EAAa,qBACpB9yB,OAAOygB,EAAa,KACpBzgB,OAAO0gB,EAAc,MACrB1gB,OACGkjB,EAAa,qBAAuBA,EAAa,KAAO,GACxD,qLAEHljB,OAAOwyB,EAAYA,EAAU3X,YAAc,GAAI,4BAC/C7a,OAAOyzB,EAAexzB,KAAK,KAAM,sBACjCD,OAAO4zB,EAAe3zB,KAAK,KAAM,QACjCD,OAAOkyB,EAAamB,WACpBrzB,OAAOkzB,EAAW,wBAGvB7tB,EAAQwuB,IAGZ9B,EAAG+B,WAAWhC,OAIlBiC,EAAoB,SAA2BtnB,GAC/C,IAAI4Y,EACJ,IACIA,EAAY,IAAI6C,UAAUzb,EAAIwD,MAAOxD,EAAIyD,QAC3C,MAAOtM,GAGLyhB,EADa5d,SAASmK,cAAc,UACjByV,WAAW,MAAMc,gBAAgB1b,EAAIwD,MAAOxD,EAAIyD,QAGvE,OADAmV,EAAUliB,KAAKilB,IAAI3b,EAAItJ,MAChBkiB,GAIP2O,EAAkB,WAElB,IAAIC,EAAa,CAAEvkB,OAAQA,EAAQnE,OAAQA,GAGvC2oB,EAAkB,SAAyBpN,EAAYzB,GAIvD,OAHAyB,EAAW3N,SAAQ,SAAS8N,GACxB5B,EAAY4O,EAAWhN,EAAUjgB,MAAMqe,EAAW4B,EAAU9jB,SAEzDkiB,GAIP4B,EAAY,SAAmB9jB,EAAMe,GACrC,IAAI4iB,EAAa3jB,EAAK2jB,WAGlBqN,EAAkB,KAMtB,GALArN,EAAW3N,SAAQ,SAAS8N,GACD,WAAnBA,EAAUjgB,OACVmtB,EAAkBlN,MAGtBkN,EAAiB,CAEjB,IAAIC,EAAkB,KACtBtN,EAAW3N,SAAQ,SAAS8N,GACD,WAAnBA,EAAUjgB,OACVotB,EAAkBnN,MAItBmN,IAEAA,EAAgBjxB,KAAKgN,OAASgkB,EAAgBhxB,KAG9C2jB,EAAaA,EAAWvb,QAAO,SAAS0b,GACpC,MAA0B,WAAnBA,EAAUjgB,SAK7B9C,EAAGgwB,EAAgBpN,EAAY3jB,EAAKkiB,aAIxC3hB,KAAKC,UAAY,SAASC,GACtBqjB,EAAUrjB,EAAET,KAAKW,SAAS,SAASC,GAE/BL,KAAKM,YAAY,CAAEzE,GAAIqE,EAAET,KAAK5D,GAAIuE,QAASC,GAAY,CAACA,EAASZ,KAAKyjB,aAI9E,IAAIyN,EAAK,EACLC,EAAK,EACLC,EAAK,EACT,SAASC,EAAkBzb,EAAO5V,EAAMsxB,GACpC,IAAIC,EAAKvxB,EAAK4V,GAAS,IACnB4b,EAAKxxB,EAAK4V,EAAQ,GAAK,IACvB6b,EAAKzxB,EAAK4V,EAAQ,GAAK,IACvB8b,EAAK1xB,EAAK4V,EAAQ,GAAK,IAEvB+b,EAAKJ,EAAKD,EAAE,GAAKE,EAAKF,EAAE,GAAKG,EAAKH,EAAE,GAAKI,EAAKJ,EAAE,GAAKA,EAAE,GACvDM,EAAKL,EAAKD,EAAE,GAAKE,EAAKF,EAAE,GAAKG,EAAKH,EAAE,GAAKI,EAAKJ,EAAE,GAAKA,EAAE,GACvDO,EAAKN,EAAKD,EAAE,IAAME,EAAKF,EAAE,IAAMG,EAAKH,EAAE,IAAMI,EAAKJ,EAAE,IAAMA,EAAE,IAC3DQ,EAAKP,EAAKD,EAAE,IAAME,EAAKF,EAAE,IAAMG,EAAKH,EAAE,IAAMI,EAAKJ,EAAE,IAAMA,EAAE,IAE3DS,EAAKpoB,KAAKC,IAAI,EAAG+nB,EAAKG,GAAMZ,GAAM,EAAMY,GACxCE,EAAKroB,KAAKC,IAAI,EAAGgoB,EAAKE,GAAMX,GAAM,EAAMW,GACxCG,EAAKtoB,KAAKC,IAAI,EAAGioB,EAAKC,GAAMV,GAAM,EAAMU,GAE5C9xB,EAAK4V,GAA4C,IAAnCjM,KAAKC,IAAI,EAAKD,KAAKuK,IAAI,EAAK6d,IAC1C/xB,EAAK4V,EAAQ,GAAwC,IAAnCjM,KAAKC,IAAI,EAAKD,KAAKuK,IAAI,EAAK8d,IAC9ChyB,EAAK4V,EAAQ,GAAwC,IAAnCjM,KAAKC,IAAI,EAAKD,KAAKuK,IAAI,EAAK+d,IAGlD,IAAIC,EAAiB3xB,KAAKT,KAAKC,UAAU,CACrC,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,IAEJ,SAASoyB,EAAiB/pB,GACtB,OAAO7H,KAAKT,KAAKC,UAAUqI,GAAU,MAAQ8pB,EAGjD,SAAS9pB,EAAO8Z,EAAWlV,GACvB,IAAKA,GAAUmlB,EAAiBnlB,GAAS,OAAOkV,EA0ChD,IAxCA,IAAIliB,EAAOkiB,EAAUliB,KACjBuT,EAAIvT,EAAK5C,OAET+kB,EAAMnV,EAAO,GACboV,EAAMpV,EAAO,GACbqV,EAAMrV,EAAO,GACbsV,EAAMtV,EAAO,GACbuV,EAAMvV,EAAO,GAEbwV,EAAMxV,EAAO,GACbyV,EAAMzV,EAAO,GACb0V,EAAM1V,EAAO,GACb2V,EAAM3V,EAAO,GACb4V,EAAM5V,EAAO,GAEb6V,EAAM7V,EAAO,IACb8V,EAAM9V,EAAO,IACb+V,EAAM/V,EAAO,IACbgW,EAAMhW,EAAO,IACbiW,EAAMjW,EAAO,IAEbkW,EAAMlW,EAAO,IACbmW,EAAMnW,EAAO,IACboW,EAAMpW,EAAO,IACbqW,EAAMrW,EAAO,IACbsW,EAAMtW,EAAO,IAEb4I,EAAQ,EACR2N,EAAI,EACJC,EAAI,EACJnQ,EAAI,EACJD,EAAI,EACJue,EAAK,EACLC,EAAK,EACLC,EAAK,EACLC,EAAK,EACLC,EAAK,EACLC,EAAK,EACLC,EAAK,EAEFrc,EAAQrC,EAAGqC,GAAS,EAMvB+b,GALApO,EAAIvjB,EAAK4V,GAAS,KAKTuM,GAJTqB,EAAIxjB,EAAK4V,EAAQ,GAAK,KAIHwM,GAHnB/O,EAAIrT,EAAK4V,EAAQ,GAAK,KAGOyM,GAF7BjP,EAAIpT,EAAK4V,EAAQ,GAAK,KAEiB0M,EAAMC,EAC7CqP,EAAKrO,EAAIf,EAAMgB,EAAIf,EAAMpP,EAAIqP,EAAMtP,EAAIuP,EAAMC,EAC7CiP,EAAKtO,EAAIV,EAAMW,EAAIV,EAAMzP,EAAI0P,EAAM3P,EAAI4P,EAAMC,EAC7C6O,EAAKvO,EAAIL,EAAMM,EAAIL,EAAM9P,EAAI+P,EAAMhQ,EAAIiQ,EAAMC,EAE7CyO,EAAKpoB,KAAKC,IAAI,EAAG+nB,EAAKG,GAAMZ,GAAM,EAAMY,GACxCE,EAAKroB,KAAKC,IAAI,EAAGgoB,EAAKE,GAAMX,GAAM,EAAMW,GACxCG,EAAKtoB,KAAKC,IAAI,EAAGioB,EAAKC,GAAMV,GAAM,EAAMU,GAExC9xB,EAAK4V,GAA4C,IAAnCjM,KAAKC,IAAI,EAAKD,KAAKuK,IAAI,EAAK6d,IAC1C/xB,EAAK4V,EAAQ,GAAwC,IAAnCjM,KAAKC,IAAI,EAAKD,KAAKuK,IAAI,EAAK8d,IAC9ChyB,EAAK4V,EAAQ,GAAwC,IAAnCjM,KAAKC,IAAI,EAAKD,KAAKuK,IAAI,EAAK+d,IAIlD,OAAO/P,EAGX,SAAS3V,EAAO2V,EAAWliB,GACvB,IAAIoyB,EAAapyB,EAAK6M,KAClBA,OAAsB,IAAfulB,EAAwB,UAAYA,EAC3CC,EAAgBryB,EAAK4M,QACrBA,OAA4B,IAAlBylB,GAAmCA,EAC7CvlB,EAAQ9M,EAAK8M,MACbC,EAAS/M,EAAK+M,OACdC,EAAShN,EAAKgN,OAOlB,GAJAA,GAAUA,GAAUmlB,EAAiBnlB,GAAU,KAAOA,GAIjDF,IAAUC,EACX,OAAO3E,EAAO8Z,EAAWlV,GAU7B,GANc,OAAVF,EACAA,EAAQC,EACU,OAAXA,IACPA,EAASD,GAGA,UAATD,EAAkB,CAClB,IAAI0O,EAAczO,EAAQoV,EAAUpV,MAChC0O,EAAezO,EAASmV,EAAUnV,OAClCgH,EAAS,EASb,GAPa,UAATlH,EACAkH,EAASpK,KAAKC,IAAI2R,EAAaC,GACf,YAAT3O,IACPkH,EAASpK,KAAKuK,IAAIqH,EAAaC,IAI/BzH,EAAS,IAAiB,IAAZnH,EACd,OAAOxE,EAAO8Z,EAAWlV,GAG7BF,EAAQoV,EAAUpV,MAAQiH,EAC1BhH,EAASmV,EAAUnV,OAASgH,EAchC,IAXA,IAAIue,EAAcpQ,EAAUpV,MACxBylB,EAAerQ,EAAUnV,OACzB4e,EAAchiB,KAAKgV,MAAM7R,GACzB8e,EAAejiB,KAAKgV,MAAM5R,GAC1BylB,EAAYtQ,EAAUliB,KACtB8L,EAAa,IAAIoZ,kBAAkByG,EAAcC,EAAe,GAChE6G,EAAaH,EAAc3G,EAC3B+G,EAAcH,EAAe3G,EAC7B+G,EAAiBhpB,KAAK6a,KAAkB,GAAbiO,GAC3BG,EAAkBjpB,KAAK6a,KAAmB,GAAdkO,GAEvBG,EAAI,EAAGA,EAAIjH,EAAciH,IAC9B,IAAK,IAAI91B,EAAI,EAAGA,EAAI4uB,EAAa5uB,IAAK,CAWlC,IAVA,IAAImb,EAA6B,GAAvBnb,EAAI81B,EAAIlH,GACdmH,EAAS,EACTC,EAAU,EACVC,EAAe,EACfzP,EAAI,EACJC,EAAI,EACJnQ,EAAI,EACJD,EAAI,EACJ6f,GAAWJ,EAAI,IAAOH,EAEjBQ,EAAKvpB,KAAKib,MAAMiO,EAAIH,GAAcQ,GAAML,EAAI,GAAKH,EAAaQ,IAKnE,IAJA,IAAIC,EAAKxpB,KAAKqT,IAAIiW,GAAWC,EAAK,KAAQN,EACtCQ,GAAWr2B,EAAI,IAAO01B,EACtBY,EAAKF,EAAKA,EAELG,EAAK3pB,KAAKib,MAAM7nB,EAAI01B,GAAaa,GAAMv2B,EAAI,GAAK01B,EAAYa,IAAM,CACvE,IAAIC,EAAK5pB,KAAKqT,IAAIoW,GAAWE,EAAK,KAAQX,EACtChW,EAAIhT,KAAK6J,KAAK6f,EAAKE,EAAKA,GAE5B,GAAI5W,IAAM,GAAKA,GAAK,IAChBmW,EAAS,EAAInW,EAAIA,EAAIA,EAAI,EAAIA,EAAIA,EAAI,GAExB,EAAG,CAGZ,IAAI5Y,EAAMyuB,EAAe,GAFzBe,EAAK,GAAKD,EAAKJ,EAAKZ,KAGpBlf,GAAK0f,EAAS/uB,EACdivB,GAAgBF,EAEZ/uB,EAAM,MACN+uB,EAAUA,EAAS/uB,EAAO,KAG9Bwf,GAAKuP,EAASN,EAAUe,GACxB/P,GAAKsP,EAASN,EAAUe,EAAK,GAC7BlgB,GAAKyf,EAASN,EAAUe,EAAK,GAC7BR,GAAWD,GAM3BhnB,EAAWoM,GAAMqL,EAAIwP,EACrBjnB,EAAWoM,EAAK,GAAKsL,EAAIuP,EACzBjnB,EAAWoM,EAAK,GAAK7E,EAAI0f,EACzBjnB,EAAWoM,EAAK,GAAK9E,EAAI4f,EAEzBhmB,GAAUqkB,EAAkBnZ,EAAIpM,EAAYkB,GAIpD,MAAO,CACHhN,KAAM8L,EACNgB,MAAO6e,EACP5e,OAAQ6e,KAMhB4H,GAAqB,SAA4BlwB,EAAMgN,GAEvD,GAA0C,aAAtChN,EAAKoN,UAAUJ,EAAS,GAAG,GAA/B,CAGAA,GAAU,EAIV,IAAImjB,EAA4D,QAAzCnwB,EAAK+M,UAAWC,GAAU,GAAI,GACrDA,GAAUhN,EAAKoN,UAAUJ,EAAS,EAAGmjB,GAErC,IAAIxiB,EAAO3N,EAAK+M,UAAUC,EAAQmjB,GAClCnjB,GAAU,EAGV,IAAK,IAAIvT,EAAI,EAAGA,EAAIkU,EAAMlU,IACtB,GAA0D,MAAtDuG,EAAK+M,UAAUC,EAAa,GAAJvT,EAAQ02B,GAEhC,OADAnwB,EAAKowB,UAAUpjB,EAAa,GAAJvT,EAAS,EAAG,EAAG02B,IAChC,EAGf,OAAO,IAGPE,GAAW,SAAkB3zB,GAC7B,IAAIsD,EAAO,IAAIuN,SAAS7Q,GAIxB,GAA0B,QAAtBsD,EAAK+M,UAAU,GAAe,OAAO,KAOzC,IALA,IACIW,EACA4iB,EAFAtjB,EAAS,EAGTujB,GAAuB,EAEpBvjB,EAAShN,EAAKyN,aACjBC,EAAS1N,EAAK+M,UAAUC,GAAQ,GAChCsjB,EAAetwB,EAAK+M,UAAUC,EAAS,GAAG,GAAS,EAGrCU,GAAU,OAAUA,GAAU,OAAsB,QAAXA,KAKlD6iB,IACDA,EAAuBL,GAAmBlwB,EAAMgN,EAAQsjB,MAGxDtjB,EAASsjB,EAAetwB,EAAKyN,cAIjCT,GAAUsjB,EAEd,OAAO5zB,EAAKlB,MAAM,EAAGwR,IAGrBwjB,GAAe,SAAsB9yB,GACrC,OAAO,IAAIiB,SAAQ,SAASC,GACxB,IAAIjB,EAAS,IAAIC,WACjBD,EAAO2P,OAAS,WACZ,OAAO1O,EAAQyxB,GAAS1yB,EAAOG,SAAW,OAE9CH,EAAOiQ,kBAAkBlQ,EAAKlC,MAAM,EAAG,aAI3Ci1B,GAAiB,WACjB,OAAQ1vB,OAAO2vB,YACX3vB,OAAO2vB,aACP3vB,OAAO4vB,mBACP5vB,OAAO6vB,gBACP7vB,OAAO8vB,eAGXC,GAAa,SAAoBC,EAAaztB,GAC9C,IAAI0tB,EAAKP,KAET,GAAIO,EAAI,CACJ,IAAIlD,EAAK,IAAIkD,EAEb,OADAlD,EAAGmD,OAAOF,GACHjD,EAAGoD,QAAQ5tB,GAGtB,OAAO,IAAI3D,KAAK,CAACoxB,GAAc,CAC3BxwB,KAAM+C,KAIV6tB,GAAc,WACd,OAAO9qB,KAAK+qB,SACPl4B,SAAS,IACT2vB,OAAO,EAAG,IAGfvqB,GAAe,SAAsB+yB,GACrC,IAAIC,EAAa,IAAI3xB,KAAK,CAAC,IAAK0xB,EAAGn4B,WAAY,OAAQ,CAAEqH,KAAM,2BAC3DgxB,EAAY9N,IAAIC,gBAAgB4N,GAChCzyB,EAAS,IAAI2yB,OAAOD,GAEpBE,EAAQ,GAEZ,MAAO,CACHC,SAAU,aACV5yB,KAAM,SAAczB,EAASI,EAAIk0B,GAC7B,IAAI74B,EAAKq4B,KACTM,EAAM34B,GAAM2E,EAEZoB,EAAO3B,UAAY,SAASC,GACxB,IAAIM,EAAKg0B,EAAMt0B,EAAET,KAAK5D,IACjB2E,IACLA,EAAGN,EAAET,KAAKW,gBACHo0B,EAAMt0B,EAAET,KAAK5D,MAGxB+F,EAAOtB,YACH,CACIzE,GAAIA,EACJuE,QAASA,GAGbs0B,IAGR5yB,UAAW,WACPF,EAAOE,YACP0kB,IAAIK,gBAAgByN,MAK5B1P,GAAY,SAAmBxD,GAC/B,OAAO,IAAI1f,SAAQ,SAASC,EAAS6C,GACjC,IAAIqgB,EAAM,IAAI7T,MACd6T,EAAIxU,OAAS,WACT1O,EAAQkjB,IAEZA,EAAIE,QAAU,SAAS7kB,GACnBsE,EAAOtE,IAEX2kB,EAAI1T,IAAMiQ,MAIduT,GAAQ,SAAeC,GACvB,OAAOA,EAAM7vB,QAAO,SAAS8vB,EAASC,GAClC,OAAOD,EAAQlyB,MAAK,SAAS9B,GACzB,OAAOi0B,IAAOnyB,KAAK1F,MAAMqB,UAAUhC,OAAOy4B,KAAKl0B,SAEpDa,QAAQC,QAAQ,MAGnBqzB,GAAoB,SAA2BtR,EAAQvX,GACvD,OAAO,IAAIzK,SAAQ,SAASC,GACxB,IAAI4B,EAAO,CACPgJ,MAAOmX,EAAOnX,MACdC,OAAQkX,EAAOlX,QAGf8W,EAAMI,EAAOC,WAAW,MAExBsR,EAAU9oB,EAAOgP,KAAKrB,GAAoB3d,KAAI,SAASC,GACvD,OAAO,WACH,OAAO,IAAIsF,SAAQ,SAASC,GACXuzB,GAAiB94B,EAAK,IAAIknB,EAAK/f,EAAMnH,EAAK,GAAIuF,IAC/CA,WAKxBgzB,GAAMM,GAAStyB,MAAK,WAChB,OAAOhB,EAAQ+hB,UAKvByR,GAAoB,SAA2B7R,EAAKtN,GACpDsN,EAAI8R,YACJ9R,EAAI7O,QAAUuB,EAAO,kBACrBsN,EAAI5O,SAAWsB,EAAO,mBACtBsN,EAAI9O,UAAYwB,EAAO,gBACnBA,EAAO,oBAAoBnZ,QAC3BymB,EAAI+R,YAAYrf,EAAO,oBAAoBiW,MAAM,MAErD3I,EAAI2J,UAAYjX,EAAa,KAC7BsN,EAAIgS,YAActf,EAAe,OACjCsN,EAAIiS,YAAcvf,EAAO1I,SAAW,GAGpCkoB,GAAmB,SAA0BlS,GAC7CA,EAAItP,OACJsP,EAAInP,SACJmP,EAAIiS,YAAc,GAqLlBL,GAAmB,CACnBrgB,KAnLW,SAAkByO,EAAK/f,EAAM4I,GACxC,IAAI0I,EAAOD,EAAczI,EAAQ5I,GAC7ByS,EAASpC,EAAgBzH,EAAQ5I,GAIrC,OAHA4xB,GAAkB7R,EAAKtN,GACvBsN,EAAIzO,KAAKA,EAAKjL,EAAGiL,EAAKhL,EAAGgL,EAAKtI,MAAOsI,EAAKrI,QAC1CgpB,GAAiBlS,EAAKtN,IACf,GA8KPkD,QA3Kc,SAAqBoK,EAAK/f,EAAM4I,GAC9C,IAAI0I,EAAOD,EAAczI,EAAQ5I,GAC7ByS,EAASpC,EAAgBzH,EAAQ5I,GACrC4xB,GAAkB7R,EAAKtN,GAEvB,IAAIpM,EAAIiL,EAAKjL,EACTC,EAAIgL,EAAKhL,EACTuS,EAAIvH,EAAKtI,MACT8P,EAAIxH,EAAKrI,OACTipB,EAAQ,SACRC,EAAMtZ,EAAI,EAAKqZ,EACfE,EAAMtZ,EAAI,EAAKoZ,EACfG,EAAKhsB,EAAIwS,EACTyZ,EAAKhsB,EAAIwS,EACTyZ,EAAKlsB,EAAIwS,EAAI,EACb2Z,EAAKlsB,EAAIwS,EAAI,EASjB,OAPAiH,EAAI0S,OAAOpsB,EAAGmsB,GACdzS,EAAI2S,cAAcrsB,EAAGmsB,EAAKJ,EAAIG,EAAKJ,EAAI7rB,EAAGisB,EAAIjsB,GAC9CyZ,EAAI2S,cAAcH,EAAKJ,EAAI7rB,EAAG+rB,EAAIG,EAAKJ,EAAIC,EAAIG,GAC/CzS,EAAI2S,cAAcL,EAAIG,EAAKJ,EAAIG,EAAKJ,EAAIG,EAAIC,EAAID,GAChDvS,EAAI2S,cAAcH,EAAKJ,EAAIG,EAAIjsB,EAAGmsB,EAAKJ,EAAI/rB,EAAGmsB,GAE9CP,GAAiBlS,EAAKtN,IACf,GAoJPgD,MAjJY,SAAmBsK,EAAK/f,EAAM4I,EAAQtO,GAClD,IAAIgX,EAAOD,EAAczI,EAAQ5I,GAC7ByS,EAASpC,EAAgBzH,EAAQ5I,GACrC4xB,GAAkB7R,EAAKtN,GAEvB,IAAIgD,EAAQ,IAAIhI,MAIZ,IAAIwV,IAAIra,EAAOgF,IAAKrN,OAAOud,SAASC,MAAM5W,SAAW5G,OAAOud,SAAS3W,SACjDsO,EAAM8L,YAAc,IAE5C9L,EAAM3I,OAAS,WACX,GAAmB,UAAflE,EAAOwK,IAAiB,CACxB,IAAIuf,EAAKrhB,EAAKtI,MAAQsI,EAAKrI,OACvBD,EAAQ2pB,EAAK,EAAIld,EAAMzM,MAAQyM,EAAMxM,OAAS0pB,EAC9C1pB,EAAS0pB,EAAK,EAAIld,EAAMzM,MAAQ2pB,EAAKld,EAAMxM,OAC3C5C,EAAkB,GAAdoP,EAAMzM,MAAsB,GAARA,EACxB1C,EAAmB,GAAfmP,EAAMxM,OAAwB,GAATA,EAC7B8W,EAAIM,UAAU5K,EAAOpP,EAAGC,EAAG0C,EAAOC,EAAQqI,EAAKjL,EAAGiL,EAAKhL,EAAGgL,EAAKtI,MAAOsI,EAAKrI,aACxE,GAAmB,YAAfL,EAAOwK,IAAmB,CACjC,IAAInD,EAASpK,KAAKuK,IAAIkB,EAAKtI,MAAQyM,EAAMzM,MAAOsI,EAAKrI,OAASwM,EAAMxM,QAChE2pB,EAAS3iB,EAASwF,EAAMzM,MACxB6pB,EAAU5iB,EAASwF,EAAMxM,OACzB6pB,EAAKxhB,EAAKjL,EAAiB,GAAbiL,EAAKtI,MAAuB,GAAT4pB,EACjCG,EAAKzhB,EAAKhL,EAAkB,GAAdgL,EAAKrI,OAAyB,GAAV4pB,EACtC9S,EAAIM,UAAU5K,EAAO,EAAG,EAAGA,EAAMzM,MAAOyM,EAAMxM,OAAQ6pB,EAAIC,EAAIH,EAAQC,QAEtE9S,EAAIM,UACA5K,EACA,EACA,EACAA,EAAMzM,MACNyM,EAAMxM,OACNqI,EAAKjL,EACLiL,EAAKhL,EACLgL,EAAKtI,MACLsI,EAAKrI,QAIbgpB,GAAiBlS,EAAKtN,GACtBnY,KAEJmb,EAAM7H,IAAMhF,EAAOgF,KAsGnB+F,KAnGW,SAAkBoM,EAAK/f,EAAM4I,GACxC,IAAI0I,EAAOD,EAAczI,EAAQ5I,GAC7ByS,EAASpC,EAAgBzH,EAAQ5I,GACrC4xB,GAAkB7R,EAAKtN,GAEvB,IAAIc,EAAWvD,EAAepH,EAAO2K,SAAUvT,GAC3CwT,EAAa5K,EAAO4K,YAAc,aAClCC,EAAa7K,EAAO6K,YAAc,SAClCC,EAAY9K,EAAO8K,WAAa,OAUpC,OARAqM,EAAIiT,KAAO,GACNj6B,OAAO0a,EAAY,KACnB1a,OAAOwa,EAAU,OACjBxa,OAAOya,GACZuM,EAAIrM,UAAYA,EAChBqM,EAAIkT,SAASrqB,EAAO+K,KAAMrC,EAAKjL,EAAGiL,EAAKhL,GAEvC2rB,GAAiBlS,EAAKtN,IACf,GAkFPqB,KAzDW,SAAkBiM,EAAK/f,EAAM4I,GACxC,IAAI0I,EAAOD,EAAczI,EAAQ5I,GAC7ByS,EAASpC,EAAgBzH,EAAQ5I,GACrC4xB,GAAkB7R,EAAKtN,GAEvBsN,EAAI8R,YAEJ,IAAI1qB,EAAS,CACTd,EAAGiL,EAAKjL,EACRC,EAAGgL,EAAKhL,GAGR0G,EAAS,CACT3G,EAAGiL,EAAKjL,EAAIiL,EAAKtI,MACjB1C,EAAGgL,EAAKhL,EAAIgL,EAAKrI,QAGrB8W,EAAI0S,OAAOtrB,EAAOd,EAAGc,EAAOb,GAC5ByZ,EAAImT,OAAOlmB,EAAO3G,EAAG2G,EAAO1G,GAE5B,IAAI4I,EAAIM,EAAgB,CACpBnJ,EAAG2G,EAAO3G,EAAIc,EAAOd,EACrBC,EAAG0G,EAAO1G,EAAIa,EAAOb,IAGrBmJ,EAAI,IAAO5J,KAAKuK,IAAIpQ,EAAKgJ,MAAOhJ,EAAKiJ,QAEzC,IAAsD,IAAlDL,EAAO0L,eAAeG,QAAQ,eAAuB,CACrD,IAAIC,EAA0BzF,EAAeC,EAAGO,GAC5CkF,EAAmBtF,EAAUlI,EAAQuN,GACrCE,EAAcjF,EAAaxI,EAAQ,EAAGwN,GACtCE,EAAclF,EAAaxI,GAAS,EAAGwN,GAE3CoL,EAAI0S,OAAO7d,EAAYvO,EAAGuO,EAAYtO,GACtCyZ,EAAImT,OAAO/rB,EAAOd,EAAGc,EAAOb,GAC5ByZ,EAAImT,OAAOre,EAAYxO,EAAGwO,EAAYvO,GAE1C,IAAoD,IAAhDsC,EAAO0L,eAAeG,QAAQ,aAAqB,CACnD,IAAIM,EAAwB9F,EAAeC,GAAIO,GAC3CuF,EAAiB3F,EAAUrC,EAAQ+H,GACnCE,EAAYtF,EAAa3C,EAAQ,EAAGgI,GACpCE,EAAYvF,EAAa3C,GAAS,EAAGgI,GAEzC+K,EAAI0S,OAAOxd,EAAU5O,EAAG4O,EAAU3O,GAClCyZ,EAAImT,OAAOlmB,EAAO3G,EAAG2G,EAAO1G,GAC5ByZ,EAAImT,OAAOhe,EAAU7O,EAAG6O,EAAU5O,GAItC,OADA2rB,GAAiBlS,EAAKtN,IACf,GASPmD,KAhFW,SAAkBmK,EAAK/f,EAAM4I,GACxC,IAAI6J,EAASpC,EAAgBzH,EAAQ5I,GACrC4xB,GAAkB7R,EAAKtN,GACvBsN,EAAI8R,YAEJ,IAAIjgB,EAAShJ,EAAOgJ,OAAOhZ,KAAI,SAASiZ,GACpC,MAAO,CACHxL,EAAG2J,EAAe6B,EAAMxL,EAAGrG,EAAM,EAAG,SACpCsG,EAAG0J,EAAe6B,EAAMvL,EAAGtG,EAAM,EAAG,cAI5C+f,EAAI0S,OAAO7gB,EAAO,GAAGvL,EAAGuL,EAAO,GAAGtL,GAElC,IADA,IAAImJ,EAAImC,EAAOtY,OACNL,EAAI,EAAGA,EAAIwW,EAAGxW,IACnB8mB,EAAImT,OAAOthB,EAAO3Y,GAAGoN,EAAGuL,EAAO3Y,GAAGqN,GAItC,OADA2rB,GAAiBlS,EAAKtN,IACf,IAgEP0gB,GAAoB,SAA2B/U,GAC/C,IAAI3I,EAAQjV,SAASmK,cAAc,UAKnC,OAJA8K,EAAMzM,MAAQoV,EAAUpV,MACxByM,EAAMxM,OAASmV,EAAUnV,OACfwM,EAAM2K,WAAW,MACvByB,aAAazD,EAAW,EAAG,GACxB3I,GAGP2d,GAAiB,SAAwBl2B,EAAMm2B,GAC/C,IAAIr2B,EAAU0P,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,GAClF,OAAO,IAAIvO,SAAQ,SAASC,EAAS6C,GAEjC,IAAK/D,IAAS0rB,EAAU1rB,GACpB,OAAO+D,EAAO,CAAEE,OAAQ,oBAAqBjE,KAAMA,IAGvD,IAAIo2B,EAAiBt2B,EAAQs2B,eACzB5I,EAAmB1tB,EAAQ0tB,iBAC3B6I,EAAkBv2B,EAAQu2B,gBAC1BjK,EAAoBtsB,EAAQssB,kBAG5B5jB,EAAO2tB,EAAa3tB,KACpB1F,EAAOqzB,EAAarzB,KACpBsE,EAAS+uB,EAAa/uB,OACtBsE,EAASyqB,EAAazqB,OACtB4qB,EAASH,EAAaG,OAGtB1lB,EACAulB,EAAa5d,OAAS4d,EAAa5d,MAAM3H,YACnCjI,KAAKC,IAAI,EAAGD,KAAKuK,IAAI,EAAGijB,EAAa5d,MAAM3H,cAC3C,KAGN2lB,EAAsBD,GAAUA,EAAOtJ,QACvCA,EAAkC,OAAxBuJ,EAA+B,KAAOA,EAAsB,IAGtE1zB,EAAQyzB,GAAUA,EAAOzzB,MAAS,KAGlCkc,EAAcuX,GAAUA,EAAOvX,YAAe,KAG9C4D,EAAa,IAGb7f,GAA+B,iBAAfA,EAAKgJ,OAA6C,iBAAhBhJ,EAAKiJ,QACvD4W,EAAWznB,KAAK,CAAE2H,KAAM,SAAU7D,KAAM8D,IAIxCsE,GAA4B,KAAlBA,EAAOhL,QACjBumB,EAAWznB,KAAK,CAAE2H,KAAM,SAAU7D,KAAMoI,IAI5C,IAAIovB,EAAkB,SAAyB7I,GAC3C,IAAI8I,EAAeJ,EAAkBA,EAAgB1I,GAAQA,EAC7D1sB,QAAQC,QAAQu1B,GAAcv0B,KAAKhB,IAInC2rB,EAAS,SAAgB3L,EAAWphB,GACpC,IAAImjB,EAASgT,GAAkB/U,GAC3BwV,EAAiBhrB,EAAOtP,OAASm4B,GAAkBtR,EAAQvX,GAAUuX,EACzEhiB,QAAQC,QAAQw1B,GAAgBx0B,MAAK,SAAS+gB,GAC1CsK,EAAatK,EAAQnjB,EAAS0tB,GACzBtrB,MAAK,SAASyrB,GAKX,GAHA9B,EAAc5I,GAGVmT,EAAgB,OAAOI,EAAgB7I,GAG3CmF,GAAa9yB,GAAMkC,MAAK,SAASy0B,GAEX,OAAdA,IACAhJ,EAAO,IAAI1rB,KAAK,CAAC00B,EAAWhJ,EAAK7vB,MAAM,KAAM,CACzC+E,KAAM8qB,EAAK9qB,QAKnB2zB,EAAgB7I,SAGvB/mB,MAAM7C,OAKnB,GAAI,MAAM7F,KAAK8B,EAAK6C,OAAkB,OAATA,EACzB,OAAO6qB,EAAQ1tB,EAAMwI,EAAMkD,EAAQ,CAAEqT,WAAYA,IAAc7c,MAAK,SAASuU,GACzEvV,EAAQkyB,GAAW3c,EAAM,qBAKjC,IAAIkK,EAAMoF,IAAIC,gBAAgBhmB,GAG9BmkB,GAAUxD,GACLze,MAAK,SAASqW,GAEXwN,IAAIK,gBAAgBzF,GAGpB,IAAIO,EAAYgL,EAAiB3T,EAAO3H,EAAapI,EAAM,CACvD4jB,kBAAmBA,EACnBrN,WAAYA,IAIZ6X,EAAe,CACf5J,QAASA,EACTnqB,KAAMA,GAAQ7C,EAAK6C,MAIvB,IAAK8f,EAAWvmB,OACZ,OAAOywB,EAAO3L,EAAW0V,GAI7B,IAAIz1B,EAASP,GAAaivB,GAC1B1uB,EAAOC,KACH,CACIuhB,WAAYA,EACZzB,UAAWA,IAGf,SAASthB,GAELitB,EAAO+C,EAAkBhwB,GAAWg3B,GAGpCz1B,EAAOE,cAEX,CAAC6f,EAAUliB,KAAKyjB,YAGvB7b,MAAM7C,OA2FnB,SAAS+M,GAAYzT,GACjB5B,KAAKsV,QAAU1T,EAGnB,SAAS2T,GAAgBC,GACrB,IAAIC,EAAOC,EAEX,SAASC,EAAKC,EAAKC,GACf,OAAO,IAAIrQ,SAAQ,SAASC,EAAS6C,GACjC,IAAIwN,EAAU,CACVF,IAAKA,EACLC,IAAKA,EACLpQ,QAASA,EACT6C,OAAQA,EACR5G,KAAM,MAGNgU,EACAA,EAAOA,EAAKhU,KAAOoU,GAEnBL,EAAQC,EAAOI,EACfC,EAAOH,EAAKC,OAKxB,SAASE,EAAOH,EAAKC,GACjB,IACI,IAAIlR,EAAS6Q,EAAII,GAAKC,GAClBjU,EAAQ+C,EAAO/C,MACfoU,EAAepU,aAAiByT,GACpC7P,QAAQC,QAAQuQ,EAAepU,EAAM0T,QAAU1T,GAAO6E,MAClD,SAASoP,GACDG,EACAD,EAAO,OAAQF,GAInBI,EAAOtR,EAAOhD,KAAO,SAAW,SAAUkU,MAE9C,SAAShU,GACLkU,EAAO,QAASlU,MAG1B,MAAOA,GACLoU,EAAO,QAASpU,IAIxB,SAASoU,EAAO7O,EAAMxF,GAClB,OAAQwF,GACJ,IAAK,SACDqO,EAAMhQ,QAAQ,CACV7D,MAAOA,EACPD,MAAM,IAEV,MAEJ,IAAK,QACD8T,EAAMnN,OAAO1G,GACb,MAEJ,QACI6T,EAAMhQ,QAAQ,CACV7D,MAAOA,EACPD,MAAM,KAKlB8T,EAAQA,EAAM/T,MAGVqU,EAAON,EAAMG,IAAKH,EAAMI,KAExBH,EAAO,KAIf1V,KAAKkW,QAAUP,EAEW,mBAAfH,EAAIW,SACXnW,KAAKmW,YAASnC,GA0jBtB,SAASnT,GAAeC,EAAKR,GACzB,OAAOW,GAAgBH,IAAQgB,GAAsBhB,EAAKR,IAAMsC,KAuBpE,SAAS3B,GAAgBH,GACrB,GAAIC,MAAMC,QAAQF,GAAM,OAAOA,EAWnC,SAASgB,GAAsBhB,EAAKR,GAChC,IAAIgB,EAAO,GACPC,GAAK,EACLC,GAAK,EACLH,OAAK2S,EAET,IACI,IAAK,IAAiC5S,EAA7BR,EAAKE,EAAII,OAAOC,cAAmBI,GAAMH,EAAKR,EAAGc,QAAQC,QAC9DL,EAAK7B,KAAK2B,EAAGQ,QAETtB,GAAKgB,EAAKX,SAAWL,GAH4CiB,GAAK,IAKhF,MAAOM,GACLL,GAAK,EACLH,EAAKQ,EACP,QACE,IACSN,GAAsB,MAAhBX,EAAW,QAAWA,EAAW,SAC9C,QACE,GAAIY,EAAI,MAAMH,GAItB,OAAOC,EAmBX,SAASsB,KACL,MAAM,IAAID,UAAU,wDAroBF,mBAAXzB,QAAyBA,OAAOkV,gBACvCb,GAAgBnT,UAAUlB,OAAOkV,eAAiB,WAC9C,OAAOpW,OAIfuV,GAAgBnT,UAAUV,KAAO,SAASmU,GACtC,OAAO7V,KAAKkW,QAAQ,OAAQL,IAGhCN,GAAgBnT,UAAUiU,MAAQ,SAASR,GACvC,OAAO7V,KAAKkW,QAAQ,QAASL,IAGjCN,GAAgBnT,UAAU+T,OAAS,SAASN,GACxC,OAAO7V,KAAKkW,QAAQ,SAAUL,IA6yClC,IAAIwH,GAAc,CAAC,IAAK,IAAK,OAAQ,MAAO,QAAS,SAAU,QAAS,UAEpEC,GAAqB,SAA4B1b,GACjD,MAAwB,iBAAVA,GAAsB,IAAIa,KAAKb,GAAS4V,WAAW5V,GAAS,IAAMA,GAIhF2b,GAAgB,SAAuBtN,GACvC,IAAIuN,EAAU3c,GAAeoP,EAAQ,GACjC7I,EAAOoW,EAAQ,GACf9N,EAAQ8N,EAAQ,GAEhB7E,EAAOjJ,EAAMuJ,OACX,GACAoE,GAAYxU,QAAO,SAAS4U,EAAMC,GAE9B,OADAD,EAAKC,GAAQJ,GAAmB5N,EAAMgO,IAC/BD,IACR,IAET,MAAO,CACHrW,EACAjF,OAAOmJ,OACH,CACIqS,OAAQ,GAEZjO,EACAiJ,KAKRsO,GAAe,SAAsB1iB,GACrC,OAAO,IAAIiB,SAAQ,SAASC,EAAS6C,GACjC,IAAIooB,EAAe,IAAI5b,MACvB4b,EAAazb,IAAMqV,IAAIC,gBAAgBhmB,GAGvC,IAAI62B,EAAU,WACV,IAAI/qB,EAAQqgB,EAAa3b,aACrBzE,EAASogB,EAAa1b,cACZ3E,GAASC,IAGvBga,IAAIK,gBAAgB+F,EAAazb,KACjComB,cAAcC,GACd71B,EAAQ,CAAE4K,MAAOA,EAAOC,OAAQA,MAGpCogB,EAAa7H,QAAU,SAAShnB,GAC5ByoB,IAAIK,gBAAgB+F,EAAazb,KACjComB,cAAcC,GACdhzB,EAAOzG,IAGX,IAAIy5B,EAAaC,YAAYH,EAAS,GAEtCA,QAOc,oBAAXxzB,aAAqD,IAApBA,OAAOC,WAC1CspB,kBAAkB/uB,UAAUgvB,QAC7BjvB,OAAOkvB,eAAeF,kBAAkB/uB,UAAW,SAAU,CACzDR,MAAO,SAAe0C,EAAI8C,EAAMmqB,GAC5B,IAAI/J,EAASxnB,KACb0pB,YAAW,WAKP,IAJA,IAAI8H,EAAUhK,EAAOiK,UAAUrqB,EAAMmqB,GAASxB,MAAM,KAAK,GACrD2B,EAASC,KAAKH,GACdrY,EAAQuY,EAAO/wB,OACf4C,EAAO,IAAIquB,WAAWzY,GACnBA,KACH5V,EAAK4V,GAASuY,EAAOG,WAAW1Y,GAEpC7U,EAAG,IAAIkC,KAAK,CAACjD,GAAO,CAAE6D,KAAMA,GAAQ,sBAOxD,IAAIo0B,GAA8B,oBAAX5zB,aAAqD,IAApBA,OAAOC,SAC3D4zB,GAAQD,IAAa,mBAAmB/4B,KAAKunB,UAAUC,aAAeriB,OAAO8zB,SAK7E52B,GAAS,SAAgBC,GACzB,IAAIC,EAAYD,EAAKC,UACjBC,EAAQF,EAAKE,MACbC,EAAOD,EAAMC,KACby2B,EAAQ12B,EAAM02B,MACdC,EAAkB32B,EAAM22B,gBACxBv2B,EAASJ,EAAMI,OAOfw2B,EAAiB,CAAC,OAAQ,SAAU,SAAU,SAAU,UAExDC,EAAuB,SAA8BC,GACrD,OAAO,SAAS1U,EAAW9iB,EAAM8B,GAC7B,OAAOghB,EAAU9iB,EAAMw3B,EAAiBA,EAAe11B,GAAYA,KAIvE21B,EAAgB,SAAuBjvB,GACvC,OACyB,OAArBA,EAAKS,aACa,IAAlBT,EAAKK,UACS,IAAdL,EAAKE,MACLF,EAAKC,QACa,KAAlBD,EAAKC,OAAOU,GACM,KAAlBX,EAAKC,OAAOW,GACZZ,EAAKM,OACoB,IAAzBN,EAAKM,KAAKO,aACa,IAAvBb,EAAKM,KAAKQ,UAOlB7I,EAAU,yBAAyB,SAASkB,EAAqBX,GAC7D,IAAIQ,EAAQR,EAAMQ,MAClB,OAAO,IAAIP,SAAQ,SAASC,GAExBA,GAASM,EAAM,mBAIvB,IAAIk2B,EAAsB,SAA6Bl2B,EAAOxB,EAAMrE,GAChE,OAAO,IAAIsF,SAAQ,SAASC,GACxB,IACKM,EAAM,8BACP7F,EAAK8sB,WACJ3nB,EAAOd,KACPgI,EAAQhI,GAET,OAAOkB,GAAQ,GAInBwhB,GAAa1iB,GACRkC,MAAK,WACF,IAAIyxB,EAAKnyB,EAAM,oCACf,GAAImyB,EAAI,CACJ,IAAIgE,EAAehE,EAAG3zB,GACtB,GAAoB,MAAhB23B,EAEA,OAAOC,cAAa,GAExB,GAA4B,kBAAjBD,EACP,OAAOz2B,EAAQy2B,GAEnB,GAAiC,mBAAtBA,EAAaz1B,KACpB,OAAOy1B,EAAaz1B,KAAKhB,GAIjCA,GAAQ,MAEX0F,OAAM,SAAStJ,GACZ4D,GAAQ,UAoPxB,OA/OAT,EAAU,mBAAmB,SAAS9E,EAAM4F,GACxC,IAAIC,EAAQD,EAAMC,MACdwB,EAAWzB,EAAMyB,SAChBxB,EAAM,8BAEX7F,EAAK8F,OAAO,kBAAkB,WAC1B,OAAO,IAAIR,SAAQ,SAASC,EAAS6C,GACjCf,EACI,yBACA,CACIxB,MAAO7F,EAAKP,GACZO,KAAMA,EACNk8B,QAAS32B,EACT42B,QAAS/zB,IAGb,YAOhBtD,EAAU,kBAAkB,SAAST,EAAM4B,GACvC,IAAIJ,EAAQI,EAAMJ,MACd7F,EAAOiG,EAAMjG,KACjB,OAAO,IAAIsF,SAAQ,SAASC,GACxBw2B,EAAoBl2B,EAAOxB,EAAMrE,GAAMuG,MAAK,SAAS61B,GAEjD,IAAKA,EAAiB,OAAO72B,EAAQlB,GAGrC,IAAIg4B,EAAW,GAGXx2B,EAAM,kDACNw2B,EAAS98B,MAAK,WACV,OAAO,IAAI+F,SAAQ,SAASC,GACxBA,EAAQ,CACJlD,KAAMwD,EAAM,8CACZxB,KAAMA,UAOlBwB,EAAM,iDACNw2B,EAAS98B,MAAK,SAAS4nB,EAAW9iB,EAAM8B,GACpC,OAAO,IAAIb,SAAQ,SAASC,GACxB4hB,EAAU9iB,EAAM8B,GAAUI,MAAK,SAASlC,GACpC,OAAOkB,EAAQ,CACXlD,KAAMwD,EAAM,6CAEZxB,KAAMA,aAQ1B,IAAIi4B,EAAqBz2B,EAAM,iCAAmC,GAClE41B,EAAMa,GAAoB,SAAS5mB,EAAKsiB,GACpC,IAAIuE,EAAgBX,EAAqB5D,GACzCqE,EAAS98B,MAAK,SAAS4nB,EAAW9iB,EAAM8B,GACpC,OAAO,IAAIb,SAAQ,SAASC,GACxBg3B,EAAcpV,EAAW9iB,EAAM8B,GAAUI,MAAK,SAASlC,GACnD,OAAOkB,EAAQ,CAAElD,KAAMqT,EAAKrR,KAAMA,gBAOlD,IAAIu2B,EAAsB/0B,EAAM,sCAC5B22B,EAAc32B,EAAM,2CACpBwrB,EAAkC,OAAxBuJ,EAA+B,KAAOA,EAAsB,IACtE1zB,EAAOrB,EAAM,wCACb42B,EACA52B,EAAM,0CAA4C81B,EAGtD37B,EAAK4M,YACD,SACA,CACI1F,KAAMA,EACNmqB,QAASA,EACTqL,OAAQD,IAGZ,GAIJ,IAAItV,EAAY,SAAmB9iB,EAAM8B,GACrC,OAAO,IAAIb,SAAQ,SAASC,EAAS6C,GACjC,IAAIu0B,EAAmB16B,OAAOmJ,OAAO,GAAIjF,GAEzClE,OAAOmX,KAAKujB,GACPlxB,QAAO,SAASmxB,GACb,MAAuB,SAAhBA,KAEVvjB,SAAQ,SAASujB,IAEiC,IAA3CH,EAAiB7gB,QAAQghB,WAClBD,EAAiBC,MAGpC,IAAIhtB,EAAS+sB,EAAiB/sB,OAC1BitB,EAAOF,EAAiBE,KACxBlC,EAASgC,EAAiBhC,OAC1B9tB,EAAO8vB,EAAiB9vB,KACxBpB,EAASkxB,EAAiBlxB,OAC1BsE,EAAS4sB,EAAiB5sB,OAE1ByqB,EAAe,CACf5d,MAAO,CACH3H,YAAa4nB,EAAOA,EAAK5nB,YAAc,MAG3C0lB,OACIA,IACCA,EAAOzzB,MACsB,iBAAnByzB,EAAOtJ,SACdsJ,EAAOvX,YACL,CACIlc,KAAMyzB,EAAOzzB,KACbmqB,QAC8B,iBAAnBsJ,EAAOtJ,QACS,IAAjBsJ,EAAOtJ,QACP,KACVjO,WACIuX,EAAOvX,YACPvd,EACI,gDAEJ,WAERiO,EACV3M,KACIyI,IAAWA,EAAOzI,KAAKgJ,OAASP,EAAOzI,KAAKiJ,QACtCnO,OAAOmJ,OACH,CACI8E,KAAMN,EAAOM,KACbD,QAASL,EAAOK,SAEpBL,EAAOzI,WAEX2M,EACVjH,KACIA,IAASivB,EAAcjvB,GACjB5K,OAAOmJ,OACH,GAEAyB,QAEJiH,EACV/D,OAAQA,GAAUA,EAAOtP,OAASsP,EAAOhQ,IAAIsd,IAAiB,GAC9D5R,OAAQA,GAGZ,GAAI+uB,EAAaG,OAAQ,CAErB,IAAImC,IAAiBnC,EAAOzzB,MAEtByzB,EAAOzzB,OAAS7C,EAAK6C,KAIvB61B,EAAmB,WAAWx6B,KAAK8B,EAAK6C,MACxC81B,EACmB,OAAnBrC,EAAOtJ,SAED0L,GAAoC,WAAhBP,EAc9B,KARIhC,EAAarzB,MACbqzB,EAAa3tB,MACb2tB,EAAa/uB,QACbqxB,GACAE,GAIsB,OAAOz3B,EAAQlB,GAG7C,IAAIF,EAAU,CACV0tB,iBAAkBhsB,EAAM,0CACxB60B,gBAAiB70B,EAAM,yCACvB4qB,kBAAmB5qB,EAAM,2CACzB40B,eAAgB50B,EACZ,gDAIR00B,GAAel2B,EAAMm2B,EAAcr2B,GAC9BoC,MAAK,SAASyrB,GAEX,IAAIiL,EAAMvB,EACN1J,EAEApC,EACIvrB,EAAKhC,KACLytB,EAAuBkC,EAAK9qB,QAIpC3B,EAAQ03B,MAEXhyB,MAAM7C,OAKf80B,EAAkBb,EAASt8B,KAAI,SAASuiB,GACxC,OAAOA,EAAO6E,EAAW9iB,EAAMrE,EAAKoG,kBAIxCd,QAAQe,IAAI62B,GAAiB32B,MAAK,SAAS42B,GAEvC53B,EACqB,IAAjB43B,EAAM18B,QAAkC,OAAlB08B,EAAM,GAAG96B,KAEzB86B,EAAM,GAAG94B,KAET84B,eAQnB,CACHh5B,QAAS,CACLi5B,oBAAqB,EAAC,EAAMp4B,EAAKyC,SAGjC41B,0BAA2B,CAAC,KAAMr4B,EAAKoE,UAGvCk0B,6BAA8B,CAAC,KAAMt4B,EAAKsE,QAG1Ci0B,4BAA6B,CAAC,KAAMv4B,EAAKgE,KAGzCw0B,mCAAoC,EAAC,EAAMx4B,EAAKyC,SAGhDg2B,+BAAgC,CAAC,KAAMz4B,EAAK+G,OAG5C2xB,gCAAiC,CAAC,SAAU14B,EAAKsE,QAMjDq0B,uBAAwB,CAAC,KAAM34B,EAAKmH,QAGpCyxB,qCAAsC,EAAC,EAAM54B,EAAKyC,SAGlDo2B,kCAAmC,CAAC,KAAM74B,EAAKsE,QAG/Cw0B,sCAAuC,EAAC,EAAO94B,EAAKyC,SAGpDs2B,mCAAoC,CAAC,YAAa/4B,EAAKsE,QAGvD00B,+BAAgC,CAAC,KAAMh5B,EAAKoE,UAG5C60B,8BAA+B,CAAC,KAAMj5B,EAAKoE,UAG3C80B,gCAAiC,CAC7B5C,IAAaC,GAAQ,SAAc,KACnCv2B,EAAKgE,KAITm1B,oCAAqC,CAAC,KAAMn5B,EAAKsE,WAU7D,OAJIgyB,IACA3zB,SAASC,cAAc,IAAIC,YAAY,wBAAyB,CAAEC,OAAQlD,MAGvEA,GAtsHiBmD,wBCInB,SAASrI,GACd,aAEA,IAAI0+B,EAAS,SAAgB18B,GACzB,OAAOA,aAAiB28B,aAGxBC,EAAc,SAAqBC,GACnC,IAAIC,EAAU3qB,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,GAC9E4qB,EAAU5qB,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,GAE9E6qB,EAAQz8B,OAAOmJ,OAAO,GAAImzB,GAG1BI,EAAc,GACdC,EAAgB,GAmBhBC,EAAuB,WAEvB,IAAI3R,EAAQ,GAAGhtB,OAAO0+B,GAGtBA,EAAcn+B,OAAS,EAGvBysB,EAAM7T,SAAQ,SAASxU,GACnB,IAAIqC,EAAOrC,EAAKqC,KACZ7D,EAAOwB,EAAKxB,KAChBgE,EAASH,EAAM7D,OAKnBgE,EAAW,SAAkBH,EAAM7D,EAAMy7B,IAErCA,GAAen3B,SAASqc,QAMxB+a,EAAe73B,IACf63B,EAAe73B,GAAM7D,GAIzBs7B,EAAYp/B,KAAK,CACb2H,KAAMA,EACN7D,KAAMA,KAZNu7B,EAAcr/B,KAAK,CAAE2H,KAAMA,EAAM7D,KAAMA,KAgB3CwC,EAAQ,SAAem5B,GAEvB,IADA,IAAIC,EAEIC,EAAOrrB,UAAUpT,OAAQ0+B,EAAO,IAAIt+B,MAAMq+B,EAAO,EAAIA,EAAO,EAAI,GAAIE,EAAO,EAC/EA,EAAOF,EACPE,IAEAD,EAAKC,EAAO,GAAKvrB,UAAUurB,GAE/B,OAAOC,EAAaL,IACbC,EAAgBI,GAAcL,GAAK5X,MAAM6X,EAAeE,GACzD,MAGNG,EAAM,CACNC,SAlEW,WACX,OAAOt9B,OAAOmJ,OAAO,GAAIszB,IAkEzBc,mBA9DqB,WAErB,IAAItS,EAAQ,GAAGhtB,OAAOy+B,GAKtB,OAFAA,EAAYl+B,OAAS,EAEdysB,GAwDP2R,qBAAsBA,EACtBx3B,SAAUA,EACVxB,MAAOA,GAGPw5B,EAAe,GACnBb,EAAQnlB,SAAQ,SAASxT,GACrBw5B,EAAep9B,OAAOmJ,OAAO,GAAIvF,EAAM64B,GAAQ,GAAIW,MAGvD,IAAIN,EAAiB,GAKrB,OAJAN,EAAQplB,SAAQ,SAASrS,GACrB+3B,EAAiB98B,OAAOmJ,OAAO,GAAIpE,EAAOK,EAAUxB,EAAO64B,GAAQ,GAAIK,MAGpEO,GAGPnO,EAAiB,SAAwBxkB,EAAK8yB,EAAUC,GAC9B,mBAAfA,EAIXz9B,OAAOkvB,eAAexkB,EAAK8yB,EAAUx9B,OAAOmJ,OAAO,GAAIs0B,IAHnD/yB,EAAI8yB,GAAYC,GAMpBjE,EAAQ,SAAe9uB,EAAKvI,GAC5B,IAAK,IAAIsR,KAAO/I,EACPA,EAAIgzB,eAAejqB,IAIxBtR,EAAGsR,EAAK/I,EAAI+I,KAIhBkqB,EAAe,SAAsBF,GACrC,IAAI/yB,EAAM,GAIV,OAHA8uB,EAAMiE,GAAY,SAASD,GACvBtO,EAAexkB,EAAK8yB,EAAUC,EAAWD,OAEtC9yB,GAGPwM,EAAO,SAAcqD,EAAMna,GAC3B,IAAIX,EAAQmS,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,KAChF,GAAc,OAAVnS,EACA,OAAO8a,EAAKoW,aAAavwB,IAASma,EAAKqjB,aAAax9B,GAExDma,EAAKlD,aAAajX,EAAMX,IAGxB6X,EAAK,6BACLumB,EAAc,CAAC,MAAO,QAEtBC,EAAe,SAAsBtmB,GACrC,OAAOqmB,EAAYE,SAASvmB,IAG5B3H,EAAgB,SAAuB2H,EAAK1H,GAC5C,IAAIkuB,EAAapsB,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,GAC5D,iBAAd9B,IACPkuB,EAAaluB,EACbA,EAAY,MAEhB,IAAIZ,EAAU4uB,EAAatmB,GACrB9R,SAAS+R,gBAAgBH,EAAIE,GAC7B9R,SAASmK,cAAc2H,GAW7B,OAVI1H,IACIguB,EAAatmB,GACbN,EAAKhI,EAAS,QAASY,GAEvBZ,EAAQY,UAAYA,GAG5B0pB,EAAMwE,GAAY,SAAS59B,EAAMX,GAC7ByX,EAAKhI,EAAS9O,EAAMX,MAEjByP,GAGPe,EAAc,SAAqBguB,GACnC,OAAO,SAASC,EAAOlnB,QACE,IAAVA,GAAyBinB,EAAOE,SAASnnB,GAChDinB,EAAOG,aAAaF,EAAOD,EAAOE,SAASnnB,IAE3CinB,EAAOhuB,YAAYiuB,KAK3BzuB,EAAkB,SAAyBwuB,EAAQ3W,GACnD,OAAO,SAAS5iB,EAAMsS,GAOlB,YANqB,IAAVA,EACPsQ,EAAW+W,OAAOrnB,EAAO,EAAGtS,GAE5B4iB,EAAWhqB,KAAKoH,GAGbA,IAIX4c,EAAkB,SAAyB2c,EAAQ3W,GACnD,OAAO,SAAS5iB,GASZ,OAPA4iB,EAAW+W,OAAO/W,EAAW3N,QAAQjV,GAAO,GAGxCA,EAAKwK,QAAQqhB,YACb0N,EAAOzN,YAAY9rB,EAAKwK,SAGrBxK,IAIX6N,EACyB,oBAAX9M,aAAqD,IAApBA,OAAOC,SAEtD2zB,EAAY,WACZ,OAAO9mB,GAIP+rB,EACA,aAFcjF,IAAcxpB,EAAc,OAAS,IAG7C,SAASuhB,GACL,OAAOA,EAAG+M,SAAS3/B,QAEvB,SAAS4yB,GACL,OAAOA,EAAGnY,WAAWza,QAG/B+/B,EAAc,SAAqBC,EAAalX,EAAY5V,EAAQ8D,GACpE,IAAIiB,EAAO/E,EAAO,IAAM8sB,EAAY/nB,KAChCC,EAAMhF,EAAO,IAAM8sB,EAAY9nB,IAC/BC,EAAQF,EAAO+nB,EAAYtwB,MAC3B0I,EAASF,EAAM8nB,EAAYrwB,QAAUqH,EAAM,IAAM,GAEjDgB,EAAO,CAEPtH,QAASlP,OAAOmJ,OAAO,GAAIq1B,GAG3Bvc,MAAO,CACHxL,KAAM+nB,EAAY/nB,KAClBC,IAAK8nB,EAAY9nB,IACjBC,MAAO6nB,EAAY7nB,MACnBC,OAAQ4nB,EAAY5nB,QAKxB6nB,MAAO,CACHhoB,KAAMA,EACNC,IAAKA,EACLC,MAAOA,EACPC,OAAQA,IA2BhB,OAtBA0Q,EACK9d,QAAO,SAASk1B,GACb,OAAQA,EAAUC,mBAErB7gC,KAAI,SAAS4gC,GACV,OAAOA,EAAUloB,QAEpBY,SAAQ,SAASwnB,GACdC,EAAWroB,EAAKyL,MAAOjiB,OAAOmJ,OAAO,GAAIy1B,EAAc3c,QACvD4c,EAAWroB,EAAKioB,MAAOz+B,OAAOmJ,OAAO,GAAIy1B,EAAcH,WAI/DK,EAAkBtoB,EAAKyL,OAGvBzL,EAAKioB,MAAM7nB,QAAUJ,EAAKtH,QAAQ6vB,aAClCvoB,EAAKioB,MAAM9nB,OAASH,EAAKtH,QAAQ8vB,YAGjCF,EAAkBtoB,EAAKioB,OAEhBjoB,GAGPqoB,EAAa,SAAoBZ,EAAQC,GAEzCA,EAAMxnB,KAAOunB,EAAOvnB,IACpBwnB,EAAMvnB,OAASsnB,EAAOxnB,KACtBynB,EAAMtnB,QAAUqnB,EAAOvnB,IACvBwnB,EAAMznB,MAAQwnB,EAAOxnB,KAEjBynB,EAAMtnB,OAASqnB,EAAOrnB,SACtBqnB,EAAOrnB,OAASsnB,EAAMtnB,QAGtBsnB,EAAMvnB,MAAQsnB,EAAOtnB,QACrBsnB,EAAOtnB,MAAQunB,EAAMvnB,QAIzBmoB,EAAoB,SAA2BtoB,GAC/CA,EAAKtI,MAAQsI,EAAKG,MAAQH,EAAKC,KAC/BD,EAAKrI,OAASqI,EAAKI,OAASJ,EAAKE,KAGjClM,EAAW,SAAkB/K,GAC7B,MAAwB,iBAAVA,GAWdw/B,EAAW,SAAkBC,EAAUC,EAAaC,GACpD,IAAIC,EAAcztB,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,KACtF,OAAO7G,KAAKqT,IAAI8gB,EAAWC,GAAeE,GAAet0B,KAAKqT,IAAIghB,GAAYC,GAM9EC,EAEA,WAEI,IAAI18B,EAAOgP,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,GAC3E2tB,EAAiB38B,EAAKqd,UACtBA,OAA+B,IAAnBsf,EAA4B,GAAMA,EAC9CC,EAAe58B,EAAKsd,QACpBA,OAA2B,IAAjBsf,EAA0B,IAAOA,EAC3CC,EAAY78B,EAAKud,KACjBA,OAAqB,IAAdsf,EAAuB,GAAKA,EACnCvtB,EAAS,KACTgtB,EAAW,KACXE,EAAW,EACXM,GAAU,EA6EVrC,EAAMM,EAAa,CACnBgC,YA3Ec,SAAqBC,EAAIC,GAEvC,IAAIH,EAAJ,CAGA,IAAMl1B,EAAS0H,KAAW1H,EAAS00B,GAG/B,OAFAQ,GAAU,OACVN,EAAW,GAiBXH,EANJC,GAHAE,KAHUF,EAAWhtB,GAAU+N,EAGfE,EASOjO,EAHvBktB,GAAYlf,IAGgC2f,GACxCX,EAAWhtB,EACXktB,EAAW,EACXM,GAAU,EAGVrC,EAAIyC,SAASZ,GACb7B,EAAI0C,WAAWb,IAGf7B,EAAIyC,SAASZ,KA0CjBhtB,OAAQ,CACJmU,IAnCQ,SAAmB5mB,GAgB/B,GAdI+K,EAAS/K,KAAW+K,EAAS00B,KAC7BA,EAAWz/B,GAIA,OAAXyS,IACAA,EAASzS,EACTy/B,EAAWz/B,GAOXy/B,KAHJhtB,EAASzS,SAGoC,IAAXyS,EAS9B,OAPAwtB,GAAU,EACVN,EAAW,EAGX/B,EAAIyC,SAASZ,QACb7B,EAAI0C,WAAWb,GAKnBQ,GAAU,GAQNM,IAAK,WACD,OAAO9tB,IAIfwtB,QAAS,CACLM,IAAK,WACD,OAAON,IAIfI,SAAU,SAAkBrgC,KAC5BsgC,WAAY,SAAoBtgC,OAGpC,OAAO49B,GAMX4C,EAAgB,SAAuBhrB,GACvC,OAAOA,EAAI,GAAM,EAAIA,EAAIA,GAAU,EAAI,EAAIA,GAAKA,EAAlB,GAG9BirB,EAEA,WAEI,IAQIjrB,EACAkrB,EATAv9B,EAAOgP,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,GAC3EwuB,EAAgBx9B,EAAKqe,SACrBA,OAA6B,IAAlBmf,EAA2B,IAAMA,EAC5CC,EAAcz9B,EAAK09B,OACnBA,OAAyB,IAAhBD,EAAyBJ,EAAgBI,EAClDE,EAAa39B,EAAK49B,MAClBA,OAAuB,IAAfD,EAAwB,EAAIA,EACpCE,EAAQ,KAGRf,GAAU,EACVgB,GAAU,EACVxuB,EAAS,KA0BTmrB,EAAMM,EAAa,CACnBgC,YAzBc,SAAqBC,EAAIC,GACnCH,GAAsB,OAAXxtB,IAED,OAAVuuB,IACAA,EAAQb,GAGRA,EAAKa,EAAQD,KAEjBvrB,EAAI2qB,EAAKa,EAAQD,IAERvf,GAAY4e,GACjB5qB,EAAI,EACJkrB,EAAIO,EAAU,EAAI,EAClBrD,EAAIyC,SAASK,EAAIjuB,GACjBmrB,EAAI0C,WAAWI,EAAIjuB,GACnBwtB,GAAU,IAEVS,EAAIlrB,EAAIgM,EACRoc,EAAIyC,UAAU7qB,GAAK,EAAIqrB,EAAOI,EAAU,EAAIP,EAAIA,GAAK,GAAKjuB,OAO9DA,OAAQ,CACJ8tB,IAAK,WACD,OAAOU,EAAU,EAAIxuB,GAEzBmU,IAAK,SAAa5mB,GAEd,GAAe,OAAXyS,EAIA,OAHAA,EAASzS,EACT49B,EAAIyC,SAASrgC,QACb49B,EAAI0C,WAAWtgC,GAKfA,EAAQyS,GACRA,EAAS,EACTwuB,GAAU,IAGVA,GAAU,EACVxuB,EAASzS,GAIbigC,GAAU,EACVe,EAAQ,OAIhBf,QAAS,CACLM,IAAK,WACD,OAAON,IAIfI,SAAU,SAAkBrgC,KAC5BsgC,WAAY,SAAoBtgC,OAGpC,OAAO49B,GAGXsD,EAAW,CACXrB,OAAQA,EACRY,MAAOA,GAQPU,EAAiB,SAAwBnD,EAAYoD,EAAUrD,GAG/D,IAAIsD,EACArD,EAAWoD,IAAuD,iBAAnCpD,EAAWoD,GAAUrD,GAC9CC,EAAWoD,GAAUrD,GACrBC,EAAWoD,IAAapD,EAE9Bx4B,EAAsB,iBAAR67B,EAAmBA,EAAMA,EAAI77B,KAC3CsI,EAAuB,iBAARuzB,EAAmB9gC,OAAOmJ,OAAO,GAAI23B,GAAO,GAE/D,OAAOH,EAAS17B,GAAQ07B,EAAS17B,GAAMsI,GAAS,MAGhDwzB,EAAY,SAAmB5pB,EAAMzM,EAAK6C,GAC1C,IAAIyzB,EAAYpvB,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,IAAmBA,UAAU,IAC/ElH,EAAM9L,MAAMC,QAAQ6L,GAAOA,EAAM,CAACA,IAC9B0M,SAAQ,SAASxX,GACjBuX,EAAKC,SAAQ,SAAS3D,GAClB,IAAIrT,EAAOqT,EACPwtB,EAAS,WACT,OAAO1zB,EAAMkG,IAEbytB,EAAS,SAAgBzhC,GACzB,OAAQ8N,EAAMkG,GAAOhU,GAGN,iBAARgU,IACPrT,EAAOqT,EAAIA,IACXwtB,EAASxtB,EAAIwtB,QAAUA,EACvBC,EAASztB,EAAIytB,QAAUA,GAGvBthC,EAAEQ,KAAU4gC,IAIhBphC,EAAEQ,GAAQ,CACN4/B,IAAKiB,EACL5a,IAAK6a,WAUjB3gB,EAAa,SAAoB3d,GACjC,IAAIu+B,EAAcv+B,EAAKu+B,YACnBC,EAAYx+B,EAAKw+B,UACjBC,EAAkBz+B,EAAKy+B,gBACvBC,EAAkB1+B,EAAK0+B,gBAEvBC,EAAevhC,OAAOmJ,OAAO,GAAIi4B,GAGjC7gB,EAAa,GAyCjB,OAtCAiZ,EAAM2H,GAAa,SAAS3D,EAAUgE,GAClC,IAAIb,EAAWC,EAAeY,GACzBb,IAKLA,EAASb,SAAW,SAASrgC,GACzB2hC,EAAU5D,GAAY/9B,GAI1BkhC,EAASzuB,OAASqvB,EAAa/D,GAmB/BuD,EAAU,CAhBC,CACPttB,IAAK+pB,EACL0D,OAAQ,SAAgBzhC,GAEhBkhC,EAASzuB,SAAWzS,IAIxBkhC,EAASzuB,OAASzS,IAEtBwhC,OAAQ,WACJ,OAAOG,EAAU5D,MAKP,CAAC6D,EAAiBC,GAAkBF,GAAW,GAGjE7gB,EAAWjjB,KAAKqjC,OAIb,CACH5kB,MAAO,SAAe6jB,GAClB,IAAIC,EAAiBn6B,SAASqc,OAC1B2d,GAAU,EAKd,OAJAnf,EAAWnJ,SAAQ,SAASoqB,GACnBA,EAAU9B,UAASA,GAAU,GAClC8B,EAAU7B,YAAYC,EAAIC,MAEvBH,GAEX7V,QAAS,eAIb4X,EAAW,SAAkBvyB,GAC7B,OAAO,SAASjK,EAAM8wB,GAClB7mB,EAAQc,iBAAiB/K,EAAM8wB,KAInC2L,EAAc,SAAqBxyB,GACnC,OAAO,SAASjK,EAAM8wB,GAClB7mB,EAAQkB,oBAAoBnL,EAAM8wB,KAKtC4L,EAAY,SAAmB/+B,GACbA,EAAKu+B,YACPv+B,EAAKw+B,UACCx+B,EAAKy+B,gBAF3B,IAGIC,EAAkB1+B,EAAK0+B,gBAEvB58B,GADY9B,EAAKg/B,UACVh/B,EAAK8B,MACZm9B,EAAS,GAETzyB,EAAMqyB,EAAS/8B,EAAKwK,SACpB4yB,EAASJ,EAAYh9B,EAAKwK,SAsB9B,OApBAoyB,EAAgB/xB,GAAK,SAAStK,EAAM8wB,GAChC8L,EAAOvkC,KAAK,CACR2H,KAAMA,EACN8wB,GAAIA,IAGR3mB,EAAInK,EAAM8wB,IAGduL,EAAgBnxB,IAAM,SAASlL,EAAM8wB,GACjC8L,EAAOxD,OACHwD,EAAOE,WAAU,SAASC,GACtB,OAAOA,EAAM/8B,OAASA,GAAQ+8B,EAAMjM,KAAOA,KAE/C,GAGJ+L,EAAO78B,EAAM8wB,IAGV,CACHha,MAAO,WAEH,OAAO,GAEX8N,QAAS,WACLgY,EAAOzqB,SAAQ,SAAS4qB,GACpBF,EAAOE,EAAM/8B,KAAM+8B,EAAMjM,UAerCzf,EAAY,SAAmB7W,GAC/B,OAAgB,MAATA,GAQPwiC,EAAW,CACXhzB,QAAS,EACTyR,OAAQ,EACRC,OAAQ,EACRC,WAAY,EACZC,WAAY,EACZqhB,QAAS,EACTC,QAAS,EACTrhB,QAAS,EACTN,QAAS,EACTC,QAAS,GAGT9I,EAAS,SAAgB/U,GACzB,IAAIu+B,EAAcv+B,EAAKu+B,YACnBC,EAAYx+B,EAAKw+B,UACjBC,EAAkBz+B,EAAKy+B,gBACvBC,EAAkB1+B,EAAK0+B,gBACvB58B,EAAO9B,EAAK8B,KAEZ68B,EAAevhC,OAAOmJ,OAAO,GAAIi4B,GAGjCgB,EAAe,GAGnBrB,EAAUI,EAAa,CAACE,EAAiBC,GAAkBF,GAG3D,IAAIiB,EAAY,WACZ,MAAO,CAACjB,EAAsB,YAAK,EAAGA,EAAsB,YAAK,IAGjEkB,EAAW,WACX,MAAO,CAAClB,EAAkB,QAAK,EAAGA,EAAkB,QAAK,IAEzDmB,EAAU,WACV,OAAO79B,EAAK8R,KACN+nB,EAAY75B,EAAK8R,KAAM9R,EAAK4iB,WAAY+a,IAAaC,KACrD,MAYV,OAVAjB,EAAgB7qB,KAAO,CAAEwpB,IAAKuC,GAC9BjB,EAAgB9qB,KAAO,CAAEwpB,IAAKuC,GAG9BpB,EAAY/pB,SAAQ,SAAS3D,GACzB2tB,EAAU3tB,QACuB,IAAtB8tB,EAAa9tB,GAAuBwuB,EAASxuB,GAAO8tB,EAAa9tB,MAIzE,CACHsI,MAAO,WAEH,GAAKymB,EAAiBJ,EAAchB,GAWpC,OANAqB,EAAY/9B,EAAKwK,QAASkyB,GAG1BphC,OAAOmJ,OAAOi5B,EAAcpiC,OAAOmJ,OAAO,GAAIi4B,KAGvC,GAEXvX,QAAS,eAIb2Y,EAAmB,SAA0BJ,EAAcM,GAE3D,GAAI1iC,OAAOmX,KAAKirB,GAAc5jC,SAAWwB,OAAOmX,KAAKurB,GAAUlkC,OAC3D,OAAO,EAIX,IAAK,IAAImkC,KAAQD,EACb,GAAIA,EAASC,KAAUP,EAAaO,GAChC,OAAO,EAIf,OAAO,GAGPF,EAAc,SAAqBvzB,EAAS9L,GAC5C,IAAI6L,EAAU7L,EAAM6L,QAChB2zB,EAAcx/B,EAAMw/B,YACpBhiB,EAAaxd,EAAMwd,WACnBC,EAAazd,EAAMyd,WACnBH,EAAStd,EAAMsd,OACfC,EAASvd,EAAMud,OACfuhB,EAAU9+B,EAAM8+B,QAChBC,EAAU/+B,EAAM++B,QAChBrhB,EAAU1d,EAAM0d,QAChBN,EAAUpd,EAAMod,QAChBC,EAAUrd,EAAMqd,QAChBvS,EAAQ9K,EAAM8K,MACdC,EAAS/K,EAAM+K,OAEf4W,EAAa,GACbpN,EAAS,IAGTrB,EAAUkK,IAAYlK,EAAUmK,MAChC9I,GAAU,sBAAwB6I,GAAW,GAAK,OAASC,GAAW,GAAK,OAK3EnK,EAAUssB,KACV7d,GAAc,eAAiB6d,EAAc,SAI7CtsB,EAAUsK,IAAetK,EAAUuK,MACnCkE,GACI,gBAAkBnE,GAAc,GAAK,QAAUC,GAAc,GAAK,YAItEvK,EAAUoK,IAAWpK,EAAUqK,MAC/BoE,GACI,YACCzO,EAAUoK,GAAUA,EAAS,GAC9B,MACCpK,EAAUqK,GAAUA,EAAS,GAC9B,SAIJrK,EAAUwK,KACViE,GAAc,WAAajE,EAAU,SAGrCxK,EAAU4rB,KACVnd,GAAc,WAAamd,EAAU,SAGrC5rB,EAAU6rB,KACVpd,GAAc,WAAaod,EAAU,SAIrCpd,EAAWvmB,SACXmZ,GAAU,aAAeoN,EAAa,KAItCzO,EAAUrH,KACV0I,GAAU,WAAa1I,EAAU,IAGjB,IAAZA,IACA0I,GAAU,sBAIV1I,EAAU,IACV0I,GAAU,yBAKdrB,EAAUnI,KACVwJ,GAAU,UAAYxJ,EAAS,OAI/BmI,EAAUpI,KACVyJ,GAAU,SAAWzJ,EAAQ,OAIjC,IAAI20B,EAAsB3zB,EAAQ2zB,qBAAuB,GAGrDlrB,EAAOnZ,SAAWqkC,EAAoBrkC,QAAUmZ,IAAWkrB,IAC3D3zB,EAAQuK,MAAMyW,QAAUvY,EAGxBzI,EAAQ2zB,oBAAsBlrB,IAIlCmrB,EAAS,CACTnrB,OAAQA,EACRgqB,UAAWA,EACXphB,WAAYA,EACZzE,KA/MO,SAAclZ,GACrB,IAAIu+B,EAAcv+B,EAAKu+B,YACnBC,EAAYx+B,EAAKw+B,UACjBE,EAAkB1+B,EAAK0+B,gBAC3BP,EAAUI,EAAaG,EAAiBF,KA8MxC1pB,EAAa,WACb,IAAIlB,EAAO5E,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,GAC3E1C,EAAU0C,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,GAC9E6H,EAAQ7H,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,GAuBhF,OArBK1C,EAAQ6zB,mBACTvsB,EAAKwsB,WAAahb,SAASvO,EAAMupB,WAAY,KAAO,EACpDxsB,EAAKysB,UAAYjb,SAASvO,EAAMwpB,UAAW,KAAO,EAClDzsB,EAAKwoB,YAAchX,SAASvO,EAAMulB,YAAa,KAAO,EACtDxoB,EAAKuoB,aAAe/W,SAASvO,EAAMslB,aAAc,KAAO,EACxDvoB,EAAK0sB,WAAalb,SAASvO,EAAMypB,WAAY,KAAO,EACpDh0B,EAAQ6zB,kBAAmB,GAG/BvsB,EAAKC,KAAOvH,EAAQi0B,YAAc,EAClC3sB,EAAKE,IAAMxH,EAAQk0B,WAAa,EAChC5sB,EAAKtI,MAAQgB,EAAQm0B,aAAe,EACpC7sB,EAAKrI,OAASe,EAAQo0B,cAAgB,EAEtC9sB,EAAKG,MAAQH,EAAKC,KAAOD,EAAKtI,MAC9BsI,EAAKI,OAASJ,EAAKE,IAAMF,EAAKrI,OAE9BqI,EAAK+sB,UAAYr0B,EAAQq0B,UAEzB/sB,EAAKuL,OAAkC,OAAzB7S,EAAQs0B,aAEfhtB,GAGPmF,EAEA,WACI,IAAI/Y,EAAOgP,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,GAC3E6xB,EAAW7gC,EAAK4U,IAChBA,OAAmB,IAAbisB,EAAsB,MAAQA,EACpCC,EAAY9gC,EAAKxC,KACjBA,OAAqB,IAAdsjC,EAAuB,KAAOA,EACrCC,EAAkB/gC,EAAKo7B,WACvBA,OAAiC,IAApB2F,EAA6B,GAAKA,EAC/CC,EAAYhhC,EAAKihC,KACjBA,OAAqB,IAAdD,EAAuB,aAAgBA,EAC9CE,EAAalhC,EAAKmZ,MAClBA,OAAuB,IAAf+nB,EAAwB,aAAgBA,EAChDC,EAAcnhC,EAAKyd,OACnBA,OAAyB,IAAhB0jB,EAAyB,aAAgBA,EAClDC,EAAephC,EAAKinB,QACpBA,OAA2B,IAAjBma,EAA0B,aAAgBA,EACpDC,EAAwBrhC,EAAKshC,2BAC7BA,OAC8B,IAA1BD,EACM,SAAS/F,EAAO1B,GACZ,OAAOA,GAEXyH,EACVE,EAAqBvhC,EAAKwhC,cAC1BA,OAAuC,IAAvBD,EAAgC,aAAgBA,EAChEE,EAAoBzhC,EAAKse,aACzBA,OAAqC,IAAtBmjB,EAA+B,aAAgBA,EAC9DC,EAAkB1hC,EAAKgZ,WACvBA,OAAiC,IAApB0oB,GAAqCA,EAClDC,EAAwB3hC,EAAK4hC,iBAC7BA,OAA6C,IAA1BD,GAA2CA,EAC9DE,EAAc7hC,EAAKiZ,OACnBA,OAAyB,IAAhB4oB,EAAyB,GAAKA,EAC3C,OAAO,SAEHC,GAEA,IAAIn3B,EAAQqE,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,GAE5E1C,EAAUW,EAAc2H,EAAK,aAAepX,EAAM49B,GAGlDvkB,EAAQhU,OAAOk/B,iBAAiBz1B,EAAS,MAGzCsH,EAAOkB,IACPktB,EAAY,KAGZC,GAAY,EAGZvd,EAAa,GAGbwd,EAAe,GAGf3/B,EAAM,GAGNs3B,EAAQ,GAGRsI,EAAU,CACVhpB,GAGAipB,EAAU,CACVnB,GAGAoB,EAAa,CACbpb,GAIAqb,EAAa,WACb,OAAOh2B,GAEPi2B,EAAgB,WAChB,OAAO7d,EAAWrpB,UAElBmnC,EAAe,WACf,OAAOjgC,GAEP4J,EAAkB,SAAyB21B,GAC3C,OAAO,SAAShgC,EAAM6I,GAClB,OAAO7I,EAAKggC,EAAOn3B,KAGvBg1B,EAAU,WACV,OAAIqC,IAGJA,EAAYrG,EAAY/nB,EAAM8Q,EAAY,CAAC,EAAG,GAAI,CAAC,EAAG,MAWtD+d,EAAQ,WACRT,EAAY,KAGZtd,EAAWlQ,SAAQ,SAAS8mB,GACxB,OAAOA,EAAMmH,aAGIb,GAAoBhuB,EAAKtI,OAASsI,EAAKrI,SAExDuJ,EAAWlB,EAAMtH,EAASuK,GAI9B,IAAI4jB,EAAM,CAAEv4B,KAAMwgC,EAAa/3B,MAAOA,EAAOiJ,KAAMA,GACnDwuB,EAAQ5tB,SAAQ,SAAS/U,GACrB,OAAOA,EAAOg7B,OAQlBkI,EAAS,SAAgB3F,EAAI4F,EAAchkB,GAE3C,IAAIke,EAAkC,IAAxB8F,EAAahnC,OAiF3B,OA9EAumC,EAAQ3tB,SAAQ,SAASquB,IASC,IARFA,EAAO,CACvBl4B,MAAOA,EACPzI,KAAMwgC,EACN9I,QAASgJ,EACTE,UAAW9F,EACXpe,eAAgBA,MAIhBke,GAAU,MAKlBoF,EAAa1tB,SAAQ,SAASuuB,IAGL,IADFA,EAAM5pB,MAAM6jB,KAE3BF,GAAU,MAKlBpY,EACK9d,QAAO,SAAS00B,GACb,QAASA,EAAMhvB,QAAQqhB,cAE1BnZ,SAAQ,SAAS8mB,GAEKA,EAAMqH,OACrB3F,EACAsE,EAA2BhG,EAAOsH,GAClChkB,KAIAke,GAAU,MAKtBpY,EAEKlQ,SAAQ,SAAS8mB,EAAOlnB,GAEjBknB,EAAMhvB,QAAQqhB,aAKlB+U,EAAYr1B,YAAYiuB,EAAMhvB,QAAS8H,GAGvCknB,EAAMmH,QAGNnH,EAAMqH,OACF3F,EACAsE,EAA2BhG,EAAOsH,GAClChkB,GAIJke,GAAU,MAIlBmF,EAAYnF,EAEZxe,EAAa,CACT3T,MAAOA,EACPzI,KAAMwgC,EACN9I,QAASgJ,EACTE,UAAW9F,IAIRF,GAGPzY,EAAW,WACX6d,EAAa1tB,SAAQ,SAASuuB,GAC1B,OAAOA,EAAM9b,aAEjBob,EAAW7tB,SAAQ,SAASwuB,GACxBA,EAAU,CAAE9gC,KAAMwgC,EAAa/3B,MAAOA,OAE1C+Z,EAAWlQ,SAAQ,SAAS8mB,GACxB,OAAOA,EAAMjX,eAKjB4e,EAAsB,CACtB32B,QAAS,CACL8wB,IAAKkF,GAGTzrB,MAAO,CACHumB,IAzIO,WACX,OAAOvmB,IA2IP6N,WAAY,CACR0Y,IAAKmF,IAKTW,EAAwB9lC,OAAOmJ,OAAO,GAAI08B,EAAqB,CAC/DrvB,KAAM,CACFwpB,IAAKuC,GAITp9B,IAAK,CACD66B,IAAKoF,GAIT3gC,GAAI,SAAYshC,GACZ,OAAO3lC,IAAS2lC,GAEpB91B,YAAaA,EAAYf,GACzBH,gBAAiBA,EAAgB21B,GACjCsB,SAAU,SAAkBthC,GAExB,OADA4iB,EAAWhqB,KAAKoH,GACTA,GAEXuhC,WAAY,SAAoBvhC,GAC5B4iB,EAAW+W,OAAO/W,EAAW3N,QAAQjV,GAAO,IAEhD+K,gBAAiBA,EAAgBP,EAASoY,GAC1ChG,gBAAiBA,EAAgBpS,EAASoY,GAC1C3iB,eAAgB,SAAwB8gC,GACpC,OAAOV,EAAQznC,KAAKmoC,IAExBS,eAAgB,SAAwB7jC,GACpC,OAAO2iC,EAAQ1nC,KAAK+E,IAExB6N,kBAAmB,SAA2B01B,GAC1C,OAAOX,EAAW3nC,KAAKsoC,IAE3BO,iBAAkB,WACd,OAAQj3B,EAAQ6zB,kBAAmB,GAIvC39B,SAAUs/B,EAAMt/B,SAChBxB,MAAO8gC,EAAM9gC,QAIbwiC,EAAwB,CACxBl3B,QAAS,CACL8wB,IAAKkF,GAGT5d,WAAY,CACR0Y,IAAKmF,GAGT3uB,KAAM,CACFwpB,IAAKuC,GAGT7C,QAAS,CACLM,IAAK,WACD,OAAO6E,IAIflG,cAAe,WACX,OAAO/iB,GAEXypB,MAAOA,EACPE,OAAQA,EACRte,SAAUA,GAIVof,EAAqBrmC,OAAOmJ,OAAO,GAAI08B,EAAqB,CAC5DrvB,KAAM,CACFwpB,IAAK,WACD,OAAOxpB,MAMnBxW,OAAOmX,KAAK0E,GACPiB,MAAK,SAAStI,EAAGC,GAEd,MAAU,WAAND,EACO,EACM,WAANC,GACC,EAEL,KAEV2C,SAAQ,SAAS3D,GACd,IAAI6yB,EAAWxD,EAAOrvB,GAAK,CACvB0tB,YAAatlB,EAAOpI,GACpB2tB,UAAW7zB,EACXq0B,UAAWnF,EACX4E,gBAAiByE,EACjBxE,gBAAiB8E,EACjB1hC,KAAMi5B,EAAa0I,KAGnBC,GACAxB,EAAaxnC,KAAKgpC,MAK9B,IAAIhB,EAAc3H,EAAamI,GAG/BzlB,EAAO,CACHvb,KAAMwgC,EACN/3B,MAAOA,IAIX,IAAIg5B,EAAajI,EAAcpvB,GAS/B,OARAoY,EAAWlQ,SAAQ,SAAS8mB,EAAOlnB,GAC/BsuB,EAAYr1B,YAAYiuB,EAAMhvB,QAASq3B,EAAavvB,MAIxDotB,EAAckB,GAGP3H,EAAayI,KAI5BI,EAAgB,SAAuB3C,EAAM9nB,GAC7C,IAAI0qB,EAAM70B,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,GAE1ExR,EAAO,iBAGX,GAAIqF,OAAOrF,GAGP,OAFAqF,OAAOrF,GAAM4kC,QAAQ1nC,KAAKumC,QAC1Bp+B,OAAOrF,GAAM2kC,QAAQznC,KAAKye,GAI9BtW,OAAOrF,GAAQ,CACX4kC,QAAS,CAACnB,GACVkB,QAAS,CAAChpB,IAGd,IAAI2qB,EAAUjhC,OAAOrF,GAEjBumC,EAAW,IAAOF,EAClBG,EAAO,KACPppC,EAAK,KACLqpC,EAAc,KACdC,EAAa,KAEbC,EAAe,WACXrhC,SAASqc,QACT8kB,EAAc,WACV,OAAOphC,OAAO8hB,YAAW,WACrB,OAAOyf,EAAKC,YAAYC,SACzBP,IAEPG,EAAa,WACT,OAAOrhC,OAAO0hC,aAAa3pC,MAG/BqpC,EAAc,WACV,OAAOphC,OAAOwmB,sBAAsB+a,IAExCF,EAAa,WACT,OAAOrhC,OAAO2hC,qBAAqB5pC,MAK/CkI,SAASsK,iBAAiB,oBAAoB,WACtC82B,GAAYA,IAChBC,IACAC,EAAKC,YAAYC,UAGrB,IAAIF,EAAO,SAASA,EAAKpH,GAErBpiC,EAAKqpC,EAAYG,GAGZJ,IACDA,EAAOhH,GAGX,IAAIyH,EAAQzH,EAAKgH,EAEbS,GAASV,IAMbC,EAAOhH,EAAMyH,EAAQV,EAGrBD,EAAQ1B,QAAQ5tB,SAAQ,SAASysB,GAC7B,OAAOA,OAEX6C,EAAQ3B,QAAQ3tB,SAAQ,SAAS2E,GAC7B,OAAOA,EAAM6jB,QAOrB,OAHAmH,IACAC,EAAKC,YAAYC,OAEV,CACHI,MAAO,WACHR,EAAWtpC,MAKnByF,EAAc,SAAqBoN,EAAQ0lB,GAC3C,OAAO,SAASnzB,GACZ,IAAIkC,EAAOlC,EAAKkC,KACZyI,EAAQ3K,EAAK2K,MACbg6B,EAAe3kC,EAAK45B,QACpBA,OAA2B,IAAjB+K,EAA0B,GAAKA,EACzC7B,EAAY9iC,EAAK8iC,UACjBlkB,EAAiB5e,EAAK4e,eAC1Bgb,EACKhzB,QAAO,SAASzE,GACb,OAAOsL,EAAOtL,EAAOE,SAExBmS,SAAQ,SAASrS,GACd,OAAOsL,EAAOtL,EAAOE,MAAM,CACvBH,KAAMA,EACNyI,MAAOA,EACPxI,OAAQA,EAAO3D,KACfskC,UAAWA,EACXlkB,eAAgBA,OAIxBuU,GACAA,EAAG,CACCjxB,KAAMA,EACNyI,MAAOA,EACPivB,QAASA,EACTkJ,UAAWA,EACXlkB,eAAgBA,MAM5B4c,EAAe,SAAsBoJ,EAASC,GAC9C,OAAOA,EAAclX,WAAW6N,aAAaoJ,EAASC,IAGtDC,EAAc,SAAqBF,EAASC,GAC5C,OAAOA,EAAclX,WAAW6N,aAAaoJ,EAASC,EAAcE,cAGpE9oC,EAAU,SAAiBY,GAC3B,OAAOb,MAAMC,QAAQY,IAGrBmoC,EAAU,SAAiBnoC,GAC3B,OAAgB,MAATA,GAGPooC,EAAO,SAAc9K,GACrB,OAAOA,EAAI8K,QAGXjqC,EAAW,SAAkB6B,GAC7B,MAAO,GAAKA,GAGZqoC,EAAU,SAAiBroC,GAC3B,IAAIsoC,EAAWn2B,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,IACnF,OAAIg2B,EAAQnoC,GACD,GAEPZ,EAAQY,GACDA,EAEJ7B,EAAS6B,GACXmuB,MAAMma,GACNjqC,IAAI+pC,GACJr+B,QAAO,SAASuzB,GACb,OAAOA,EAAIv+B,WAInBwpC,EAAY,SAAmBvoC,GAC/B,MAAwB,kBAAVA,GAGdwoC,EAAY,SAAmBxoC,GAC/B,OAAOuoC,EAAUvoC,GAASA,EAAkB,SAAVA,GAGlCkI,EAAW,SAAkBlI,GAC7B,MAAwB,iBAAVA,GAGdyoC,EAAW,SAAkBzoC,GAC7B,OAAO+K,EAAS/K,GACVA,EACAkI,EAASlI,GACT7B,EAAS6B,GAAOgD,QAAQ,WAAY,IACpC,GAGN0lC,EAAQ,SAAe1oC,GACvB,OAAOuoB,SAASkgB,EAASzoC,GAAQ,KAGjC2oC,GAAU,SAAiB3oC,GAC3B,OAAO4V,WAAW6yB,EAASzoC,KAG3B4oC,GAAQ,SAAe5oC,GACvB,OAAO+K,EAAS/K,IAAU6oC,SAAS7oC,IAAUsL,KAAKib,MAAMvmB,KAAWA,GAGnE8oC,GAAU,SAAiB9oC,GAC3B,IAAI+oC,EAAO52B,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,IAE/E,GAAIy2B,GAAM5oC,GACN,OAAOA,EAIX,IAAIgpC,EAAkB7qC,EAAS6B,GAAOooC,OAGtC,MAAI,OAAOvnC,KAAKmoC,IACZA,EAAkBA,EAAgBhmC,QAAQ,OAAQ,IAAIolC,OAC/CM,EAAMM,GAAmBD,EAAOA,GAIvC,MAAMloC,KAAKmoC,IACXA,EAAkBA,EAAgBhmC,QAAQ,OAAQ,IAAIolC,OAC/CM,EAAMM,GAAmBD,GAG7BL,EAAMM,IAGbC,GAAa,SAAoBjpC,GACjC,MAAwB,mBAAVA,GAGdkpC,GAAsB,SAA6BC,GAInD,IAHA,IAAIzjC,EAAMxD,KACNknC,EAASD,EAAOhb,MAAM,KACtBkb,EAAQ,KACJA,EAAQD,EAAOp8B,SAEnB,KADAtH,EAAMA,EAAI2jC,IAEN,OAAO,KAGf,OAAO3jC,GAGP4jC,GAAU,CACVC,QAAS,OACTC,MAAO,QACPC,OAAQ,SACRC,MAAO,MACPC,QAAS,MACTC,KAAM,OAGNC,GAAkB,SAAyBC,GAC3C,IAAIlM,EAAM,GAmBV,OAjBAA,EAAIta,IAAMpb,EAAS4hC,GAAWA,EAAUA,EAAQxmB,KAAO,GACvDsa,EAAImM,QAAUD,EAAQC,QAAUxhB,SAASuhB,EAAQC,QAAS,IAAM,EAChEnM,EAAIoM,QAAUF,EAAQE,QAAUF,EAAQE,QAAU,GAElDjQ,EAAMuP,IAAS,SAASt1B,GACpB4pB,EAAI5pB,GAAOi2B,GAAaj2B,EAAK81B,EAAQ91B,GAAMs1B,GAAQt1B,GAAM4pB,EAAImM,QAASnM,EAAIoM,YAI9EpM,EAAI2L,QAAUO,EAAQP,SAAWrhC,EAAS4hC,IAAYA,EAAQxmB,IAAMsa,EAAI2L,QAAU,KAGlF3L,EAAIyE,OAASyH,EAAQzH,QAAU,YAGxBzE,EAAIoM,QAEJpM,GAGPqM,GAAe,SAAsBtpC,EAAMmpC,EAASI,EAAQH,EAASC,GAErE,GAAgB,OAAZF,EACA,OAAO,KAIX,GAAuB,mBAAZA,EACP,OAAOA,EAIX,IAAIxkC,EAAS,CACTge,IAAgB,QAAX4mB,GAA+B,UAAXA,EAAqB,IAAMvpC,EAAO,IAAM,GACjEupC,OAAQA,EACRF,QAASA,EACTG,iBAAiB,EACjBJ,QAASA,EACTx3B,OAAQ,KACR63B,OAAQ,KACRnjB,QAAS,MAIb,GAAI/e,EAAS4hC,GAET,OADAxkC,EAAOge,IAAMwmB,EACNxkC,EAOX,GAHA/E,OAAOmJ,OAAOpE,EAAQwkC,GAGlB5hC,EAAS5C,EAAO0kC,SAAU,CAC1B,IAAIK,EAAQ/kC,EAAO0kC,QAAQ7b,MAAM,SACjC7oB,EAAO0kC,QAAU,CACbM,OAAQD,EAAM,GACdrqC,MAAOqqC,EAAM,IAOrB,OAFA/kC,EAAO6kC,gBAAkB3B,EAAUljC,EAAO6kC,iBAEnC7kC,GAOPilC,GAAS,SAAgBvqC,GACzB,OAAiB,OAAVA,GAGP8K,GAAW,SAAkB9K,GAC7B,MAAwB,iBAAVA,GAAgC,OAAVA,GAGpCwqC,GAAQ,SAAexqC,GACvB,OACI8K,GAAS9K,IACTkI,EAASlI,EAAMsjB,MACfxY,GAAS9K,EAAMupC,UACfz+B,GAAS9K,EAAMypC,SACf3+B,GAAS9K,EAAM2pC,UACf7+B,GAAS9K,EAAM0pC,QAInBe,GAAU,SAAiBzqC,GAC3B,OAAIZ,EAAQY,GACD,QAGPuqC,GAAOvqC,GACA,OAGP4oC,GAAM5oC,GACC,MAGP,2BAA2Ba,KAAKb,GACzB,QAGPwqC,GAAMxqC,GACC,aAGGA,GAGd0qC,GAAsB,SAA6BpN,GACnD,OAAOA,EACFt6B,QAAQ,SAAU,MAClBA,QAAQ,SAAU,MAClBA,QAAQ,SAAU,MAClBA,QAAQ,SAAU,MAClBA,QAAQ,SAAU,MAClBA,QAAQ,SAAU,OAGvB2nC,GAAkB,CAClBC,MAAOvC,EACPwC,QAASrC,EACTsC,IAAK,SAAa9qC,GACd,MAA0B,UAAnByqC,GAAQzqC,GAAqB8oC,GAAQ9oC,GAAS0oC,EAAM1oC,IAE/D+qC,OAAQpC,GACRqC,MAAOrC,GACPsC,MAAOnC,GACPK,OAAQ,SAAgBnpC,GACpB,OAAOipC,GAAWjpC,GAASA,EAAQ7B,EAAS6B,IAEhDkrC,SAAU,SAAmBlrC,GACzB,OAAOkpC,GAAoBlpC,IAE/BmrC,UAxEc,SAAqBnrC,GACnC,OAAO6pC,GAAgB7pC,IAwEvBorC,OAAQ,SAAgBprC,GACpB,IACI,OAAOyB,KAAK4pC,MAAMX,GAAoB1qC,IACxC,MAAOoC,GACL,OAAO,QAKfkpC,GAAY,SAAmBtrC,EAAOwF,GACtC,OAAOmlC,GAAgBnlC,GAAMxF,IAG7BurC,GAAiB,SAAwBC,EAAUC,EAAcC,GAEjE,GAAIF,IAAaC,EACb,OAAOD,EAIX,IAAIG,EAAelB,GAAQe,GAG3B,GAAIG,IAAiBD,EAAW,CAE5B,IAAIE,EAAiBN,GAAUE,EAAUE,GAMzC,GAHAC,EAAelB,GAAQmB,GAGA,OAAnBA,EACA,KAAM,kDACFC,OACA,qBACAH,EACA,IAEJF,EAAWI,EAKnB,OAAOJ,GAGPM,GAAe,SAAsBL,EAAcC,GACnD,IAAIK,EAAeN,EACnB,MAAO,CACHO,YAAY,EACZzL,IAAK,WACD,OAAOwL,GAEXnlB,IAAK,SAAa4kB,GACdO,EAAeR,GAAeC,EAAUC,EAAcC,MAK9DO,GAAgB,SAAuBxpC,GACvC,IAAIwI,EAAM,GAKV,OAJA8uB,EAAMt3B,GAAS,SAASygC,GACpB,IAAIgJ,EAAmBzpC,EAAQygC,GAC/Bj4B,EAAIi4B,GAAQ4I,GAAaI,EAAiB,GAAIA,EAAiB,OAE5DhO,EAAajzB,IAGpBkhC,GAAqB,SAA4B1pC,GACjD,MAAO,CAEH2pC,MAAO,GAGPC,kBAAmB,KAGnBC,kBAAmB,KAGnBC,gBAAiB,GAGjB9pC,QAASwpC,GAAcxpC,KAI3B+pC,GAAa,SAAoBrD,GACjC,IAAIsD,EAAYt6B,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,IACpF,OAAOg3B,EACFhb,MAAM,aACN9vB,KAAI,SAASquC,GACV,OAAOA,EAAKC,iBAEfluC,KAAKguC,IAGVG,GAAkB,SAAyB3H,EAAOxiC,GAClD,IAAIwI,EAAM,GAaV,OAZA8uB,EAAMt3B,GAAS,SAASuR,GACpB/I,EAAI+I,GAAO,CACPusB,IAAK,WACD,OAAO0E,EAAMpH,WAAWp7B,QAAQuR,IAEpC4S,IAAK,SAAa5mB,GACdilC,EAAMt/B,SAAS,OAAS6mC,GAAWx4B,EAAK,KAAK64B,cAAe,CACxD7sC,MAAOA,SAKhBiL,GAGP6hC,GAAsB,SAA6BrqC,GACnD,OAAO,SAASkD,EAAUxB,EAAO64B,GAC7B,IAAI/xB,EAAM,GAaV,OAZA8uB,EAAMt3B,GAAS,SAASuR,GACpB,IAAIrT,EAAO6rC,GAAWx4B,EAAK,KAAK64B,cAEhC5hC,EAAI,OAAStK,GAAQ,SAAS2E,GAC1B,IACI03B,EAAMv6B,QAAQuR,GAAO1O,EAAOtF,MAC9B,MAAOoC,IAGTuD,EAAS,WAAahF,EAAM,CAAEX,MAAOg9B,EAAMv6B,QAAQuR,SAGpD/I,IAIX8hC,GAAsB,SAA6BtqC,GACnD,OAAO,SAASu6B,GACZ,IAAI/xB,EAAM,GAMV,OALA8uB,EAAMt3B,GAAS,SAASuR,GACpB/I,EAAI,OAASuhC,GAAWx4B,EAAK,KAAK64B,eAAiB,SAASvnC,GACxD,OAAO03B,EAAMv6B,QAAQuR,OAGtB/I,IAIX+hC,GAAoB,CACpBC,IAAK,EACLC,KAAM,EACNC,OAAQ,EACRC,MAAO,EACPC,KAAM,GAGNjX,GAAc,WACd,OAAO9qB,KAAK+qB,SACPl4B,SAAS,IACT2vB,OAAO,EAAG,IA0FnB,SAASra,GAAYzT,GACjB5B,KAAKsV,QAAU1T,EAGnB,SAAS2T,GAAgBC,GACrB,IAAIC,EAAOC,EAEX,SAASC,EAAKC,EAAKC,GACf,OAAO,IAAIrQ,SAAQ,SAASC,EAAS6C,GACjC,IAAIwN,EAAU,CACVF,IAAKA,EACLC,IAAKA,EACLpQ,QAASA,EACT6C,OAAQA,EACR5G,KAAM,MAGNgU,EACAA,EAAOA,EAAKhU,KAAOoU,GAEnBL,EAAQC,EAAOI,EACfC,EAAOH,EAAKC,OAKxB,SAASE,EAAOH,EAAKC,GACjB,IACI,IAAIlR,EAAS6Q,EAAII,GAAKC,GAClBjU,EAAQ+C,EAAO/C,MACfoU,EAAepU,aAAiByT,GACpC7P,QAAQC,QAAQuQ,EAAepU,EAAM0T,QAAU1T,GAAO6E,MAClD,SAASoP,GACDG,EACAD,EAAO,OAAQF,GAInBI,EAAOtR,EAAOhD,KAAO,SAAW,SAAUkU,MAE9C,SAAShU,GACLkU,EAAO,QAASlU,MAG1B,MAAOA,GACLoU,EAAO,QAASpU,IAIxB,SAASoU,EAAO7O,EAAMxF,GAClB,OAAQwF,GACJ,IAAK,SACDqO,EAAMhQ,QAAQ,CACV7D,MAAOA,EACPD,MAAM,IAEV,MAEJ,IAAK,QACD8T,EAAMnN,OAAO1G,GACb,MAEJ,QACI6T,EAAMhQ,QAAQ,CACV7D,MAAOA,EACPD,MAAM,KAKlB8T,EAAQA,EAAM/T,MAGVqU,EAAON,EAAMG,IAAKH,EAAMI,KAExBH,EAAO,KAIf1V,KAAKkW,QAAUP,EAEW,mBAAfH,EAAIW,SACXnW,KAAKmW,YAASnC,GAobtB,SAASk7B,GAA8BvrC,EAAQwrC,GAC3C,GAAc,MAAVxrC,EAAgB,MAAO,GAC3B,IAEIiS,EAAKtV,EAFL+T,EAAS,GACT+6B,EAAajtC,OAAOmX,KAAK3V,GAG7B,IAAKrD,EAAI,EAAGA,EAAI8uC,EAAWzuC,OAAQL,IAC/BsV,EAAMw5B,EAAW9uC,GACb6uC,EAASrzB,QAAQlG,IAAQ,IAC7BvB,EAAOuB,GAAOjS,EAAOiS,IAGzB,OAAOvB,EAGX,SAASg7B,GAAyB1rC,EAAQwrC,GACtC,GAAc,MAAVxrC,EAAgB,MAAO,GAE3B,IAEIiS,EAAKtV,EAFL+T,EAAS66B,GAA8BvrC,EAAQwrC,GAInD,GAAIhtC,OAAOmtC,sBAAuB,CAC9B,IAAIC,EAAmBptC,OAAOmtC,sBAAsB3rC,GAEpD,IAAKrD,EAAI,EAAGA,EAAIivC,EAAiB5uC,OAAQL,IACrCsV,EAAM25B,EAAiBjvC,GACnB6uC,EAASrzB,QAAQlG,IAAQ,GACxBzT,OAAOC,UAAUotC,qBAAqB/tC,KAAKkC,EAAQiS,KACxDvB,EAAOuB,GAAOjS,EAAOiS,IAI7B,OAAOvB,EAwJX,SAASo7B,GAAmB3uC,GACxB,OAAO4uC,GAAmB5uC,IAAQ6uC,GAAiB7uC,IAAQ8uC,KAG/D,SAASF,GAAmB5uC,GACxB,GAAIC,MAAMC,QAAQF,GAAM,CACpB,IAAK,IAAIR,EAAI,EAAGwC,EAAO,IAAI/B,MAAMD,EAAIH,QAASL,EAAIQ,EAAIH,OAAQL,IAAKwC,EAAKxC,GAAKQ,EAAIR,GAEjF,OAAOwC,GAQf,SAAS6sC,GAAiBE,GACtB,GACI3uC,OAAOC,YAAYgB,OAAO0tC,IACe,uBAAzC1tC,OAAOC,UAAUrC,SAAS0B,KAAKouC,GAE/B,OAAO9uC,MAAMyB,KAAKqtC,GAyC1B,SAASD,KACL,MAAM,IAAIjtC,UAAU,mDAxqBF,mBAAXzB,QAAyBA,OAAOkV,gBACvCb,GAAgBnT,UAAUlB,OAAOkV,eAAiB,WAC9C,OAAOpW,OAIfuV,GAAgBnT,UAAUV,KAAO,SAASmU,GACtC,OAAO7V,KAAKkW,QAAQ,OAAQL,IAGhCN,GAAgBnT,UAAUiU,MAAQ,SAASR,GACvC,OAAO7V,KAAKkW,QAAQ,QAASL,IAGjCN,GAAgBnT,UAAU+T,OAAS,SAASN,GACxC,OAAO7V,KAAKkW,QAAQ,SAAUL,IA82ClC,IAAIi6B,GAAc,SAAqBhvC,EAAKqY,GACxC,OAAOrY,EAAI0/B,OAAOrnB,EAAO,IAGzB42B,GAAM,SAAazrC,EAAI0rC,GACnBA,EACA1rC,IACOuD,SAASqc,OAChB1e,QAAQC,QAAQ,GAAGgB,KAAKnC,GAExBolB,WAAWplB,EAAI,IAInBoN,GAAK,WACL,IAAIoyB,EAAY,GACZxxB,EAAM,SAAa6xB,EAAO7/B,GAC1BwrC,GACIhM,EACAA,EAAUI,WAAU,SAAS+L,GACzB,OAAOA,EAAS9L,QAAUA,IAAU8L,EAAS3rC,KAAOA,IAAOA,QAInE4rC,EAAQ,SAAc/L,EAAO9E,EAAM2Q,GACnClM,EACKn4B,QAAO,SAASskC,GACb,OAAOA,EAAS9L,QAAUA,KAE7BlkC,KAAI,SAASgwC,GACV,OAAOA,EAAS3rC,MAEnBiV,SAAQ,SAASjV,GACd,OAAOyrC,IAAI,WACP,OAAOzrC,EAAGgjB,WAAM,EAAQmoB,GAAmBpQ,MAC5C2Q,OAGf,MAAO,CACHG,SAAU,SAAkBhM,GACxB,IACI,IAAI/E,EAAOrrB,UAAUpT,OACjB0+B,EAAO,IAAIt+B,MAAMq+B,EAAO,EAAIA,EAAO,EAAI,GACvCE,EAAO,EACXA,EAAOF,EACPE,IAEAD,EAAKC,EAAO,GAAKvrB,UAAUurB,GAE/B4Q,EAAM/L,EAAO9E,GAAM,IAEvB+Q,KAAM,SAAcjM,GAChB,IACI,IAAIkM,EAAQt8B,UAAUpT,OAClB0+B,EAAO,IAAIt+B,MAAMsvC,EAAQ,EAAIA,EAAQ,EAAI,GACzCC,EAAQ,EACZA,EAAQD,EACRC,IAEAjR,EAAKiR,EAAQ,GAAKv8B,UAAUu8B,GAEhCJ,EAAM/L,EAAO9E,GAAM,IAEvB3tB,GAAI,SAAYyyB,EAAO7/B,GACnBw/B,EAAUrkC,KAAK,CAAE0kC,MAAOA,EAAO7/B,GAAIA,KAEvCisC,OAAQ,SAAgBpM,EAAOqM,GAC3B1M,EAAUrkC,KAAK,CACX0kC,MAAOA,EACP7/B,GAAI,WACAgO,EAAI6xB,EAAOqM,GACXA,EAAIlpB,WAAM,EAAQvT,eAI9BzB,IAAKA,IAITm+B,GAA+B,SAC/Bx7B,EACAZ,EACA86B,GAEAhtC,OAAOuuC,oBAAoBz7B,GACtBtJ,QAAO,SAASg0B,GACb,OAAQwP,EAASjP,SAASP,MAE7BpmB,SAAQ,SAAS3D,GACd,OAAOzT,OAAOkvB,eACVhd,EACAuB,EACAzT,OAAOwuC,yBAAyB17B,EAAKW,QAKjDg7B,GAAU,CACV,OACA,UACA,SACA,OACA,KACA,MACA,SACA,YACA,SACA,UACA,WACA,UACA,WACA,oBACA,UAGAviC,GAAgB,SAAuBnO,GACvC,IAAIs/B,EAAM,GAEV,OADAiR,GAA6BvwC,EAAMs/B,EAAKoR,IACjCpR,GAGPqR,GAAsB,SAA6B7C,GACnDA,EAAMz0B,SAAQ,SAASrZ,EAAMiZ,GACrBjZ,EAAK4wC,UACLhB,GAAY9B,EAAO70B,OAK3B43B,GAAa,CACbC,KAAM,EACNC,KAAM,EACNC,kBAAmB,EACnBC,WAAY,EACZC,oBAAqB,EACrBC,iBAAkB,EAClBC,wBAAyB,GACzBC,QAAS,EACTC,WAAY,GAGZC,GAAa,CACbC,MAAO,EACPC,MAAO,EACPC,MAAO,GAGPC,GAAgB,SAAuB3S,GACvC,MAAO,UAAU70B,KAAK60B,IAGtB4S,GAAsB,WACtB,OAAOD,GAAc,IAAME,kBAAkB,IAG7CC,GAAwB,WAGxB,IAAIC,EAAmBH,KACnBI,EAA+B,IAASH,iBAE5C,OAAIG,IADkC,IAASnyC,WAEpC8xC,GAAcK,GAA8B,GAE3B,MAArBD,EAA2B,IAAM,KAGxC/sC,GAAO,CACPyC,QAAS,UACTuB,IAAK,MACLipC,OAAQ,SACR3oC,OAAQ,SACRyC,MAAO,QACPI,OAAQ,SACR/C,SAAU,WACV8oC,OAAQ,SACRC,WAAY,YACZC,MAAO,SAIPviC,GAAU,GAGVwiC,GAAmB,SAA0B38B,EAAKhU,EAAOqD,GACzD,OAAO,IAAIO,SAAQ,SAASC,EAAS6C,GAEjC,IAAIkqC,EAAkBziC,GACjBpE,QAAO,SAAS8mC,GACb,OAAOA,EAAE78B,MAAQA,KAEpB3V,KAAI,SAASwyC,GACV,OAAOA,EAAEnuC,MAIjB,GAA+B,IAA3BkuC,EAAgB7xC,OAApB,CAMA,IAAI+xC,EAAgBF,EAAgB5jC,QAGpC4jC,EACK3pC,QAEG,SAAS8pC,EAASjxC,GACd,OAAOixC,EAAQlsC,MAAK,SAAS7E,GACzB,OAAOF,EAAKE,EAAOqD,QAK3BytC,EAAc9wC,EAAOqD,IAIxBwB,MAAK,SAAS7E,GACX,OAAO6D,EAAQ7D,MAElBuJ,OAAM,SAASynC,GACZ,OAAOtqC,EAAOsqC,WA1BlBntC,EAAQ7D,OA+BhBixC,GAAe,SAAsBj9B,EAAKhU,EAAOqD,GACjD,OAAO8K,GACFpE,QAAO,SAAS8mC,GACb,OAAOA,EAAE78B,MAAQA,KAEpB3V,KAAI,SAASwyC,GACV,OAAOA,EAAEnuC,GAAG1C,EAAOqD,OAK3BD,GAAY,SAAmB4Q,EAAKtR,GACpC,OAAOyL,GAAQtQ,KAAK,CAAEmW,IAAKA,EAAKtR,GAAIA,KAGpCwuC,GAAuB,SAA8BC,GACrD,OAAO5wC,OAAOmJ,OAAO0nC,GAAgBD,IAGrCE,GAAa,WACb,OAAO9wC,OAAOmJ,OAAO,GAAI0nC,KAGzBE,GAAa,SAAoBC,GACjCxX,EAAMwX,GAAM,SAASv9B,EAAKhU,GAEjBoxC,GAAep9B,KAGpBo9B,GAAep9B,GAAK,GAAKu3B,GACrBvrC,EACAoxC,GAAep9B,GAAK,GACpBo9B,GAAep9B,GAAK,SAM5Bo9B,GAAiB,CAEjBrzC,GAAI,CAAC,KAAMuF,GAAKsE,QAGhBjH,KAAM,CAAC,WAAY2C,GAAKsE,QAGxB4pC,SAAU,EAAC,EAAOluC,GAAKyC,SAGvBsK,UAAW,CAAC,KAAM/M,GAAKsE,QAGvB6pC,SAAU,EAAC,EAAOnuC,GAAKyC,SAGvB2rC,cAAe,CAAC,KAAMpuC,GAAKsE,QAM3B+pC,yBAA0B,EAAC,EAAMruC,GAAKyC,SAGtC6rC,UAAW,EAAC,EAAMtuC,GAAKyC,SACvB8rC,YAAa,EAAC,EAAMvuC,GAAKyC,SACzB+rC,WAAY,EAAC,EAAMxuC,GAAKyC,SACxB+c,cAAe,EAAC,EAAOxf,GAAKyC,SAC5BgsC,aAAc,EAAC,EAAMzuC,GAAKyC,SAC1BisC,YAAa,EAAC,EAAM1uC,GAAKyC,SACzBksC,YAAa,EAAC,EAAM3uC,GAAKyC,SACzBmsC,aAAc,EAAC,EAAM5uC,GAAKyC,SAC1BosC,aAAc,EAAC,EAAO7uC,GAAKyC,SAC3BqsC,qBAAsB,EAAC,EAAO9uC,GAAKyC,SAGnCssC,YAAa,EAAC,EAAO/uC,GAAKyC,SAG1BusC,YAAa,EAAC,EAAOhvC,GAAKyC,SAG1BwsC,SAAU,CAAC,KAAMjvC,GAAKgE,KACtBkrC,cAAe,EAAC,EAAOlvC,GAAKyC,SAG5B0sC,0BAA2B,EAAC,EAAMnvC,GAAKyC,SACvC2sC,mBAAoB,CAAC,SAAUpvC,GAAKsE,QACpC+qC,mBAAoB,CAAC,GAAIrvC,GAAKgE,KAG9BsrC,WAAY,EAAC,EAAOtvC,GAAKyC,SACzB8sC,cAAe,EAAC,EAAMvvC,GAAKyC,SAC3B+sC,eAAgB,EAAC,EAAOxvC,GAAKyC,SAC7BgtC,aAAc,CAAC,CAAC,YAAa,YAAa,eAAgBzvC,GAAK+G,OAG/D2oC,cAAe,EAAC,EAAM1vC,GAAKyC,SAC3BktC,mBAAoB,CAAC,EAAG3vC,GAAKgE,KAC7B4rC,2BAA4B,EAAC,EAAM5vC,GAAKyC,SAGxCotC,aAAc,EAAC,EAAO7vC,GAAKyC,SAC3BqtC,WAAY,EAAC,EAAO9vC,GAAKyC,SACzBstC,UAAW,CAAC,IAAS/vC,GAAKgE,KAC1BgsC,iBAAkB,CAAC,CAAC,IAAK,IAAM,KAAOhwC,GAAK+G,OAG3CkpC,OAAQ,CAAC,KAAMjwC,GAAKmtC,YAGpB+C,aAAc,CAAC,IAAMlwC,GAAKgE,KAG1BmsC,sBAAuB,CAACvD,KAAuB5sC,GAAKsE,QACpD8rC,wBAAyB,CAACtD,KAAyB9sC,GAAKsE,QAExD+rC,UAAW,CACP,+EACArwC,GAAKsE,QAGTgsC,kBAAmB,CAAC,+BAAgCtwC,GAAKsE,QACzDisC,wBAAyB,CAAC,mBAAoBvwC,GAAKsE,QACnDksC,0BAA2B,CAAC,qBAAsBxwC,GAAKsE,QACvDmsC,uBAAwB,CAAC,eAAgBzwC,GAAKsE,QAC9CosC,qBAAsB,CAAC,gBAAiB1wC,GAAKsE,QAC7CqsC,iBAAkB,CAAC,UAAW3wC,GAAKsE,QACnCssC,eAAgB,CAAC,QAAS5wC,GAAKsE,QAC/BusC,mBAAoB,CAAC,oBAAqB7wC,GAAKsE,QAC/CwsC,iBAAkB,CAAC,UAAW9wC,GAAKsE,QACnCysC,qBAAsB,CAAC,sBAAuB/wC,GAAKsE,QACnD0sC,oBAAqB,CAAC,YAAahxC,GAAKsE,QACxC2sC,4BAA6B,CAAC,kBAAmBjxC,GAAKsE,QACtD4sC,2BAA4B,CAAC,mBAAoBlxC,GAAKsE,QACtD6sC,yBAA0B,CAAC,sBAAuBnxC,GAAKsE,QACvD8sC,+BAAgC,CAAC,sBAAuBpxC,GAAKsE,QAE7D+sC,iBAAkB,CAAC,gBAAiBrxC,GAAKsE,QACzCgtC,gBAAiB,CAAC,eAAgBtxC,GAAKsE,QACvCitC,eAAgB,CAAC,cAAevxC,GAAKsE,QAErCktC,sBAAuB,CAAC,SAAUxxC,GAAKsE,QACvCmtC,yBAA0B,CAAC,QAASzxC,GAAKsE,QACzCotC,yBAA0B,CAAC,QAAS1xC,GAAKsE,QACzCqtC,+BAAgC,CAAC,SAAU3xC,GAAKsE,QAChDstC,8BAA+B,CAAC,OAAQ5xC,GAAKsE,QAC7CutC,+BAAgC,CAAC,QAAS7xC,GAAKsE,QAC/CwtC,uBAAwB,CAAC,SAAU9xC,GAAKsE,QAGxCytC,WAAY,CACR,6UACA/xC,GAAKsE,QAGT0tC,YAAa,CACT,yTACAhyC,GAAKsE,QAGT2tC,UAAW,CACP,8YACAjyC,GAAKsE,QAGT4tC,SAAU,CACN,kZACAlyC,GAAKsE,QAGT6tC,SAAU,CACN,oQACAnyC,GAAKsE,QAIT8tC,OAAQ,CAAC,KAAMpyC,GAAKoE,UACpBiuC,UAAW,CAAC,KAAMryC,GAAKoE,UACvBuf,QAAS,CAAC,KAAM3jB,GAAKoE,UACrBkuC,eAAgB,CAAC,KAAMtyC,GAAKoE,UAC5BmuC,WAAY,CAAC,KAAMvyC,GAAKoE,UACxBouC,eAAgB,CAAC,KAAMxyC,GAAKoE,UAC5BquC,kBAAmB,CAAC,KAAMzyC,GAAKoE,UAC/BsuC,UAAW,CAAC,KAAM1yC,GAAKoE,UACvBuuC,mBAAoB,CAAC,KAAM3yC,GAAKoE,UAChCwuC,sBAAuB,CAAC,KAAM5yC,GAAKoE,UACnCyuC,mBAAoB,CAAC,KAAM7yC,GAAKoE,UAChC0uC,oBAAqB,CAAC,KAAM9yC,GAAKoE,UACjC2uC,cAAe,CAAC,KAAM/yC,GAAKoE,UAC3B4uC,eAAgB,CAAC,KAAMhzC,GAAKoE,UAC5B6uC,aAAc,CAAC,KAAMjzC,GAAKoE,UAC1B8uC,cAAe,CAAC,KAAMlzC,GAAKoE,UAC3B+uC,cAAe,CAAC,KAAMnzC,GAAKoE,UAC3BgvC,eAAgB,CAAC,KAAMpzC,GAAKoE,UAG5BivC,eAAgB,CAAC,KAAMrzC,GAAKoE,UAC5BkvC,cAAe,CAAC,KAAMtzC,GAAKoE,UAC3BmvC,iBAAkB,CAAC,KAAMvzC,GAAKoE,UAC9BovC,kBAAmB,CAAC,KAAMxzC,GAAKoE,UAG/BqvC,iBAAkB,CAAC,KAAMzzC,GAAKsE,QAC9BovC,sBAAuB,CAAC,KAAM1zC,GAAKsE,QACnCqvC,0BAA2B,CAAC,KAAM3zC,GAAKsE,QACvCsvC,8BAA+B,CAAC,OAAQ5zC,GAAKsE,QAC7CuvC,+BAAgC,CAAC,QAAS7zC,GAAKsE,QAC/CwvC,2BAA4B,CAAC,QAAS9zC,GAAKsE,QAC3CyvC,+BAAgC,CAAC,QAAS/zC,GAAKsE,QAC/C0vC,2BAA4B,EAAC,EAAOh0C,GAAKyC,SAGzC01B,MAAO,CAAC,GAAIn4B,GAAK+G,OAGjBktC,QAAS,CAAC,CAAC,oBAAqB,oBAAqBj0C,GAAK+G,QAG1DmtC,GAAiB,SAAwBpL,EAAOjoC,GAEhD,OAAIgkC,EAAQhkC,GACDioC,EAAM,IAAM,KAInBxD,GAAMzkC,GACCioC,EAAMjoC,IAAU,MAIN,iBAAVA,IACPA,EAAQA,EAAMpG,IAKdquC,EAAMqL,MAAK,SAASn5C,GAChB,OAAOA,EAAKP,KAAOoG,MACjB,OAIVyG,GAAkC,SAAyCgB,GAC3E,GAAIu8B,EAAQv8B,GACR,OAAOA,EAEX,GAAI,IAAI/K,KAAK+K,GAAc,CACvB,IAAIy+B,EAAQz+B,EAAYuiB,MAAM,KAC9B,OAAOkc,EAAM,GAAKA,EAAM,GAE5B,OAAOz0B,WAAWhK,IAGlB8rC,GAAiB,SAAwBtL,GACzC,OAAOA,EAAMriC,QAAO,SAASzL,GACzB,OAAQA,EAAK8sB,aAIjBusB,GAAS,CACTC,MAAO,EACPvI,KAAM,EACNwI,MAAO,EACPC,KAAM,EACNC,MAAO,GAGPC,GAAM,KACNC,GAAqB,WACrB,GAAY,OAARD,GACA,IACI,IAAIE,EAAe,IAAIC,aACvBD,EAAa9L,MAAMz8B,IAAI,IAAIyoC,KAAK,CAAC,eAAgB,mBACjD,IAAIzmB,EAAK1rB,SAASmK,cAAc,SAChCuhB,EAAG/Z,aAAa,OAAQ,QACxB+Z,EAAG8J,MAAQyc,EAAazc,MACxBuc,GAA0B,IAApBrmB,EAAG8J,MAAM18B,OACjB,MAAOkB,GACL+3C,IAAM,EAGd,OAAOA,IAGPK,GAAa,CACblJ,GAAWS,WACXT,GAAWM,iBACXN,GAAWO,yBAGX4I,GAAY,CACZnJ,GAAWQ,QACXR,GAAWI,WACXJ,GAAWG,kBACXH,GAAWC,MAGXmJ,GAAa,CAACpJ,GAAWK,qBAEzBgJ,GAAqB,SAA4Bl6C,GACjD,OAAO+5C,GAAW/Z,SAAShgC,EAAKsI,SAEhC6xC,GAAoB,SAA2Bn6C,GAC/C,OAAOg6C,GAAUha,SAAShgC,EAAKsI,SAE/B8xC,GAAqB,SAA4Bp6C,GACjD,OAAOi6C,GAAWja,SAAShgC,EAAKsI,SAGhC+xC,GAAU,SAAiB3b,GAC3B,OACIlyB,GAASkyB,EAAMv6B,QAAQ8wC,UACtBzoC,GAASkyB,EAAMv6B,QAAQ8wC,OAAOhK,UAAYN,GAAWjM,EAAMv6B,QAAQ8wC,OAAOhK,WAI/EzM,GAAU,SAAiBE,GAC3B,MAAO,CACH4b,WAAY,WACR,IAAIxM,EAAQsL,GAAe1a,EAAMoP,OAC7BwL,EAAQD,GAAOC,MACfC,EAAQF,GAAOE,MACfC,EAAOH,GAAOG,KACdzI,EAAOsI,GAAOtI,KACd0I,EAAQJ,GAAOI,MAEnB,OAAqB,IAAjB3L,EAAMrtC,OAAqB64C,EAE3BxL,EAAMtjC,KAAK0vC,IAA4BX,EAEvCzL,EAAMtjC,KAAK2vC,IAA2BX,EAEtC1L,EAAMtjC,KAAK4vC,IAA4BX,EAEpC1I,GAGXwJ,SAAU,SAAkB10C,GACxB,OAAOqzC,GAAexa,EAAMoP,MAAOjoC,IAGvC20C,gBAAiB,SAAyB30C,GACtC,OAAOqzC,GAAeE,GAAe1a,EAAMoP,OAAQjoC,IAGvD40C,iBAAkB,WACd,OAAOrB,GAAe1a,EAAMoP,QAGhC4M,UAAW,WACP,OAAOhc,EAAMoP,OAGjB6M,cAAe,SAAuB90C,GAClC,IAAI7F,EAAOk5C,GAAexa,EAAMoP,MAAOjoC,GACvC,OAAO7F,EAAOA,EAAK2K,SAAW,MAGlCiwC,cAAe,SAAuB/0C,GAClC,IAAI7F,EAAOk5C,GAAexa,EAAMoP,MAAOjoC,GACvC,OAAO7F,EAAOA,EAAK6I,SAAW,MAGlCgyC,WAAY,WACR,OAAO54C,OAAOmX,KAAKslB,EAAMv6B,SACpBsH,QAAO,SAASiK,GACb,MAAO,SAASnT,KAAKmT,MAExB3V,KAAI,SAASwtC,GACV,MAAO,CACHlrC,KAAMkrC,EACN7rC,MAAOg9B,EAAMv6B,QAAQopC,QAKrCuN,uBAAwB,WAKpB,MAJoB,SAASv4C,KAAKm8B,EAAMv6B,QAAQs0C,kBAE1C,EACAnsC,GAAgCoyB,EAAMv6B,QAAQu0C,wBAIxDqC,4BAA6B,WACzB,OAAOrc,EAAMv6B,QAAQw0C,2BAGzBqC,oBAAqB,SAA6B1yC,GAC9C,OAAO8wC,GAAe1a,EAAMoP,OAAOriC,QAAO,SAASzL,GAC/C,OAAOA,EAAKsI,SAAWA,MAI/B2yC,gBAAiB,WACb,OAAO7B,GAAe1a,EAAMoP,OAAOrtC,QAGvCy6C,yBAA0B,WACtB,OAAOxc,EAAMv6B,QAAQ4vC,aAAe4F,OAAyBU,GAAQ3b,IAGzEyc,SAAU,WACN,OAAOd,GAAQ3b,MAKvB0c,GAAiB,SAAwB1c,GACzC,IAAI2c,EAAQjC,GAAe1a,EAAMoP,OAAOrtC,OAGxC,IAAKi+B,EAAMv6B,QAAQqgB,cACf,OAAiB,IAAV62B,EAIX,IAAIC,EAAe5c,EAAMv6B,QAAQ8vC,SACjC,OAAqB,OAAjBqH,GAKAD,EAAQC,GAQZC,GAAQ,SAAe75C,EAAO6V,EAAKtK,GACnC,OAAOD,KAAKC,IAAID,KAAKuK,IAAItK,EAAKvL,GAAQ6V,IAGtCikC,GAAc,SAAqB56C,EAAKqY,EAAOjZ,GAC/C,OAAOY,EAAI0/B,OAAOrnB,EAAO,EAAGjZ,IAG5By7C,GAAa,SAAoB3N,EAAO9tC,EAAMiZ,GAC9C,OAAI4wB,EAAQ7pC,GACD,UAIU,IAAViZ,GACP60B,EAAMvuC,KAAKS,GACJA,IAIXiZ,EAAQsiC,GAAMtiC,EAAO,EAAG60B,EAAMrtC,QAG9B+6C,GAAY1N,EAAO70B,EAAOjZ,GAGnBA,IAGP07C,GAAkB,SAAyB1c,GAC3C,MAAO,4GAA4Gz8B,KAC/Gy8B,IAIJj1B,GAAqB,SAA4Bib,GACjD,OAAOA,EACF6K,MAAM,KACNzlB,MACAylB,MAAM,KACNnhB,SAGL5E,GAA2B,SAAkCzH,GAC7D,OAAOA,EAAKwtB,MAAM,KAAKzlB,OAGvBuxC,GAAuB,SAA8Bz0C,GAErD,GAAoB,iBAATA,EACP,MAAO,GAIX,IAAI00C,EAAU10C,EAAK2oB,MAAM,KAAKzlB,MAG9B,MAAI,MAAM7H,KAAKq5C,GACJ,MAGP,iBAAiBr5C,KAAKq5C,GACf,MAGP,QAAQr5C,KAAKq5C,GACN,MAGP,SAASr5C,KAAKq5C,GACP,MAIP,SAASr5C,KAAKq5C,GAEE,SAAZA,EACO,MAIJA,EAGJ,IAGPC,GAAU,SAAiBn6C,GAC3B,IAAIo6C,EAAUjoC,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,GAClF,OAAQioC,EAAUp6C,GAAOS,OAAO25C,EAAQr7C,SAGxCs7C,GAAgB,WAChB,IAAIC,EAAOnoC,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,IAAIooC,KACnF,OACID,EAAKE,cACL,IACAL,GAAQG,EAAKG,WAAa,EAAG,MAC7B,IACAN,GAAQG,EAAKI,UAAW,MACxB,IACAP,GAAQG,EAAKK,WAAY,MACzB,IACAR,GAAQG,EAAKM,aAAc,MAC3B,IACAT,GAAQG,EAAKO,aAAc,OAI/B7gB,GAAkB,SAAyB1J,EAAMrnB,GACjD,IAAIzD,EAAO2M,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,KAC3EjJ,EAAYiJ,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,KAChFxP,EACgB,iBAAT6C,EACD8qB,EAAK7vB,MAAM,EAAG6vB,EAAK7qB,KAAMD,GACzB8qB,EAAK7vB,MAAM,EAAG6vB,EAAK7qB,KAAM6qB,EAAK9qB,MAmBxC,OAlBA7C,EAAKm4C,iBAAmB,IAAIP,KAGxBjqB,EAAKyqB,gBAAep4C,EAAKo4C,cAAgBzqB,EAAKyqB,eAG7C7yC,EAASe,KACVA,EAAWoxC,MAIXpxC,GAA0B,OAAdC,GAAsBd,GAAyBa,GAC3DtG,EAAKhC,KAAOsI,GAEZC,EAAYA,GAAa+wC,GAAqBt3C,EAAK6C,MACnD7C,EAAKhC,KAAOsI,GAAYC,EAAY,IAAMA,EAAY,KAGnDvG,GAGP+yB,GAAiB,WACjB,OAAQ1vB,OAAO2vB,YACX3vB,OAAO2vB,aACP3vB,OAAO4vB,mBACP5vB,OAAO6vB,gBACP7vB,OAAO8vB,eAGXC,GAAa,SAAoBC,EAAaztB,GAC9C,IAAI0tB,EAAKP,KAET,GAAIO,EAAI,CACJ,IAAIlD,EAAK,IAAIkD,EAEb,OADAlD,EAAGmD,OAAOF,GACHjD,EAAGoD,QAAQ5tB,GAGtB,OAAO,IAAI3D,KAAK,CAACoxB,GAAc,CAC3BxwB,KAAM+C,KAIVyyC,GAAoC,SACpCC,EACA1yC,GAKA,IAHA,IAAI2yC,EAAK,IAAIC,YAAYF,EAAWl8C,QAChCs0B,EAAK,IAAIrD,WAAWkrB,GAEfx8C,EAAI,EAAGA,EAAIu8C,EAAWl8C,OAAQL,IACnC20B,EAAG30B,GAAKu8C,EAAWhrB,WAAWvxB,GAGlC,OAAOq3B,GAAWmlB,EAAI3yC,IAGtB6yC,GAA+B,SAAsCC,GACrE,OAAQ,cAAc5yC,KAAK4yC,IAAY,IAAI,IAAM,MAGjDC,GAAiC,SAAwCD,GAKzE,OAHWA,EAAQltB,MAAM,KAAK,GAGlBnrB,QAAQ,MAAO,KAG3Bu4C,GAAiC,SAAwCF,GACzE,OAAOtrB,KAAKurB,GAA+BD,KAG3CG,GAA2B,SAAkCH,GAC7D,IAAI9yC,EAAW6yC,GAA6BC,GACxCJ,EAAaM,GAA+BF,GAEhD,OAAOL,GAAkCC,EAAY1yC,IAGrDkzC,GAA2B,SAAkCJ,EAASpyC,EAAUC,GAChF,OAAO8wB,GAAgBwhB,GAAyBH,GAAUpyC,EAAU,KAAMC,IAG1EwyC,GAAwB,SAA+BpR,GAEvD,IAAK,yBAAyBzpC,KAAKypC,GAAS,OAAO,KAGnD,IAAIqR,EAAUrR,EACTnc,MAAM,6BACNyQ,OAAO,GACPvgC,KAAI,SAASsC,GACV,OAAOA,EAAKynC,OAAOplC,QAAQ,qBAAsB,OAEpD+G,QAAO,SAASpJ,GACb,OAAOA,EAAK5B,UAGpB,OAAO48C,EAAQ58C,OAAS68C,UAAUD,EAAQA,EAAQ58C,OAAS,IAAM,MAGjE88C,GAAwB,SAA+BvR,GACvD,GAAI,mBAAmBzpC,KAAKypC,GAAS,CACjC,IAAI7kC,EAAO6kC,EAAOhiB,MAAM,UAAU,GAClC,OAAO7iB,EAAO8iB,SAAS9iB,EAAM,IAAM,KAEvC,OAAO,MAGPq2C,GAA0B,SAAiCxR,GAC3D,MAAI,0BAA0BzpC,KAAKypC,KACrBA,EAAOnc,MAAM,KAAK,IAAM,IAAIia,QAGnC,MAGP2T,GAAyB,SAAgC/R,GACzD,IAAIgS,EAAO,CACPj6C,OAAQ,KACRpB,KAAM,KACN8E,KAAM,MAGNw2C,EAAOjS,EAAQ7b,MAAM,MACrB+tB,GAA4B,EAC5BC,GAAoB,EACpBC,OAAiBhqC,EACrB,IACI,IACI,IAAyCiqC,EAArCC,EAAYL,EAAK38C,OAAOC,cAC1B28C,GAA6BG,EAAQC,EAAUx8C,QAAQC,MACzDm8C,GAA4B,EAC9B,CACE,IAAI5R,EAAS+R,EAAMr8C,MAEfW,EAAO+6C,GAAsBpR,GACjC,GAAI3pC,EACAq7C,EAAKr7C,KAAOA,MADhB,CAKA,IAAI8E,EAAOo2C,GAAsBvR,GACjC,GAAI7kC,EACAu2C,EAAKv2C,KAAOA,MADhB,CAKA,IAAI1D,EAAS+5C,GAAwBxR,GACjCvoC,IACAi6C,EAAKj6C,OAASA,MAIxB,MAAO9B,GACLk8C,GAAoB,EACpBC,EAAiBn8C,EACnB,QACE,IACSi8C,GAAiD,MAApBI,EAAU/nC,QACxC+nC,EAAU/nC,SAEhB,QACE,GAAI4nC,EACA,MAAMC,GAKlB,OAAOJ,GAGPO,GAAmB,SAA0BC,GAC7C,IAAIxf,EAAQ,CACRj7B,OAAQ,KACR06C,UAAU,EACVC,SAAU,EACVj3C,KAAM,KACNwgC,UAAW,KACXzkB,SAAU,EACVtN,QAAS,MAGTyoC,EAAc,WACd,OAAO3f,EAAM0f,UAEbE,EAAQ,WACJ5f,EAAM9oB,SAAW8oB,EAAM9oB,QAAQ0oC,OAC/B5f,EAAM9oB,QAAQ0oC,SAKlBhT,EAAO,WAEP,IAAI7nC,EAASi7B,EAAMj7B,OAEnB67B,EAAI4Q,KAAK,OAAQzsC,GAGbA,aAAkBq2C,KAClBxa,EAAI4Q,KAAK,OAAQzsC,GACVA,aAAkB6C,KAEzBg5B,EAAI4Q,KAAK,OAAQxU,GAAgBj4B,EAAQA,EAAOpB,OACzCq5C,GAAgBj4C,GAEvB67B,EAAI4Q,KAAK,OAAQiN,GAAyB15C,IAG1C86C,EAAQ96C,IAKZ86C,EAAU,SAAiBv5B,GAEtBk5B,GAWLxf,EAAMiJ,UAAYsU,KAAK9S,MAGvBzK,EAAM9oB,QAAUsoC,EACZl5B,GACA,SAAS/gB,GAELy6B,EAAMxb,SAAW+4B,KAAK9S,MAAQzK,EAAMiJ,UAGpCjJ,EAAMyf,UAAW,EAGbl6C,aAAoBqC,OACpBrC,EAAWy3B,GACPz3B,EACAA,EAAS5B,MAAQ0H,GAAmBib,KAI5Csa,EAAI4Q,KACA,OAEAjsC,aAAoBqC,KAAOrC,EAAWA,EAAWA,EAASouB,KAAO,SAGzE,SAASqgB,GACLpT,EAAI4Q,KACA,QACiB,iBAAVwC,EACD,CACIxrC,KAAM,QACNs3C,KAAM,EACNnsB,KAAMqgB,GAEVA,MAGd,SAAS+L,EAAYhM,EAAS7pC,GAEtBA,IACA81B,EAAMv3B,KAAOyB,GAIjB81B,EAAMxb,SAAW+4B,KAAK9S,MAAQzK,EAAMiJ,UAG/B8W,GAML/f,EAAM0f,SAAW3L,EAAU7pC,EAG3B02B,EAAI4Q,KAAK,WAAYxR,EAAM0f,WARvB1f,EAAM0f,SAAW,QAUzB,WACI9e,EAAI4Q,KAAK,YAEb,SAASjsC,GACL,IAAIy6C,EAAWjB,GACS,iBAAbx5C,EAAwBA,EAAWA,EAASynC,SAEvDpM,EAAI4Q,KAAK,OAAQ,CACb/oC,KAAMu3B,EAAMv3B,MAAQu3C,EAASv3C,KAC7BwD,SAAU+zC,EAASr8C,KACnBoB,OAAQi7C,EAASj7C,aA/EzB67B,EAAI4Q,KAAK,QAAS,CACdhpC,KAAM,QACNmrB,KAAM,iBACNmsB,KAAM,OAkFdlf,EAAMr9B,OAAOmJ,OAAO,GAAIoG,KAAM,CAC9BmtC,UAAW,SAAmBl7C,GAC1B,OAAQi7B,EAAMj7B,OAASA,GAE3B46C,YAAaA,EACbC,MAAOA,EACPhT,KAAMA,IAGV,OAAOhM,GAGPsf,GAAQ,SAAehT,GACvB,MAAO,WAAWrpC,KAAKqpC,IAGvBiT,GAAc,SAAqBx7C,EAAM2hB,EAAK7gB,GAC9C,IAAIm7B,EAAM,CACNwf,UAAW,aACXC,WAAY,aACZ9qC,OAAQ,aACR+qC,UAAW,aACXr2B,QAAS,aACTs2B,QAAS,aACTX,MAAO,WACHY,GAAU,EACVC,EAAIb,UAKRY,GAAU,EACVE,GAAkB,EAGtBj7C,EAAUlC,OAAOmJ,OACb,CACIwgC,OAAQ,OACRF,QAAS,GACTG,iBAAiB,GAErB1nC,GAIJ6gB,EAAMq6B,UAAUr6B,GAIZ45B,GAAMz6C,EAAQynC,SAAWvoC,IACzB2hB,EACI,GACAA,EACA9hB,mBAAmC,iBAATG,EAAoBA,EAAOF,KAAKC,UAAUC,KAI5E,IAAI87C,EAAM,IAAIG,eAwFd,OArFcV,GAAMz6C,EAAQynC,QAAUuT,EAAMA,EAAII,QACxCR,WAAa,SAASj7C,GAEtBo7C,GAIJ5f,EAAIyf,WAAWj7C,EAAE07C,iBAAkB17C,EAAE27C,OAAQ37C,EAAE8E,QAInDu2C,EAAIO,mBAAqB,WAEjBP,EAAIQ,WAAa,GAKE,IAAnBR,EAAIQ,YAAmC,IAAfR,EAAI72C,QAI5B82C,IAIJA,GAAkB,EAGlB9f,EAAIwf,UAAUK,KAIlBA,EAAIlrC,OAAS,WAELkrC,EAAI72C,QAAU,KAAO62C,EAAI72C,OAAS,IAClCg3B,EAAIrrB,OAAOkrC,GAEX7f,EAAI3W,QAAQw2B,IAKpBA,EAAIx2B,QAAU,WACV,OAAO2W,EAAI3W,QAAQw2B,IAIvBA,EAAIF,QAAU,WACVC,GAAU,EACV5f,EAAI2f,WAIRE,EAAIH,UAAY,WACZ,OAAO1f,EAAI0f,UAAUG,IAIzBA,EAAIxuC,KAAKxM,EAAQynC,OAAQ5mB,GAAK,GAG1BslB,GAAMnmC,EAAQsnC,WACd0T,EAAI1T,QAAUtnC,EAAQsnC,SAI1BxpC,OAAOmX,KAAKjV,EAAQunC,SAASryB,SAAQ,SAAS3D,GAC1C,IAAIhU,EAAQuB,SAASC,mBAAmBiB,EAAQunC,QAAQh2B,KACxDypC,EAAIS,iBAAiBlqC,EAAKhU,MAI1ByC,EAAQ07C,eACRV,EAAIU,aAAe17C,EAAQ07C,cAI3B17C,EAAQ0nC,kBACRsT,EAAItT,iBAAkB,GAI1BsT,EAAI1pC,KAAKpS,GAEFi8B,GAGPwgB,GAAiB,SAAwB54C,EAAMs3C,EAAMnsB,EAAMqZ,GAC3D,MAAO,CACHxkC,KAAMA,EACNs3C,KAAMA,EACNnsB,KAAMA,EACNqZ,QAASA,IAIbqU,GAAwB,SAA+B37C,GACvD,OAAO,SAAS+6C,GACZ/6C,EAAG07C,GAAe,QAAS,EAAG,UAAWX,EAAIa,4BAIjDC,GAAQ,SAAejhB,GACvB,MAAO,KAAKz8B,KAAKy8B,IAEjBkhB,GAAW,WAEX,IADA,IAAIl7B,EAAM,GACDka,EAAOrrB,UAAUpT,OAAQsrC,EAAQ,IAAIlrC,MAAMq+B,GAAOE,EAAO,EAAGA,EAAOF,EAAME,IAC9E2M,EAAM3M,GAAQvrB,UAAUurB,GAK5B,OAHA2M,EAAM1yB,SAAQ,SAAS+0B,GACnBppB,GAAOi7B,GAAMj7B,IAAQi7B,GAAM7R,GAAQA,EAAK1pC,QAAQ,KAAM,KAAO0pC,KAE1DppB,GAGPm7B,GAAsB,WACtB,IAAIC,EAASvsC,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,GAC7E7M,EAAS6M,UAAUpT,OAAS,EAAIoT,UAAU,QAAKC,EAEnD,GAAsB,mBAAX9M,EACP,OAAOA,EAIX,IAAKA,IAAW4C,EAAS5C,EAAOge,KAC5B,OAAO,KAIX,IAAI/Q,EACAjN,EAAOiN,QACP,SAASylC,GACL,OAAOA,GAEX/wB,EACA3hB,EAAO2hB,SACP,SAAS+wB,GACL,OAAO,MAIf,OAAO,SAAS10B,EAAKsmB,EAAMoH,EAAO0L,EAAUE,EAAO5S,GAE/C,IAAI91B,EAAUipC,GACV75B,EACAk7B,GAASE,EAAQp5C,EAAOge,KACxB/iB,OAAOmJ,OAAO,GAAIpE,EAAQ,CACtB64C,aAAc,UA4CtB,OAxCAjqC,EAAQ3B,OAAS,SAASkrC,GAEtB,IAAIzT,EAAUyT,EAAIa,wBAGdr1C,EAAW8yC,GAAuB/R,GAASrpC,MAAQ0H,GAAmBib,GAG1EsmB,EACIwU,GACI,OACAX,EAAI72C,OACc,SAAlBtB,EAAO4kC,OACD,KACAlQ,GAAgBznB,EAAOkrC,EAAIl7C,UAAW0G,GAC5C+gC,KAKZ91B,EAAQ+S,QAAU,SAASw2B,GACvBzM,EACIoN,GACI,QACAX,EAAI72C,OACJqgB,EAAQw2B,EAAIl7C,WAAak7C,EAAIkB,WAC7BlB,EAAIa,2BAKhBpqC,EAAQkpC,UAAY,SAASK,GACzBzT,EAAQoU,GAAe,UAAWX,EAAI72C,OAAQ,KAAM62C,EAAIa,2BAG5DpqC,EAAQopC,UAAYe,GAAsBrN,GAC1C98B,EAAQmpC,WAAaX,EACrBxoC,EAAQqpC,QAAUX,EAGX1oC,IAIX0qC,GAAc,CACdC,OAAQ,EACRC,SAAU,EACVvP,WAAY,EACZsI,MAAO,EACPkH,QAAS,GAaTC,GAAqB,SACrBN,EACAp5C,EACA3E,EACAgC,EACA8B,EACAmlC,EACAoH,EACA0L,EACAE,EACAjmB,EACAl0B,GA8GA,IA3GA,IAAIw8C,EAAS,GACTC,EAAkBz8C,EAAQy8C,gBAC1BC,EAAc18C,EAAQ08C,YACtB9L,EAAY5wC,EAAQ4wC,UACpBC,EAAmB7wC,EAAQ6wC,iBAG3BtW,EAAQ,CACRoiB,SAAUF,EACV1B,SAAS,GAITpT,EACA9kC,EAAO8kC,QACP,SAASiV,GACL,OAAOA,GAEX9sC,EACAjN,EAAOiN,QACP,SAASkrC,EAAKvT,GACV,MAAkB,SAAXA,EAAoBuT,EAAI6B,kBAAkB,iBAAmB7B,EAAIl7C,UAE5E0kB,EACA3hB,EAAO2hB,SACP,SAAS+wB,GACL,OAAO,MAIXuH,EAAoB,SAA2B78C,GAC/C,IAAI88C,EAAW,IAAIC,SAGf30C,GAASrG,IAAW+6C,EAAStpB,OAAOv1B,EAAMc,KAAKC,UAAU+C,IAE7D,IAAIulC,EAC0B,mBAAnB1kC,EAAO0kC,QACR1kC,EAAO0kC,QAAQrnC,EAAM8B,GACrBlE,OAAOmJ,OAAO,GAAIpE,EAAO0kC,QAAS,CAC9B,gBAAiBrnC,EAAK8C,OAGhCi6C,EAAgBn/C,OAAOmJ,OAAO,GAAIpE,EAAQ,CAC1C0kC,QAASA,IAIT91B,EAAUipC,GACV/S,EAAOoV,GACPhB,GAASE,EAAQp5C,EAAOge,KACxBo8B,GAGJxrC,EAAQ3B,OAAS,SAASkrC,GACtB,OAAO/6C,EAAG6P,EAAOkrC,EAAKiC,EAAcxV,UAGxCh2B,EAAQ+S,QAAU,SAASw2B,GACvB,OAAOzM,EACHoN,GACI,QACAX,EAAI72C,OACJqgB,EAAQw2B,EAAIl7C,WAAak7C,EAAIkB,WAC7BlB,EAAIa,2BAKhBpqC,EAAQopC,UAAYe,GAAsBrN,IAG1C2O,EAAwB,SAA+Bj9C,GACvD,IAAIk9C,EAAapB,GAASE,EAAQS,EAAY77B,IAAK0Z,EAAMoiB,UAOrDM,EAAgB,CAChB1V,QAL0B,mBAAnB1kC,EAAO0kC,QACR1kC,EAAO0kC,QAAQhN,EAAMoiB,UACrB7+C,OAAOmJ,OAAO,GAAIpE,EAAO0kC,SAI/BE,OAAQ,QAGRh2B,EAAUipC,GAAY,KAAMyC,EAAYF,GAE5CxrC,EAAQ3B,OAAS,SAASkrC,GACtB,OAAO/6C,EAAG6P,EAAOkrC,EAAKiC,EAAcxV,UAGxCh2B,EAAQ+S,QAAU,SAASw2B,GACvB,OAAOzM,EACHoN,GACI,QACAX,EAAI72C,OACJqgB,EAAQw2B,EAAIl7C,WAAak7C,EAAIkB,WAC7BlB,EAAIa,2BAKhBpqC,EAAQopC,UAAYe,GAAsBrN,IAI1C6O,EAAiBv0C,KAAKib,MAAM5jB,EAAK8C,KAAO4tC,GACnC30C,EAAI,EAAGA,GAAKmhD,EAAgBnhD,IAAK,CACtC,IAAIuT,EAASvT,EAAI20C,EACb1xC,EAAOgB,EAAKlC,MAAMwR,EAAQA,EAASohC,EAAW,mCAClD4L,EAAOvgD,GAAK,CACR6Y,MAAO7Y,EACP+G,KAAM9D,EAAK8D,KACXwM,OAAQA,EACRtQ,KAAMA,EACNgB,KAAMA,EACN+5C,SAAU,EACVoD,QAASjS,GAAmByF,GAC5B1sC,OAAQg4C,GAAYC,OACpB7N,MAAO,KACP98B,QAAS,KACT61B,QAAS,MAIjB,IAAIgW,EAA2B,WAC3B,OAAOnW,EAAK5M,EAAMoiB,WAGlBY,EAAkB,SAAyBC,GAC3C,OAAOA,EAAMr5C,SAAWg4C,GAAYC,QAAUoB,EAAMr5C,SAAWg4C,GAAY/G,OAG3EqI,EAAe,SAAsBD,GAErC,IAAIjjB,EAAMwgB,QAMV,GAHAyC,EAAQA,GAAShB,EAAOxH,KAAKuI,GAG7B,CAeAC,EAAMr5C,OAASg4C,GAAYrP,WAC3B0Q,EAAMvD,SAAW,KAGjB,IAAItS,EACA+U,EAAY/U,QACZ,SAASiV,GACL,OAAOA,GAEXp4B,EACAk4B,EAAYl4B,SACZ,SAAS+wB,GACL,OAAO,MAIX4H,EAAapB,GAASE,EAAQS,EAAY77B,IAAK0Z,EAAMoiB,UAErDpV,EAC+B,mBAAxBmV,EAAYnV,QACbmV,EAAYnV,QAAQiW,GACpB1/C,OAAOmJ,OAAO,GAAIy1C,EAAYnV,QAAS,CACnC,eAAgB,kCAChB,gBAAiBiW,EAAMhuC,OACvB,gBAAiBtP,EAAK8C,KACtB,cAAe9C,EAAKhC,OAG9BuT,EAAW+rC,EAAM/rC,QAAUipC,GAC3B/S,EAAO6V,EAAMt+C,MACbi+C,EACAr/C,OAAOmJ,OAAO,GAAIy1C,EAAa,CAC3BnV,QAASA,KAIjB91B,EAAQ3B,OAAS,WAEb0tC,EAAMr5C,OAASg4C,GAAYE,SAG3BmB,EAAM/rC,QAAU,KAGhBisC,KAGJjsC,EAAQmpC,WAAa,SAASS,EAAkBC,EAAQ72C,GACpD+4C,EAAMvD,SAAWoB,EAAmBC,EAAS,KAC7CqC,KAGJlsC,EAAQ+S,QAAU,SAASw2B,GACvBwC,EAAMr5C,OAASg4C,GAAY/G,MAC3BoI,EAAM/rC,QAAU,KAChB+rC,EAAMjP,MAAQ/pB,EAAQw2B,EAAIl7C,WAAak7C,EAAIkB,WACtC0B,EAAkBJ,IACnBjP,EACIoN,GACI,QACAX,EAAI72C,OACJqgB,EAAQw2B,EAAIl7C,WAAak7C,EAAIkB,WAC7BlB,EAAIa,2BAMpBpqC,EAAQopC,UAAY,SAASG,GACzBwC,EAAMr5C,OAASg4C,GAAY/G,MAC3BoI,EAAM/rC,QAAU,KACXmsC,EAAkBJ,IACnB5B,GAAsBrN,EAAtBqN,CAA6BZ,IAIrCvpC,EAAQqpC,QAAU,WACd0C,EAAMr5C,OAASg4C,GAAYC,OAC3BoB,EAAM/rC,QAAU,KAChB0oC,UA3FIqC,EAAOqB,OAAM,SAASL,GAClB,OAAOA,EAAMr5C,SAAWg4C,GAAYE,aAGxCiB,KA2FRM,EAAoB,SAA2BJ,GAE/C,OAA6B,IAAzBA,EAAMH,QAAQ/gD,SAGlBkhD,EAAMr5C,OAASg4C,GAAYG,QAC3BrX,aAAauY,EAAMlW,SACnBkW,EAAMlW,QAAUjiB,YAAW,WACvBo4B,EAAaD,KACdA,EAAMH,QAAQ9yC,UAGV,IAGPozC,EAAsB,WAEtB,IAAIG,EAAuBtB,EAAOh4C,QAAO,SAASy5B,EAAGuf,GACjD,OAAU,OAANvf,GAAiC,OAAnBuf,EAAMvD,SAA0B,KAC3Chc,EAAIuf,EAAMvD,WAClB,GAGH,GAA6B,OAAzB6D,EAA+B,OAAO7D,GAAS,EAAO,EAAG,GAG7D,IAAI8D,EAAYvB,EAAOh4C,QAAO,SAASC,EAAO+4C,GAC1C,OAAO/4C,EAAQ+4C,EAAMx6C,OACtB,GAGHi3C,GAAS,EAAM6D,EAAsBC,IAIrCL,EAAgB,WACMlB,EAAOl1C,QAAO,SAASk2C,GACzC,OAAOA,EAAMr5C,SAAWg4C,GAAYrP,cACrCxwC,QACoB,GACvBmhD,KAGAO,EAAc,WACdxB,EAAOtnC,SAAQ,SAASsoC,GACpBvY,aAAauY,EAAMlW,SACfkW,EAAM/rC,SACN+rC,EAAM/rC,QAAQ0oC,YAsC1B,OAhCK5f,EAAMoiB,SAaPO,GAAsB,SAAS1tC,GAEvB+qB,EAAMwgB,UAGVyB,EACKl1C,QAAO,SAASk2C,GACb,OAAOA,EAAMhuC,OAASA,KAEzB0F,SAAQ,SAASsoC,GACdA,EAAMr5C,OAASg4C,GAAYE,SAC3BmB,EAAMvD,SAAWuD,EAAMx6C,QAI/B06C,QA3BJZ,GAAkB,SAASH,GAEnBpiB,EAAMwgB,UAGV7mB,EAASyoB,GAGTpiB,EAAMoiB,SAAWA,EACjBe,QAsBD,CACHvD,MAAO,WACH5f,EAAMwgB,SAAU,EAChBiD,OAaRC,GAA8B,SAC9BhC,EACAp5C,EACA3E,EACA8B,GAEA,OAAO,SAASE,EAAM8B,EAAUmlC,EAAMoH,EAAO0L,EAAUE,EAAOjmB,GAE1D,GAAKh0B,EAAL,CAGA,IAAIg+C,EAAiBl+C,EAAQ0wC,aACzByN,EAAoBD,GAAkBh+C,EAAK8C,KAAOhD,EAAQ4wC,UAC1DwN,EAAkBF,IAAmBC,GAAqBn+C,EAAQ2wC,YACtE,GAAIzwC,aAAgBiC,MAAQi8C,EACxB,OAAO7B,GACHN,EACAp5C,EACA3E,EACAgC,EACA8B,EACAmlC,EACAoH,EACA0L,EACAE,EACAjmB,EACAl0B,GAIR,IAAI2nC,EACA9kC,EAAO8kC,QACP,SAASiV,GACL,OAAOA,GAEX9sC,EACAjN,EAAOiN,QACP,SAASylC,GACL,OAAOA,GAEX/wB,EACA3hB,EAAO2hB,SACP,SAAS+wB,GACL,OAAO,MAGXhO,EAC0B,mBAAnB1kC,EAAO0kC,QACR1kC,EAAO0kC,QAAQrnC,EAAM8B,IAAa,GAClClE,OAAOmJ,OACH,GAEApE,EAAO0kC,SAGjB0V,EAAgBn/C,OAAOmJ,OAAO,GAAIpE,EAAQ,CAC1C0kC,QAASA,IAITwV,EAAW,IAAIC,SAGf30C,GAASrG,IACT+6C,EAAStpB,OAAOv1B,EAAMc,KAAKC,UAAU+C,KAIxC9B,aAAgBiC,KAAO,CAAC,CAAEjE,KAAM,KAAMgC,KAAMA,IAAUA,GAAMgV,SAAQ,SAASrZ,GAC1EkhD,EAAStpB,OACLv1B,EACArC,EAAKqE,KACS,OAAdrE,EAAKqC,KAAgBrC,EAAKqE,KAAKhC,KAAO,GAAKrC,EAAKqC,KAAOrC,EAAKqE,KAAKhC,SAKzE,IAAIuT,EAAUipC,GACV/S,EAAOoV,GACPhB,GAASE,EAAQp5C,EAAOge,KACxBo8B,GA6BJ,OA3BAxrC,EAAQ3B,OAAS,SAASkrC,GACtB7T,EACIwU,GACI,OACAX,EAAI72C,OACJ2L,EAAOkrC,EAAIl7C,UACXk7C,EAAIa,2BAKhBpqC,EAAQ+S,QAAU,SAASw2B,GACvBzM,EACIoN,GACI,QACAX,EAAI72C,OACJqgB,EAAQw2B,EAAIl7C,WAAak7C,EAAIkB,WAC7BlB,EAAIa,2BAKhBpqC,EAAQopC,UAAYe,GAAsBrN,GAC1C98B,EAAQmpC,WAAaX,EACrBxoC,EAAQqpC,QAAUX,EAGX1oC,KAIX4sC,GAA0B,WAC1B,IAAIpC,EAASvsC,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,GAC7E7M,EAAS6M,UAAUpT,OAAS,EAAIoT,UAAU,QAAKC,EAC/CzR,EAAOwR,UAAUpT,OAAS,EAAIoT,UAAU,QAAKC,EAC7C3P,EAAU0P,UAAUpT,OAAS,EAAIoT,UAAU,QAAKC,EAGpD,MAAsB,mBAAX9M,EACA,WACH,IACI,IAAIk4B,EAAOrrB,UAAUpT,OAAQgiD,EAAS,IAAI5hD,MAAMq+B,GAAOE,EAAO,EAC9DA,EAAOF,EACPE,IAEAqjB,EAAOrjB,GAAQvrB,UAAUurB,GAE7B,OAAOp4B,EAAOogB,WAAM,EAAQ,CAAC/kB,GAAMnC,OAAOuiD,EAAQ,CAACt+C,MAItD6C,GAAW4C,EAAS5C,EAAOge,KAGzBo9B,GAA4BhC,EAAQp5C,EAAQ3E,EAAM8B,GAHZ,MAU7Cu+C,GAAuB,WACvB,IAAItC,EAASvsC,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,GAC7E7M,EAAS6M,UAAUpT,OAAS,EAAIoT,UAAU,QAAKC,EAEnD,GAAsB,mBAAX9M,EACP,OAAOA,EAIX,IAAKA,IAAW4C,EAAS5C,EAAOge,KAC5B,OAAO,SAAS29B,EAAcrX,GAC1B,OAAOA,KAKf,IAAIr3B,EACAjN,EAAOiN,QACP,SAASylC,GACL,OAAOA,GAEX/wB,EACA3hB,EAAO2hB,SACP,SAAS+wB,GACL,OAAO,MAIf,OAAO,SAASiJ,EAAcrX,EAAMoH,GAChC,IAAI98B,EAAUipC,GACV8D,EACAvC,EAASp5C,EAAOge,IAChBhe,GA0BJ,OAxBA4O,EAAQ3B,OAAS,SAASkrC,GACtB7T,EACIwU,GACI,OACAX,EAAI72C,OACJ2L,EAAOkrC,EAAIl7C,UACXk7C,EAAIa,2BAKhBpqC,EAAQ+S,QAAU,SAASw2B,GACvBzM,EACIoN,GACI,QACAX,EAAI72C,OACJqgB,EAAQw2B,EAAIl7C,WAAak7C,EAAIkB,WAC7BlB,EAAIa,2BAKhBpqC,EAAQopC,UAAYe,GAAsBrN,GAEnC98B,IAIXgtC,GAAkB,WAClB,IAAIrrC,EAAM1D,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,EAC1E5G,EAAM4G,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,EAC9E,OAAO0D,EAAMvK,KAAK+qB,UAAY9qB,EAAMsK,IAGpCsrC,GAAoC,SAA2Cz+C,GAC/E,IAAI8e,EAAWrP,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,IAE/EivC,EAAUjvC,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,GAC9EkvC,EAAUlvC,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,IAC9E43B,EAAU,KACV/I,EAAQuZ,KAAK9S,MAuBjB,OAFIjmB,EAAW,GAnBJ,SAAS+lB,IAChB,IAAI+Z,EAAU/G,KAAK9S,MAAQzG,EACvBD,EAAQmgB,GAAgBE,EAASC,GAEjCC,EAAUvgB,EAAQvf,IAClBuf,EAAQugB,EAAUvgB,EAAQvf,GAG9B,IAAIk7B,EAAW4E,EAAU9/B,EACrBk7B,GAAY,GAAKz2C,SAASqc,OAC1B5f,EAAG,IAIPA,EAAGg6C,GAEH3S,EAAUjiB,WAAWyf,EAAMxG,IAGbwG,GAEX,CACHga,MAAO,WACH7Z,aAAaqC,MAKrByX,GAAsB,SAA6BC,EAAWh/C,GAC9D,IAAIu6B,EAAQ,CACRyf,UAAU,EACViF,kBAAmB,EACnBC,4BAA6B,KAC7BjF,SAAU,KACVzW,UAAW,KACX2b,kBAAmB,EACnBpgC,SAAU,EACVtN,QAAS,KACT3R,SAAU,MAEV2wC,EAA6BzwC,EAAQywC,2BAErC3J,EAAU,SAAiB5mC,EAAM8B,GACjC,IAAIo9C,EAAa,WAIU,IAAnB7kB,EAAMxb,UAAqC,OAAnBwb,EAAM0f,UAGlC9e,EAAI4Q,KAAK,WAAY5Q,EAAI+e,gBAGzBmF,EAAa,WACb9kB,EAAMyf,UAAW,EACjB7e,EAAI4Q,KAAK,iBAAkBxR,EAAMz6B,SAASouB,OAI9CiN,EAAI4Q,KAAK,SAGTxR,EAAMiJ,UAAYsU,KAAK9S,MAGvBzK,EAAM2kB,4BAA8BR,IAChC,SAASzE,GACL1f,EAAM0kB,kBAAoBhF,EAC1B1f,EAAM4kB,kBAAoBrH,KAAK9S,MAAQzK,EAAMiJ,UAE7C4b,IAII7kB,EAAMz6B,UAAwC,IAA5By6B,EAAM0kB,oBAA4B1kB,EAAMyf,UAE1DqF,MAKR5O,EAA6BgO,GAAgB,IAAK,MAAQ,GAI9DlkB,EAAM9oB,QAAUutC,EAEZ9+C,EAGA8B,GAKA,SAASlC,GAGLy6B,EAAMz6B,SAAWuI,GAASvI,GACpBA,EACA,CACIiD,KAAM,OACNs3C,KAAM,IACNnsB,KAAM,GAAKpuB,EACXynC,QAAS,IAInBhN,EAAMxb,SAAW+4B,KAAK9S,MAAQzK,EAAMiJ,UAGpCjJ,EAAM0f,SAAW,EAGjB9e,EAAI4Q,KAAK,OAAQxR,EAAMz6B,SAASouB,QAM3BuiB,GACAA,GAA0D,IAA5BlW,EAAM0kB,oBAErCI,OAKR,SAAS9Q,GAELhU,EAAM2kB,4BAA4BJ,QAGlC3jB,EAAI4Q,KACA,QACA1jC,GAASkmC,GACHA,EACA,CACIxrC,KAAM,QACNs3C,KAAM,EACNnsB,KAAM,GAAKqgB,OAM7B,SAAS+L,EAAYhM,EAAS7pC,GAE1B81B,EAAMxb,SAAW+4B,KAAK9S,MAAQzK,EAAMiJ,UAGpCjJ,EAAM0f,SAAWK,EAAahM,EAAU7pC,EAAQ,KAEhD26C,OAIJ,WAEI7kB,EAAM2kB,4BAA4BJ,QAGlC3jB,EAAI4Q,KAAK,QAASxR,EAAMz6B,SAAWy6B,EAAMz6B,SAASouB,KAAO,SAI7D,SAASoxB,GACLnkB,EAAI4Q,KAAK,WAAYuT,OAK7BnF,EAAQ,WAEH5f,EAAM9oB,UAGX8oB,EAAM2kB,4BAA4BJ,QAG9BvkB,EAAM9oB,QAAQ0oC,OAAO5f,EAAM9oB,QAAQ0oC,QAGvC5f,EAAMyf,UAAW,IAGjBuF,EAAQ,WACRpF,IACA5f,EAAMyf,UAAW,EACjBzf,EAAM0kB,kBAAoB,EAC1B1kB,EAAM0f,SAAW,EACjB1f,EAAMiJ,UAAY,KAClBjJ,EAAM4kB,kBAAoB,EAC1B5kB,EAAMxb,SAAW,EACjBwb,EAAM9oB,QAAU,KAChB8oB,EAAMz6B,SAAW,MAGjBo6C,EAAczJ,EACZ,WACI,OAAOlW,EAAM0f,SAAWpxC,KAAKuK,IAAImnB,EAAM0f,SAAU1f,EAAM0kB,mBAAqB,MAEhF,WACI,OAAO1kB,EAAM0f,UAAY,MAG/BuF,EAAc/O,EACZ,WACI,OAAO5nC,KAAKuK,IAAImnB,EAAMxb,SAAUwb,EAAM4kB,oBAE1C,WACI,OAAO5kB,EAAMxb,UAGnBoc,EAAMr9B,OAAOmJ,OAAO,GAAIoG,KAAM,CAC9By5B,QAASA,EACTqT,MAAOA,EACPD,YAAaA,EACbsF,YAAaA,EACbD,MAAOA,IAGX,OAAOpkB,GAGP/P,GAA8B,SAAqCltB,GACnE,OAAOA,EAAKmtB,OAAO,EAAGntB,EAAKotB,YAAY,OAASptB,GAGhDuhD,GAAiB,SAAwBngD,GACzC,IAAIJ,EAAO,CAACI,EAAOpB,KAAMoB,EAAO0D,KAAM1D,EAAOyD,MAgB7C,OAbIzD,aAAkB6C,MAAQo1C,GAAgBj4C,GAC1CJ,EAAK,GAAKI,EAAOpB,MAAQ05C,KAClBL,GAAgBj4C,IAEvBJ,EAAK,GAAKI,EAAOhD,OACjB4C,EAAK,GAAKy5C,GAA6Br5C,IAChCmG,EAASnG,KAEhBJ,EAAK,GAAK0G,GAAmBtG,GAC7BJ,EAAK,GAAK,EACVA,EAAK,GAAK,4BAGP,CACHhB,KAAMgB,EAAK,GACX8D,KAAM9D,EAAK,GACX6D,KAAM7D,EAAK,KAIf8B,GAAS,SAAgBzD,GACzB,SAAUA,aAAiBo4C,MAASp4C,aAAiB4E,MAAQ5E,EAAMW,OAGnEwhD,GAAkB,SAASA,EAAgB9uC,GAC3C,IAAKvI,GAASuI,GAAM,OAAOA,EAC3B,IAAIZ,EAASrT,EAAQiU,GAAO,GAAK,GACjC,IAAK,IAAIW,KAAOX,EACZ,GAAKA,EAAI4qB,eAAejqB,GAAxB,CACA,IAAIW,EAAItB,EAAIW,GACZvB,EAAOuB,GAAOW,GAAK7J,GAAS6J,GAAKwtC,EAAgBxtC,GAAKA,EAE1D,OAAOlC,GAGP2vC,GAAa,WACb,IAAIx1C,EAASuF,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,KAC7EkwC,EACAlwC,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,KACpExP,EAAOwP,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,KAE3EpU,EAAKq4B,KAKL4G,EAAQ,CAER5R,UAAU,EAGVk3B,QAAQ,EAGRpT,UAAU,EAGVntC,OAAQ,KAGRY,KAAMA,EAGN0/C,oBAAqBA,EAGrBN,WAAY,KAGZQ,mBAAmB,EAGnB37C,OAAQy7C,EAAsBlT,GAAWK,oBAAsBL,GAAWC,KAG1EoT,aAAc,KACdC,gBAAiB,MAIjBC,EAAiC,KAKjCj+C,EAAW,GAGXk+C,EAAY,SAAmB/7C,GAC/B,OAAQo2B,EAAMp2B,OAASA,GAIvB4nC,EAAO,SAAcjM,GACrB,IAAIvF,EAAMkS,WAAYlS,EAAMslB,OAA5B,CACA,IACI,IAAI9kB,EAAOrrB,UAAUpT,OAAQgiD,EAAS,IAAI5hD,MAAMq+B,EAAO,EAAIA,EAAO,EAAI,GAAIE,EAAO,EACjFA,EAAOF,EACPE,IAEAqjB,EAAOrjB,EAAO,GAAKvrB,UAAUurB,GAEjCE,EAAI4Q,KAAK9oB,MAAMkY,EAAK,CAAC2E,GAAO/jC,OAAOuiD,MAInC6B,EAAmB,WACnB,OAAOx6C,GAAyB40B,EAAMr6B,KAAKhC,OAE3CkiD,EAAc,WACd,OAAO7lB,EAAMr6B,KAAK6C,MAElBs9C,EAAc,WACd,OAAO9lB,EAAMr6B,KAAK8C,MAElBs9C,EAAU,WACV,OAAO/lB,EAAMr6B,MAMbinC,EAAO,SAAc7nC,EAAQihD,EAAQzwC,GAErCyqB,EAAMj7B,OAASA,EAGf67B,EAAI2Q,SAAS,QAGTvR,EAAMr6B,KACNi7B,EAAI2Q,SAAS,cAKjBvR,EAAMr6B,KAAOu/C,GAAengD,GAG5BihD,EAAOlzC,GAAG,QAAQ,WACd0+B,EAAK,gBAITwU,EAAOlzC,GAAG,QAAQ,SAASmzC,GAEvBjmB,EAAMr6B,KAAK8C,KAAOw9C,EAAKx9C,KAGvBu3B,EAAMr6B,KAAKsG,SAAWg6C,EAAKh6C,SAGvBg6C,EAAKlhD,SACL6K,EAASijC,GAAWE,MACpB/S,EAAMqlB,oBAAsBY,EAAKlhD,OACjCi7B,EAAMp2B,OAASuoC,GAAWK,qBAI9BhB,EAAK,gBAITwU,EAAOlzC,GAAG,YAAY,SAAS4sC,GAC3BiG,EAAUxT,GAAWQ,SAErBnB,EAAK,gBAAiBkO,MAI1BsG,EAAOlzC,GAAG,SAAS,SAASkhC,GACxB2R,EAAUxT,GAAWS,YAErBpB,EAAK,qBAAsBwC,MAI/BgS,EAAOlzC,GAAG,SAAS,WACf6yC,EAAUxT,GAAWC,MACrBZ,EAAK,iBAITwU,EAAOlzC,GAAG,QAAQ,SAASnN,GAEvBq6B,EAAMwlB,aAAe,KAGrB,IAAIhoB,EAAU,SAAiBz3B,GAE3Bi6B,EAAMr6B,KAAOc,GAAOV,GAAUA,EAASi6B,EAAMr6B,KAGzCiK,IAAWijC,GAAWE,OAAS/S,EAAMqlB,oBACrCM,EAAUxT,GAAWK,qBAErBmT,EAAUxT,GAAWE,MAGzBb,EAAK,SAGLwC,EAAQ,SAAejuC,GAEvBi6B,EAAMr6B,KAAOA,EACb6rC,EAAK,aAELmU,EAAUxT,GAAWS,YACrBpB,EAAK,kBAAmBzrC,IAIxBi6B,EAAMqlB,oBACN7nB,EAAQ73B,GAKZ4P,EAAO5P,EAAM63B,EAASwW,MAI1BgS,EAAO/F,UAAUl7C,GAGjBi7B,EAAMwlB,aAAeQ,EAGrBA,EAAOpZ,SAGPsZ,EAAY,WACPlmB,EAAMwlB,cAGXxlB,EAAMwlB,aAAa5Y,QAGnBuZ,EAAY,WACRnmB,EAAMwlB,aACNxlB,EAAMwlB,aAAa5F,SAGvB+F,EAAUxT,GAAWC,MACrBZ,EAAK,gBAMLjF,EAAU,SAASA,EAAQ6Z,EAAWC,GAEtC,GAAIrmB,EAAMulB,kBACNvlB,EAAMulB,mBAAoB,OAW9B,GANAI,EAAUxT,GAAWI,YAGrBmT,EAAiC,KAG3B1lB,EAAMr6B,gBAAgBiC,KAA5B,CAQAw+C,EAAUtzC,GAAG,QAAQ,SAASuyC,GAE1BrlB,EAAM+kB,WAAa,KACnB/kB,EAAMqlB,oBAAsBA,KAIhCe,EAAUtzC,GAAG,YAAY,SAASiyC,GAE9B/kB,EAAM+kB,WAAaA,KAGvBqB,EAAUtzC,GAAG,kBAAkB,SAASuyC,GAEpCrlB,EAAMylB,gBAAkB,KAGxBzlB,EAAM+kB,WAAa,KACnB/kB,EAAMqlB,oBAAsBA,EAE5BM,EAAUxT,GAAWK,qBACrBhB,EAAK,mBAAoB6T,MAG7Be,EAAUtzC,GAAG,SAAS,WAClB0+B,EAAK,oBAGT4U,EAAUtzC,GAAG,SAAS,SAASkhC,GAC3BhU,EAAMylB,gBAAkB,KACxBE,EAAUxT,GAAWM,kBACrBjB,EAAK,gBAAiBwC,MAG1BoS,EAAUtzC,GAAG,SAAS,SAASuyC,GAC3BrlB,EAAMylB,gBAAkB,KAGxBzlB,EAAMqlB,oBAAsBA,EAE5BM,EAAUxT,GAAWE,MACrBb,EAAK,iBAGDkU,GACAA,OAIRU,EAAUtzC,GAAG,YAAY,SAAS4sC,GAC9BlO,EAAK,mBAAoBkO,MAI7B,IAAIliB,EAAU,SAAiB73B,GAEvBq6B,EAAM5R,UAGVg4B,EAAU7Z,QAAQ5mC,EAAMpC,OAAOmJ,OAAO,GAAIjF,KAI1CusC,EAAQsS,QAAQtS,MAGpBqS,EAAUrmB,EAAMr6B,KAAM63B,EAASwW,GAG/BhU,EAAMylB,gBAAkBW,OA5EpBxlB,EAAI9tB,GAAG,QAAQ,WACXy5B,EAAQ6Z,EAAWC,OA8E3BE,EAAoB,WACpBvmB,EAAMulB,mBAAoB,EAC1BI,EAAUxT,GAAWG,oBAGrBkU,EAAkB,WAClB,OAAO,IAAI5/C,SAAQ,SAASC,GACxB,IAAKm5B,EAAMylB,gBAOP,OANAzlB,EAAMulB,mBAAoB,EAE1BI,EAAUxT,GAAWE,MACrBb,EAAK,sBAEL3qC,IAIJ6+C,EAAiC,WAC7B7+C,KAGJm5B,EAAMylB,gBAAgB7F,YAO1BnT,EAAS,SAAgBga,EAAkBnR,GAC3C,OAAO,IAAI1uC,SAAQ,SAASC,EAAS6C,GAGjC,IAAIg9C,EAC8B,OAA9B1mB,EAAMqlB,oBACArlB,EAAMqlB,oBACNrlB,EAAM+kB,WAGS,OAArB2B,GAMJD,EACIC,GACA,WAEI1mB,EAAMqlB,oBAAsB,KAC5BrlB,EAAM+kB,WAAa,KACnBl+C,OAEJ,SAASmtC,GAEAsB,GAMLqQ,EAAUxT,GAAWO,yBACrBlB,EAAK,wBACL9nC,EAAOsqC,IAPHntC,OAYZ8+C,EAAUxT,GAAWE,MACrBb,EAAK,mBA7BD3qC,QAkCR8/C,EAAe,SAAqB3vC,EAAKhU,EAAO4jD,GAChD,IAAIlsC,EAAO1D,EAAIma,MAAM,KACjB9oB,EAAOqS,EAAK,GACZyvB,EAAOzvB,EAAKhP,MACZ/G,EAAO8C,EACXiT,EAAKC,SAAQ,SAAS3D,GAClB,OAAQrS,EAAOA,EAAKqS,MAIpBvS,KAAKC,UAAUC,EAAKwlC,MAAW1lC,KAAKC,UAAU1B,KAGlD2B,EAAKwlC,GAAQnnC,EAGbwuC,EAAK,kBAAmB,CACpBx6B,IAAK3O,EACLrF,MAAOyE,EAASY,GAChBu+C,OAAQA,MAIZl/C,EAAc,SAAqBsP,GACnC,OAAOmuC,GAAgBnuC,EAAMvP,EAASuP,GAAOvP,IAG7Cm5B,EAAMr9B,OAAOmJ,OACb,CACI3L,GAAI,CACAwiC,IAAK,WACD,OAAOxiC,IAGf6O,OAAQ,CACJ2zB,IAAK,WACD,OAAO3zB,GAEXga,IAAK,SAAa5mB,GACd,OAAQ4M,EAAS5M,IAGzBo/C,SAAU,CACN7e,IAAK,WACD,OAAOvD,EAAMqlB,sBAGrBN,WAAY,CACRxhB,IAAK,WACD,OAAOvD,EAAM+kB,aAGrBn7C,OAAQ,CACJ25B,IAAK,WACD,OAAOvD,EAAMp2B,SAGrBqC,SAAU,CACNs3B,IAAK,WACD,OAAOvD,EAAMr6B,KAAKhC,OAG1BkjD,yBAA0B,CACtBtjB,IAAK,WACD,OAAO1S,GAA4BmP,EAAMr6B,KAAKhC,QAGtDmjD,cAAe,CAAEvjB,IAAKqiB,GACtBv+C,SAAU,CAAEk8B,IAAKsiB,GACjB17C,SAAU,CAAEo5B,IAAKuiB,GACjBngD,KAAM,CAAE49B,IAAKwiB,GACbgB,aAAc,CACVxjB,IAAK,WACD,OAAOvD,EAAMr6B,KAAKo4C,gBAI1Bh5C,OAAQ,CACJw+B,IAAK,WACD,OAAOvD,EAAMj7B,SAIrB2C,YAAaA,EACbwG,YAAa,SAAqB8I,EAAKhU,EAAO4jD,GAC1C,GAAI94C,GAASkJ,GAAM,CACf,IAAIrS,EAAOqS,EAIX,OAHAzT,OAAOmX,KAAK/V,GAAMgW,SAAQ,SAAS3D,GAC/B2vC,EAAa3vC,EAAKrS,EAAKqS,GAAMhU,MAE1BgU,EAGX,OADA2vC,EAAa3vC,EAAKhU,EAAO4jD,GAClB5jD,GAGXoE,OAAQ,SAAgBzD,EAAMqjD,GAC1B,OAAQC,EAAQtjD,GAAQqjD,GAG5Bb,UAAWA,EACXD,UAAWA,EACXK,kBAAmBA,EACnBC,gBAAiBA,EAEjB5Z,KAAMA,EACNL,QAASA,EACTE,OAAQA,GAGZ35B,KACA,CACIo0C,OAAQ,WACJ,OAAQlnB,EAAMslB,QAAS,GAG3B6B,QAAS,WACL,OAAQnnB,EAAMkS,UAAW,GAE7BA,SAAU,CACN3O,IAAK,WACD,OAAOvD,EAAMkS,WAIrBkV,QAAS,WACL,OAAQpnB,EAAM5R,UAAW,GAE7BA,SAAU,CACNmV,IAAK,WACD,OAAOvD,EAAM5R,aAOzB64B,EAAU/lB,EAAaN,GAE3B,OAAOqmB,GAGPI,GAAsB,SAA6BjY,EAAOjoC,GAE1D,OAAIgkC,EAAQhkC,GACD,EAIN+D,EAAS/D,GAKPioC,EAAM9J,WAAU,SAAShkC,GAC5B,OAAOA,EAAKP,KAAOoG,MALX,GASZmgD,GAAc,SAAqBlY,EAAOmY,GAC1C,IAAIhtC,EAAQ8sC,GAAoBjY,EAAOmY,GACvC,KAAIhtC,EAAQ,GAGZ,OAAO60B,EAAM70B,IAAU,MAGvBitC,GAAY,SAAmBlhC,EAAKsmB,EAAMoH,EAAO0L,EAAUE,EAAO5S,GAClE,IAAI91B,EAAUipC,GAAY,KAAM75B,EAAK,CACjC4mB,OAAQ,MACRiU,aAAc,SA6BlB,OA1BAjqC,EAAQ3B,OAAS,SAASkrC,GAEtB,IAAIzT,EAAUyT,EAAIa,wBAGdr1C,EAAW8yC,GAAuB/R,GAASrpC,MAAQ0H,GAAmBib,GAG1EsmB,EACIwU,GAAe,OAAQX,EAAI72C,OAAQozB,GAAgByjB,EAAIl7C,SAAU0G,GAAW+gC,KAIpF91B,EAAQ+S,QAAU,SAASw2B,GACvBzM,EAAMoN,GAAe,QAASX,EAAI72C,OAAQ62C,EAAIkB,WAAYlB,EAAIa,2BAGlEpqC,EAAQkpC,UAAY,SAASK,GACzBzT,EAAQoU,GAAe,UAAWX,EAAI72C,OAAQ,KAAM62C,EAAIa,2BAG5DpqC,EAAQopC,UAAYe,GAAsBrN,GAC1C98B,EAAQmpC,WAAaX,EACrBxoC,EAAQqpC,QAAUX,EAGX1oC,GAGPuwC,GAAmB,SAA0BnhC,GAI7C,OAH0B,IAAtBA,EAAIpJ,QAAQ,QACZoJ,EAAMC,SAASmhC,SAAWphC,GAEvBA,EACFqpB,cACA3pC,QAAQ,QAAS,IACjBA,QAAQ,gBAAiB,MACzBmrB,MAAM,KAAK,IAGhBw2B,GAAgB,SAAuBrhC,GACvC,OACKA,EAAIpJ,QAAQ,MAAQ,GAAKoJ,EAAIpJ,QAAQ,OAAS,IAC/CuqC,GAAiBlhC,SAASC,QAAUihC,GAAiBnhC,IAIzDshC,GAAe,SAAsB56C,GACrC,OAAO,WACH,OAAOi/B,GAAWj/B,GAASA,EAAM0b,WAAM,EAAQvT,WAAanI,IAIhE66C,GAAa,SAAoBvmD,GACjC,OAAQmF,GAAOnF,EAAKqE,OAGpBmiD,GAAc,SAAqBn/C,EAAUq3B,GAC7C0K,aAAa1K,EAAMqP,mBACnBrP,EAAMqP,kBAAoBvkB,YAAW,WACjCniB,EAAS,mBAAoB,CAAEymC,MAAOsL,GAAe1a,EAAMoP,WAC5D,IAGH2Y,GAAkB,SAAyBzuB,GAC3C,IACI,IAAIkH,EAAOrrB,UAAUpT,OAAQgiD,EAAS,IAAI5hD,MAAMq+B,EAAO,EAAIA,EAAO,EAAI,GAAIE,EAAO,EACjFA,EAAOF,EACPE,IAEAqjB,EAAOrjB,EAAO,GAAKvrB,UAAUurB,GAEjC,OAAO,IAAI95B,SAAQ,SAASC,GACxB,IAAKyyB,EACD,OAAOzyB,GAAQ,GAGnB,IAAId,EAASuzB,EAAG5Q,WAAM,EAAQq7B,GAE9B,OAAc,MAAVh+C,EACOc,GAAQ,GAGG,kBAAXd,EACAc,EAAQd,QAGQ,mBAAhBA,EAAO8B,MACd9B,EAAO8B,KAAKhB,QAKpBmhD,GAAY,SAAmBhoB,EAAOioB,GACtCjoB,EAAMoP,MAAM/uB,MAAK,SAAStI,EAAGC,GACzB,OAAOiwC,EAAQx4C,GAAcsI,GAAItI,GAAcuI,QAKnDkwC,GAA0B,SAAiCloB,EAAOmoB,GAClE,OAAO,WACH,IAAIhiD,EAAOgP,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,GAC3EhO,EAAQhB,EAAKgB,MACbihD,EAAejiD,EAAKq3B,QACpBA,OAA2B,IAAjB4qB,EAA0B,aAAgBA,EACpDC,EAAeliD,EAAKs3B,QACpBA,OAA2B,IAAjB4qB,EAA0B,aAAgBA,EACpD5iD,EAAUgrC,GAAyBtqC,EAAM,CAAC,QAAS,UAAW,YAC9D7E,EAAOk5C,GAAexa,EAAMoP,MAAOjoC,GAClC7F,EAQL6mD,EAAY7mD,EAAMk8B,EAASC,EAASh4B,GAAW,IAP3Cg4B,EAAQ,CACJuW,MAAOoN,GAAe,QAAS,EAAG,kBAClCz7C,KAAM,SASlBo6B,GAAU,SAAiBp3B,EAAUxB,EAAO64B,GAC5C,MAAO,CAIHsoB,UAAW,WACP5N,GAAe1a,EAAMoP,OAAOz0B,SAAQ,SAASrZ,GACzCA,EAAK4lD,SACL5lD,EAAK6kD,YACL7kD,EAAKklD,sBAOb+B,cAAe,SAAuB5hD,GAClC,IAAI6hD,EAAc7hD,EAAM3D,MAGpBy7B,QAFwB,IAAhB+pB,EAAyB,GAAKA,GAExBnnD,KAAI,SAASsE,GAC3B,MAAO,CACHZ,OAAQY,EAAKZ,OAASY,EAAKZ,OAASY,EACpCF,QAASE,EAAKF,YAMlBgjD,EAAc/N,GAAe1a,EAAMoP,OAEvCqZ,EAAY9tC,SAAQ,SAASrZ,GAGpBm9B,EAAMgc,MAAK,SAAS90C,GACjB,OAAOA,EAAKZ,SAAWzD,EAAKyD,QAAUY,EAAKZ,SAAWzD,EAAKqE,SAG/DgD,EAAS,cAAe,CAAExB,MAAO7F,EAAM+jC,QAAQ,OAKvDojB,EAAc/N,GAAe1a,EAAMoP,OACnC3Q,EAAM9jB,SAAQ,SAAShV,EAAM4U,GAGrBkuC,EAAYhO,MAAK,SAASn5C,GACtB,OAAOA,EAAKyD,SAAWY,EAAKZ,QAAUzD,EAAKqE,OAASA,EAAKZ,WAMjE4D,EACI,WACApF,OAAOmJ,OAAO,GAAI/G,EAAM,CACpB+iD,kBAAmB1Y,GAAkBK,KACrC91B,MAAOA,SAMvBmT,yBAA0B,SAAkCxmB,GACxD,IAAInG,EAAKmG,EAAMnG,GACXuH,EAASpB,EAAMoB,OACf0iB,EAAS9jB,EAAM8jB,OAEfA,EAAO47B,SAGXlc,aAAa1K,EAAMsP,mBACnBtP,EAAMsP,kBAAoBxkB,YAAW,WACjC,IAAIxpB,EAAOgmD,GAAYtnB,EAAMoP,MAAOruC,GAGpC,GAAKoG,EAAM,YAAX,CAiCI7F,EAAKsO,SAAWijC,GAAWG,OAC3BrqC,EAAS,gBAAiB,CACtB5H,GAAIO,EAAKP,GACTizC,MAAO,KACPqR,oBAAqB/jD,EAAKyD,SAKlC,IAAI87C,EAAS,WAET/1B,YAAW,WACPniB,EAAS,0BAA2B,CAAExB,MAAOpG,MAC9C,KAGH0rC,EAAS,SAAgBkc,GACzBrnD,EAAKmrC,OACDuX,GACIhkB,EAAMv6B,QAAQ8wC,OAAOjwB,IACrB0Z,EAAMv6B,QAAQ8wC,OAAO9J,QAEzBtlC,EAAM,qBAELU,KAAK8gD,EAAW9H,EAAS,cACzBt0C,OAAM,gBAGXqzC,EAAQ,SAAe+I,GACvBrnD,EAAKklD,kBAAkB3+C,KAAK8gD,EAAW9H,EAAS,eAIpD,OAAIv/C,EAAKsI,SAAWuoC,GAAWK,oBACpB/F,EAAOzM,EAAMv6B,QAAQuwC,eAI5B10C,EAAKsI,SAAWuoC,GAAWI,WACpBqN,EAAM5f,EAAMv6B,QAAQuwC,oBAG3BhW,EAAMv6B,QAAQuwC,eACd6K,KA1EAlN,GAAiB,yBAAyB,EAAO,CAC7CryC,KAAMA,EACN6F,MAAOA,EACPmB,OAAQA,EACR0iB,OAAQA,IACTnjB,MAAK,SAASP,GAEb,IAAIwyC,EAAoB3yC,EAAM,2BAC1B2yC,IACAxyC,EAAsBwyC,EAAkBx4C,EAAMgG,IAE7CA,GAELqB,EACI,yBACA,CACIxB,MAAOpG,EACPO,KAAMA,EACNk8B,QAAS,SAAiB73B,GACtBgD,EAAS,qBAAsB,CAAE5H,GAAIA,EAAI4E,KAAMA,OAIvD,QAqDb,KAGPijD,UAAW,SAAmBrhD,GAC1B,IAAIJ,EAAQI,EAAMJ,MACdoT,EAAQhT,EAAMgT,MACdjZ,EAAOk5C,GAAexa,EAAMoP,MAAOjoC,GACvC,GAAK7F,EAAL,CACA,IAAIunD,EAAe7oB,EAAMoP,MAAMlyB,QAAQ5b,GAEnCunD,KADJtuC,EAAQsiC,GAAMtiC,EAAO,EAAGylB,EAAMoP,MAAMrtC,OAAS,KAE7Ci+B,EAAMoP,MAAMxN,OAAOrnB,EAAO,EAAGylB,EAAMoP,MAAMxN,OAAOinB,EAAc,GAAG,MAGrEC,KAAM,SAActhD,GAChB,IAAIygD,EAAUzgD,EAAMygD,QACpBD,GAAUhoB,EAAOioB,GACjBt/C,EAAS,iBAAkB,CACvBymC,MAAOjoC,EAAM,uBAIrB4hD,UAAW,SAAmB3gD,GAC1B,IAAIgnC,EAAQhnC,EAAMgnC,MACd70B,EAAQnS,EAAMmS,MACdmuC,EAAoBtgD,EAAMsgD,kBAC1BM,EAAgB5gD,EAAMo1B,QACtBA,OAA4B,IAAlBwrB,EAA2B,aAAgBA,EACrDC,EAAgB7gD,EAAMq1B,QACtBA,OAA4B,IAAlBwrB,EAA2B,aAAgBA,EACrDJ,EAAetuC,EAEnB,IAAe,IAAXA,QAAiC,IAAVA,EAAuB,CAC9C,IAAI2uC,EAAiB/hD,EAAM,4BACvBgiD,EAAahiD,EAAM,mBACvB0hD,EAAkC,WAAnBK,EAA8B,EAAIC,EAGrD,IAAIpT,EAAe5uC,EAAM,qBACrBiiD,EAAc,SAAqBrkD,GACnC,OAAO0B,GAAO1B,IACPgxC,EAAazU,SAASv8B,EAAOpB,KAAKgsC,gBAClCxE,EAAQpmC,IAIfskD,EAFaja,EAAMriC,OAAOq8C,GAEJ/nD,KAAI,SAAS0D,GACnC,OAAO,IAAI6B,SAAQ,SAASC,EAAS6C,GACjCf,EAAS,WAAY,CACjB+/C,kBAAmBA,EACnB3jD,OAAQA,EAAOA,QAAUA,EACzBy4B,QAAS32B,EACT42B,QAAS/zB,EACT6Q,MAAOsuC,IACPpjD,QAASV,EAAOU,SAAW,WAKvCmB,QAAQe,IAAI0hD,GACPxhD,KAAK21B,GACLjxB,MAAMkxB,IAQf6rB,SAAU,SAAkBzgD,GACxB,IAAI9D,EAAS8D,EAAM9D,OACfwkD,EAAc1gD,EAAM0R,MACpBA,OAAwB,IAAhBgvC,GAA0B,EAAIA,EACtCb,EAAoB7/C,EAAM6/C,kBAC1Bc,EAAgB3gD,EAAM20B,QACtBA,OAA4B,IAAlBgsB,EAA2B,aAAgBA,EACrDC,EAAgB5gD,EAAM40B,QACtBA,OAA4B,IAAlBgsB,EAA2B,aAAgBA,EACrDC,EAAgB7gD,EAAMpD,QACtBA,OAA4B,IAAlBikD,EAA2B,GAAKA,EAE9C,GAAIve,EAAQpmC,GACR04B,EAAQ,CACJuW,MAAOoN,GAAe,QAAS,EAAG,aAClCz7C,KAAM,YAOd,IACIc,GAAO1B,KACPi7B,EAAMv6B,QAAQswC,aAAazU,SAASv8B,EAAOpB,KAAKgsC,eAFpD,CASA,IAAK+M,GAAe1c,GAAQ,CAGxB,GACIA,EAAMv6B,QAAQqgB,gBACZka,EAAMv6B,QAAQqgB,gBAAkBka,EAAMv6B,QAAQsvC,aAClD,CACE,IAAIf,EAAQoN,GAAe,UAAW,EAAG,aASzC,OAPAz4C,EAAS,sBAAuB,CAC5B5D,OAAQA,EACRivC,MAAOA,SAGXvW,EAAQ,CAAEuW,MAAOA,EAAOruC,KAAM,OAOlC,IAAIxB,EAAQu2C,GAAe1a,EAAMoP,OAAO,GAGxC,GACIjrC,EAAMyF,SAAWuoC,GAAWK,qBAC5BruC,EAAMyF,SAAWuoC,GAAWO,wBAC9B,CACE,IAAI4C,EAAcnuC,EAAM,oBAwBxB,GAvBAhD,EACKsoC,OACGuX,GACIhkB,EAAMv6B,QAAQ8wC,OAAOjwB,IACrB0Z,EAAMv6B,QAAQ8wC,OAAO9J,QAEzB6I,GAEHztC,MAAK,WACGytC,GAGL3sC,EAAS,WAAY,CACjB5D,OAAQA,EACRwV,MAAOA,EACPmuC,kBAAmBA,EACnBlrB,QAASA,EACTC,QAASA,EACTh4B,QAASA,OAGhB8G,OAAM,eAEP+oC,EAAa,OAIrB3sC,EAAS,cAAe,CAAExB,MAAOhD,EAAMpD,KAI3C,IAAI6O,EACiB,UAAjBnK,EAAQ+C,KACFqqC,GAAWG,MACM,UAAjBvtC,EAAQ+C,KACRqqC,GAAWE,MACXF,GAAWC,MAGjBxxC,EAAO8jD,GAEPx1C,EAGAA,IAAWijC,GAAWC,MAAQ,KAAO/tC,EAGrCU,EAAQE,MAIZpC,OAAOmX,KAAKjV,EAAQgC,UAAY,IAAIkT,SAAQ,SAAS3D,GACjD1V,EAAK4M,YAAY8I,EAAKvR,EAAQgC,SAASuP,OAI3Ci9B,GAAa,kBAAmB3yC,EAAM,CAAE6F,MAAOA,EAAOwB,SAAUA,IAGhE,IAAI+sC,EAAqBvuC,EAAM,4BAG1B64B,EAAMv6B,QAAQgwC,4BACfl7B,EAA+B,WAAvBm7B,GAAmC,EAAI1V,EAAMoP,MAAMrtC,QAI/Dg7C,GAAW/c,EAAMoP,MAAO9tC,EAAMiZ,GAG1B0xB,GAAWyJ,IAAuB3wC,GAClCijD,GAAUhoB,EAAO0V,GAIrB,IAAI30C,EAAKO,EAAKP,GAGdO,EAAKwR,GAAG,QAAQ,WACZnK,EAAS,gBAAiB,CAAE5H,GAAIA,OAGpCO,EAAKwR,GAAG,aAAa,WACjBnK,EAAS,sBAAuB,CAAE5H,GAAIA,OAG1CO,EAAKwR,GAAG,aAAa,WACjBnK,EAAS,uBAAwB,CAAE5H,GAAIA,OAG3CO,EAAKwR,GAAG,iBAAiB,SAAS4sC,GAC9B/2C,EAAS,gCAAiC,CAAE5H,GAAIA,EAAI2+C,SAAUA,OAGlEp+C,EAAKwR,GAAG,sBAAsB,SAASkhC,GACnC,IAAI2V,EAAa/B,GAAa5nB,EAAMv6B,QAAQ0xC,mBAA3ByQ,CAA+C5T,GAGhE,GAAIA,EAAM8L,MAAQ,KAAO9L,EAAM8L,KAAO,IAYlC,OAXAn3C,EAAS,yBAA0B,CAC/B5H,GAAIA,EACJizC,MAAOA,EACPpqC,OAAQ,CACJC,KAAM8/C,EACN7/C,IAAKkqC,EAAM8L,KAAO,KAAO9L,EAAMrgB,KAAO,YAK9C8J,EAAQ,CAAEuW,MAAOA,EAAOruC,KAAM8J,GAAcnO,KAKhDqH,EAAS,4BAA6B,CAClC5H,GAAIA,EACJizC,MAAOA,EACPpqC,OAAQ,CACJC,KAAM8/C,EACN7/C,IAAKk2B,EAAMv6B,QAAQmyC,sBAK/Bt2C,EAAKwR,GAAG,mBAAmB,SAASkhC,GAChCrrC,EAAS,yBAA0B,CAC/B5H,GAAIA,EACJizC,MAAOA,EAAMpqC,OACbA,OAAQoqC,EAAMpqC,SAGlB6zB,EAAQ,CAAEuW,MAAOA,EAAMpqC,OAAQjE,KAAM8J,GAAcnO,QAGvDA,EAAKwR,GAAG,cAAc,WAClBnK,EAAS,cAAe,CAAExB,MAAOpG,OAGrCO,EAAKwR,GAAG,aAAa,WACjBnK,EAAS,qBAAsB,CAC3BxB,MAAOpG,EACPO,KAAMA,EACNqD,KAAM,CACFI,OAAQA,EACRy4B,QAASA,QAKrBl8B,EAAKwR,GAAG,QAAQ,WACZ,IAAI82C,EAAY,SAAmBC,GAE1BA,GASLvoD,EAAKwR,GAAG,mBAAmB,SAASkY,GAChCriB,EAAS,2BAA4B,CAAE5H,GAAIA,EAAIiqB,OAAQA,OAK3D2oB,GAAiB,yBAAyB,EAAO,CAC7CryC,KAAMA,EACN6F,MAAOA,IACRU,MAAK,SAASP,GAEb,IAAIwyC,EAAoB3yC,EAAM,2BAC1B2yC,IACAxyC,EAAsBwyC,EAAkBx4C,EAAMgG,IAElD,IAAIwiD,EAAe,WACfnhD,EAAS,qBAAsB,CAC3BxB,MAAOpG,EACPO,KAAMA,EACNqD,KAAM,CACFI,OAAQA,EACRy4B,QAASA,KAIjBsqB,GAAYn/C,EAAUq3B,IAItB14B,EAEAqB,EACI,yBACA,CACIxB,MAAOpG,EACPO,KAAMA,EACNk8B,QAAS,SAAiB73B,GACtBgD,EAAS,qBAAsB,CAAE5H,GAAIA,EAAI4E,KAAMA,IAC/CmkD,OAIR,GAMRA,QAxDAnhD,EAAS,cAAe,CACpBxB,MAAOpG,KA8DnB4yC,GAAiB,gBAAiBryC,EAAM,CAAE6F,MAAOA,EAAOwB,SAAUA,IAC7Dd,MAAK,WACFkgD,GAAgB5gD,EAAM,uBAAwBsI,GAAcnO,IAAOuG,KAC/D+hD,MAGPr9C,OAAM,SAASnH,GACZ,IAAKA,IAAMA,EAAE4uC,QAAU5uC,EAAEwE,OAAQ,OAAOggD,GAAU,GAClDjhD,EAAS,yBAA0B,CAC/B5H,GAAIA,EACJizC,MAAO5uC,EAAE4uC,MACTpqC,OAAQxE,EAAEwE,eAK1BtI,EAAKwR,GAAG,iBAAiB,WACrBnK,EAAS,4BAA6B,CAAE5H,GAAIA,OAGhDO,EAAKwR,GAAG,oBAAoB,SAAS4sC,GACjC/2C,EAAS,mCAAoC,CAAE5H,GAAIA,EAAI2+C,SAAUA,OAGrEp+C,EAAKwR,GAAG,iBAAiB,SAASkhC,GAC9BrrC,EAAS,kCAAmC,CACxC5H,GAAIA,EACJizC,MAAOA,EACPpqC,OAAQ,CACJC,KAAM+9C,GAAa5nB,EAAMv6B,QAAQgyC,yBAA3BmQ,CAAqD5T,GAC3DlqC,IAAKk2B,EAAMv6B,QAAQmyC,sBAK/Bt2C,EAAKwR,GAAG,wBAAwB,SAASkhC,GACrCrrC,EAAS,yCAA0C,CAC/C5H,GAAIA,EACJizC,MAAOA,EACPpqC,OAAQ,CACJC,KAAM+9C,GAAa5nB,EAAMv6B,QAAQiyC,+BAA3BkQ,CAA2D5T,GACjElqC,IAAKk2B,EAAMv6B,QAAQmyC,sBAK/Bt2C,EAAKwR,GAAG,oBAAoB,SAASuyC,GACjC18C,EAAS,+BAAgC,CACrC5H,GAAIA,EACJizC,MAAO,KACPqR,oBAAqBA,IAGzB18C,EAAS,mBAAoB,CAAE5H,GAAIA,EAAIiC,MAAOqiD,OAGlD/jD,EAAKwR,GAAG,iBAAiB,WACrBnK,EAAS,4BAA6B,CAAE5H,GAAIA,OAGhDO,EAAKwR,GAAG,kBAAkB,WACtBnK,EAAS,6BAA8B,CAAE5H,GAAIA,IAC7C4H,EAAS,mBAAoB,CAAE5H,GAAIA,EAAIiC,MAAO,UAIlD2F,EAAS,eAAgB,CACrB5H,GAAIA,EACJwZ,MAAOA,EACPmuC,kBAAmBA,IAGvBZ,GAAYn/C,EAAUq3B,GAGtB,IAAIhsB,EAAQgsB,EAAMv6B,QAAQ8wC,QAAU,GAChCjwB,EAAMtS,EAAMsS,IACZsmB,EAAO54B,EAAM44B,KACbD,EAAU34B,EAAM24B,QAChBD,EAAQ14B,EAAM04B,MAElBprC,EAAKsrC,KACD7nC,EAGAw6C,GACI3vC,IAAWijC,GAAWC,MAEhB5nC,EAASnG,IAAW4iD,GAAc5iD,IAC9B2nC,EACI+U,GAAoBn7B,EAAKomB,GAE7B8a,GAEN53C,IAAWijC,GAAWE,MACpB0O,GAAoBn7B,EAAKqmB,GACzB8U,GAAoBn7B,EAAKsmB,KAInC,SAASjnC,EAAM63B,EAASwW,GAEpBL,GAAiB,YAAahuC,EAAM,CAAEwB,MAAOA,IACxCU,KAAK21B,GACLjxB,MAAMynC,QAKvB+V,uBAAwB,SAAgCn9B,GACpD,IAAItrB,EAAOsrB,EAAMtrB,KACbk8B,EAAU5Q,EAAM4Q,QAChBwsB,EAAgBp9B,EAAM6Q,QACtBA,OAA4B,IAAlBusB,EAA2B,aAAgBA,EAErD/mD,EAAM,CACN+wC,MAAOoN,GAAe,QAAS,EAAG,kBAClCz7C,KAAM,MAIV,GAAIrE,EAAK8sB,SAAU,OAAOqP,EAAQx6B,GAGlC0wC,GAAiB,iBAAkBryC,EAAKqE,KAAM,CAAEwB,MAAOA,EAAO7F,KAAMA,IAAQuG,MACxE,SAAS9B,GACL4tC,GAAiB,0BAA2B5tC,EAAQ,CAChDoB,MAAOA,EACP7F,KAAMA,IACPuG,MAAK,SAAS9B,GAEb,GAAIzE,EAAK8sB,SAAU,OAAOqP,EAAQx6B,GAGlCu6B,EAAQz3B,UAMxBkkD,mBAAoB,SAA4Bj9B,GAC5C,IAAI1rB,EAAO0rB,EAAO1rB,KACdqD,EAAOqoB,EAAOroB,KACd64B,EAAU74B,EAAK64B,QACfz4B,EAASJ,EAAKI,OAGd2wC,EAAqBvuC,EAAM,4BAiB/B,GAhBI8kC,GAAWyJ,IAAuB3wC,GAClCijD,GAAUhoB,EAAO0V,GAIrB/sC,EAAS,gBAAiB,CACtB5H,GAAIO,EAAKP,GACTizC,MAAO,KACPqR,oBAAqB/jD,EAAKsO,SAAWijC,GAAWC,MAAQ,KAAO/tC,IAKnEy4B,EAAQ/tB,GAAcnO,IAGlBA,EAAKsO,SAAWijC,GAAWG,MAM/B,OAAI1xC,EAAKsO,SAAWijC,GAAWE,OAC3BpqC,EAAS,+BAAgC,CACrC5H,GAAIO,EAAKP,GACTizC,MAAO,KACPqR,oBAAqBtgD,SAGzB4D,EAAS,mBAAoB,CACzB5H,GAAIO,EAAKP,GACTiC,MAAO1B,EAAK8gD,UAAYr9C,UAO5BoC,EAAM,aAAe64B,EAAMv6B,QAAQuwC,eACnCrtC,EAAS,0BAA2B,CAAExB,MAAO7F,EAAKP,MAtBlD4H,EAAS,sBAAuB,CAAE5H,GAAIO,EAAKP,MA0BnDmpD,gBAAiBhC,GAAwBloB,GAAO,SAAS1+B,GAErDA,EAAK4kD,eAGTiE,qBAAsBjC,GAAwBloB,GAAO,SAAS1+B,EAAM8oD,EAAU3sB,GAC1E90B,EACI,yBACA,CACIxB,MAAO7F,EAAKP,GACZO,KAAMA,EACNk8B,QAAS,SAAiB73B,GACtBgD,EAAS,qBAAsB,CAAE5H,GAAIO,EAAKP,GAAI4E,KAAMA,IACpDykD,EAAS,CACLzkD,KAAMrE,EACN26B,OAAQt2B,KAGhB83B,QAASA,IAGb,MAIR4sB,wBAAyBnC,GAAwBloB,GAAO,SACpD1+B,EACAk8B,EACAC,GAUA,GALIn8B,EAAKsI,SAAWuoC,GAAWE,MAE3B/wC,EAAKsI,SAAWuoC,GAAWM,iBAsC3BnxC,EAAKsI,SAAWuoC,GAAWG,oBAE/BhxC,EAAKilD,oBAEL59C,EAAS,8BAA+B,CAAE5H,GAAIO,EAAKP,KAEnD4H,EAAS,eAAgB,CAAExB,MAAO7F,EAAMk8B,QAASA,EAASC,QAASA,IAAW,QAzC9E,CACI,IAAI6sB,EAAa,WACb,OAAO3hD,EAAS,0BAA2B,CACvCxB,MAAO7F,EACPk8B,QAASA,EACTC,QAASA,KAIb8O,EAAU,WACV,OAAOtjC,SAASqc,OAASglC,IAAex/B,WAAWw/B,EAAY,KAK/DhpD,EAAKsI,SAAWuoC,GAAWK,qBAC3BlxC,EAAKsI,SAAWuoC,GAAWO,wBAE3BpxC,EAAKmrC,OACDuX,GACIhkB,EAAMv6B,QAAQ8wC,OAAOjwB,IACrB0Z,EAAMv6B,QAAQ8wC,OAAO9J,QAEzBtlC,EAAM,qBAELU,KAAK0kC,GACLhgC,OAAM,eACJjL,EAAKsI,SAAWuoC,GAAWI,YAClCjxC,EAAKklD,kBAAkB3+C,KAAK0kC,OAgBxCge,aAAcrC,GAAwBloB,GAAO,SAAS1+B,EAAMk8B,EAASC,GACjE,IAAIwY,EAAqB9uC,EAAM,4BAK/B,GAJ0BA,EAAM,sBAAuBgrC,GAAWI,YAC7DxwC,SAGuBk0C,GAa5B,GAAI30C,EAAKsI,SAAWuoC,GAAWI,WAA/B,CAEA,IAAIiY,EAAc,SAASA,IAEvB,IAAIC,EAAazqB,EAAMuP,gBAAgBv/B,QAGvC,GAAKy6C,EAAL,CAGA,IAAI1pD,EAAK0pD,EAAW1pD,GAChBy8B,EAAUitB,EAAWjtB,QACrBC,EAAUgtB,EAAWhtB,QACrBitB,EAAgBlQ,GAAexa,EAAMoP,MAAOruC,GAG3C2pD,IAAiBA,EAAct8B,SAMpCzlB,EACI,eACA,CAAExB,MAAOpG,EAAIy8B,QAASA,EAASC,QAASA,IACxC,GARA+sB,MAaRlpD,EAAKqwC,OAAO,oBAAoB,WAC5BnU,EAAQ/tB,GAAcnO,IACtBkpD,IAIA,IAAIjU,EAASvW,EAAMv6B,QAAQ8wC,OAE3B,GADoBvW,EAAMv6B,QAAQuwC,eAG9B10C,EAAKsO,SAAWijC,GAAWG,OAC3B/G,GAAWsK,EAAOlR,QACpB,CACE,IAAIslB,EAAO,aACXrpD,EAAKsO,OAASijC,GAAWE,MACzB/S,EAAMv6B,QAAQ8wC,OAAOlR,OAAO/jC,EAAKyD,OAAQ4lD,EAAMA,GAK/CxjD,EAAM,sBAAuBgrC,GAAWK,qBAAqBzwC,SAC7Di+B,EAAMoP,MAAMrtC,QAEZ4G,EAAS,uCAKjBrH,EAAKqwC,OAAO,iBAAiB,SAASqC,GAClCvW,EAAQ,CAAEuW,MAAOA,EAAOruC,KAAM8J,GAAcnO,KAC5CkpD,OAIJ,IAAI/kD,EAAUu6B,EAAMv6B,QACpBnE,EAAKirC,QACDiY,GACIV,GACIr+C,EAAQ8wC,OAAOjwB,IACf7gB,EAAQ8wC,OAAOhK,QACf9mC,EAAQ9B,KACR,CACIu+C,gBAAiB5gD,EAAKyjD,WACtB5C,YAAa18C,EAAQ8wC,OAAO/J,MAC5B2J,aAAc1wC,EAAQ0wC,aACtBC,WAAY3wC,EAAQ2wC,WACpBC,UAAW5wC,EAAQ4wC,UACnBC,iBAAkB7wC,EAAQ6wC,mBAIlC,CACIJ,2BAA4B/uC,EAAM,wCAK1C,SAASxB,EAAM63B,EAASwW,GAEpBL,GAAiB,iBAAkBhuC,EAAM,CAAEwB,MAAOA,EAAO7F,KAAMA,IAC1DuG,MAAK,SAASlC,GACXgD,EAAS,qBAAsB,CAAE5H,GAAIO,EAAKP,GAAI4E,KAAMA,IAEpD63B,EAAQ73B,MAEX4G,MAAMynC,YA1GfhU,EAAMuP,gBAAgB1uC,KAAK,CACvBE,GAAIO,EAAKP,GACTy8B,QAASA,EACTC,QAASA,OA4GrBmtB,sBAAuB1C,GAAwBloB,GAAO,SAAS1+B,GAC3DqH,EAAS,0BAA2B,CAAExB,MAAO7F,OAGjDupD,oBAAqB3C,GAAwBloB,GAAO,SAAS1+B,GACzDymD,GAAgB5gD,EAAM,0BAA2BsI,GAAcnO,IAAOuG,MAAK,SACvE8H,GAEKA,GAGLhH,EAAS,cAAe,CAAExB,MAAO7F,UAIzCwpD,aAAc5C,GAAwBloB,GAAO,SAAS1+B,GAClDA,EAAK6lD,aAGT4D,YAAa7C,GAAwBloB,GAAO,SAAS1+B,EAAMk8B,EAASC,EAASh4B,GACzE,IAAIulD,EAAiB,WAEjB,IAAIjqD,EAAKO,EAAKP,GAGdumD,GAAYtnB,EAAMoP,MAAOruC,GAAIqmD,UAG7Bz+C,EAAS,kBAAmB,CAAEqrC,MAAO,KAAMjzC,GAAIA,EAAIO,KAAMA,IAGzDwmD,GAAYn/C,EAAUq3B,GAGtBxC,EAAQ/tB,GAAcnO,KAKtBi1C,EAASvW,EAAMv6B,QAAQ8wC,OAEvBj1C,EAAKsO,SAAWijC,GAAWG,OAC3BuD,GACAtK,GAAWsK,EAAOlR,UACC,IAAnB5/B,EAAQ4/B,QAER18B,EAAS,wBAAyB,CAAE5H,GAAIO,EAAKP,KAE7Cw1C,EAAOlR,OACH/jC,EAAKyD,QACL,WACI,OAAOimD,OAEX,SAASphD,GACLjB,EAAS,8BAA+B,CACpC5H,GAAIO,EAAKP,GACTizC,MAAOoN,GAAe,QAAS,EAAGx3C,EAAQ,MAC1CA,OAAQ,CACJC,KAAM+9C,GAAa5nB,EAAMv6B,QAAQ4xC,qBAA3BuQ,CAAiDh+C,GACvDE,IAAKk2B,EAAMv6B,QAAQmyC,yBAQ9BnyC,EAAQgnC,QACLnrC,EAAKsO,SAAWijC,GAAWG,OACT,OAAlB1xC,EAAK8gD,UAIRpiB,EAAMv6B,QAAQ0wC,cAAgB70C,EAAKqE,KAAK8C,KAAOu3B,EAAMv6B,QAAQ4wC,WAC7DrW,EAAMv6B,QAAQ0wC,cAAgBnW,EAAMv6B,QAAQ2wC,aAE7C90C,EAAKmrC,OACDuX,GACIhkB,EAAMv6B,QAAQ8wC,OAAOjwB,IACrB0Z,EAAMv6B,QAAQ8wC,OAAO9J,QAEzBtlC,EAAM,qBAKd6jD,QAIRC,gBAAiB/C,GAAwBloB,GAAO,SAAS1+B,GACrDA,EAAK6kD,eAGT+E,sBAAuBhD,GAAwBloB,GAAO,SAAS1+B,GAEvDA,EAAK8gD,SACLz5C,EAAS,yBAA0B,CAAE5H,GAAIO,EAAKP,KAKlDO,EAAKklD,kBAAkB3+C,MAAK,WACLm4B,EAAMv6B,QAAQuwC,eAE7BrtC,EAAS,cAAe,CAAExB,MAAO7F,EAAKP,WAKlDoqD,+BAAgCjD,GAAwBloB,GAAO,SAAS1+B,GAEpE,GAAK0+B,EAAMv6B,QAAQuwC,cAAnB,CAOA,IAAIzY,EAAe,SAAsB6tB,GAChCA,GACLziD,EAAS,yBAA0B,CAAExB,MAAO7F,KAG5Cg4B,EAAKnyB,EAAM,0BACf,IAAKmyB,EACD,OAAOiE,GAAa,GAGxB,IAAI8tB,EAAsB/xB,EAAG7pB,GAAcnO,IAC3C,OAA2B,MAAvB+pD,EAEO9tB,GAAa,GAGW,kBAAxB8tB,EACA9tB,EAAa8tB,QAGgB,mBAA7BA,EAAoBxjD,MAC3BwjD,EAAoBxjD,KAAK01B,IA3BzB50B,EAAS,yBAA0B,CAAExB,MAAO7F,OA+BpDgqD,uBAAwBpD,GAAwBloB,GAAO,SAAS1+B,GAC5DA,EAAKmrC,OACDuX,GAAqBhkB,EAAMv6B,QAAQ8wC,OAAOjwB,IAAK0Z,EAAMv6B,QAAQ8wC,OAAO9J,QACpEtlC,EAAM,qBAELU,MAAK,YACiBm4B,EAAMv6B,QAAQuwC,eAAiB6R,GAAWvmD,KAEzDqH,EAAS,cAAe,CAAExB,MAAO7F,EAAKP,QAG7CwL,OAAM,kBAGfg/C,YAAa,SAAqBr+B,GAC9B,IAAIznB,EAAUynB,EAAOznB,QACrBs3B,EAAMt3B,GAAS,SAASuR,EAAKhU,GACzB2F,EAAS,OAAS6mC,GAAWx4B,EAAK,KAAK64B,cAAe,CAAE7sC,MAAOA,UAM3EwoD,GAAiB,SAAwB7nD,GACzC,OAAOA,GAGP8nD,GAAkB,SAAuBC,GACzC,OAAOziD,SAASmK,cAAcs4C,IAG9BtvC,GAAO,SAAc0B,EAAM9a,GAC3B,IAAI2oD,EAAW7tC,EAAKtB,WAAW,GAC1BmvC,EAGM3oD,IAAU2oD,EAASC,YAC1BD,EAASC,UAAY5oD,IAHrB2oD,EAAW1iD,SAAS4iD,eAAe7oD,GACnC8a,EAAKtK,YAAYm4C,KAMrBG,GAAmB,SAA0B/zB,EAASH,EAASm0B,EAAQC,GACvE,IAAIC,GAAoBD,EAAiB,IAAO,IAAM19C,KAAK2W,GAAM,IACjE,MAAO,CACHnW,EAAGipB,EAAUg0B,EAASz9C,KAAKgK,IAAI2zC,GAC/Bl9C,EAAG6oB,EAAUm0B,EAASz9C,KAAKiK,IAAI0zC,KAInCC,GAAc,SAAqBp9C,EAAGC,EAAGg9C,EAAQI,EAAYC,EAAUC,GACvE,IAAIroB,EAAQ8nB,GAAiBh9C,EAAGC,EAAGg9C,EAAQK,GACvC1vC,EAAMovC,GAAiBh9C,EAAGC,EAAGg9C,EAAQI,GACzC,MAAO,CAAC,IAAKnoB,EAAMl1B,EAAGk1B,EAAMj1B,EAAG,IAAKg9C,EAAQA,EAAQ,EAAGM,EAAU,EAAG3vC,EAAI5N,EAAG4N,EAAI3N,GAAGtN,KAAK,MAGvF6qD,GAAgB,SAAuBx9C,EAAGC,EAAGg9C,EAAQnoD,EAAM2oD,GAC3D,IAAIF,EAAW,EAOf,OANIE,EAAK3oD,GAAQ2oD,EAAK3oD,GAAQ,KAC1ByoD,EAAW,GAEXzoD,EAAO2oD,GAAM3oD,EAAO2oD,GAAM,KAC1BF,EAAW,GAERH,GACHp9C,EACAC,EACAg9C,EACyB,IAAzBz9C,KAAKuK,IAAI,MAAQjV,GACM,IAAvB0K,KAAKuK,IAAI,MAAQ0zC,GACjBF,IAIJzoC,GAAS,SAAgBzd,GACzB,IAAIkC,EAAOlC,EAAKkC,KACZyI,EAAQ3K,EAAK2K,MAEjBA,EAAM07C,MAAO,EACb17C,EAAM4uC,SAAW,EACjB5uC,EAAM0B,QAAU,EAGhB,IAAIsI,EAAM1H,EAAc,OACxB/K,EAAKK,IAAI2V,KAAOjL,EAAc,OAAQ,CAClC,eAAgB,EAChB,iBAAkB,UAGtB0H,EAAItH,YAAYnL,EAAKK,IAAI2V,MAEzBhW,EAAKK,IAAIoS,IAAMA,EAEfzS,EAAKmL,YAAYsH,IAGjBwE,GAAQ,SAAe3Y,GACvB,IAAI0B,EAAO1B,EAAM0B,KACbyI,EAAQnK,EAAMmK,MAClB,GAAsB,IAAlBA,EAAM0B,QAAV,CAII1B,EAAM+B,QACNxK,EAAKoK,QAAQG,QAAQC,MAAQ/B,EAAM+B,OAIvC,IAAI45C,EAAkBlhC,SAAS9Q,EAAKpS,EAAKK,IAAI2V,KAAM,gBAAiB,IAGhE5V,EAAiC,GAA1BJ,EAAK0R,KAAKtH,QAAQhB,MAGzBi7C,EAAW,EACXC,EAAS,EAGT77C,EAAM07C,MACNE,EAAW,EACXC,EAAS,KAETD,EAAW,EACXC,EAAS77C,EAAM4uC,UAInB,IAAIkN,EAAcN,GAAc7jD,EAAMA,EAAMA,EAAOgkD,EAAiBC,EAAUC,GAG9ElyC,EAAKpS,EAAKK,IAAI2V,KAAM,IAAKuuC,GAGzBnyC,EAAKpS,EAAKK,IAAI2V,KAAM,iBAAkBvN,EAAM07C,MAAQ17C,EAAM4uC,SAAW,EAAI,EAAI,KAG7EmN,GAAoB3tC,EAAW,CAC/BnE,IAAK,MACLpX,KAAM,qBACNokC,kBAAkB,EAClB5oB,YAAY,EACZyE,OAAQA,GACRtE,MAAOA,GACPF,OAAQ,CACJC,KAAM,CAAC,WAAY,OAAQ,SAC3BnE,OAAQ,CAAC,WACT4I,WAAY,CACRtR,QAAS,CAAEhK,KAAM,QAASgc,SAAU,KACpCk7B,SAAU,CACNl3C,KAAM,SACNgb,UAAW,IACXC,QAAS,IACTC,KAAM,QAMlBopC,GAAW,SAAgB3mD,GAC3B,IAAIkC,EAAOlC,EAAKkC,KACZyI,EAAQ3K,EAAK2K,MACjBzI,EAAKoK,QAAQa,WAAaxC,EAAMyB,MAAQ,IAAO,SAAWzB,EAAM9D,MAAQ,UAExE8D,EAAMi8C,YAAa,GAGnBC,GAAU,SAAermD,GACzB,IAAI0B,EAAO1B,EAAM0B,KACbyI,EAAQnK,EAAMmK,MACdi8C,EAAaj8C,EAAMi8C,WACnBE,EAAgB5kD,EAAKlB,MAAM,iBAAqC,IAAlB2J,EAAM0B,QAEpDy6C,IAAkBF,GAClBj8C,EAAMi8C,YAAa,EACnBtyC,EAAKpS,EAAKoK,QAAS,WAAY,cACvBw6C,GAAiBF,IACzBj8C,EAAMi8C,YAAa,EACnB1kD,EAAKoK,QAAQmiB,gBAAgB,cAIjCllB,GAAmBwP,EAAW,CAC9BnE,IAAK,SACLwmB,WAAY,CACR/4B,KAAM,UAGV2W,YAAY,EACZ4oB,kBAAkB,EAClBpkC,KAAM,qBACNyb,OAAQ,CACJC,KAAM,CAAC,SACPnE,OAAQ,CAAC,aAAc,aAAc,SAAU,SAAU,WACzD4I,WAAY,CACRG,OAAQ,SACRC,OAAQ,SACRC,WAAY,SACZC,WAAY,SACZ5R,QAAS,CAAEhK,KAAM,QAASgc,SAAU,MAGxC0gB,WAAW,GAGfthB,OAAQkpC,GACRxtC,MAAO0tC,KAGPzjD,GAAoB,SAA2B0kC,GAC/C,IAAIoF,EACAl+B,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,IACpE42B,EAAO52B,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,IAI3E+3C,EAAKnhB,EACLohB,EAAKphB,EAAOA,EACZqhB,EAAKrhB,EAAOA,EAAOA,EAGvB,OAPAkC,EAAQ3/B,KAAKgV,MAAMhV,KAAKqT,IAAIssB,KAOhBif,EACDjf,EAAQ,SAIfA,EAAQkf,EACD7+C,KAAKib,MAAM0kB,EAAQif,GAAM,MAIhCjf,EAAQmf,EACDC,GAAuBpf,EAAQkf,EAAI,EAAG9Z,GAAoB,MAI9Dga,GAAuBpf,EAAQmf,EAAI,EAAG/Z,GAAoB,OAGjEga,GAAyB,SAAgCrqD,EAAOsqD,EAAc7d,GAC9E,OAAOzsC,EACFuqD,QAAQD,GACRn8B,MAAM,KACNpkB,QAAO,SAAS2iC,GACb,MAAgB,MAATA,KAEVjuC,KAAKguC,IAGV+d,GAAW,SAAgBrnD,GAC3B,IAAIkC,EAAOlC,EAAKkC,KACZyI,EAAQ3K,EAAK2K,MAEb28C,EAAWhC,GAAgB,QAC/BgC,EAASp6C,UAAY,2BAIrBoH,EAAKgzC,EAAU,cAAe,QAC9BplD,EAAKmL,YAAYi6C,GACjBplD,EAAKK,IAAI+kD,SAAWA,EAGpB,IAAItjD,EAAWshD,GAAgB,QAC/BthD,EAASkJ,UAAY,0BACrBhL,EAAKmL,YAAYrJ,GACjB9B,EAAKK,IAAIyB,SAAWA,EAGpBiS,GAAKjS,EAAU9B,EAAKlB,MAAM,oCAC1BiV,GAAKqxC,EAAUjC,GAAenjD,EAAKlB,MAAM,gBAAiB2J,EAAM/P,OAGhE2sD,GAAa,SAAoB/mD,GACjC,IAAI0B,EAAO1B,EAAM0B,KACbyI,EAAQnK,EAAMmK,MAClBsL,GACI/T,EAAKK,IAAIyB,SACTZ,GACIlB,EAAKlB,MAAM,gBAAiB2J,EAAM/P,IAClC,IACAsH,EAAKlB,MAAM,wBAInBiV,GAAK/T,EAAKK,IAAI+kD,SAAUjC,GAAenjD,EAAKlB,MAAM,gBAAiB2J,EAAM/P,OAGzE4sD,GAAwB,SAA+BzmD,GACvD,IAAImB,EAAOnB,EAAMmB,KACbyI,EAAQ5J,EAAM4J,MAEd86B,GAAMvjC,EAAKlB,MAAM,gBAAiB2J,EAAM/P,KACxC2sD,GAAW,CAAErlD,KAAMA,EAAMyI,MAAOA,IAIpCsL,GAAK/T,EAAKK,IAAIyB,SAAU9B,EAAKlB,MAAM,uCAGnCymD,GAAW1uC,EAAW,CACtBvb,KAAM,YACNwb,YAAY,EACZ4oB,kBAAkB,EAClBzoB,MAAO9Y,EAAY,CACfsN,cAAe45C,GACfG,qBAAsBH,GACtB//B,0BAA2BggC,GAC3B9/B,uBAAwB8/B,KAG5BhmB,cAAe,SAAuBt/B,GAClC4rC,GAAa,cAAe1wC,OAAOmJ,OAAO,GAAIrE,EAAM,CAAEJ,KAAMI,MAEhEub,OAAQ4pC,GACRpuC,OAAQ,CACJlE,OAAQ,CAAC,aAAc,cACvB4I,WAAY,CACRK,WAAY,SACZC,WAAY,aAKpB0pC,GAAe,SAAsB9qD,GACrC,OAAOsL,KAAKgV,MAAc,IAARtgB,IAGlB+qD,GAAW,SAAgB5nD,GAC3B,IAAIkC,EAAOlC,EAAKkC,KAGZwB,EAAO4hD,GAAgB,QAC3B5hD,EAAKwJ,UAAY,6BACjBhL,EAAKmL,YAAY3J,GACjBxB,EAAKK,IAAImB,KAAOA,EAGhB,IAAIC,EAAM2hD,GAAgB,QAC1B3hD,EAAIuJ,UAAY,4BAChBhL,EAAKmL,YAAY1J,GACjBzB,EAAKK,IAAIoB,IAAMA,EAEfkkD,GAAuB,CAAE3lD,KAAMA,EAAMC,OAAQ,CAAEo3C,SAAU,SAGzDsO,GAAyB,SAAgCrnD,GACzD,IAAI0B,EAAO1B,EAAM0B,KACbC,EAAS3B,EAAM2B,OACf2lD,EACoB,OAApB3lD,EAAOo3C,SACDr3C,EAAKlB,MAAM,0BACXkB,EAAKlB,MAAM,0BAA4B,IAAM2mD,GAAaxlD,EAAOo3C,UAAY,IAEvFtjC,GAAK/T,EAAKK,IAAImB,KAAMokD,GACpB7xC,GAAK/T,EAAKK,IAAIoB,IAAKzB,EAAKlB,MAAM,6BAG9B+mD,GAA4B,SAAmChnD,GAC/D,IAAImB,EAAOnB,EAAMmB,KACbC,EAASpB,EAAMoB,OACf2lD,EACoB,OAApB3lD,EAAOo3C,SACDr3C,EAAKlB,MAAM,6BACXkB,EAAKlB,MAAM,6BACX,IACA2mD,GAAaxlD,EAAOo3C,UACpB,IAEVtjC,GAAK/T,EAAKK,IAAImB,KAAMokD,GACpB7xC,GAAK/T,EAAKK,IAAIoB,IAAKzB,EAAKlB,MAAM,6BAG9BgnD,GAA2B,SAAkC5mD,GAC7D,IAAIc,EAAOd,EAAMc,KACjB+T,GAAK/T,EAAKK,IAAImB,KAAMxB,EAAKlB,MAAM,8BAC/BiV,GAAK/T,EAAKK,IAAIoB,IAAKzB,EAAKlB,MAAM,6BAG9BinD,GAAyB,SAAgC5mD,GACzD,IAAIa,EAAOb,EAAMa,KACjB+T,GAAK/T,EAAKK,IAAImB,KAAMxB,EAAKlB,MAAM,sCAC/BiV,GAAK/T,EAAKK,IAAIoB,IAAKzB,EAAKlB,MAAM,4BAG9BknD,GAA4B,SAAmCjmD,GAC/D,IAAIC,EAAOD,EAAMC,KACjB+T,GAAK/T,EAAKK,IAAImB,KAAMxB,EAAKlB,MAAM,uCAC/BiV,GAAK/T,EAAKK,IAAIoB,IAAKzB,EAAKlB,MAAM,2BAG9Bo9C,GAAQ,SAAe17C,GACvB,IAAIR,EAAOQ,EAAMR,KACjB+T,GAAK/T,EAAKK,IAAImB,KAAM,IACpBuS,GAAK/T,EAAKK,IAAIoB,IAAK,KAGnBkqC,GAAQ,SAAehgC,GACvB,IAAI3L,EAAO2L,EAAM3L,KACbC,EAAS0L,EAAM1L,OACnB8T,GAAK/T,EAAKK,IAAImB,KAAMvB,EAAOsB,OAAOC,MAClCuS,GAAK/T,EAAKK,IAAIoB,IAAKxB,EAAOsB,OAAOE,MAGjCwkD,GAAapvC,EAAW,CACxBvb,KAAM,cACNwb,YAAY,EACZ4oB,kBAAkB,EAClBzoB,MAAO9Y,EAAY,CACfsN,cAAeywC,GACfv2B,2BAA4Bu2B,GAC5BgK,4BAA6BJ,GAC7BK,0BAA2BJ,GAC3BtgC,6BAA8BugC,GAC9BI,iCAAkCP,GAClCQ,8BAA+BV,GAC/BrgC,0BAA2BqmB,GAC3BnmB,uBAAwBmmB,GACxBpmB,gCAAiComB,GACjC2a,uCAAwC3a,GACxC4a,4BAA6B5a,KAGjCrM,cAAe,SAAuBt/B,GAClC4rC,GAAa,cAAe1wC,OAAOmJ,OAAO,GAAIrE,EAAM,CAAEJ,KAAMI,MAEhEub,OAAQmqC,GACR3uC,OAAQ,CACJlE,OAAQ,CAAC,aAAc,aAAc,WACrC4I,WAAY,CACRtR,QAAS,CAAEhK,KAAM,QAASgc,SAAU,KACpCL,WAAY,SACZC,WAAY,aASpByqC,GAAU,CACVC,cAAe,CACX9hD,MAAO,mCACP1E,OAAQ,kBACR+K,UAAW,mCACXR,MAAO,2BAEXk8C,cAAe,CACX/hD,MAAO,mCACP1E,OAAQ,kBACRiK,KAAM,iBACNc,UAAW,mCACXR,MAAO,gCAEXm8C,WAAY,CACRhiD,MAAO,+BACP1E,OAAQ,sBACRiK,KAAM,kBACNc,UAAW,+BACXR,MAAO,+BAEXo8C,YAAa,CACTjiD,MAAO,gCACP1E,OAAQ,0BACRiK,KAAM,mBACNc,UAAW,gCACXR,MAAO,gCAEXq8C,oBAAqB,CACjBliD,MAAO,yCACP1E,OAAQ,wBACR+K,UAAW,yCACXR,MAAO,gCAEXs8C,oBAAqB,CACjBniD,MAAO,yCACP1E,OAAQ,wBACRiK,KAAM,iBACNc,UAAW,yCACXR,MAAO,gCAEXu8C,qBAAsB,CAClBpiD,MAAO,wCACP1E,OAAQ,iCACRiK,KAAM,gBACNc,UAAW,0CACXR,MAAO,iCAKXw8C,GAAa,GACjBtyB,EAAM8xB,IAAS,SAAS73C,GACpBq4C,GAAWxuD,KAAKmW,MAGpB,IAy/IQs4C,GAz/IJC,GAA0B,SAAiClnD,GAC3D,GAAyC,UAArCmnD,GAA2BnnD,GAAmB,OAAO,EACzD,IAAIonD,EAAapnD,EAAKK,IAAIgnD,iBAAiB31C,KAAKtH,QAChD,OAAOg9C,EAAWnqC,OAAS,KAAOmqC,EAAWh+C,MAAQg+C,EAAWz1C,MAGhE21C,GAAuB,SAA8BtnD,GAErD,OADiBA,EAAKK,IAAIknD,oBAAoB71C,KAAKtH,QACjChB,OAIlBo+C,GAAoC,SAA2CxnD,GAC/E,OAAOiG,KAAKib,MAAMlhB,EAAKK,IAAIgnD,iBAAiB31C,KAAKtH,QAAQf,OAAS,IAElEo+C,GAAsC,SAA6CznD,GACnF,OAAOiG,KAAKib,MAAMlhB,EAAKK,IAAIgnD,iBAAiB31C,KAAKtH,QAAQuH,KAAO,IAGhE+1C,GAA4B,SAAmC1nD,GAC/D,OAAOA,EAAKlB,MAAM,sCAElB6oD,GAA+B,SAAsC3nD,GACrE,OAAOA,EAAKlB,MAAM,0CAElBqoD,GAA6B,SAAoCnnD,GACjE,OAAOA,EAAKlB,MAAM,0CAGlB8oD,GAAe,CACfL,oBAAqB,CAAEp9C,QAAS,GAChC09C,oBAAqB,CAAE19C,QAAS,GAChCk9C,iBAAkB,CAAEl9C,QAAS,GAC7B29C,kBAAmB,CAAE39C,QAAS,GAC9B49C,0BAA2B,CAAE59C,QAAS,GACtC69C,0BAA2B,CAAE79C,QAAS,GACtC89C,2BAA4B,CAAE99C,QAAS,GACvC+9C,sBAAuB,CAAE/9C,QAAS,EAAGK,MAAOk9C,IAC5CS,yBAA0B,CAAEh+C,QAAS,EAAGK,MAAOm9C,IAC/CS,4BAA6B,CAAEj+C,QAAS,EAAGyR,OAAQ,IAAMC,OAAQ,KACjE86B,KAAM,CAAE76B,WAAY,EAAGC,WAAY,EAAG5R,QAAS,GAC/C5I,OAAQ,CAAEua,WAAY,EAAGC,WAAY,EAAG5R,QAAS,IAGjDk+C,GAAY,CACZhB,iBAAkB,CAAEl9C,QAAS,GAC7B29C,kBAAmB,CAAE39C,QAAS,GAC9BwsC,KAAM,CAAE76B,WAAYorC,IACpB3lD,OAAQ,CAAEua,WAAYorC,KAGtBoB,GAAkB,CAClBP,0BAA2B,CAAE59C,QAAS,GACtCg+C,yBAA0B,CAAEh+C,QAAS,GACrC5I,OAAQ,CAAE4I,QAAS,IAGnBo+C,GAAW,CACX/iC,uBAAwB,CACpB6hC,iBAAkB,CAAEl9C,QAAS,GAC7BwsC,KAAM,CAAE76B,WAAYorC,IACpB3lD,OAAQ,CAAEua,WAAYorC,GAAyB/8C,QAAS,IAG5Dq+C,oBAAqB,CACjBjB,oBAAqB,CAAEp9C,QAAS,GAChC+9C,sBAAuB,CAAE/9C,QAAS,GAClC5I,OAAQ,CAAE4I,QAAS,IAGvBmb,0BAA2B,CACvBuiC,oBAAqB,CAAE19C,QAAS,GAChCk9C,iBAAkB,CAAEl9C,QAAS,GAC7BwsC,KAAM,CAAE76B,WAAYorC,IACpB3lD,OAAQ,CAAE4I,QAAS,IAGvBs+C,sBAAuB,CACnBN,yBAA0B,CAAEh+C,QAAS,EAAGK,MAAO28C,IAC/CxQ,KAAM,CAAE76B,WAAYorC,IACpB3lD,OAAQ,CAAE4I,QAAS,IAGvBo8C,4BAA6B,CACzB4B,yBAA0B,CAAEh+C,QAAS,EAAGK,MAAO28C,IAC/CE,iBAAkB,CAAEl9C,QAAS,GAC7BwsC,KAAM,CAAE76B,WAAYorC,IACpB3lD,OAAQ,CAAE4I,QAAS,EAAG2R,WAAYorC,KAGtCz7C,cAAe48C,GACfK,oBAAqB,CACjBrB,iBAAkB,CAAEl9C,QAAS,GAC7BwsC,KAAM,CAAE76B,WAAYorC,IACpB3lD,OAAQ,CAAEua,WAAYorC,KAG1BxhC,0BAA2B4iC,GAC3BpC,4BAA6BoC,GAC7BlC,iCAAkCkC,GAClC7iC,6BAA8B,CAC1BwiC,2BAA4B,CAAE99C,QAAS,GACvCwsC,KAAM,CAAExsC,QAAS,GACjB5I,OAAQ,CAAE4I,QAAS,IAGvBob,gCAAiC,CAC7B8hC,iBAAkB,CAAEl9C,QAAS,GAC7B69C,0BAA2B,CAAE79C,QAAS,GACtC5I,OAAQ,CAAE4I,QAAS,GACnBwsC,KAAM,CAAE76B,WAAYorC,KAGxBZ,uCAAwC,CACpC2B,2BAA4B,CAAE99C,QAAS,GACvC5I,OAAQ,CAAE4I,QAAS,GACnBwsC,KAAM,CAAExsC,QAAS,IAGrBg8C,0BAA2B,CACvBkB,iBAAkB,CAAEl9C,QAAS,GAC7B29C,kBAAmB,CAAE39C,QAAS,GAC9BwsC,KAAM,CAAE76B,WAAYorC,IACpB3lD,OAAQ,CAAE4I,QAAS,IAGvBwb,2BAA4B0iC,IAI5BM,GAAkC9xC,EAAW,CAC7C0E,OAAQ,SAAgBzd,GACpB,IAAIkC,EAAOlC,EAAKkC,KAChBA,EAAKoK,QAAQa,UAAYjL,EAAKlB,MAAM,kBAExCxD,KAAM,gCACNwb,YAAY,EACZC,OAAQ,CACJlE,OAAQ,CAAC,SAAU,SAAU,WAC7B4I,WAAY,CACRG,OAAQ,SACRC,OAAQ,SACR1R,QAAS,CAAEhK,KAAM,QAASgc,SAAU,SAQ5CysC,GAAW,SAAgBtqD,GAC3B,IA4BIuqD,EA5BA7oD,EAAO1B,EAAM0B,KACbyI,EAAQnK,EAAMmK,MAEdqgD,EAAe5tD,OAAOmX,KAAKm0C,IAAS5kD,QAAO,SAAS4U,EAAMC,GAE1D,OADAD,EAAKC,GAAQvb,OAAOmJ,OAAO,GAAImiD,GAAQ/vC,IAChCD,IACR,IACC9d,EAAK+P,EAAM/P,GAGXi0C,EAAc3sC,EAAKlB,MAAM,oBAGzB8tC,EAAc5sC,EAAKlB,MAAM,oBAGzB+tC,EAAe7sC,EAAKlB,MAAM,qBAG1B6uC,EAAgB3tC,EAAKlB,MAAM,sBAG3Bw0C,EAAUtzC,EAAKlB,MAAM,YAGrBiqD,EAAwB/oD,EAAKlB,MAAM,sCAInCw0C,EACIzG,IAAiBF,EAEjBkc,EAAe,SAAsBl6C,GACjC,OAAQ,uBAAuBnT,KAAKmT,KAEhCk+B,GAAgBF,EAExBkc,EAAe,SAAsBl6C,GACjC,OAAQ,sDAAsDnT,KAAKmT,IAE/Dk+B,GAAiBF,IAEzBkc,EAAe,SAAsBl6C,GACjC,OAAQ,UAAUnT,KAAKmT,KAK/Bk6C,EAAe,SAAsBl6C,GACjC,OAAQ,UAAUnT,KAAKmT,IAI/B,IAAIq6C,EAAiBH,EAAe7B,GAAWtiD,OAAOmkD,GAAgB7B,GAAW7tD,SASjF,GANIw0C,GAAiBhB,IACjBmc,EAAmC,qBAAEnkD,MAAQ,+BAC7CmkD,EAAmC,qBAAE5+C,KAAO,mBAI5CopC,IAAY3G,EAAa,CACzB,IAAI3zC,EAAMuvD,GAAuC,6BACjDvvD,EAAI29C,KAAK76B,WAAa2rC,GACtBzuD,EAAI29C,KAAK56B,WAAayrC,GACtBxuD,EAAIuI,OAAOwa,WAAayrC,GACxBxuD,EAAIovD,4BAA8B,CAAEj+C,QAAS,EAAGyR,OAAQ,EAAGC,OAAQ,GAiBvE,GAbIy3B,IAAYzG,IACZ,CACI,4BACA,8BACA,mCACA,mCACFv6B,SAAQ,SAAS3D,GACf45C,GAAS55C,GAAKpN,OAAOwa,WAAayrC,MAEtCe,GAA0C,gCAAEhnD,OAAOua,WAAawrC,IAIhEyB,GAAyBpc,EAAa,CACtCmc,EAAmC,qBAAEt+C,MAAQ,8BAC7C,IAAIy+C,EAAOV,GAAuC,6BAClDU,EAAKtS,KAAK76B,WAAaorC,GACvB+B,EAAK1nD,OAAOwa,WAAayrC,GACzByB,EAAKb,4BAA8B,CAAEj+C,QAAS,EAAGyR,OAAQ,EAAGC,OAAQ,GAInE+wB,IACDkc,EAAyB,WAAE3c,UAAW,GAI1CzX,EAAMo0B,GAAc,SAASn6C,EAAKgqB,GAE9B,IAAI3uB,EAAahK,EAAKiK,gBAAgB5C,GAAkB,CACpD1C,MAAO3E,EAAKlB,MAAM65B,EAAWh0B,OAC7BuF,KAAMlK,EAAKlB,MAAM65B,EAAWzuB,MAC5BC,QAAS,IAIT6+C,EAAe/vB,SAAStqB,IACxB3O,EAAK2K,gBAAgBX,GAIrB2uB,EAAWwT,WACXniC,EAAWI,QAAQmI,aAAa,WAAY,YAC5CvI,EAAWI,QAAQmI,aAAa,SAAU,WAI9CvI,EAAWI,QAAQG,QAAQC,MAAQxK,EAAKlB,MAAM,aAAe65B,EAAWnuB,OAGxER,EAAWI,QAAQC,UAAUC,IAAIquB,EAAW3tB,WAG5ChB,EAAWS,GAAG,SAAS,SAAS1N,GAC5BA,EAAEgN,kBACE4uB,EAAWwT,UACfnsC,EAAKM,SAASq4B,EAAW14B,OAAQ,CAAEnB,MAAOpG,OAI9CsH,EAAKK,IAAI,SAAWsO,GAAO3E,KAI/BhK,EAAKK,IAAI+nD,4BAA8BpoD,EAAK2K,gBACxC3K,EAAKiK,gBAAgB0+C,KAGzB3oD,EAAKK,IAAI+nD,4BAA4Bh+C,QAAQG,QAAQC,MAAQxK,EAAKlB,MAC9D,0CAIJkB,EAAKK,IAAIs2C,KAAO32C,EAAK2K,gBAAgB3K,EAAKiK,gBAAgBs7C,GAAU,CAAE7sD,GAAIA,KAG1EsH,EAAKK,IAAIkB,OAASvB,EAAK2K,gBAAgB3K,EAAKiK,gBAAgBg8C,GAAY,CAAEvtD,GAAIA,KAG9E,IAAIwwD,EAAoBlpD,EAAK2K,gBACzB3K,EAAKiK,gBAAgBu6C,GAAmB,CACpCr6C,QAAS,EACTK,MAAOxK,EAAKlB,MAAM,wCAI1BoqD,EAAkB9+C,QAAQC,UAAUC,IAAI,4BACxCtK,EAAKK,IAAI6nD,sBAAwBgB,EAEjC,IAAIC,EAAwBnpD,EAAK2K,gBAC7B3K,EAAKiK,gBAAgBu6C,GAAmB,CACpCr6C,QAAS,EACTK,MAAOxK,EAAKlB,MAAM,4CAI1BqqD,EAAsB/+C,QAAQC,UAAUC,IAAI,+BAC5CtK,EAAKK,IAAI8nD,yBAA2BgB,EAGpCnpD,EAAKK,IAAI+oD,aAAe,IAGxBC,GAAU,SAAexqD,GACzB,IAAImB,EAAOnB,EAAMmB,KACb03B,EAAU74B,EAAM64B,QAChBjvB,EAAQ5J,EAAM4J,MAElB6gD,GAAM,CAAEtpD,KAAMA,EAAM03B,QAASA,EAASjvB,MAAOA,IAG7C,IAAIxI,EAASy3B,EACRv+B,SACAuL,QAAO,SAASzE,GACb,MAAO,QAAQzE,KAAKyE,EAAOE,SAE9By7B,UACAwW,MAAK,SAASnyC,GACX,OAAOsoD,GAAStoD,EAAOE,SAI/B,GAAIF,EAAQ,CAERD,EAAKK,IAAI+oD,aAAe,GAExB,IAAIG,EAAgBhB,GAAStoD,EAAOE,MACpCu0B,EAAMkzB,IAAc,SAAStsD,EAAMkuD,GAE/B,IAAIC,EAAUzpD,EAAKK,IAAI/E,GAGvBo5B,EAAM80B,GAAe,SAAS76C,EAAKy3B,GAC/B,IAAIzrC,EACA4uD,EAAcjuD,SAA6C,IAA7BiuD,EAAcjuD,GAAMqT,GAC5C46C,EAAcjuD,GAAMqT,GACpBy3B,EACVpmC,EAAKK,IAAI+oD,aAAa5wD,KAAK,CAAEixD,QAASA,EAAS96C,IAAKA,EAAKhU,MAAOA,UAM5EqF,EAAKK,IAAI+oD,aAAa92C,SAAQ,SAASpT,GACnC,IAAIuqD,EAAUvqD,EAAMuqD,QAChB96C,EAAMzP,EAAMyP,IACZhU,EAAQuE,EAAMvE,MAClB8uD,EAAQ96C,GAAwB,mBAAVhU,EAAuBA,EAAMqF,GAAQrF,MAI/D2uD,GAAQnrD,EAAY,CACpBurD,2CAA4C,SACxCvqD,GAEA,IAAIa,EAAOb,EAAMa,KACbC,EAASd,EAAMc,OACnBD,EAAKK,IAAI0nD,0BAA0BpjD,MAAQ1E,EAAOtF,OAEtDgvD,qCAAsC,SAA8C5pD,GAChF,IAAIC,EAAOD,EAAMC,KACbC,EAASF,EAAME,OACnBD,EAAKK,IAAIknD,oBAAoB5iD,MAAQ1E,EAAOtF,OAEhDivD,wCAAyC,SACrCppD,GAEA,IAAIR,EAAOQ,EAAMR,KACbC,EAASO,EAAMP,OACnBD,EAAKK,IAAIwpD,uBAAuBllD,MAAQ1E,EAAOtF,OAEnDurD,4BAA6B,SAAqCv6C,GAC9D,IAAI3L,EAAO2L,EAAM3L,KACjBA,EAAKK,IAAI8nD,yBAAyBhE,MAAO,EACzCnkD,EAAKK,IAAI8nD,yBAAyB9Q,SAAW,GAEjDmR,oBAAqB,SAA6BjkC,GAC9C,IAAIvkB,EAAOukB,EAAMvkB,KACjBA,EAAKK,IAAI6nD,sBAAsB/D,MAAO,EACtCnkD,EAAKK,IAAI6nD,sBAAsB7Q,SAAW,GAE9CoR,sBAAuB,SAA+B9jC,GAClD,IAAI3kB,EAAO2kB,EAAO3kB,KAClBA,EAAKK,IAAI8nD,yBAAyBhE,MAAO,EACzCnkD,EAAKK,IAAI8nD,yBAAyB9Q,SAAW,GAEjDgP,8BAA+B,SAAuCxhC,GAClE,IAAI7kB,EAAO6kB,EAAO7kB,KACdC,EAAS4kB,EAAO5kB,OACpBD,EAAKK,IAAI6nD,sBAAsB/D,MAAO,EACtCnkD,EAAKK,IAAI6nD,sBAAsB7Q,SAAWp3C,EAAOo3C,UAErD+O,iCAAkC,SAA0CthC,GACxE,IAAI9kB,EAAO8kB,EAAO9kB,KACdC,EAAS6kB,EAAO7kB,OACpBD,EAAKK,IAAI8nD,yBAAyBhE,MAAO,EACzCnkD,EAAKK,IAAI8nD,yBAAyB9Q,SAAWp3C,EAAOo3C,YAIxD/5C,GAAOuZ,EAAW,CAClB0E,OAAQqtC,GACR3xC,MAAOoyC,GACP/pB,cAAe,SAAuBt/B,GAClC4rC,GAAa,cAAe1wC,OAAOmJ,OAAO,GAAIrE,EAAM,CAAEJ,KAAMI,MAEhE1E,KAAM,SAMNwuD,GAAW,SAAgBhsD,GAC3B,IAAIkC,EAAOlC,EAAKkC,KACZyI,EAAQ3K,EAAK2K,MAGjBzI,EAAKK,IAAI+kD,SAAWhC,GAAgB,UACpCpjD,EAAKmL,YAAYnL,EAAKK,IAAI+kD,UAG1BplD,EAAKK,IAAI/C,KAAO0C,EAAK2K,gBAAgB3K,EAAKiK,gBAAgB3M,GAAM,CAAE5E,GAAI+P,EAAM/P,MAG5EsH,EAAKK,IAAI/D,MAAO,GAMhBuN,GAAc,SAAqBvL,GACnC,IAAI0B,EAAO1B,EAAM0B,KACbyI,EAAQnK,EAAMmK,MAElBsL,GAAK/T,EAAKK,IAAI+kD,SAAUjC,GAAenjD,EAAKlB,MAAM,gBAAiB2J,EAAM/P,OAGzEqxD,GAAclzC,EAAW,CACzB0E,OAAQuuC,GACRhzC,YAAY,EACZG,MAAO9Y,EAAY,CACfsN,cAAe5B,KAGnBy1B,cAAe,SAAuBt/B,GAClC4rC,GAAa,cAAe1wC,OAAOmJ,OAAO,GAAIrE,EAAM,CAAEJ,KAAMI,MAEhE0S,IAAK,WACLpX,KAAM,iBAGN0uD,GAAqB,CAAE7pD,KAAM,SAAUib,QAAS,GAAKC,KAAM,GAE3D4uC,GAAW,SAAgBnsD,GAC3B,IAAIkC,EAAOlC,EAAKkC,KACZyI,EAAQ3K,EAAK2K,MACjB,CACI,CACInN,KAAM,OAGV,CACIA,KAAM,SACNmN,MAAO,CACHsT,WAAY,KACZF,OAAQ,MAGZ9E,OAAQ,CACJ0E,WAAY,CACRI,OAAQmuC,IAGZn3C,OAAQ,CAAC,aAAc,YAI/B,CACIvX,KAAM,SACNmN,MAAO,CACHsT,WAAY,MAGhBhF,OAAQ,CACJ0E,WAAY,CACRM,WAAYiuC,IAGhBn3C,OAAQ,CAAC,iBAGnBP,SAAQ,SAAS43C,GACfC,GAAcnqD,EAAMkqD,EAASzhD,EAAMnN,SAGvC0E,EAAKoK,QAAQC,UAAUC,IAAI,aAAe7B,EAAMnN,MAEhD0E,EAAKK,IAAI+pD,SAAW,MAGpBD,GAAgB,SAAuBnqD,EAAMkqD,EAASl/C,GACtD,IAAIq/C,EAAkBxzC,EAAW,CAC7Bvb,KAAM,SAAW4uD,EAAQ5uD,KAAO,cAAgB0P,EAChD+L,OAAQmzC,EAAQnzC,OAChB2oB,kBAAkB,IAGlB9/B,EAAOI,EAAKiK,gBAAgBogD,EAAiBH,EAAQzhD,OAEzDzI,EAAKK,IAAI6pD,EAAQ5uD,MAAQ0E,EAAK2K,gBAAgB/K,IAG9C0qD,GAAU,SAAehsD,GACzB,IAAI0B,EAAO1B,EAAM0B,KACbyI,EAAQnK,EAAMmK,MASlB,GAN0B,OAAtBzI,EAAKK,IAAI+pD,UAAqB3hD,EAAM2hD,WAAapqD,EAAKK,IAAI+pD,WAC1DpqD,EAAKK,IAAI+pD,UAAWlnB,EAAUz6B,EAAM2hD,WAAY3hD,EAAM2hD,SACtDpqD,EAAKoK,QAAQG,QAAQ6/C,SAAWpqD,EAAKK,IAAI+pD,UAIxC3hD,EAAMY,OAAX,CAGA,IAAIkhD,EAAUvqD,EAAKK,IAAIuR,IAAIF,KAAKtH,QAC5BogD,EAAaxqD,EAAKK,IAAIyR,OAAOJ,KAAKtH,QAGlCf,EAASpD,KAAKC,IAAIqkD,EAAQlhD,OAASmhD,EAAWnhD,OAAQZ,EAAMY,QAGhErJ,EAAKK,IAAI0F,OAAOgW,WAAawuC,EAAQlhD,OAIrCrJ,EAAKK,IAAI0F,OAAO8V,QAAUxS,EAASkhD,EAAQlhD,OAASmhD,EAAWnhD,QAAU,IAGzErJ,EAAKK,IAAIyR,OAAOiK,WAAa1S,EAASmhD,EAAWnhD,SAGjDohD,GAAQ5zC,EAAW,CACnBvb,KAAM,QACNyjC,KAAM,SAAclgC,GAChB,IAAImB,EAAOnB,EAAMmB,KAEjB,OADYnB,EAAM4J,MACJiiD,cAAgB1qD,EAAKK,IAAIyR,OAAOiK,YAElD9E,MAAOqzC,GACP/uC,OAAQ0uC,GACRnzC,YAAY,EACZC,OAAQ,CACJC,KAAM,CAAC,SAAU,gBAAiB,eAItC2zC,GAAmB,SAA0B5jB,GAC7C,IAAI6jB,EAAU7jB,EAAM/tC,KAAI,SAASC,GAC7B,OAAOA,EAAKP,MAEZmyD,OAAY99C,EAChB,MAAO,CACH+9C,SAAU,SAAkB54C,GACxB24C,EAAY34C,GAEhB64C,SAAU,WACN,OAAOF,GAEXG,aAAc,SAAsB/xD,GAChC,OAAO2xD,EAAQ/1C,QAAQ5b,EAAKP,OAKpCuyD,GAAwB,CACxB9qD,KAAM,SACNgb,UAAW,IACXC,QAAS,IACTC,KAAM,IAGN6vC,GAAoB,SAEpBC,GAAW,CACX3C,oBAAqB,OACrBnC,8BAA+B,UAC/B7gC,uBAAwB,eACxBF,0BAA2B,aAC3B7Z,cAAe,OACf86C,4BAA6B,eAC7BkC,sBAAuB,OACvB/iC,0BAA2B,kBAC3BwgC,4BAA6B,kBAC7BE,iCAAkC,aAClC3gC,6BAA8B,sBAC9BF,gCAAiC,mBACjC+gC,uCAAwC,0BACxCH,0BAA2B,YAC3BxgC,2BAA4B,QAM5BylC,GAAW,SAAgBttD,GAC3B,IAAIkC,EAAOlC,EAAKkC,KACZyI,EAAQ3K,EAAK2K,MA0BjB,GAvBAzI,EAAKK,IAAIgrD,YAAc,SAAStuD,GAC5B,OAAOiD,EAAKM,SAAS,oBAAqB,CAAE5H,GAAI+P,EAAM/P,MAI1DsH,EAAKoK,QAAQ1R,GAAK,kBAAoB+P,EAAM/P,GAC5CsH,EAAKoK,QAAQc,iBAAiB,QAASlL,EAAKK,IAAIgrD,aAGhDrrD,EAAKK,IAAIka,UAAYva,EAAK2K,gBACtB3K,EAAKiK,gBAAgB8/C,GAAa,CAAErxD,GAAI+P,EAAM/P,MAIlDsH,EAAKK,IAAIoqD,MAAQzqD,EAAK2K,gBAAgB3K,EAAKiK,gBAAgBwgD,GAAO,CAAEnvD,KAAM,gBAG1E0E,EAAKK,IAAIoqD,MAAMphD,OAAS,KAGxBZ,EAAM6iD,kBAAmB,EAGpBtrD,EAAKlB,MAAM,qBAAhB,CAGAkB,EAAKoK,QAAQG,QAAQghD,UAAY,OAEjC,IAAIC,EAAO,SAAczuD,GACrB,GAAKA,EAAE0uD,UAAP,CAEA,IAAIC,GAA0B,EAE1BnkD,EAAS,CACTd,EAAG1J,EAAE4uD,MACLjlD,EAAG3J,EAAE6uD,OAGTnjD,EAAMojD,WAAa,CACfplD,EAAGzG,EAAK8b,WACRpV,EAAG1G,EAAK+b,YAGZtT,EAAMqjD,WAAa,CACfrlD,EAAG1J,EAAEgvD,QACLrlD,EAAG3J,EAAEivD,SAGT,IAAIT,EAAYZ,GAAiB3qD,EAAKlB,MAAM,qBAE5CkB,EAAKM,SAAS,gBAAiB,CAAE5H,GAAI+P,EAAM/P,GAAI6yD,UAAWA,IAE1D,IAAIU,EAAO,SAAclvD,GAChBA,EAAE0uD,YAEP1uD,EAAEgN,kBACFhN,EAAEmvD,iBAEFzjD,EAAM0jD,WAAa,CACf1lD,EAAG1J,EAAE4uD,MAAQpkD,EAAOd,EACpBC,EAAG3J,EAAE6uD,MAAQrkD,EAAOb,GAKpB+B,EAAM0jD,WAAW1lD,EAAIgC,EAAM0jD,WAAW1lD,EACtCgC,EAAM0jD,WAAWzlD,EAAI+B,EAAM0jD,WAAWzlD,EAC/B,KAAOglD,IACdA,GAA0B,EAC1B1rD,EAAKoK,QAAQkB,oBAAoB,QAAStL,EAAKK,IAAIgrD,cAGvDrrD,EAAKM,SAAS,gBAAiB,CAAE5H,GAAI+P,EAAM/P,GAAI6yD,UAAWA,MAG1Da,EAAO,SAASA,EAAKrvD,GAChBA,EAAE0uD,YAEP7qD,SAAS0K,oBAAoB,cAAe2gD,GAC5CrrD,SAAS0K,oBAAoB,YAAa8gD,GAE1C3jD,EAAM0jD,WAAa,CACf1lD,EAAG1J,EAAE4uD,MAAQpkD,EAAOd,EACpBC,EAAG3J,EAAE6uD,MAAQrkD,EAAOb,GAGxB1G,EAAKM,SAAS,gBAAiB,CAAE5H,GAAI+P,EAAM/P,GAAI6yD,UAAWA,IAGtDG,GACAjpC,YAAW,WACP,OAAOziB,EAAKoK,QAAQc,iBAAiB,QAASlL,EAAKK,IAAIgrD,eACxD,KAIXzqD,SAASsK,iBAAiB,cAAe+gD,GACzCrrD,SAASsK,iBAAiB,YAAakhD,KAG3CpsD,EAAKoK,QAAQc,iBAAiB,cAAesgD,KAG7Ca,GAAUluD,EAAY,CACtBmuD,wBAAyB,SAAiChuD,GACtD,IAAI0B,EAAO1B,EAAM0B,KACbC,EAAS3B,EAAM2B,OACnBD,EAAKqJ,OAASpJ,EAAOoJ,UAIzBkjD,GAAUpuD,EACV,CACIquD,cAAe,SAAuB3tD,GAClC,IAAImB,EAAOnB,EAAMmB,KACLnB,EAAM4J,MACZojD,WAAa,CACfplD,EAAGzG,EAAK8b,WACRpV,EAAG1G,EAAK+b,aAGhB0wC,cAAe,SAAuBvtD,GACvBA,EAAMc,KACZoK,QAAQG,QAAQghD,UAAY,QAErCmB,cAAe,SAAuBvtD,GAClC,IAAIa,EAAOb,EAAMa,KACbyI,EAAQtJ,EAAMsJ,MAClBA,EAAM0jD,WAAa,KACnB1jD,EAAMojD,WAAa,KACnB7rD,EAAKoK,QAAQG,QAAQghD,UAAY,UAGzC,SAASxrD,GACL,IAAIC,EAAOD,EAAMC,KACb03B,EAAU33B,EAAM23B,QAChBjvB,EAAQ1I,EAAM0I,MACdiU,EAAiB3c,EAAM2c,eAEY,SAAnC1c,EAAKoK,QAAQG,QAAQghD,WACjBvrD,EAAK4b,QAAU,IACf5b,EAAKoK,QAAQG,QAAQghD,UAAY,QAKzC,IAAItrD,EAASy3B,EACRv+B,SACAuL,QAAO,SAASzE,GACb,MAAO,QAAQzE,KAAKyE,EAAOE,SAE9By7B,UACAwW,MAAK,SAASnyC,GACX,OAAOkrD,GAASlrD,EAAOE,SAI3BF,GAAUA,EAAOE,OAASsI,EAAMkkD,eAEhClkD,EAAMkkD,aAAe1sD,EAAOE,KAG5BH,EAAKoK,QAAQG,QAAQqiD,kBAAoBzB,GAAS1iD,EAAMkkD,eAAiB,IAI7E,IAAIpmD,EACAvG,EAAKlB,MAAM,gCAAkCkB,EAAKlB,MAAM,0BACvDyH,EAKOmW,IACR1c,EAAKqJ,OAASrJ,EAAK0R,KAAKtH,QAAQhB,MAAQ7C,IALxC8lD,GAAQ,CAAErsD,KAAMA,EAAM03B,QAASA,EAASjvB,MAAOA,KAC1CzI,EAAKqJ,QAAUrJ,EAAKK,IAAIka,UAAU7I,KAAKtH,QAAQf,OAAS,IACzDrJ,EAAKqJ,OAASrJ,EAAKK,IAAIka,UAAU7I,KAAKtH,QAAQf,SAOlDqT,IACA1c,EAAKK,IAAIoqD,MAAMphD,OAAS,MAG5BrJ,EAAKK,IAAIoqD,MAAMphD,OAASrJ,EAAKqJ,UAIjCpQ,GAAO4d,EAAW,CAClB0E,OAAQ6vC,GACRn0C,MAAOs1C,GACPxnC,QAAS,SAAiBvkB,GACtB,IAAIR,EAAOQ,EAAMR,KACbyI,EAAQjI,EAAMiI,MAClBzI,EAAKoK,QAAQkB,oBAAoB,QAAStL,EAAKK,IAAIgrD,aACnDrrD,EAAKM,SAAS,eAAgB,CAAExB,MAAO2J,EAAM/P,MAEjDga,IAAK,KACLpX,KAAM,OACNyb,OAAQ,CACJC,KAAM,CACF,KACA,oBACA,mBACA,YACA,aACA,aACA,cAEJnE,OAAQ,CAAC,aAAc,aAAc,SAAU,SAAU,UAAW,UAEpE4I,WAAY,CACRG,OAAQsvC,GACRrvC,OAAQqvC,GACRpvC,WAAYmvC,GACZlvC,WAAYkvC,GACZ9gD,QAAS,CAAEhK,KAAM,QAASgc,SAAU,SAK5C0wC,GAAiB,SAASC,EAAiBpmC,GAG3C,OAAOzgB,KAAKC,IAAI,EAAGD,KAAKib,OAAO4rC,EAAkB,GAAKpmC,KAGtDqmC,GAAyB,SAAgCntD,EAAMy5B,EAAU2zB,GACzE,GAAKA,EAAL,CAEA,IAAIF,EAAkBltD,EAAK8R,KAAKtH,QAAQhB,MAEpCyG,EAAIwpB,EAAS3/B,OACbooC,EAAO,KAGX,GAAU,IAANjyB,GAAWm9C,EAAep7C,IAAMynB,EAAS,GAAG3nB,KAAKtH,QAAQwH,IAAK,OAAQ,EAG1E,IACIq7C,EADO5zB,EAAS,GACA3nB,KAAKtH,QACrB8iD,EAAuBD,EAAS7uB,WAAa6uB,EAAS/yB,YACtDxT,EAAYumC,EAAS7jD,MAAQ8jD,EAC7BC,EAAcN,GAAeC,EAAiBpmC,GAGlD,GAAoB,IAAhBymC,EAAmB,CACnB,IAAK,IAAIj7C,EAAQ,EAAGA,EAAQrC,EAAGqC,IAAS,CACpC,IAAIknB,EAAQC,EAASnnB,GACjBk7C,EAAWh0B,EAAM1nB,KAAKioB,MAAM/nB,IAAkC,GAA5BwnB,EAAM1nB,KAAKtH,QAAQf,OACzD,GAAI2jD,EAAep7C,IAAMw7C,EACrB,OAAOl7C,EAGf,OAAOrC,EAMX,IAFA,IAAIw9C,EAAqBJ,EAAS9uB,UAAY8uB,EAAShzB,aACnDqzB,EAAaL,EAAS5jD,OAASgkD,EAC1BE,EAAS,EAAGA,EAAS19C,EAAG09C,IAAU,CACvC,IAGIxB,EAHSwB,EAASJ,EAGCzmC,EACnBslC,EAHS/lD,KAAKib,MAAMqsC,EAASJ,GAGVG,EAEnBE,EAAUxB,EAAUiB,EAAS9uB,UAC7BsvB,EAAY1B,EAAUrlC,EACtBgnC,EAAa1B,EAAUsB,EAAaL,EAAShzB,aAEjD,GAAI+yB,EAAep7C,IAAM87C,GAAcV,EAAep7C,IAAM47C,EAAS,CACjE,GAAIR,EAAer7C,KAAO87C,EACtB,OAAOF,EAEPzrB,EADOyrB,IAAW19C,EAAI,EACf09C,EAEA,MAKnB,OAAa,OAATzrB,EACOA,EAGJjyB,IAGP89C,GAAqB,CACrBtkD,OAAQ,EACRD,MAAO,EACHwkD,gBACA,OAAO70D,KAAKsQ,QAEZwkD,cAAUC,GACU,IAAhB/0D,KAAKsQ,QAAwB,IAARykD,IAAW/0D,KAAKsQ,OAASykD,IAElDC,eACA,OAAOh1D,KAAKqQ,OAEZ4kD,aAASF,GACU,IAAf/0D,KAAKqQ,OAAuB,IAAR0kD,IAAW/0D,KAAKqQ,MAAQ0kD,IAEpDG,cAAe,SAAuB5kD,EAAQD,GACtB,IAAhBrQ,KAAKsQ,QAA2B,IAAXA,IAActQ,KAAKsQ,OAASA,GAClC,IAAftQ,KAAKqQ,OAAyB,IAAVA,IAAarQ,KAAKqQ,MAAQA,KAItD8kD,GAAW,SAAgBpwD,GAC3B,IAAIkC,EAAOlC,EAAKkC,KAEhBoS,EAAKpS,EAAKoK,QAAS,OAAQ,QAE3BpK,EAAKK,IAAI8tD,kBAAoBjZ,KAAK9S,OAQlCgsB,GAAc,SAAqB9vD,GACnC,IAAI0B,EAAO1B,EAAM0B,KACbC,EAAS3B,EAAM2B,OACfvH,EAAKuH,EAAOvH,GACZwZ,EAAQjS,EAAOiS,MACfmuC,EAAoBpgD,EAAOogD,kBAE/BrgD,EAAKK,IAAIguD,SAAWn8C,EAEpB,IAAIkwB,EAAM8S,KAAK9S,MACXksB,EAAYlsB,EACZj4B,EAAU,EAEd,GAAIk2C,IAAsB1Y,GAAkBK,KAAM,CAC9C79B,EAAU,EACV,IAAIokD,EAAWvuD,EAAKlB,MAAM,4BACtB0vD,EAAOpsB,EAAMpiC,EAAKK,IAAI8tD,kBAC1BG,EAAYE,EAAOD,EAAWnsB,GAAOmsB,EAAWC,GAAQpsB,EAG5DpiC,EAAKK,IAAI8tD,kBAAoBG,EAE7BtuD,EAAK2K,gBACD3K,EAAKiK,gBAEDhR,GAGA,CACIq1D,UAAWA,EACX51D,GAAIA,EACJyR,QAASA,EACTk2C,kBAAmBA,IAI3BnuC,IAIJu8C,GAAW,SAAkBx1D,EAAMwN,EAAGC,GACtC,IAAIgoD,EAAK5hD,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,EACzE6hD,EAAK7hD,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,EAEzE7T,EAAKkzD,YACLlzD,EAAK6iB,WAAa,KAClB7iB,EAAK8iB,WAAa,KAClB9iB,EAAK6iB,WAAa7iB,EAAK4yD,WAAWplD,EAAIxN,EAAKkzD,WAAW1lD,EACtDxN,EAAK8iB,WAAa9iB,EAAK4yD,WAAWnlD,EAAIzN,EAAKkzD,WAAWzlD,EACtDzN,EAAK2iB,OAAS,MACd3iB,EAAK4iB,OAAS,QAEd5iB,EAAK6iB,WAAarV,EAClBxN,EAAK8iB,WAAarV,EAEdwuC,KAAK9S,MAAQnpC,EAAKq1D,YAEG,IAAjBr1D,EAAKkR,SACLykD,GAAc31D,EAAMwN,EAAGC,EAAGgoD,EAAIC,GAIlC11D,EAAK2iB,OAAS,EACd3iB,EAAK4iB,OAAS,EACd5iB,EAAKkR,QAAU,KAKvBykD,GAAgB,SAAuB31D,EAAMwN,EAAGC,EAAGgoD,EAAIC,GACnD11D,EAAKonD,oBAAsB1Y,GAAkBK,MAC7C/uC,EAAK6iB,WAAa,KAClB7iB,EAAK6iB,WAAarV,EAClBxN,EAAK8iB,WAAa,KAClB9iB,EAAK8iB,WAAarV,GACXzN,EAAKonD,oBAAsB1Y,GAAkBE,MACpD5uC,EAAK6iB,WAAa,KAClB7iB,EAAK6iB,WAAarV,EAAS,GAALioD,EAEtBz1D,EAAK8iB,WAAa,KAClB9iB,EAAK8iB,WAAarV,EAAS,GAALioD,EAEtB11D,EAAK2iB,OAAS,GACd3iB,EAAK4iB,OAAS,IACP5iB,EAAKonD,oBAAsB1Y,GAAkBG,QACpD7uC,EAAK8iB,WAAa,KAClB9iB,EAAK8iB,WAAarV,EAAI,IACfzN,EAAKonD,oBAAsB1Y,GAAkBC,MACpD3uC,EAAK6iB,WAAa,KAClB7iB,EAAK6iB,WAAarV,EAAI,GACtBxN,EAAK8iB,WAAa,OAStB8yC,GAAiB,SAAwBhwD,GACzC,IAAImB,EAAOnB,EAAMmB,KAEbtH,EADSmG,EAAMoB,OACHvH,GAGZkH,EAAOI,EAAKwiB,WAAW4vB,MAAK,SAAShZ,GACrC,OAAOA,EAAM1gC,KAAOA,KAInBkH,IAKLA,EAAKgc,OAAS,GACdhc,EAAKic,OAAS,GACdjc,EAAKuK,QAAU,EAGfvK,EAAK0rD,kBAAmB,IAGxBwD,GAAgB,SAAuB11B,GACvC,OACIA,EAAM1nB,KAAKtH,QAAQf,OACe,GAAlC+vB,EAAM1nB,KAAKtH,QAAQ6vB,aACY,GAA/Bb,EAAM1nB,KAAKtH,QAAQ+zB,WAGvB4wB,GAAe,SAAsB31B,GACrC,OACIA,EAAM1nB,KAAKtH,QAAQhB,MACa,GAAhCgwB,EAAM1nB,KAAKtH,QAAQg0B,WACc,GAAjChF,EAAM1nB,KAAKtH,QAAQ8vB,aAIvB80B,GAAW,SAAkB9vD,GAC7B,IAAIc,EAAOd,EAAMc,KACbC,EAASf,EAAMe,OACfvH,EAAKuH,EAAOvH,GACZ6yD,EAAYtrD,EAAOsrD,UAGnBtyD,EAAO+G,EAAKlB,MAAM,WAAY,CAAEpG,GAAIA,IAGpCkH,EAAOI,EAAKwiB,WAAW4vB,MAAK,SAAShZ,GACrC,OAAOA,EAAM1gC,KAAOA,KAGpBu2D,EAAWjvD,EAAKwiB,WAAW9oB,OAC3Bw1D,EAAW3D,EAAUP,aAAa/xD,GAGtC,GAAK2G,EAAL,CAEA,IAAIuvD,EAAe,CACf1oD,EAAG7G,EAAKisD,WAAWplD,EAAI7G,EAAKusD,WAAW1lD,EAAI7G,EAAKksD,WAAWrlD,EAC3DC,EAAG9G,EAAKisD,WAAWnlD,EAAI9G,EAAKusD,WAAWzlD,EAAI9G,EAAKksD,WAAWplD,GAI3D0oD,EAAaN,GAAclvD,GAC3ByvD,EAAYN,GAAanvD,GAGzB0vD,EAAOrpD,KAAKib,MAAMlhB,EAAK0R,KAAKioB,MAAMvwB,MAAQimD,GAC1CC,EAAOL,IAAUK,EAAOL,GAG5B,IAAIrY,EAAO3wC,KAAKib,MAAM+tC,EAAWK,EAAO,GAExC3B,GAAmBE,UAAYuB,EAAaxY,EAC5C+W,GAAmBK,SAAWqB,EAAYC,EAG1C,IAAIpxC,EAAW,CACXxX,EAAGT,KAAKib,MAAMiuC,EAAazoD,EAAI0oD,GAC/B3oD,EAAGR,KAAKib,MAAMiuC,EAAa1oD,EAAI4oD,GAC/BE,aAAc,WACV,OACIJ,EAAazoD,EAAIinD,GAAmBC,WACpCuB,EAAazoD,EAAI,GACjByoD,EAAa1oD,EAAIknD,GAAmBI,UACpCoB,EAAa1oD,EAAI,EAEVyoD,EACJn2D,KAAK2N,EAAI4oD,EAAOv2D,KAAK0N,GAEhC+oD,YAAa,WAoBT,IAnBA,IAAIzoB,EAAQ/mC,EAAKlB,MAAM,oBACnB2wD,EAAkBzvD,EAAKwiB,WAAW9d,QAAO,SAAS00B,GAClD,OAAOA,EAAM1nB,KAAKtH,QAAQf,UAE1BgwB,EAAW0N,EAAM/tC,KAAI,SAASC,GAC9B,OAAOw2D,EAAgBrd,MAAK,SAASxY,GACjC,OAAOA,EAAUlhC,KAAOO,EAAKP,SAIjC8nD,EAAennB,EAAS4D,WAAU,SAAS7D,GAC3C,OAAOA,IAAUx5B,KAEjBwvD,EAAaN,GAAclvD,GAC3BiQ,EAAIwpB,EAAS3/B,OACbg2D,EAAM7/C,EAEN8/C,EAAc,EACdC,EAAW,EACNv2D,EAAI,EAAGA,EAAIwW,EAAGxW,IAInB,GADAs2D,GADAC,EAAWD,GADGb,GAAcz1B,EAAShgC,IAGjC81D,EAAazoD,EAAIipD,EAAa,CAC9B,GAAInP,EAAennD,EAAG,CAClB,GAAI81D,EAAazoD,EAAIkpD,EAAWR,EAAY,CACxCM,EAAMr2D,EACN,MAEJ,SAEJq2D,EAAMr2D,EACN,MAGR,OAAOq2D,IAKXx9C,EAAQo9C,EAAO,EAAIpxC,EAASqxC,eAAiBrxC,EAASsxC,cAC1DxvD,EAAKM,SAAS,YAAa,CAAExB,MAAOc,EAAMsS,MAAOA,IAGjD,IAAIsuC,EAAe+K,EAAUR,WAE7B,QAAqBh+C,IAAjByzC,GAA8BA,IAAiBtuC,EAAO,CAGtD,GAFAq5C,EAAUT,SAAS54C,QAEEnF,IAAjByzC,EAA4B,OAEhCxgD,EAAKM,SAAS,oBAAqB,CAC/BymC,MAAO/mC,EAAKlB,MAAM,oBAClByI,OAAQ2nD,EACR9hD,OAAQ8E,OAQhB29C,GAAU1xD,EAAY,CACtB2xD,aAAc1B,GACd7tD,gBAAiBsuD,GACjBpC,cAAeuC,KASfe,GAAU,SAAe5wD,GACzB,IAAIa,EAAOb,EAAMa,KACbyI,EAAQtJ,EAAMsJ,MACdivB,EAAUv4B,EAAMu4B,QAChBhb,EAAiBvd,EAAMud,eAE3BmzC,GAAQ,CAAE7vD,KAAMA,EAAMyI,MAAOA,EAAOivB,QAASA,IAC7C,IAAIs4B,EAAkBvnD,EAAMunD,gBAGxBlD,EAAkB9sD,EAAK0R,KAAKtH,QAAQhB,MAGpCqmD,EAAkBzvD,EAAKwiB,WAAW9d,QAAO,SAAS00B,GAClD,OAAOA,EAAM1nB,KAAKtH,QAAQf,UAI1BgwB,EAAWr5B,EACVlB,MAAM,oBACN9F,KAAI,SAASC,GACV,OAAOw2D,EAAgBrd,MAAK,SAAShZ,GACjC,OAAOA,EAAM1gC,KAAOO,EAAKP,SAGhCgM,QAAO,SAASzL,GACb,OAAOA,KAIXg3D,EAAYD,EACVjD,GAAuB/sD,EAAMq5B,EAAU22B,GACvC,KAGF3B,EAAWruD,EAAKK,IAAIguD,UAAY,KAGpCruD,EAAKK,IAAIguD,SAAW,KAEpB,IAAI6B,EAAkB,EAClBC,EAAoB,EACpBC,EAAiB,EAErB,GAAwB,IAApB/2B,EAAS3/B,OAAb,CAEA,IAAI22D,EAAYh3B,EAAS,GAAG3nB,KAAKtH,QAC7BijD,EAAqBgD,EAAUlyB,UAAYkyB,EAAUp2B,aACrDizB,EAAuBmD,EAAUjyB,WAAaiyB,EAAUn2B,YACxDxT,EAAY2pC,EAAUjnD,MAAQ8jD,EAC9BI,EAAa+C,EAAUhnD,OAASgkD,EAChCF,EAAcN,GAAeC,EAAiBpmC,GAGlD,GAAoB,IAAhBymC,EAAmB,CACnB,IAAInB,EAAU,EACVG,EAAa,EAEjB9yB,EAAS/mB,SAAQ,SAAS8mB,EAAOlnB,GAC7B,GAAI+9C,EAAW,CACX,IAAIzB,EAAOt8C,EAAQ+9C,EAEf9D,GADU,IAAVqC,EACmC,KAArBnB,GACG,IAAVmB,EAC4B,KAArBnB,EACE,IAATmB,EAC2B,IAArBnB,EACG,IAATmB,EAC2B,IAArBnB,EAEA,EAIjB3wC,IACA0c,EAAMtd,WAAa,KACnBsd,EAAMrd,WAAa,MAGlBqd,EAAMkyB,kBACPmD,GAASr1B,EAAO,EAAG4yB,EAAUG,GAGjC,IAEImE,GAFal3B,EAAM1nB,KAAKtH,QAAQf,OAASgkD,IAEZj0B,EAAMkyB,iBAAmBlyB,EAAMjvB,QAAU,GAE1E6hD,GAAWsE,SAId,CACD,IAAIC,EAAQ,EACRC,EAAQ,EAEZn3B,EAAS/mB,SAAQ,SAAS8mB,EAAOlnB,GACzBA,IAAU+9C,IACVC,EAAkB,GAGlBh+C,IAAUm8C,IACV+B,GAAkB,GAGlBh3B,EAAMkyB,kBAAoBlyB,EAAMjvB,QAAU,KAC1CgmD,GAAqB,GAGzB,IAAIM,EAAcv+C,EAAQk+C,EAAiBF,EAAkBC,EAEzDO,EAASD,EAActD,EACvBwD,EAAS1qD,KAAKib,MAAMuvC,EAActD,GAElCpB,EAAU2E,EAAShqC,EACnBslC,EAAU2E,EAASrD,EAEnBsD,EAAU3qD,KAAK4qD,KAAK9E,EAAUwE,GAC9BO,EAAU7qD,KAAK4qD,KAAK7E,EAAUwE,GAElCD,EAAQxE,EACRyE,EAAQxE,EAEJ5yB,EAAMkyB,mBAEN5uC,IACA0c,EAAMtd,WAAa,KACnBsd,EAAMrd,WAAa,MAGvB0yC,GAASr1B,EAAO2yB,EAASC,EAAS4E,EAASE,UAUnDC,GAAuB,SAA8B33B,EAAO1B,GAC5D,OAAOA,EAAQhzB,QAAO,SAASzE,GAE3B,OAAIA,EAAO3D,OAAQ2D,EAAO3D,KAAK5D,IACpB0gC,EAAM1gC,KAAOuH,EAAO3D,KAAK5D,OAQxCG,GAAOge,EAAW,CAClB0E,OAAQ2yC,GACRj3C,MAAO84C,GACPr9C,IAAK,KACLpX,KAAM,OACN8gB,aAAc,SAAsBrc,GAChC,IAAIC,EAAOD,EAAMC,KACjBA,EAAKwiB,WACA9d,QAAO,SAAS9E,GACb,OAAOA,EAAK0rD,kBAAqC,IAAjB1rD,EAAKuK,SAAiBvK,EAAKg7B,WAE9DtoB,SAAQ,SAAS1S,GACdA,EAAKuiB,WACLniB,EAAKwc,gBAAgB5c,OAGjCw/B,2BAA4B2xB,GAC5Bh6C,OAAQ,CACJC,KAAM,CAAC,sBAIXg6C,GAAW,SAAgBlzD,GAC3B,IAAIkC,EAAOlC,EAAKkC,KACZyI,EAAQ3K,EAAK2K,MACjBzI,EAAKK,IAAIxH,KAAOmH,EAAK2K,gBAAgB3K,EAAKiK,gBAAgBpR,KAC1D4P,EAAMunD,gBAAkB,KACxBvnD,EAAMwoD,aAAc,GAGpBC,GAAuB,SAA8B5yD,GACrD,IAAI0B,EAAO1B,EAAM0B,KACbyI,EAAQnK,EAAMmK,MACdxI,EAAS3B,EAAM2B,OACdD,EAAKlB,MAAM,sCAChB2J,EAAMunD,gBAAkB,CACpBr+C,KAAM1R,EAAOm6B,SAAS+2B,UAAYnxD,EAAKK,IAAIxH,KAAK6Y,KAAKtH,QAAQuH,KAC7DC,IACI3R,EAAOm6B,SAASg3B,UACfpxD,EAAK0R,KAAKioB,MAAM/nB,IAAM5R,EAAK0R,KAAKtH,QAAQ+zB,UAAYn+B,EAAK0R,KAAKtH,QAAQq0B,cAS/E4yB,GAAUlzD,EAAY,CACtBmzD,SAAUJ,GACVK,aAPuB,SAA8B1yD,GACzCA,EAAM4J,MACZunD,gBAAkB,QAQxBwB,GAAU,SAAetyD,GACzB,IAAIc,EAAOd,EAAMc,KACbyI,EAAQvJ,EAAMuJ,MACdivB,EAAUx4B,EAAMw4B,QAkBpB,GAfA25B,GAAQ,CAAErxD,KAAMA,EAAMyI,MAAOA,EAAOivB,QAASA,IAG7C13B,EAAKK,IAAIxH,KAAKm3D,gBAAkBvnD,EAAMunD,gBAGlCvnD,EAAMwoD,cAAgBxoD,EAAM2jB,WAC5B3jB,EAAMwoD,aAAc,EAGpBjxD,EAAKoK,QAAQG,QAAQotB,MAAQ,GAC7B33B,EAAKqJ,OAAS,MAIdZ,EAAM2jB,SAAU,CAChB,IAAIqlC,EAAYxrD,KAAKgV,MAAMxS,EAAM2jB,UAC7BqlC,IAAczxD,EAAKqJ,SACnBZ,EAAMwoD,aAAc,EACpBjxD,EAAKoK,QAAQG,QAAQotB,MAAQ,WAC7B33B,EAAKqJ,OAASooD,KAKtBC,GAAe76C,EAAW,CAC1B0E,OAAQy1C,GACR/5C,MAAOu6C,GACPl2D,KAAM,gBACNyb,OAAQ,CACJC,KAAM,CAAC,WAAY,mBACnBnE,OAAQ,CAAC,SAAU,cACnB4I,WAAY,CACRM,WAAY,aAKpB41C,GAAa,SAAoBvnD,EAAS9O,EAAMq8B,GAE5CA,EACAvlB,EAAKhI,EAAS9O,EAFCwR,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,IAInF1C,EAAQmiB,gBAAgBjxB,IAI5Bs2D,GAAiB,SAAwBC,GAEzC,GAAKA,GAAyB,KAAhBA,EAAMl3D,MAApB,CAIA,IAEIk3D,EAAMl3D,MAAQ,GAChB,MAAOC,IAGT,GAAIi3D,EAAMl3D,MAAO,CAEb,IAAIm3D,EAAO1O,GAAgB,QACvB33B,EAAaomC,EAAMpmC,WACnBprB,EAAMwxD,EAAMhvB,YAChBivB,EAAK3mD,YAAY0mD,GACjBC,EAAKnV,QAGDt8C,EACAorB,EAAW6N,aAAau4B,EAAOxxD,GAE/BorB,EAAWtgB,YAAY0mD,MAK/BE,GAAW,SAAgBj0D,GAC3B,IAAIkC,EAAOlC,EAAKkC,KACZyI,EAAQ3K,EAAK2K,MAGjBzI,EAAKoK,QAAQ1R,GAAK,qBAAuB+P,EAAM/P,GAG/C0Z,EAAKpS,EAAKoK,QAAS,OAAQpK,EAAKlB,MAAM,aAGtCsT,EAAKpS,EAAKoK,QAAS,gBAAiB,uBAAyB3B,EAAM/P,IAGnE0Z,EAAKpS,EAAKoK,QAAS,kBAAmB,wBAA0B3B,EAAM/P,IAGtEs5D,GAAqB,CACjBhyD,KAAMA,EACNC,OAAQ,CAAEtF,MAAOqF,EAAKlB,MAAM,8BAEhCmzD,GAAoB,CAAEjyD,KAAMA,EAAMC,OAAQ,CAAEtF,MAAOqF,EAAKlB,MAAM,yBAC9DozD,GAAsB,CAClBlyD,KAAMA,EACNC,OAAQ,CAAEtF,MAAOqF,EAAKlB,MAAM,iCAEhCqzD,GAAe,CAAEnyD,KAAMA,IACvBoyD,GAAe,CAAEpyD,KAAMA,EAAMC,OAAQ,CAAEtF,MAAOqF,EAAKlB,MAAM,mBACzDuzD,GAAiB,CAAEryD,KAAMA,EAAMC,OAAQ,CAAEtF,MAAOqF,EAAKlB,MAAM,yBAG3DkB,EAAKK,IAAIiyD,aAAe,SAASv1D,GAC7B,GAAKiD,EAAKoK,QAAQzP,MAAlB,CAKA,IAAIy7B,EAAQt8B,MAAMyB,KAAKyE,EAAKoK,QAAQgsB,OAAOp9B,KAAI,SAASsE,GAEpD,OADAA,EAAKo4C,cAAgBp4C,EAAKi1D,mBACnBj1D,KAIXmlB,YAAW,WAEPha,EAAMyE,OAAOkpB,GAGbw7B,GAAe5xD,EAAKoK,WACrB,OAGPpK,EAAKoK,QAAQc,iBAAiB,SAAUlL,EAAKK,IAAIiyD,eAGjDN,GAAuB,SAA8B1zD,GACrD,IAAI0B,EAAO1B,EAAM0B,KACbC,EAAS3B,EAAM2B,OACdD,EAAKlB,MAAM,oCAChB6yD,GACI3xD,EAAKoK,QACL,WACEnK,EAAOtF,MACTsF,EAAOtF,MAAQsF,EAAOtF,MAAMvB,KAAK,KAAO,KAI5C64D,GAAsB,SAA6BpzD,GACnD,IAAImB,EAAOnB,EAAMmB,KACbC,EAASpB,EAAMoB,OACnB0xD,GAAW3xD,EAAKoK,QAAS,WAAYnK,EAAOtF,QAG5Cu3D,GAAwB,SAA+BhzD,GACvD,IAAIc,EAAOd,EAAMc,KACbC,EAASf,EAAMe,OACnB0xD,GAAW3xD,EAAKoK,QAAS,kBAAmBnK,EAAOtF,QAGnDw3D,GAAiB,SAAwBhzD,GACzC,IAAIa,EAAOb,EAAMa,KACb0kD,EAAa1kD,EAAKlB,MAAM,gBACxB0zD,EAAkBxyD,EAAKlB,MAAM,oBAC7B2zD,EAAe/N,IAAe8N,EAClCb,GAAW3xD,EAAKoK,QAAS,WAAYqoD,IAGrCL,GAAiB,SAAwBryD,GACzC,IAAIC,EAAOD,EAAMC,KACJD,EAAME,OAEPtF,MAI+B,IAAlCqF,EAAKlB,MAAM,oBAChB6yD,GAAW3xD,EAAKoK,QAAS,YAAY,GAJrCunD,GAAW3xD,EAAKoK,QAAS,YAAY,IAQzCioD,GAAmB,SAA0B7xD,GAC7C,IAAIR,EAAOQ,EAAMR,KACbC,EAASO,EAAMP,OACnB0xD,GACI3xD,EAAKoK,QACL,YACEnK,EAAOtF,OACQ,IAAjBsF,EAAOtF,MAAiB,GAAKsF,EAAOtF,QAIxC+3D,GAAuB,SAA8B/mD,GACrD,IAAI3L,EAAO2L,EAAM3L,KACboK,EAAUpK,EAAKoK,QAEfpK,EAAKlB,MAAM,mBAAqB,GAChC6yD,GAAWvnD,EAAS,YAAY,GAChCunD,GAAWvnD,EAAS,QAAQ,KAG5BunD,GAAWvnD,EAAS,QAAQ,EAAMpK,EAAKlB,MAAM,aAGnBkB,EAAKlB,MAAM,uBAEjCsL,EAAQuoD,kBAAkB,IAI1B3yD,EAAKlB,MAAM,iBACX6yD,GAAWvnD,EAAS,YAAY,KAKxCwoD,GAA4B,SAAmCruC,GAC/D,IAAIvkB,EAAOukB,EAAMvkB,KACSA,EAAKlB,MAAM,uBAErCkB,EAAKoK,QAAQuoD,kBAAkB3yD,EAAKlB,MAAM,6BAG1C+zD,GAAUh8C,EAAW,CACrBnE,IAAK,QACLpX,KAAM,UACNwb,YAAY,EACZ4oB,kBAAkB,EAClBxG,WAAY,CACR/4B,KAAM,QAGVob,OAAQw2C,GACRhtC,QAAS,SAAiBJ,GACtB,IAAI3kB,EAAO2kB,EAAO3kB,KAClBA,EAAKoK,QAAQkB,oBAAoB,SAAUtL,EAAKK,IAAIiyD,eAExDr7C,MAAO9Y,EAAY,CACfsN,cAAeinD,GACfnyD,gBAAiBmyD,GACjBltC,uBAAwBotC,GAExBE,iBAAkBX,GAClBY,qBAAsBZ,GACtBa,+BAAgCd,GAChCe,uBAAwBhB,GACxBiB,4BAA6BlB,GAC7BmB,uBAAwBd,GACxBe,iBAAkBhB,OAItBiB,GAAM,CACNC,MAAO,GACPC,MAAO,IAGPC,GAAW,SAAgB11D,GAC3B,IAAIkC,EAAOlC,EAAKkC,KACZyI,EAAQ3K,EAAK2K,MAGb9D,EAAQy+C,GAAgB,SAC5BhxC,EAAKzN,EAAO,MAAO,qBAAuB8D,EAAM/P,IAGhD0Z,EAAKzN,EAAO,KAAM,wBAA0B8D,EAAM/P,IAGlD0Z,EAAKzN,EAAO,cAAe,QAG3B3E,EAAKK,IAAIozD,cAAgB,SAAS12D,IACRA,EAAE22D,UAAYL,GAAIC,OAASv2D,EAAE22D,UAAYL,GAAIE,SAGnEx2D,EAAEmvD,iBAGFlsD,EAAKK,IAAIsE,MAAMgvD,UAGnB3zD,EAAKK,IAAIgrD,YAAc,SAAStuD,GACTA,EAAEqQ,SAAWzI,GAASA,EAAMivD,SAAS72D,EAAEqQ,SAM1DpN,EAAKK,IAAIsE,MAAMgvD,SAInBhvD,EAAMuG,iBAAiB,UAAWlL,EAAKK,IAAIozD,eAC3CzzD,EAAKoK,QAAQc,iBAAiB,QAASlL,EAAKK,IAAIgrD,aAGhDwI,GAAiBlvD,EAAO8D,EAAMqrD,SAG9B9zD,EAAKmL,YAAYxG,GACjB3E,EAAKK,IAAIsE,MAAQA,GAGjBkvD,GAAmB,SAA0BlvD,EAAOhK,GACpDgK,EAAMsG,UAAYtQ,EAClB,IAAIo5D,EAAYpvD,EAAMkG,cAAc,2BAIpC,OAHIkpD,GACA3hD,EAAK2hD,EAAW,WAAY,KAEzBp5D,GAGPq5D,GAAYn9C,EAAW,CACvBvb,KAAM,aACNwb,YAAY,EACZyE,OAAQi4C,GACRzuC,QAAS,SAAiBzmB,GACtB,IAAI0B,EAAO1B,EAAM0B,KACjBA,EAAKK,IAAIsE,MAAMuG,iBAAiB,UAAWlL,EAAKK,IAAIozD,eACpDzzD,EAAKoK,QAAQkB,oBAAoB,QAAStL,EAAKK,IAAIgrD,cAEvDp0C,MAAO9Y,EAAY,CACf81D,mBAAoB,SAA4Bp1D,GAC5C,IAAImB,EAAOnB,EAAMmB,KACbC,EAASpB,EAAMoB,OACnB4zD,GAAiB7zD,EAAKK,IAAIsE,MAAO1E,EAAOtF,UAIhDoc,OAAQ,CACJlE,OAAQ,CAAC,UAAW,aAAc,cAClC4I,WAAY,CACRtR,QAAS,CAAEhK,KAAM,QAASgc,SAAU,KACpCL,WAAY,SACZC,WAAY,aAKpBkP,GAAOpU,EAAW,CAClBvb,KAAM,YACNwb,YAAY,EACZC,OAAQ,CACJlE,OAAQ,CAAC,aAAc,aAAc,SAAU,SAAU,WACzD4I,WAAY,CACRG,OAAQ,SACRC,OAAQ,SACRC,WAAY,SACZC,WAAY,SACZ5R,QAAS,CAAEhK,KAAM,QAASgc,SAAU,SAK5C+3C,GAAU,SAAiBp2D,GAC3B,IAAIkC,EAAOlC,EAAKkC,KACZ0vB,EAAoC,GAA1B1vB,EAAK0R,KAAKtH,QAAQhB,MAC5BmmB,EAAqC,GAA3BvvB,EAAK0R,KAAKtH,QAAQf,OAEhCrJ,EAAKK,IAAI4qB,KAAOjrB,EAAK2K,gBACjB3K,EAAKiK,gBAAgBghB,GAAM,CACvB9gB,QAAS,EACTyR,OAAQ,IACRC,OAAQ,IACRC,WAAY4T,EACZ3T,WAAYwT,MAKpB4kC,GAAW,SAAkB71D,GAC7B,IAAI0B,EAAO1B,EAAM0B,KACbC,EAAS3B,EAAM2B,OACdD,EAAKK,IAAI4qB,MAKdjrB,EAAKK,IAAI4qB,KAAKnP,WAAa7b,EAAOm6B,SAAS+2B,UAC3CnxD,EAAKK,IAAI4qB,KAAKlP,WAAa9b,EAAOm6B,SAASg3B,SAC3CpxD,EAAKK,IAAI4qB,KAAKrP,OAAS,EACvB5b,EAAKK,IAAI4qB,KAAKpP,OAAS,EACvB7b,EAAKK,IAAI4qB,KAAK9gB,QAAU,GARpB+pD,GAAQ,CAAEl0D,KAAMA,KAWpBo0D,GAAW,SAAkBv1D,GAC7B,IAAImB,EAAOnB,EAAMmB,KACZA,EAAKK,IAAI4qB,OAGdjrB,EAAKK,IAAI4qB,KAAK9gB,QAAU,IAGxBkqD,GAAc,SAAqBn1D,GACnC,IAAIc,EAAOd,EAAMc,KACZA,EAAKK,IAAI4qB,OAGdjrB,EAAKK,IAAI4qB,KAAKrP,OAAS,IACvB5b,EAAKK,IAAI4qB,KAAKpP,OAAS,IACvB7b,EAAKK,IAAI4qB,KAAK9gB,QAAU,IAGxBmqD,GAAU,SAAen1D,GACzB,IAAIa,EAAOb,EAAMa,KACbyI,EAAQtJ,EAAMsJ,MACdivB,EAAUv4B,EAAMu4B,QACpB68B,GAAQ,CAAEv0D,KAAMA,EAAMyI,MAAOA,EAAOivB,QAASA,IAC7C,IAAIzM,EAAOjrB,EAAKK,IAAI4qB,KAEG,IAAnByM,EAAQh+B,QAAgBuxB,GAAyB,IAAjBA,EAAK9gB,UACrCnK,EAAKwc,gBAAgByO,GACrBjrB,EAAKK,IAAI4qB,KAAO,OAIpBspC,GAAUp2D,EAAY,CACtBmzD,SAAU6C,GACVK,SAAUH,GACV9C,aAAc6C,KAGdK,GAAO59C,EAAW,CAClBC,YAAY,EACZ4oB,kBAAkB,EAClBpkC,KAAM,OACN2b,MAAOq9C,KAGPI,GAAgB,SAAuBtqD,EAASgsB,GAChD,IAEI,IAAIyc,EAAe,IAAIC,aACvB1c,EAAM9jB,SAAQ,SAAShV,GACfA,aAAgBy1C,KAChBF,EAAa9L,MAAMz8B,IAAIhN,GAEvBu1C,EAAa9L,MAAMz8B,IACf,IAAIyoC,KAAK,CAACz1C,GAAOA,EAAKhC,KAAM,CACxB6E,KAAM7C,EAAK6C,WAO3BiK,EAAQgsB,MAAQyc,EAAazc,MAC/B,MAAOx7B,GACL,OAAO,EAEX,OAAO,GAGP+5D,GAAW,SAAgB72D,GAE3B,OADWA,EAAKkC,KACHK,IAAIu0D,OAAS,IAG1BC,GAAW,SAAkB70D,EAAMtH,GACnC,OAAOsH,EAAKK,IAAIu0D,OAAOl8D,IAGvBo8D,GAA8B,SAAqC90D,GACnEA,EAAKlB,MAAM,oBAAoBwT,SAAQ,SAASrZ,GACvC+G,EAAKK,IAAIu0D,OAAO37D,EAAKP,KAC1BsH,EAAKoK,QAAQe,YAAYnL,EAAKK,IAAIu0D,OAAO37D,EAAKP,SAIlDq8D,GAAkB,SAAyBz2D,GAC3C,IAAI0B,EAAO1B,EAAM0B,KACjB,OAAO80D,GAA4B90D,IAGnCg1D,GAAa,SAAoBn2D,GACjC,IAAImB,EAAOnB,EAAMmB,KACbC,EAASpB,EAAMoB,OAGfg1D,IAFWj1D,EAAKlB,MAAM,WAAYmB,EAAOvH,IAClB6O,SAAWijC,GAAWG,QACR3qC,EAAKlB,MAAM,4BAChDo2D,EAAgB9R,GAAgB,SACpC8R,EAAc/0D,KAAO80D,EAAqB,OAAS,SACnDC,EAAc55D,KAAO0E,EAAKlB,MAAM,YAChCo2D,EAAc/oB,SAAWnsC,EAAKlB,MAAM,gBACpCkB,EAAKK,IAAIu0D,OAAO30D,EAAOvH,IAAMw8D,EAC7BJ,GAA4B90D,IAG5Bm1D,GAAgB,SAAqBj2D,GACrC,IAAIc,EAAOd,EAAMc,KACbC,EAASf,EAAMe,OACfm1D,EAAQP,GAAS70D,EAAMC,EAAOvH,IAClC,GAAK08D,IAG8B,OAA/Bn1D,EAAO+8C,sBAA8BoY,EAAMz6D,MAAQsF,EAAO+8C,qBAGzDh9C,EAAKlB,MAAM,6BAAhB,CAEA,IAAIu2D,EAAWr1D,EAAKlB,MAAM,WAAYmB,EAAOvH,IAC7Cg8D,GAAcU,EAAO,CAACC,EAAS/3D,SAG/Bg4D,GAAmB,SAA0Bn2D,GAC7C,IAAIa,EAAOb,EAAMa,KACbC,EAASd,EAAMc,OAEdD,EAAKlB,MAAM,6BAChB2jB,YAAW,WACP,IAAI2yC,EAAQP,GAAS70D,EAAMC,EAAOvH,IAC7B08D,GACLV,GAAcU,EAAO,CAACn1D,EAAO3C,SAC9B,IAGHi4D,GAAiB,SAAwBx1D,GACzC,IAAIC,EAAOD,EAAMC,KACjBA,EAAKoK,QAAQ+hC,SAAWnsC,EAAKlB,MAAM,iBAGnC02D,GAAgB,SAAuBh1D,GACvC,IAAIR,EAAOQ,EAAMR,KACbC,EAASO,EAAMP,OACfm1D,EAAQP,GAAS70D,EAAMC,EAAOvH,IAC7B08D,IACDA,EAAM3pC,YAAY2pC,EAAM3pC,WAAWC,YAAY0pC,UAC5Cp1D,EAAKK,IAAIu0D,OAAO30D,EAAOvH,MAI9B+8D,GAAiB,SAAwB9pD,GACzC,IAAI3L,EAAO2L,EAAM3L,KACbC,EAAS0L,EAAM1L,OACfm1D,EAAQP,GAAS70D,EAAMC,EAAOvH,IAC7B08D,IACgB,OAAjBn1D,EAAOtF,MAEPy6D,EAAM7oC,gBAAgB,SAGtB6oC,EAAMz6D,MAAQsF,EAAOtF,MAEzBm6D,GAA4B90D,KAG5B01D,GAAUv3D,EAAY,CACtB20D,iBAAkByC,GAClBzF,aAAckF,GACdvpD,cAAe0pD,GACf50D,gBAAiBi1D,GACjBG,iBAAkBF,GAClB31D,mBAAoBw1D,GACpBM,kBAAmBb,GACnBc,eAAgBd,KAGhBz4D,GAAOua,EAAW,CAClBnE,IAAK,WACLpX,KAAM,OACNigB,OAAQo5C,GACR19C,MAAOy+C,GACP5+C,YAAY,IAGZg/C,GAAc,SAAqB1rD,GACnC,MAAO,gBAAiBA,EAAUA,EAAQ0rD,cAAgBl1D,UAG1DyhB,GAAS,CAAC,MAAO,OAAQ,MAAO,MAAO,MAAO,OAAQ,MAAO,QAC7D0zC,GAAS,CAAC,MAAO,MAAO,OAAQ,OAChC/8D,GAAM,CACNg9D,IAAK,iBACLC,KAAM,wBAGNnzD,GAAsB,WACtB,IAAIe,EAAYiJ,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,GAEpF,OADAjJ,EAAYA,EAAUyjC,cAClBjlB,GAAO4W,SAASp1B,GAEZ,UACe,QAAdA,EAAsB,OAAuB,QAAdA,EAAsB,UAAYA,GAGtEkyD,GAAO98B,SAASp1B,GACT,QAAUA,EAGd7K,GAAI6K,IAAc,IAGzBqyD,GAA2B,SAAkCrjB,GAC7D,OAAO,IAAIt0C,SAAQ,SAASC,EAAS6C,GAEjC,IAAI80D,EAAQC,GAASvjB,GACrB,GAAIsjB,EAAMz8D,SAAW28D,GAASxjB,GAC1B,OAAOr0C,EAAQ23D,GAGnBG,GAASzjB,GAAcrzC,KAAKhB,OAOhC63D,GAAW,SAAkBxjB,GAC7B,QAAIA,EAAazc,OAAcyc,EAAazc,MAAM18B,OAAS,GAO3D48D,GAAW,SAAkBzjB,GAC7B,OAAO,IAAIt0C,SAAQ,SAASC,EAAS6C,GAEjC,IAAIk1D,GAAiB1jB,EAAa9L,MAAQjtC,MAAMyB,KAAKs3C,EAAa9L,OAAS,IAEtEriC,QAAO,SAASzL,GACb,OAAOu9D,GAAiBv9D,MAI3BD,KAAI,SAASC,GACV,OAAOw9D,GAAiBx9D,MAI3Bs9D,EAAc78D,OAQnB6E,QAAQe,IAAIi3D,GACP/2D,MAAK,SAASk3D,GAEX,IAAItgC,EAAQ,GACZsgC,EAAmBpkD,SAAQ,SAASqkD,GAChCvgC,EAAM59B,KAAK6nB,MAAM+V,EAAOugC,MAI5Bn4D,EACI43B,EACK1xB,QAAO,SAASpH,GACb,OAAOA,KAEVtE,KAAI,SAASsE,GAGV,OAFKA,EAAKo4C,gBACNp4C,EAAKo4C,cAAgBp4C,EAAKi1D,oBACvBj1D,SAItB4G,MAAM+5C,QAAQtS,OA1BfntC,EAAQq0C,EAAazc,MAAQt8B,MAAMyB,KAAKs3C,EAAazc,OAAS,QA8BtEogC,GAAmB,SAA0Bv9D,GAC7C,GAAI29D,GAAQ39D,GAAO,CACf,IAAI49D,EAAQC,GAAW79D,GACvB,GAAI49D,EACA,OAAOA,EAAMz4D,QAAUy4D,EAAME,YAGrC,MAAqB,SAAd99D,EAAK+9D,MAGZP,GAAmB,SAA0Bx9D,GAC7C,OAAO,IAAIsF,SAAQ,SAASC,EAAS6C,GAC7B41D,GAAiBh+D,GACjBi+D,GAAoBJ,GAAW79D,IAC1BuG,KAAKhB,GACL0F,MAAM7C,GAIf7C,EAAQ,CAACvF,EAAKk+D,kBAIlBD,GAAsB,SAA6BL,GACnD,OAAO,IAAIt4D,SAAQ,SAASC,EAAS6C,GACjC,IAAI+0B,EAAQ,GAGRghC,EAAa,EACbC,EAAc,EAEdC,EAAgB,WACI,IAAhBD,GAAoC,IAAfD,GACrB54D,EAAQ43B,IAKZmhC,EAAc,SAASA,EAAYC,GACnCJ,IAEA,IAAIK,EAAkBD,EAASE,eAG3BC,EAAY,SAASA,IACrBF,EAAgBF,aAAY,SAASK,GACjC,GAAuB,IAAnBA,EAAQl+D,OAGR,OAFA09D,SACAE,IAIJM,EAAQtlD,SAAQ,SAASukD,GAEjBA,EAAME,YACNQ,EAAYV,IAGZQ,IAEAR,EAAMv5D,MAAK,SAASA,GAChB,IAAIu6D,EAAgBC,GAAuBx6D,GACvCu5D,EAAMkB,WACNF,EAAcniB,cAAgBmhB,EAAMkB,UACxC3hC,EAAM59B,KAAKq/D,GACXR,IACAC,WAMZK,MACDt2D,IAIPs2D,KAIJJ,EAAYV,OAIhBiB,GAAyB,SAAgCx6D,GACzD,GAAIA,EAAK6C,KAAKzG,OAAQ,OAAO4D,EAC7B,IAAI23C,EAAO33C,EAAKm4C,iBACZn6C,EAAOgC,EAAKhC,KACZ6E,EAAO2C,GAAoBC,GAAyBzF,EAAKhC,OAC7D,OAAK6E,EAAKzG,SACV4D,EAAOA,EAAKlC,MAAM,EAAGkC,EAAK8C,KAAMD,IAC3B7E,KAAOA,EACZgC,EAAKm4C,iBAAmBR,EACjB33C,GAJkBA,GAOzB25D,GAAmB,SAA0Bh+D,GAC7C,OAAO29D,GAAQ39D,KAAU69D,GAAW79D,IAAS,IAAI89D,aAGjDH,GAAU,SAAiB39D,GAC3B,MAAO,qBAAsBA,GAG7B69D,GAAa,SAAoB79D,GACjC,OAAOA,EAAK++D,oBAMZ5B,GAAW,SAAkBvjB,GAC7B,IAAIsjB,EAAQ,GACZ,IAGI,IADAA,EAAQ8B,GAA6BplB,IAC3Bn5C,OACN,OAAOy8D,EAEXA,EAAQ+B,GAA4BrlB,GACtC,MAAO91C,IAGT,OAAOo5D,GAGP+B,GAA8B,SAAqCrlB,GACnE,IAAIv2C,EAAOu2C,EAAaslB,QAAQ,OAChC,MAAoB,iBAAT77D,GAAqBA,EAAK5C,OAC1B,CAAC4C,GAEL,IAGP27D,GAA+B,SAAsCplB,GACrE,IAAIv2C,EAAOu2C,EAAaslB,QAAQ,aAChC,GAAoB,iBAAT77D,GAAqBA,EAAK5C,OAAQ,CACzC,IAAI48C,EAAUh6C,EAAK2mB,MAAM,qBACzB,GAAIqzB,EACA,MAAO,CAACA,EAAQ,IAGxB,MAAO,IAGP8hB,GAAqB,GAErBC,GAAgB,SAAuBt7D,GACvC,MAAO,CACHu7D,SAAUv7D,EAAE4uD,MACZ4M,QAASx7D,EAAE6uD,MACXuF,UAAWp0D,EAAEgvD,SAAWhvD,EAAEy7D,OAC1BpH,SAAUr0D,EAAEivD,SAAWjvD,EAAE07D,SAI7BC,GAAwB,SACxBtuD,EACAuuD,EACAC,GAEA,IAAIC,EAAWC,GAAqBH,GAEhChjC,EAAS,CACTvrB,QAASA,EACTwuD,cAAeA,EACfjhC,MAAO,KACPohC,OAAQ,aACRC,QAAS,aACTC,OAAQ,aACRC,OAAQ,aACRhsD,OAAQ,aACRisD,UAAW,cAKf,OAFAxjC,EAAO5Q,QAAU8zC,EAASO,YAAYzjC,GAE/BA,GAGPmjC,GAAuB,SAA8B1uD,GAErD,IAAIyuD,EAAWT,GAAmBhmB,MAAK,SAASn5C,GAC5C,OAAOA,EAAKmR,UAAYA,KAE5B,GAAIyuD,EACA,OAAOA,EAIX,IAAIQ,EAAcC,GAAwBlvD,GAE1C,OADAguD,GAAmB5/D,KAAK6gE,GACjBA,GAGPC,GAA0B,SAAiClvD,GAC3D,IAAImvD,EAAU,GAEVhuD,EAAS,CACTiuD,UAAWA,GACXC,SAAUA,GACVC,UAAWA,GACXtN,KAAMA,IAGNuN,EAAW,GAEfjlC,EAAMnpB,GAAQ,SAAS2xB,EAAO08B,GAC1BD,EAASz8B,GAAS08B,EAAcxvD,EAASmvD,GACzCnvD,EAAQc,iBAAiBgyB,EAAOy8B,EAASz8B,IAAQ,MAGrD,IAAI27B,EAAW,CACXzuD,QAASA,EACTgvD,YAAa,SAAqBzjC,GAK9B,OAHA4jC,EAAQ/gE,KAAKm9B,GAGN,WAEH4jC,EAAQhgC,OAAOggC,EAAQ1kD,QAAQ8gB,GAAS,GAGjB,IAAnB4jC,EAAQ7/D,SACR0+D,GAAmB7+B,OAAO6+B,GAAmBvjD,QAAQgkD,GAAW,GAEhEnkC,EAAMnpB,GAAQ,SAAS2xB,GACnB9yB,EAAQkB,oBAAoB4xB,EAAOy8B,EAASz8B,IAAQ,UAOxE,OAAO27B,GAGPgB,GAAmB,SAA0B75D,EAAMiS,GAInD,MAHM,qBAAsBjS,IACxBA,EAAOY,UAEJZ,EAAK65D,iBAAiB5nD,EAAMxL,EAAGwL,EAAMvL,IAG5CozD,GAAgB,SAAuB/8D,EAAGqQ,GAE1C,IAAIpN,EAAO81D,GAAY1oD,GAInB2sD,EAAoBF,GAAiB75D,EAAM,CAC3CyG,EAAG1J,EAAE4uD,MAAQhrD,OAAOq5D,YACpBtzD,EAAG3J,EAAE6uD,MAAQjrD,OAAOs5D,cAIxB,OAAOF,IAAsB3sD,GAAUA,EAAOwmD,SAASmG,IAGvDG,GAAgB,KAEhBC,GAAgB,SAAuBtnB,EAAcunB,GAErD,IACIvnB,EAAawnB,WAAaD,EAC5B,MAAOr9D,MAGTy8D,GAAY,SAAmBx5D,EAAMu5D,GACrC,OAAO,SAASx8D,GACZA,EAAEmvD,iBAEFgO,GAAgBn9D,EAAEqQ,OAElBmsD,EAAQjnD,SAAQ,SAASqjB,GACrB,IAAIvrB,EAAUurB,EAAOvrB,QACjB4uD,EAAUrjC,EAAOqjC,QAEjBc,GAAc/8D,EAAGqN,KACjBurB,EAAOgC,MAAQ,QAGfqhC,EAAQX,GAAct7D,UAMlC08D,GAAW,SAAkBz5D,EAAMu5D,GACnC,OAAO,SAASx8D,GACZA,EAAEmvD,iBAEF,IAAIrZ,EAAe91C,EAAE81C,aAErBqjB,GAAyBrjB,GAAcrzC,MAAK,SAASunC,GACjD,IAAIuzB,GAAiB,EAErBf,EAAQ91D,MAAK,SAASkyB,GAClB,IAAIijC,EAAgBjjC,EAAOijC,cACvBxuD,EAAUurB,EAAOvrB,QACjB4uD,EAAUrjC,EAAOqjC,QACjBE,EAASvjC,EAAOujC,OAChBD,EAAStjC,EAAOsjC,OAChBE,EAAYxjC,EAAOwjC,UAGvBgB,GAActnB,EAAc,QAG5B,IAAI0nB,EAAiBpB,EAAUpyB,GAG/B,GAAKwzB,EAML,GAAIT,GAAc/8D,EAAGqN,GAAU,CAI3B,GAHAkwD,GAAiB,EAGI,OAAjB3kC,EAAOgC,MAGP,OAFAhC,EAAOgC,MAAQ,aACfqhC,EAAQX,GAAct7D,IAQ1B,GAHA44B,EAAOgC,MAAQ,OAGXihC,IAAkB2B,EAElB,YADAJ,GAActnB,EAAc,QAKhComB,EAAOZ,GAAct7D,SAGjB67D,IAAkB0B,GAClBH,GAActnB,EAAc,QAI5Bld,EAAOgC,QACPhC,EAAOgC,MAAQ,KACfuhC,EAAOb,GAAct7D,UAnCzBo9D,GAActnB,EAAc,gBA2C5CuZ,GAAO,SAAcpsD,EAAMu5D,GAC3B,OAAO,SAASx8D,GACZA,EAAEmvD,iBAEF,IAAIrZ,EAAe91C,EAAE81C,aAErBqjB,GAAyBrjB,GAAcrzC,MAAK,SAASunC,GACjDwyB,EAAQjnD,SAAQ,SAASqjB,GACrB,IAAIijC,EAAgBjjC,EAAOijC,cACvBxuD,EAAUurB,EAAOvrB,QACjB2uD,EAASpjC,EAAOojC,OAChBG,EAASvjC,EAAOujC,OAChBC,EAAYxjC,EAAOwjC,UAKvB,GAHAxjC,EAAOgC,MAAQ,MAGXihC,GAAkBkB,GAAc/8D,EAAGqN,GAGvC,OAAK+uD,EAAUpyB,QAGfgyB,EAAOV,GAAct7D,GAAIgqC,GAHKmyB,EAAOb,GAAct7D,YAS/D28D,GAAY,SAAmB15D,EAAMu5D,GACrC,OAAO,SAASx8D,GACRm9D,KAAkBn9D,EAAEqQ,QAIxBmsD,EAAQjnD,SAAQ,SAASqjB,GACrB,IAAIujC,EAASvjC,EAAOujC,OAEpBvjC,EAAOgC,MAAQ,KAEfuhC,EAAOb,GAAct7D,SAK7By9D,GAAe,SAAsBC,EAAOC,EAAet9D,GAE3Dq9D,EAAMpwD,UAAUC,IAAI,oBAGpB,IAAIqwD,EAAqBv9D,EAAQu9D,mBAC7BC,EAAwBx9D,EAAQw9D,sBAChCC,EAAuBz9D,EAAQ09D,YAC/BA,OAC6B,IAAzBD,EACM,SAAS9zB,GACL,OAAOA,GAEX8zB,EAGVllC,EAAS+iC,GACT+B,EACAE,EAAqB/5D,SAASm6D,gBAAkBN,EAChDG,GAIAI,EAAY,GACZrO,EAAe,GAGnBh3B,EAAOwjC,UAAY,SAASpyB,GAGxB,OAAO2zB,EAAcI,EAAY/zB,KAGrCpR,EAAOojC,OAAS,SAAS3+B,EAAU2M,GAC/B,IAAIk0B,EAAgBH,EAAY/zB,GAE3B2zB,EAAcO,IAKnBtO,EAAe,YAEfp0B,EAAIrrB,OAAO+tD,EAAe7gC,IANtB7B,EAAI2iC,UAAU9gC,IAStBzE,EAAOsjC,OAAS,SAAS7+B,GACrB7B,EAAI0gC,OAAO7+B,IAGfzE,EAAOqjC,QAAU,SAAS5+B,GACtBuyB,EAAe,YAEfp0B,EAAI4iC,YAAY/gC,IAGpBzE,EAAOujC,OAAS,SAAS9+B,GACrBuyB,EAAe,YAEfp0B,EAAI2iC,UAAU9gC,IAGlB,IAAI7B,EAAM,CACN6iC,kBAAmB,WACXJ,IAAcrO,IACd8N,EAAMlwD,QAAQ8wD,YAAc1O,EAC5BqO,EAAYrO,IAGpBz/C,OAAQ,aACRiuD,YAAa,aACblC,OAAQ,aACRiC,UAAW,aACXn2C,QAAS,WAEL4Q,EAAO5Q,YAIf,OAAOwT,GAGP+iC,IAAY,EACZC,GAAc,GAEdC,GAAc,SAAqBz+D,GAEnC,IAAI0+D,EAAW76D,SAAS86D,cACxB,GAAID,GAAY,kBAAkBjgE,KAAKigE,EAASE,UAAW,CAIvD,IAFA,IAAIC,GAAU,EACVxxD,EAAUqxD,EACPrxD,IAAYxJ,SAAS0qB,MAAM,CAC9B,GAAIlhB,EAAQC,UAAUupD,SAAS,kBAAmB,CAC9CgI,GAAU,EACV,MAEJxxD,EAAUA,EAAQqhB,WAGtB,IAAKmwC,EAAS,OAGlB1F,GAAyBn5D,EAAE8+D,eAAer8D,MAAK,SAAS42B,GAE/CA,EAAM18B,QAKX6hE,GAAYjpD,SAAQ,SAAS02B,GACzB,OAAOA,EAAS5S,UAKxB0lC,GAAS,SAAgBz+D,GAErBk+D,GAAYtiC,SAAS57B,KAKzBk+D,GAAY/iE,KAAK6E,GAGbi+D,KAIJA,IAAY,EACZ16D,SAASsK,iBAAiB,QAASswD,OAGnCO,GAAW,SAAkB/yB,GAC7BH,GAAY0yB,GAAaA,GAAY1mD,QAAQm0B,IAGlB,IAAvBuyB,GAAY7hE,SACZkH,SAAS0K,oBAAoB,QAASkwD,IACtCF,IAAY,IAIhBU,GAAe,WACf,IAAI3+D,EAAK,SAAY+4B,GACjBmC,EAAIrrB,OAAOkpB,IAGXmC,EAAM,CACNxT,QAAS,WACLg3C,GAAS1+D,IAEb6P,OAAQ,cAKZ,OAFA4uD,GAAOz+D,GAEAk7B,GAMP0jC,GAAW,SAAgBn+D,GAC3B,IAAIkC,EAAOlC,EAAKkC,KACZyI,EAAQ3K,EAAK2K,MACjBzI,EAAKoK,QAAQ1R,GAAK,uBAAyB+P,EAAM/P,GACjD0Z,EAAKpS,EAAKoK,QAAS,OAAQ,UAC3BgI,EAAKpS,EAAKoK,QAAS,YAAa,UAChCgI,EAAKpS,EAAKoK,QAAS,gBAAiB,cAGpC8xD,GAA8B,KAC9BC,GAA2B,KAE3BC,GAAY,GAEZC,GAAS,SAAgBr8D,EAAM/C,GAC/B+C,EAAKoK,QAAQ4J,YAAc/W,GAG3Bq/D,GAAU,SAAet8D,GACzBA,EAAKoK,QAAQ4J,YAAc,IAG3BuoD,GAAe,SAAsBv8D,EAAM4D,EAAUe,GACrD,IAAI9C,EAAQ7B,EAAKlB,MAAM,mBACvBu9D,GACIr8D,EACA2E,EACI,IACAf,EACA,KACA/B,EACA,KACW,IAAVA,EACK7B,EAAKlB,MAAM,iCACXkB,EAAKlB,MAAM,iCAIzBujC,aAAa85B,IACbA,GAA2B15C,YAAW,WAClC65C,GAAQt8D,KACT,OAGHw8D,GAAkB,SAAyBx8D,GAC3C,OAAOA,EAAKoK,QAAQqhB,WAAWmoC,SAAShzD,SAAS86D,gBAGjDe,GAAY,SAAmBn+D,GAC/B,IAAI0B,EAAO1B,EAAM0B,KACbC,EAAS3B,EAAM2B,OACnB,GAAKu8D,GAAgBx8D,GAArB,CAIAA,EAAKoK,QAAQ4J,YAAc,GAC3B,IAAI/a,EAAO+G,EAAKlB,MAAM,WAAYmB,EAAOvH,IACzC0jE,GAAU5jE,KAAKS,EAAK2K,UAEpBy+B,aAAa65B,IACbA,GAA8Bz5C,YAAW,WACrC85C,GAAav8D,EAAMo8D,GAAUhjE,KAAK,MAAO4G,EAAKlB,MAAM,yBAEpDs9D,GAAU1iE,OAAS,IACpB,OAGHgjE,GAAc,SAAqB79D,GACnC,IAAImB,EAAOnB,EAAMmB,KACbC,EAASpB,EAAMoB,OACnB,GAAKu8D,GAAgBx8D,GAArB,CAIA,IAAI/G,EAAOgH,EAAOhH,KAClBsjE,GAAav8D,EAAM/G,EAAK2K,SAAU5D,EAAKlB,MAAM,6BAG7C69D,GAAgB,SAAuBz9D,GACvC,IAAIc,EAAOd,EAAMc,KACbC,EAASf,EAAMe,OAIf2D,EADO5D,EAAKlB,MAAM,WAAYmB,EAAOvH,IACrBkL,SAChBe,EAAQ3E,EAAKlB,MAAM,sCAEvBu9D,GAAOr8D,EAAM4D,EAAW,IAAMe,IAG9Bi4D,GAAoB,SAA2Bz9D,GAC/C,IAAIa,EAAOb,EAAMa,KACbC,EAASd,EAAMc,OAEf2D,EADO5D,EAAKlB,MAAM,WAAYmB,EAAOvH,IACrBkL,SAChBe,EAAQ3E,EAAKlB,MAAM,qCAEvBu9D,GAAOr8D,EAAM4D,EAAW,IAAMe,IAG9Bk4D,GAAY,SAAmB98D,GAC/B,IAAIC,EAAOD,EAAMC,KACbC,EAASF,EAAME,OAEf2D,EADO5D,EAAKlB,MAAM,WAAYmB,EAAOvH,IACrBkL,SAIpBy4D,GAAOr8D,EAAMC,EAAOsB,OAAOC,KAAO,IAAMoC,EAAW,IAAM3D,EAAOsB,OAAOE,MAGvEq7D,GAAYjmD,EAAW,CACvB0E,OAAQ0gD,GACRnlD,YAAY,EACZ4oB,kBAAkB,EAClBzoB,MAAO9Y,EAAY,CACfsN,cAAegxD,GACfl8D,gBAAiBm8D,GACjBj3C,6BAA8Bk3C,GAE9BxW,0BAA2ByW,GAC3Bj3C,2BAA4Bi3C,GAE5BrW,4BAA6BsW,GAC7Bv3C,0BAA2Bu3C,GAC3Br3C,uBAAwBq3C,GACxBt3C,gCAAiCs3C,KAGrCnqD,IAAK,OACLpX,KAAM,cAGNyhE,GAAW,SAAkBj5B,GAC7B,IAAIsD,EAAYt6B,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,IACpF,OAAOg3B,EAAOnmC,QAAQ,IAAIq/D,OAAO51B,EAAY,IAAK,MAAM,SAAS3lC,GAC7D,OAAOA,EAAIw7D,OAAO,GAAGz1B,kBAIzB01B,GAAW,SAAkBvrC,GAC7B,IAAIkQ,EAAW/0B,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,GAC/EqwD,IACArwD,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,KAAmBA,UAAU,GAC/Dg1B,EAAOoT,KAAK9S,MACZsC,EAAU,KAEd,OAAO,WACH,IACI,IAAIvM,EAAOrrB,UAAUpT,OAAQ0+B,EAAO,IAAIt+B,MAAMq+B,GAAOE,EAAO,EAC5DA,EAAOF,EACPE,IAEAD,EAAKC,GAAQvrB,UAAUurB,GAE3BgK,aAAaqC,GAEb,IAAI8pB,EAAOtZ,KAAK9S,MAAQN,EAEpB7Q,EAAK,WACL6Q,EAAOoT,KAAK9S,MACZzQ,EAAKtR,WAAM,EAAQ+X,IAGnBo2B,EAAO3sB,EAIFs7B,IACDz4B,EAAUjiB,WAAWwO,EAAI4Q,EAAW2sB,IAIxCv9B,MAKRmsC,GAAkB,IAElBC,GAAU,SAAiBtgE,GAC3B,OAAOA,EAAEmvD,kBAGToR,GAAW,SAAgBx/D,GAC3B,IAAIkC,EAAOlC,EAAKkC,KACZyI,EAAQ3K,EAAK2K,MAEb/P,EAAKsH,EAAKlB,MAAM,UAChBpG,IACAsH,EAAKoK,QAAQ1R,GAAKA,GAItB,IAAIsS,EAAYhL,EAAKlB,MAAM,kBACvBkM,GACAA,EACK8d,MAAM,KACNpkB,QAAO,SAASpJ,GACb,OAAOA,EAAK5B,UAEf4Y,SAAQ,SAAShX,GACd0E,EAAKoK,QAAQC,UAAUC,IAAIhP,MAKvC0E,EAAKK,IAAIsE,MAAQ3E,EAAK2K,gBAClB3K,EAAKiK,gBACD+pD,GACA94D,OAAOmJ,OAAO,GAAIoE,EAAO,CACrBsT,WAAY,KACZ+3C,QAAS9zD,EAAKlB,MAAM,sBAMhCkB,EAAKK,IAAIxH,KAAOmH,EAAK2K,gBACjB3K,EAAKiK,gBAAgBynD,GAAc,CAAE31C,WAAY,QAIrD/b,EAAKK,IAAIoqD,MAAQzqD,EAAK2K,gBAAgB3K,EAAKiK,gBAAgBwgD,GAAO,CAAEnvD,KAAM,gBAG1E0E,EAAKK,IAAIy8D,UAAY98D,EAAK2K,gBACtB3K,EAAKiK,gBAAgB6yD,GAAW5hE,OAAOmJ,OAAO,GAAIoE,KAItDzI,EAAKK,IAAI/D,KAAO0D,EAAK2K,gBAAgB3K,EAAKiK,gBAAgB3N,GAAMpB,OAAOmJ,OAAO,GAAIoE,KAIlFzI,EAAKK,IAAI8zB,QAAUivB,GAAgB,OACnCpjD,EAAKK,IAAI8zB,QAAQxf,MAAMtL,OAAS,OAChCrJ,EAAKoK,QAAQe,YAAYnL,EAAKK,IAAI8zB,SAGlCn0B,EAAKK,IAAIk9D,OAAS,KAGlBv9D,EAAKlB,MAAM,cACN4F,QAAO,SAASiQ,GACb,OAAQmuB,EAAQnuB,EAAMha,UAEzB3B,KAAI,SAASsF,GACV,IAAIhD,EAAOgD,EAAMhD,KACbX,EAAQ2D,EAAM3D,MAClBqF,EAAKoK,QAAQG,QAAQjP,GAAQX,KAIrCqF,EAAKK,IAAIm9D,cAAgB,KACzBx9D,EAAKK,IAAIo9D,aAAeP,IAAS,WAC7Bl9D,EAAKK,IAAIq9D,cAAgB,GACzB19D,EAAKM,SAAS,qBACf,KAGHN,EAAKK,IAAIs9D,oBAAsB,KAC/B39D,EAAKK,IAAIq9D,cAAgB,GAGzB,IAAIE,EAAWj9D,OAAOk9D,WAAW,sCAAsCvnB,QACnEwnB,EAAmB,iBAAkBn9D,OACrCX,EAAKlB,MAAM,sBAAwBg/D,IAAqBF,IACxD59D,EAAKoK,QAAQc,iBAAiB,YAAamyD,GAAS,CAAEU,SAAS,IAC/D/9D,EAAKoK,QAAQc,iBAAiB,eAAgBmyD,KAIlD,IAAInrB,EAAUlyC,EAAKlB,MAAM,eAEzB,GADoC,IAAnBozC,EAAQx4C,OACT,CACZ,IAAIskE,EAAOp9D,SAASmK,cAAc,KAClCizD,EAAKhzD,UAAY,oBACjBgzD,EAAKzrD,aAAa,cAAe,QACjCyrD,EAAK7/C,KAAO+zB,EAAQ,GACpB8rB,EAAKC,UAAY,EACjBD,EAAK5wD,OAAS,SACd4wD,EAAKE,IAAM,sBACXF,EAAKhqD,YAAck+B,EAAQ,GAC3BlyC,EAAKoK,QAAQe,YAAY6yD,GACzBh+D,EAAKK,IAAI6xC,QAAU8rB,IAIvBG,GAAU,SAAet/D,GACzB,IAAImB,EAAOnB,EAAMmB,KACbyI,EAAQ5J,EAAM4J,MACdivB,EAAU74B,EAAM64B,QAoBpB,GAlBA0mC,GAAQ,CAAEp+D,KAAMA,EAAMyI,MAAOA,EAAOivB,QAASA,IAG7CA,EACKhzB,QAAO,SAASzE,GACb,MAAO,kBAAkBzE,KAAKyE,EAAOE,SAExCuE,QAAO,SAASzE,GACb,OAAQ6iC,EAAQ7iC,EAAO3D,KAAK3B,UAE/B3B,KAAI,SAASkG,GACV,IAAIiB,EAAOjB,EAAMiB,KACb7D,EAAO4C,EAAM5C,KACbhB,EAAOyhE,GAAS58D,EAAKsoB,OAAO,GAAG6e,cAAe,KAClDtnC,EAAKoK,QAAQG,QAAQjP,GAAQgB,EAAK3B,MAClCqF,EAAKqhC,uBAGTrhC,EAAK0R,KAAKtH,QAAQ6S,OAAtB,CAEIjd,EAAK0R,KAAKtH,QAAQhB,QAAUpJ,EAAKK,IAAIm9D,gBACrCx9D,EAAKK,IAAIm9D,cAAgBx9D,EAAK0R,KAAKtH,QAAQhB,MAC3CpJ,EAAKK,IAAIo9D,gBAIb,IAAIF,EAASv9D,EAAKK,IAAIk9D,OACjBA,IACDA,EAASv9D,EAAKK,IAAIk9D,OAASc,GAA+Br+D,GAG1DA,EAAKoK,QAAQshB,YAAY1rB,EAAKK,IAAI8zB,SAClCn0B,EAAKK,IAAI8zB,QAAU,MAIvB,IAAI5N,EAAYvmB,EAAKK,IACjBi+D,EAAS/3C,EAAU+3C,OACnB35D,EAAQ4hB,EAAU5hB,MAClB9L,EAAO0tB,EAAU1tB,KACjB4xD,EAAQlkC,EAAUkkC,MAGlB6T,GACAA,EAAOlD,oBAIX,IAAI70D,EAAcvG,EAAKlB,MAAM,0BACzBy/D,EAAcv+D,EAAKlB,MAAM,sBACzBgiD,EAAa9gD,EAAKlB,MAAM,mBAExB0/D,EAAgB1d,KADLyd,EAAcv+D,EAAKlB,MAAM,kBAAoBs+D,GAAkB,GAI1EqB,EAAY/mC,EAAQ0a,MAAK,SAASnyC,GAClC,MAAuB,iBAAhBA,EAAOE,QAIlB,GAAIq+D,GAAiBC,EAAW,CAE5B,IAAIpe,EAAoBoe,EAAUniE,KAAK+jD,kBAGvC17C,EAAMwF,QAAU,EAEZo0D,EACA55D,EAAMoX,YAAc,GAEhBskC,IAAsB1Y,GAAkBC,IACxCjjC,EAAMmX,WAAa,GACZukC,IAAsB1Y,GAAkBG,OAC/CnjC,EAAMoX,WAAa,GAEnBpX,EAAMoX,WAAa,QAGnByiD,IACR75D,EAAMwF,QAAU,EAChBxF,EAAMmX,WAAa,EACnBnX,EAAMoX,WAAa,GAGvB,IAAI2iD,EAAiBC,GAAwB3+D,GAEzC4+D,EAAaC,GAAoB7+D,GAEjC8+D,EAAcn6D,EAAM+M,KAAKtH,QAAQf,OACjC01D,GAAsBR,GAAeC,EAAgB,EAAIM,EAEzDE,EAAgBR,EAAgB3lE,EAAK6Y,KAAKtH,QAAQ+zB,UAAY,EAC9D8gC,EAAkC,IAAfne,EAAmB,EAAIjoD,EAAK6Y,KAAKtH,QAAQ6vB,aAE5Dq2B,EACAyO,EAAqBC,EAAgBJ,EAAWM,OAASD,EACzDE,EACAJ,EAAqBC,EAAgBJ,EAAWrB,OAAS0B,EAM7D,GAHApmE,EAAKkjB,WACD9V,KAAKC,IAAI,EAAG64D,EAAqBlmE,EAAK6Y,KAAKtH,QAAQ+zB,WAAaugC,EAAe9sD,IAE/ErL,EAAa,CAIb,IAAI6C,EAAQpJ,EAAK0R,KAAKtH,QAAQhB,MAC1BC,EAASD,EAAQ7C,EAGjBA,IAAgBvG,EAAKK,IAAIs9D,sBACzB39D,EAAKK,IAAIs9D,oBAAsBp3D,EAC/BvG,EAAKK,IAAIq9D,cAAgB,IAI7B,IAAI0B,EAAUp/D,EAAKK,IAAIq9D,cACvB0B,EAAQ5mE,KAAK4Q,GAEb,IAAIi2D,EAAc,EAClB,GAAID,EAAQ1lE,OAAuB,EAAd2lE,EAIjB,IAHA,IAAIxvD,EAAIuvD,EAAQ1lE,OACZoY,EAASjC,EAAI,GACbyvD,EAAU,EACLjmE,EAAIwW,EAAGxW,GAAKyY,EAAQzY,IAKzB,GAJI+lE,EAAQ/lE,KAAO+lE,EAAQ/lE,EAAI,IAC3BimE,IAGAA,GAAWD,EAEX,OAMZ5U,EAAML,UAAW,EACjBK,EAAMphD,OAASA,EAGf,IAAIk2D,EAEAl2D,EACA01D,GAECE,EAAmBP,EAAe5sD,SAElC0sD,EAAgBQ,EAAgB,GAEjCJ,EAAWM,OAASK,EACpB1mE,EAAKuzB,SAAWmzC,EAEhB1mE,EAAKuzB,SAAW,KAIpBpsB,EAAKqJ,OAASA,OACX,GAAIk0D,EAAOj3C,YAAa,CAI3BmkC,EAAML,UAAW,EAGjB,IAAIoV,EAEAjC,EAAOj3C,YACPy4C,GAECE,EAAmBP,EAAe5sD,SAElC0sD,EAAgBQ,EAAgB,GAGjCJ,EAAWM,OAASM,EACpB3mE,EAAKuzB,SAAWozC,EAEhB3mE,EAAKuzB,SAAW,UAIjB,GAAImxC,EAAOkC,aAAc,CAI5B,IAAIC,EAAiBpP,GAAgBiN,EAAOkC,aACxCE,EAAc15D,KAAKuK,IAAI+sD,EAAOkC,aAAcnP,GAChD7F,EAAML,UAAW,EACjBK,EAAMphD,OAASq2D,EACTC,EACAA,EAAcjB,EAAe9sD,IAAM8sD,EAAe5sD,OAGxD,IAAI8tD,EAEAD,EACAZ,GAECE,EAAmBP,EAAe5sD,SAElC0sD,EAAgBQ,EAAgB,GAGjC1O,EAAeiN,EAAOkC,cAAgBb,EAAWM,OAASU,EAC1D/mE,EAAKuzB,SAAWwzC,EAEhB/mE,EAAKuzB,SAAW,KAIpBpsB,EAAKqJ,OAASpD,KAAKuK,IACf+sD,EAAOkC,aACPN,EAAeT,EAAe9sD,IAAM8sD,EAAe5sD,YAEpD,CAIH,IAAI+tD,EAAa/e,EAAa,EAAI4d,EAAe9sD,IAAM8sD,EAAe5sD,OAAS,EAC/E24C,EAAML,UAAW,EACjBK,EAAMphD,OAASpD,KAAKC,IAAI44D,EAAaxO,EAAeuP,GAGpD7/D,EAAKqJ,OAASpD,KAAKC,IAAI44D,EAAaK,EAAeU,GAInD7/D,EAAKK,IAAI6xC,SAAWuY,EAAMC,gBAC1B1qD,EAAKK,IAAI6xC,QAAQv9B,MAAMyL,UAAY,cAAgBqqC,EAAMC,cAAgB,SAG7EiU,GAA0B,SAAiC3+D,GAC3D,IAAI/G,EAAO+G,EAAKK,IAAIxH,KAAK2pB,WAAW,GAAGA,WAAW,GAClD,OAAOvpB,EACD,CACI2Y,IAAK3Y,EAAKyY,KAAKtH,QAAQ+zB,UACvBrsB,OAAQ7Y,EAAKyY,KAAKtH,QAAQ6vB,cAE9B,CACIroB,IAAK,EACLE,OAAQ,IAIlB+sD,GAAsB,SAA6B7+D,GACnD,IAAIk/D,EAAS,EACT3B,EAAS,EAGTuC,EAAa9/D,EAAKK,IAAIxH,KACtBknE,EAAWD,EAAWt9C,WAAW,GACjCitC,EAAkBsQ,EAASv9C,WAAW9d,QAAO,SAAS00B,GACtD,OAAOA,EAAM1nB,KAAKtH,QAAQf,UAE1BgwB,EAAWr5B,EACVlB,MAAM,oBACN9F,KAAI,SAASC,GACV,OAAOw2D,EAAgBrd,MAAK,SAAShZ,GACjC,OAAOA,EAAM1gC,KAAOO,EAAKP,SAGhCgM,QAAO,SAASzL,GACb,OAAOA,KAIf,GAAwB,IAApBogC,EAAS3/B,OAAc,MAAO,CAAEwlE,OAAQA,EAAQ3B,OAAQA,GAE5D,IAAIzQ,EAAkBiT,EAASruD,KAAKtH,QAAQhB,MACxC6mD,EAAYlD,GAAuBgT,EAAU1mC,EAAUymC,EAAW9P,iBAElEK,EAAYh3B,EAAS,GAAG3nB,KAAKtH,QAE7BijD,EAAqBgD,EAAUlyB,UAAYkyB,EAAUp2B,aACrDizB,EAAuBmD,EAAUjyB,WAAaiyB,EAAUn2B,YAExDxT,EAAY2pC,EAAUjnD,MAAQ8jD,EAC9BI,EAAa+C,EAAUhnD,OAASgkD,EAEhC2S,OAA+B,IAAd/P,GAA6BA,GAAa,EAAI,EAAI,EACnEgQ,EAAc5mC,EAAS+Y,MAAK,SAAShZ,GACrC,OAAOA,EAAMkyB,kBAAoBlyB,EAAMjvB,QAAU,QAE9C,EACD,EACF+1D,EAAoB7mC,EAAS3/B,OAASsmE,EAAUC,EAChD9S,EAAcN,GAAeC,EAAiBpmC,GAgBlD,OAboB,IAAhBymC,EACA9zB,EAAS/mB,SAAQ,SAASrZ,GACtB,IAAIoQ,EAASpQ,EAAKyY,KAAKtH,QAAQf,OAASgkD,EACxCkQ,GAAUl0D,EACV61D,GAAU71D,EAASpQ,EAAKkR,YAK5BozD,EAASt3D,KAAK6a,KAAKo/C,EAAoB/S,GAAeG,EACtD4R,EAAS3B,GAGN,CAAE2B,OAAQA,EAAQ3B,OAAQA,IAGjCc,GAAiC,SAAwCr+D,GACzE,IAAIqJ,EAASrJ,EAAKK,IAAI8/D,eAAiB,KAIvC,MAAO,CACHV,aAJev8C,SAASljB,EAAK2U,MAAMyrD,UAAW,KAAO,KAKrD95C,YAJyB,IAAXjd,EAAe,KAAOA,IAQxCg3D,GAAkB,SAAyBrgE,EAAM+mC,GACjD,IAAI2F,EAAe1sC,EAAKlB,MAAM,qBAC1B2e,EAAgBzd,EAAKlB,MAAM,sBAC3BgiD,EAAa9gD,EAAKlB,MAAM,mBACxBwhE,EAAWtgE,EAAKlB,MAAM,iBAGtByhE,EAAmBx5B,EAAMrtC,OAG7B,OAAK+jB,GAAiB8iD,EAAmB,MAQvBh9B,GAHlB+8B,EAAW7iD,GAA2BivB,EAAX4zB,EAAqC,IAI7Cxf,EAAayf,EAAmBD,KAC/CtgE,EAAKM,SAAS,sBAAuB,CACjC5D,OAAQqqC,EACR4E,MAAOoN,GAAe,UAAW,EAAG,gBAGjC,IAMXynB,GAAe,SAAsB3nE,EAAMwgC,EAAUe,GACrD,IAAI2lC,EAAWlnE,EAAK2pB,WAAW,GAC/B,OAAOuqC,GAAuBgT,EAAU1mC,EAAU,CAC9C1nB,KAAMyoB,EAAS+2B,UAAY4O,EAASruD,KAAKtH,QAAQuH,KACjDC,IACIwoB,EAASg3B,UACRv4D,EAAK6Y,KAAKioB,MAAM/nB,IAAM/Y,EAAK6Y,KAAKtH,QAAQ+zB,UAAYtlC,EAAK6Y,KAAKtH,QAAQq0B,cAO/EgiC,GAAa,SAAoBzgE,GACjC,IAAI0gE,EAAY1gE,EAAKlB,MAAM,kBACvB4lD,EAAa1kD,EAAKlB,MAAM,gBACxB6hE,EAAUD,IAAchc,EAC5B,GAAIic,IAAY3gE,EAAKK,IAAIi+D,OAAQ,CAC7B,IAAIA,EAAS9D,GACTx6D,EAAKoK,SACL,SAAS28B,GAEL,IAAIuK,EACAtxC,EAAKlB,MAAM,yBACX,WACI,OAAO,GAKf,OADqBkB,EAAKlB,MAAM,wBAE1BioC,EAAMkU,OAAM,SAAShiD,GACjB,OACI2yC,GAAa,oBAAqB3yC,EAAM,CACpC6F,MAAOkB,EAAKlB,QACbm8C,OAAM,SAASv9C,GACd,OAAkB,IAAXA,MACL4zC,EAAer4C,QAKvC,CACI6hE,YAAa,SAAqB/zB,GAC9B,IAAI2G,EAAe1tC,EAAKlB,MAAM,qBAC9B,OAAOioC,EAAMriC,QAAO,SAASzL,GACzB,OAAImF,GAAOnF,KACCy0C,EAAazU,SAAShgC,EAAKqC,KAAKgsC,mBAKpDqzB,mBAAoB36D,EAAKlB,MAAM,oBAC/B87D,sBAAuB56D,EAAKlB,MAAM,yBAI1Cw/D,EAAOpxD,OAAS,SAAS65B,EAAO3M,GAE5B,IACIq1B,EADOzvD,EAAKK,IAAIxH,KAAK2pB,WAAW,GACTA,WAAW9d,QAAO,SAAS00B,GAClD,OAAOA,EAAM1nB,KAAKtH,QAAQf,UAE1BgwB,EAAWr5B,EACVlB,MAAM,oBACN9F,KAAI,SAASC,GACV,OAAOw2D,EAAgBrd,MAAK,SAAShZ,GACjC,OAAOA,EAAM1gC,KAAOO,EAAKP,SAGhCgM,QAAO,SAASzL,GACb,OAAOA,KAGfqyC,GAAiB,YAAavE,EAAO,CAAEzmC,SAAUN,EAAKM,WAAYd,MAAK,SACnE2mB,GAGA,GAAIk6C,GAAgBrgE,EAAMmmB,GAAQ,OAAO,EAGzCnmB,EAAKM,SAAS,YAAa,CACvBymC,MAAO5gB,EACPjU,MAAOsuD,GAAaxgE,EAAKK,IAAIxH,KAAMwgC,EAAUe,GAC7CimB,kBAAmB1Y,GAAkBE,UAI7C7nC,EAAKM,SAAS,WAAY,CAAE85B,SAAUA,IAEtCp6B,EAAKM,SAAS,eAAgB,CAAE85B,SAAUA,KAG9CkkC,EAAOnD,YAAc,SAAS/gC,GAC1Bp6B,EAAKM,SAAS,iBAAkB,CAAE85B,SAAUA,KAGhDkkC,EAAOrF,OAASiE,IAAS,SAAS9iC,GAC9Bp6B,EAAKM,SAAS,WAAY,CAAE85B,SAAUA,OAG1CkkC,EAAOpD,UAAY,SAAS9gC,GACxBp6B,EAAKM,SAAS,eAAgB,CAAE85B,SAAUA,KAG9Cp6B,EAAKK,IAAIi+D,OAASA,EAElBt+D,EAAKK,IAAIo0D,KAAOz0D,EAAK2K,gBAAgB3K,EAAKiK,gBAAgBwqD,UAClDkM,GAAW3gE,EAAKK,IAAIi+D,SAC5Bt+D,EAAKK,IAAIi+D,OAAOv5C,UAChB/kB,EAAKK,IAAIi+D,OAAS,KAClBt+D,EAAKwc,gBAAgBxc,EAAKK,IAAIo0D,QAOlCmM,GAAe,SAAsB5gE,EAAMyI,GAC3C,IAAIi4D,EAAY1gE,EAAKlB,MAAM,oBACvB4lD,EAAa1kD,EAAKlB,MAAM,gBACxB6hE,EAAUD,IAAchc,EACxBic,IAAY3gE,EAAKK,IAAIwyD,QACrB7yD,EAAKK,IAAIwyD,QAAU7yD,EAAK2K,gBACpB3K,EAAKiK,gBACD4oD,GACA33D,OAAOmJ,OAAO,GAAIoE,EAAO,CACrByE,OAAQ,SAAgB65B,GACpBuE,GAAiB,YAAavE,EAAO,CACjCzmC,SAAUN,EAAKM,WAChBd,MAAK,SAAS2mB,GAEb,GAAIk6C,GAAgBrgE,EAAMmmB,GAAQ,OAAO,EAGzCnmB,EAAKM,SAAS,YAAa,CACvBymC,MAAO5gB,EACPjU,OAAQ,EACRmuC,kBAAmB1Y,GAAkBG,gBAOzD,IAEI64B,GAAW3gE,EAAKK,IAAIwyD,UAC5B7yD,EAAKwc,gBAAgBxc,EAAKK,IAAIwyD,SAC9B7yD,EAAKK,IAAIwyD,QAAU,OAOvBgO,GAAc,SAAqB7gE,GACnC,IAAI0gE,EAAY1gE,EAAKlB,MAAM,mBACvB4lD,EAAa1kD,EAAKlB,MAAM,gBACxB6hE,EAAUD,IAAchc,EACxBic,IAAY3gE,EAAKK,IAAIygE,QACrB9gE,EAAKK,IAAIygE,OAAS9E,KAClBh8D,EAAKK,IAAIygE,OAAO5zD,OAAS,SAAS65B,GAC9BuE,GAAiB,YAAavE,EAAO,CAAEzmC,SAAUN,EAAKM,WAAYd,MAAK,SACnE2mB,GAGA,GAAIk6C,GAAgBrgE,EAAMmmB,GAAQ,OAAO,EAGzCnmB,EAAKM,SAAS,YAAa,CACvBymC,MAAO5gB,EACPjU,OAAQ,EACRmuC,kBAAmB1Y,GAAkBI,cAIzC44B,GAAW3gE,EAAKK,IAAIygE,SAC5B9gE,EAAKK,IAAIygE,OAAO/7C,UAChB/kB,EAAKK,IAAIygE,OAAS,OAOtB1C,GAAUjgE,EAAY,CACtB40D,qBAAsB,SAA8B5zD,GAChD,IAAIa,EAAOb,EAAMa,KACbyI,EAAQtJ,EAAMsJ,MAClBm4D,GAAa5gE,EAAMyI,IAEvBs4D,mBAAoB,SAA4BhhE,GAC5C,IAAIC,EAAOD,EAAMC,KACjBygE,GAAWzgE,IAEfghE,oBAAqB,SAA6BxgE,GAC9C,IAAIR,EAAOQ,EAAMR,KACjB6gE,GAAY7gE,IAEhB8yD,iBAAkB,SAA0BnnD,GACxC,IAAI3L,EAAO2L,EAAM3L,KACbyI,EAAQkD,EAAMlD,MAClBg4D,GAAWzgE,GACX6gE,GAAY7gE,GACZ4gE,GAAa5gE,EAAMyI,GACFzI,EAAKlB,MAAM,gBAExBkB,EAAKoK,QAAQG,QAAQ4hC,SAAW,WAGhCnsC,EAAKoK,QAAQmiB,gBAAgB,oBAKrCvsB,GAAO6W,EAAW,CAClBvb,KAAM,OACNyjC,KAAM,SAAcxa,GAChB,IAAIvkB,EAAOukB,EAAMvkB,KACbA,EAAKK,IAAI8zB,UACTn0B,EAAKK,IAAI8/D,cAAgBngE,EAAKK,IAAI8zB,QAAQqK,eAGlDjjB,OAAQ+hD,GACRrmD,MAAOknD,GACPp5C,QAAS,SAAiBJ,GACtB,IAAI3kB,EAAO2kB,EAAO3kB,KACdA,EAAKK,IAAIygE,QACT9gE,EAAKK,IAAIygE,OAAO/7C,UAEhB/kB,EAAKK,IAAIi+D,QACTt+D,EAAKK,IAAIi+D,OAAOv5C,UAEpB/kB,EAAKoK,QAAQkB,oBAAoB,YAAa+xD,IAC9Cr9D,EAAKoK,QAAQkB,oBAAoB,eAAgB+xD,KAErDtmD,OAAQ,CACJlE,OAAQ,CAAC,aAKbouD,GAAY,WACZ,IAAIC,EAAiBp0D,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,GAErFq0D,EAAkB,KAGlBp1B,EAAiBC,KAGjBpM,EAAQrI,EAERuP,GAAmBiF,GAGnB,CAACtU,GAASiQ,GAAoBqE,IAG9B,CAACrU,GAAS+P,GAAoBsE,KAIlCnM,EAAMt/B,SAAS,cAAe,CAAElD,QAAS8jE,IAGzC,IAAIE,EAAoB,WAChBxgE,SAASqc,QACb2iB,EAAMt/B,SAAS,SAEnBM,SAASsK,iBAAiB,mBAAoBk2D,GAG9C,IAAIC,EAAkB,KAClBC,GAAa,EACbC,GAAyB,EACzBC,EAAqB,KACrBC,EAAqB,KACrBC,EAAgB,WACXJ,IACDA,GAAa,GAEjBj/B,aAAag/B,GACbA,EAAkB5+C,YAAW,WACzB6+C,GAAa,EACbE,EAAqB,KACrBC,EAAqB,KACjBF,IACAA,GAAyB,EACzB3hC,EAAMt/B,SAAS,sBAEpB,MAEPK,OAAOuK,iBAAiB,SAAUw2D,GAGlC,IAAI9hE,EAAOI,GAAK4/B,EAAO,CAAElnC,GAAIq4B,OAKzBgP,GAAY,EACZ4hC,GAAW,EAEXC,EAAe,CAOfrhC,MAAO,WAGC+gC,IACAG,EAAqB9gE,OAAOkhE,WACvBL,IACDA,EAAqBC,GAGpBF,GAA0BE,IAAuBD,IAClD5hC,EAAMt/B,SAAS,oBACfihE,GAAyB,IAI7BI,GAAY5hC,IAEZA,EAA0C,OAA9BngC,EAAKwK,QAAQs0B,cAIzBqB,IAGJngC,EAAK2gC,QAGLohC,EAAW/hE,EAAK8R,KAAKtH,QAAQ6S,SAOjCwjB,OAAQ,SAAgB3F,GAEpB,IAAIpD,EAAUkI,EACTnH,qBAGA/zB,QAAO,SAASzE,GACb,OAAQ,QAAQzE,KAAKyE,EAAOE,SAIhC4/B,IAAcrI,EAAQh+B,SAG1BooE,EAAqBpqC,GAGrBqI,EAAYngC,EAAK6gC,OAAO3F,EAAIpD,EAAS6pC,GAGrC33B,GAAoBhK,EAAM9gC,MAAM,cAG5BihC,GACAH,EAAM9H,0BAQdiqC,EAAc,SAAqBzmE,GACnC,OAAO,SAASgB,GAEZ,IAAI4gC,EAAQ,CACR/8B,KAAM7E,GAIV,IAAKgB,EACD,OAAO4gC,EAiBX,GAbI5gC,EAAKs8B,eAAe,WACpBsE,EAAMyO,MAAQrvC,EAAKqvC,MAAQzwC,OAAOmJ,OAAO,GAAI/H,EAAKqvC,OAAS,MAG3DrvC,EAAKiF,SACL27B,EAAM37B,OAASrG,OAAOmJ,OAAO,GAAI/H,EAAKiF,SAGtCjF,EAAKgB,OACL4/B,EAAMtJ,OAASt3B,EAAKgB,MAIpBhB,EAAKI,OACLwgC,EAAM5/B,KAAOhB,EAAKI,YACf,GAAIJ,EAAKrD,MAAQqD,EAAK5D,GAAI,CAC7B,IAAIO,EAAOqD,EAAKrD,KAAOqD,EAAKrD,KAAO2mC,EAAM9gC,MAAM,WAAYxC,EAAK5D,IAChEwkC,EAAM5/B,KAAOrE,EAAOmO,GAAcnO,GAAQ,KAmB9C,OAfIqD,EAAKyqC,QACL7J,EAAM6J,MAAQzqC,EAAKyqC,MAAM/tC,IAAIoO,KAI7B,WAAW5L,KAAKF,KAChB4hC,EAAMma,SAAW/6C,EAAK+6C,UAItB/6C,EAAKs8B,eAAe,WAAat8B,EAAKs8B,eAAe,YACrDsE,EAAM31B,OAASjL,EAAKiL,OACpB21B,EAAM9vB,OAAS9Q,EAAK8Q,QAGjB8vB,IAIX8kC,EAAc,CACdC,YAAaF,EAAY,WAEzBG,SAAUH,EAAY,QAEtBI,oBAAqBJ,EAAY,WAEjCK,cAAeL,EAAY,YAC3BvZ,oBAAqBuZ,EAAY,gBACjC1b,8BAA+B0b,EAAY,mBAC3Ct2D,cAAes2D,EAAY,WAE3Bv8C,uBAAwB,CAACu8C,EAAY,SAAUA,EAAY,YAE3Dz8C,0BAA2B,CAACy8C,EAAY,SAAUA,EAAY,YAE9Dxb,4BAA6B,CAACwb,EAAY,SAAUA,EAAY,eAEhEjiE,mBAAoBiiE,EAAY,eAEhCr8C,0BAA2Bq8C,EAAY,oBACvC3b,iCAAkC2b,EAAY,uBAC9C5b,0BAA2B4b,EAAY,oBACvCt8C,6BAA8Bs8C,EAAY,eAC1CM,iCAAkCN,EAAY,gBAC9Cp8C,2BAA4Bo8C,EAAY,qBAExCx8C,gCAAiC,CAACw8C,EAAY,SAAUA,EAAY,gBAEpExhE,gBAAiBwhE,EAAY,cAE7BO,iBAAkBP,EAAY,eAE9BQ,kBAAmBR,EAAY,gBAE/BnM,kBAAmBmM,EAAY,iBAG/BS,EAAc,SAAqBtlC,GAEnC,IAAIn8B,EAAS7F,OAAOmJ,OAAO,CAAEo+D,KAAM9pE,GAAWukC,UACvCn8B,EAAOZ,KACdP,EAAKwK,QAAQvJ,cACT,IAAIC,YAAY,YAAco8B,EAAM/8B,KAAM,CAEtCY,OAAQA,EAGR2hE,SAAS,EACTC,YAAY,EACZC,UAAU,KAKlB,IAAIlnB,EAAS,GAGTxe,EAAMtE,eAAe,UACrB8iB,EAAOljD,KAAK0kC,EAAMyO,OAIlBzO,EAAMtE,eAAe,SACrB8iB,EAAOljD,KAAK0kC,EAAM5/B,MAItB,IAAIulE,EAAW,CAAC,OAAQ,QAAS,QACjC3nE,OAAOmX,KAAK6qB,GACPx4B,QAAO,SAASiK,GACb,OAAQk0D,EAAS5pC,SAAStqB,MAE7B2D,SAAQ,SAAS3D,GACd,OAAO+sC,EAAOljD,KAAK0kC,EAAMvuB,OAIjChW,EAAQwwC,KAAK9oB,MAAM1nB,EAAS,CAACukC,EAAM/8B,MAAMhH,OAAOuiD,IAGhD,IAAIiD,EAAU/e,EAAM9gC,MAAM,SAAWo+B,EAAM/8B,KAAKqnC,eAC5CmX,GACAA,EAAQt+B,WAAM,EAAQq7B,IAI1BomB,EAAuB,SAA8BpqC,GAChDA,EAAQh+B,QACbg+B,EACKhzB,QAAO,SAASzE,GACb,OAAO+hE,EAAY/hE,EAAOE,SAE7BmS,SAAQ,SAASrS,GACd,IAAIsL,EAASy2D,EAAY/hE,EAAOE,OAC/BrG,MAAMC,QAAQwR,GAAUA,EAAS,CAACA,IAAS+G,SAAQ,SAASg3C,GAErC,kBAAhBrpD,EAAOE,KACPqiE,EAAYlZ,EAAMrpD,EAAO3D,OAEzBmmB,YAAW,WACP+/C,EAAYlZ,EAAMrpD,EAAO3D,SAC1B,UASnB2vC,EAAa,SAAoB7uC,GACjC,OAAOwiC,EAAMt/B,SAAS,cAAe,CAAElD,QAASA,KAGhDsgD,EAAU,SAAiB5+C,GAC3B,OAAO8gC,EAAM9gC,MAAM,kBAAmBA,IAGtCgkE,EAAc,SAAqBhkE,GACnC,OAAO,IAAIP,SAAQ,SAASC,EAAS6C,GACjCu+B,EAAMt/B,SAAS,uBAAwB,CACnCxB,MAAOA,EACPq2B,QAAS,SAAiBl8B,GACtBuF,EAAQvF,IAEZm8B,QAAS,SAAiBuW,GACtBtqC,EAAOsqC,UAMnBo3B,EAAU,SAAiBrmE,GAC3B,IAAIU,EAAU0P,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,GAClF,OAAO,IAAIvO,SAAQ,SAASC,EAAS6C,GACjC2hE,EAAS,CAAC,CAAEtmE,OAAQA,EAAQU,QAASA,IAAY,CAAE8U,MAAO9U,EAAQ8U,QAC7D1S,MAAK,SAASunC,GACX,OAAOvoC,EAAQuoC,GAASA,EAAM,OAEjC7iC,MAAM7C,OAIf4hE,EAAiB,SAAwBr9D,GACzC,OAAOA,EAAItI,MAAQsI,EAAIlN,IAGvBwqE,EAAa,SAAoBpkE,EAAO1B,GAWxC,MATqB,iBAAV0B,GAAuBmkE,EAAenkE,IAAW1B,IACxDA,EAAU0B,EACVA,OAAQiO,GAIZ6yB,EAAMt/B,SAAS,cAAepF,OAAOmJ,OAAO,GAAIjH,EAAS,CAAE0B,MAAOA,KAGjB,OAA1C8gC,EAAM9gC,MAAM,kBAAmBA,IAGtCkkE,EAAW,WACX,IACI,IAAI7qC,EAAOrrB,UAAUpT,OAAQ0+B,EAAO,IAAIt+B,MAAMq+B,GAAOE,EAAO,EAC5DA,EAAOF,EACPE,IAEAD,EAAKC,GAAQvrB,UAAUurB,GAE3B,OAAO,IAAI95B,SAAQ,SAASC,EAAS6C,GACjC,IAAI5E,EAAU,GACVW,EAAU,GAGd,GAAIrD,EAAQq+B,EAAK,IACb37B,EAAQjE,KAAK6nB,MAAM5jB,EAAS27B,EAAK,IACjCl9B,OAAOmJ,OAAOjH,EAASg7B,EAAK,IAAM,QAC/B,CAEH,IAAI+qC,EAAe/qC,EAAKA,EAAK1+B,OAAS,GACV,iBAAjBypE,GAA+BA,aAAwB5jE,MAC9DrE,OAAOmJ,OAAOjH,EAASg7B,EAAK/0B,OAIhC5G,EAAQjE,KAAK6nB,MAAM5jB,EAAS27B,GAGhCwH,EAAMt/B,SAAS,YAAa,CACxBymC,MAAOtqC,EACPyV,MAAO9U,EAAQ8U,MACfmuC,kBAAmB1Y,GAAkBC,IACrCzS,QAAS32B,EACT42B,QAAS/zB,QAKjBi1D,EAAW,WACX,OAAO12B,EAAM9gC,MAAM,qBAGnBskE,EAAc,SAAqBtkE,GACnC,OAAO,IAAIP,SAAQ,SAASC,EAAS6C,GACjCu+B,EAAMt/B,SAAS,0BAA2B,CACtCxB,MAAOA,EACPq2B,QAAS,SAAiBl8B,GACtBuF,EAAQvF,IAEZm8B,QAAS,SAAiBuW,GACtBtqC,EAAOsqC,UAMnB03B,EAAe,WACf,IACI,IAAIj6B,EAAQt8B,UAAUpT,OAAQ0+B,EAAO,IAAIt+B,MAAMsvC,GAAQC,EAAQ,EAC/DA,EAAQD,EACRC,IAEAjR,EAAKiR,GAASv8B,UAAUu8B,GAE5B,IAAI5R,EAAU39B,MAAMC,QAAQq+B,EAAK,IAAMA,EAAK,GAAKA,EAC7C2O,EAAQtP,EAAQ/9B,OAAS+9B,EAAU6+B,IACvC,OAAO/3D,QAAQe,IAAIynC,EAAM/tC,IAAI8pE,KAG7BQ,EAAe,WACf,IACI,IAAIC,EAAQz2D,UAAUpT,OAAQ0+B,EAAO,IAAIt+B,MAAMypE,GAAQC,EAAQ,EAC/DA,EAAQD,EACRC,IAEAprC,EAAKorC,GAAS12D,UAAU02D,GAE5B,IAAI/rC,EAAU39B,MAAMC,QAAQq+B,EAAK,IAAMA,EAAK,GAAKA,EACjD,IAAKX,EAAQ/9B,OAAQ,CACjB,IAAI08B,EAAQkgC,IAAW5xD,QAAO,SAASzL,GACnC,QACMA,EAAKsI,SAAWuoC,GAAWE,MAAQ/wC,EAAKsO,SAAWijC,GAAWG,QAChE1xC,EAAKsI,SAAWuoC,GAAWI,YAC3BjxC,EAAKsI,SAAWuoC,GAAWK,qBAC3BlxC,EAAKsI,SAAWuoC,GAAWO,2BAInC,OAAO9rC,QAAQe,IAAI82B,EAAMp9B,IAAIoqE,IAEjC,OAAO7kE,QAAQe,IAAIm4B,EAAQz+B,IAAIoqE,KAG/BK,EAAc,WACd,IACI,IAAIC,EAAQ52D,UAAUpT,OAAQ0+B,EAAO,IAAIt+B,MAAM4pE,GAAQC,EAAQ,EAC/DA,EAAQD,EACRC,IAEAvrC,EAAKurC,GAAS72D,UAAU62D,GAG5B,IAEIvmE,EAFAq6B,EAAU39B,MAAMC,QAAQq+B,EAAK,IAAMA,EAAK,GAAKA,EAGN,iBAAhCX,EAAQA,EAAQ/9B,OAAS,GAChC0D,EAAUq6B,EAAQp0B,MACXvJ,MAAMC,QAAQq+B,EAAK,MAC1Bh7B,EAAUg7B,EAAK,IAGnB,IAAIhC,EAAQkgC,IAEZ,OAAK7+B,EAAQ/9B,OAQO+9B,EACfz+B,KAAI,SAAS8F,GACV,OAAO4G,EAAS5G,GAAUs3B,EAAMt3B,GAASs3B,EAAMt3B,GAAOpG,GAAK,KAAQoG,KAEtE4F,QAAO,SAAS5F,GACb,OAAOA,KAGM9F,KAAI,SAAS4qE,GAC9B,OAAOV,EAAWU,EAAGxmE,MAhBdmB,QAAQe,IACX82B,EAAMp9B,KAAI,SAASsE,GACf,OAAO4lE,EAAW5lE,EAAMF,QAkBpCzE,EAAUuC,OAAOmJ,OACjB,GAEAoG,KACA,GAEAm3D,EACA,GAEAr6B,GAAgB3H,EAAOmM,GACvB,CAKIE,WAAYA,EAOZ82B,QAASA,EAOTC,SAAUA,EAMVtlB,QAASA,EAMT0lB,YAAaA,EAMbN,YAAaA,EAMbI,WAAYA,EAKZW,SAAU,SAAkB/kE,EAAOoT,GAC/B,OAAO0tB,EAAMt/B,SAAS,YAAa,CAAExB,MAAOA,EAAOoT,MAAOA,KAM9DokD,SAAUA,EAKVgN,aAAcA,EAKdG,YAAaA,EAKbJ,aAAcA,EAKdrrD,KAAM,SAAc4nC,GAChB,OAAOhgB,EAAMt/B,SAAS,OAAQ,CAAEs/C,QAASA,KAM7CkkB,OAAQ,WAEJ,IAAIjS,EAAQjyD,EAAKwK,QAAQS,cAAc,oBACnCgnD,GACAA,EAAM8B,SAOd5uC,QAAS,WAELpsB,EAAQwwC,KAAK,UAAWvpC,EAAKwK,SAI7Bw1B,EAAMt/B,SAAS,aAGfV,EAAKuiB,WAGLxhB,OAAO2K,oBAAoB,SAAUo2D,GAGrC9gE,SAAS0K,oBAAoB,mBAAoB81D,GAGjDxhC,EAAMt/B,SAAS,gBAMnBg5B,aAAc,SAAwBlvB,GAClC,OAAOkvB,EAAa15B,EAAKwK,QAASA,IAMtCw4B,YAAa,SAAuBx4B,GAChC,OAAOw4B,EAAYhjC,EAAKwK,QAASA,IAMrC25D,SAAU,SAAkB35D,GACxB,OAAOA,EAAQe,YAAYvL,EAAKwK,UAMpC45D,eAAgB,SAAwB55D,GAEpCkvB,EAAa15B,EAAKwK,QAASA,GAG3BA,EAAQqhB,WAAWC,YAAYthB,GAG/B+2D,EAAkB/2D,GAMtB65D,eAAgB,WACP9C,IAKLv+B,EAAYu+B,EAAiBvhE,EAAKwK,SAGlCxK,EAAKwK,QAAQqhB,WAAWC,YAAY9rB,EAAKwK,SAGzC+2D,EAAkB,OAOtB+C,aAAc,SAAsB95D,GAChC,OAAOxK,EAAKwK,UAAYA,GAAW+2D,IAAoB/2D,GAM3DA,QAAS,CACL8wB,IAAK,WACD,OAAOt7B,EAAKwK,UAOpB7I,OAAQ,CACJ25B,IAAK,WACD,OAAO0E,EAAM9gC,MAAM,kBAUnC,OAHA8gC,EAAMt/B,SAAS,YAGRu4B,EAAalgC,IAGpBwrE,GAAkB,WAClB,IAAIC,EAAgBt3D,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,GAEpFi/B,EAAiB,GAkBrB,OAjBArX,EAAMsX,MAAc,SAASr9B,EAAKhU,GAC9BoxC,EAAep9B,GAAOhU,EAAM,MAItBsmE,GACN/lE,OAAOmJ,OACH,GAEA0nC,EACA,GAEAq4B,KAQRC,GAAuB,SAA8BvgC,GACrD,OAAOA,EAAOm5B,OAAO,GAAG31B,cAAgBxD,EAAO1oC,MAAM,IAGrDkpE,GAA8B,SAAqCC,GACnE,OAAOxH,GAASwH,EAAc5mE,QAAQ,SAAU,MAGhD6mE,GAAY,SAASA,EAAUz+B,EAAQ0+B,GAEvC/vC,EAAM+vC,GAAa,SAASC,EAAUC,GAClCjwC,EAAMqR,GAAQ,SAASrN,EAAU/9B,GAE7B,IAAIiqE,EAAiB,IAAI5H,OAAO0H,GAMhC,GAHcE,EAAeppE,KAAKk9B,YAQ3BqN,EAAOrN,IAGE,IAAZisC,GAKJ,GAAI9hE,EAAS8hE,GACT5+B,EAAO4+B,GAAWhqE,MADtB,CAMA,IAAIg8D,EAAQgO,EAAQhO,MAChBlxD,GAASk/D,KAAa5+B,EAAO4wB,KAC7B5wB,EAAO4wB,GAAS,IAGpB5wB,EAAO4wB,GAAO0N,GAAqB3rC,EAAS/6B,QAAQinE,EAAgB,MAAQjqE,MAI5EgqE,EAAQA,SACRH,EAAUz+B,EAAO4+B,EAAQhO,OAAQgO,EAAQA,aAKjDE,GAAwB,SAA+BpvD,GACvD,IAAIqvD,EACAh4D,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,GAEpEosB,EAAa,GACjBxE,EAAMjf,EAAKyjB,YAAY,SAAShnB,GAC5BgnB,EAAW1gC,KAAKid,EAAKyjB,WAAWhnB,OAGpC,IAAI0hB,EAASsF,EACRx0B,QAAO,SAASqgE,GACb,OAAOA,EAAUzpE,QAEpBsG,QAAO,SAASgE,EAAKm/D,GAClB,IAAIpqE,EAAQyX,EAAKqD,EAAMsvD,EAAUzpE,MAIjC,OAFAsK,EAAI0+D,GAA4BS,EAAUzpE,OACtCX,IAAUoqE,EAAUzpE,MAAcX,EAC/BiL,IACR,IAKP,OAFA4+D,GAAU5wC,EAAQkxC,GAEXlxC,GAGPoxC,GAAqB,SAA4B56D,GACjD,IAAIhN,EAAU0P,UAAUpT,OAAS,QAAsBqT,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,GAG9Eg4D,EAAmB,CAEnB,UAAW,YACX,aAAc,gBACd,YAAa,gBACb,oBAAqB,uBAGrB,UAAW,CACPnO,MAAO,SACPgO,QAAS,CACL,WAAY,CACRhO,MAAO,WAGX,UAAW,CACPA,MAAO,UAGX,SAAU,CACNA,MAAO,SAGX,WAAY,CACRA,MAAO,WAGX,QAAS,CACLA,MAAO,UAMnB,UAAU,EACV,WAAW,GAIf/qB,GAAa,8BAA+Bk5B,GAG5C,IAAIG,EAAgB/pE,OAAOmJ,OAAO,GAAIjH,GAElC8nE,EAAmBL,GACE,aAArBz6D,EAAQuxD,SAA0BvxD,EAAQS,cAAc,oBAAsBT,EAC9E06D,GAIJ5pE,OAAOmX,KAAK6yD,GAAkB5yD,SAAQ,SAAS3D,GACvClJ,GAASy/D,EAAiBv2D,KACrBlJ,GAASw/D,EAAct2D,MACxBs2D,EAAct2D,GAAO,IAEzBzT,OAAOmJ,OAAO4gE,EAAct2D,GAAMu2D,EAAiBv2D,KAEnDs2D,EAAct2D,GAAOu2D,EAAiBv2D,MAM9Cs2D,EAAc7uC,OAASh5B,EAAQg5B,OAAS,IAAIj9B,OACxCW,MAAMyB,KAAK6O,EAAQ+6D,iBAAiB,2BAA2BnsE,KAAI,SAAS64D,GACxE,MAAO,CACHn1D,OAAQm1D,EAAMl3D,MACdyC,QAAS,CACL+C,KAAM0xD,EAAMtnD,QAAQpK,WAOpC,IAAIilE,EAAMjB,GAAgBc,GAa1B,OAVI76D,EAAQgsB,OACRt8B,MAAMyB,KAAK6O,EAAQgsB,OAAO9jB,SAAQ,SAAShV,GACvC8nE,EAAIrC,QAAQzlE,MAKpB8nE,EAAIpB,eAAe55D,GAGZg7D,GAIPC,GAAc,WACd,OAAOhuC,EAAOvqB,UAAUpT,QAAU,OAAIqT,EAAYD,UAAU,IACtDk4D,GAAmB3kD,WAAM,EAAQvT,WACjCq3D,GAAgB9jD,WAAM,EAAQvT,YAGpCw4D,GAAkB,CAAC,OAAQ,QAAS,UAEpCC,GAAe,SAAsBH,GACrC,IAAI7sC,EAAM,GAIV,OAFAiR,GAA6B47B,EAAK7sC,EAAK+sC,IAEhC/sC,GAQPt3B,GAAkB,SAAyB6iC,EAAQ0hC,GACnD,OAAO1hC,EAAOnmC,QAAQ,sBAAsB,SAASslB,EAAO0zC,GACxD,OAAO6O,EAAa7O,OAIxBz4D,GAAe,SAAsB+yB,GACrC,IAAIC,EAAa,IAAI3xB,KAAK,CAAC,IAAK0xB,EAAGn4B,WAAY,OAAQ,CACnDqH,KAAM,2BAGNgxB,EAAY9N,IAAIC,gBAAgB4N,GAChCzyB,EAAS,IAAI2yB,OAAOD,GAExB,MAAO,CACHG,SAAU,SAAkBr0B,EAASI,KACrCqB,KAAM,SAAczB,EAASI,EAAIk0B,GAC7B,IAAI74B,EAAKq4B,KAETtyB,EAAO3B,UAAY,SAASC,GACpBA,EAAET,KAAK5D,KAAOA,GACd2E,EAAGN,EAAET,KAAKW,UAIlBwB,EAAOtB,YACH,CACIzE,GAAIA,EACJuE,QAASA,GAGbs0B,IAGR5yB,UAAW,WACPF,EAAOE,YACP0kB,IAAIK,gBAAgByN,MAK5B1P,GAAY,SAAmBxD,GAC/B,OAAO,IAAI1f,SAAQ,SAASC,EAAS6C,GACjC,IAAIqgB,EAAM,IAAI7T,MACd6T,EAAIxU,OAAS,WACT1O,EAAQkjB,IAEZA,EAAIE,QAAU,SAAS7kB,GACnBsE,EAAOtE,IAEX2kB,EAAI1T,IAAMiQ,MAIdwnD,GAAa,SAAoBnoE,EAAMhC,GACvC,IAAIoqE,EAAcpoE,EAAKlC,MAAM,EAAGkC,EAAK8C,KAAM9C,EAAK6C,MAGhD,OAFAulE,EAAYjwB,iBAAmBn4C,EAAKm4C,iBACpCiwB,EAAYpqE,KAAOA,EACZoqE,GAGPC,GAAW,SAAkBroE,GAC7B,OAAOmoE,GAAWnoE,EAAMA,EAAKhC,OAI7BsqE,GAAoB,GAGpBC,GAAkB,SAAyBhoE,GAE3C,IAAI+nE,GAAkB3sC,SAASp7B,GAA/B,CAKA+nE,GAAkBptE,KAAKqF,GAGvB,IAAIioE,EAAgBjoE,EAAO,CACvBE,UAAWA,GACXC,MAAO,CACHC,KAAMA,GACNy2B,MAAOA,EACP7xB,SAAUA,EACVzE,OAAQA,GACR8C,kBAAmBA,GACnBD,gBAAiBA,GACjB8B,yBAA0BA,GAC1BylB,4BAA6BA,GAC7B1lB,oBAAqBA,GACrB6xB,gBAAiBA,GACjB3xB,mBAAoBA,GACpB7E,YAAaA,EACbD,aAAcA,GACd2Y,WAAYA,EACZzP,cAAeA,GACfqa,UAAWA,GACXkkD,SAAUA,GACVF,WAAYA,GACZ/0C,WAAYA,GACZ4a,iBAAkBA,GAClBv3B,KAAMA,GACNxO,gCAAiCA,IAGrC2B,MAAO,CACHG,iBAAkBA,MAK1BwkC,GAAqBi6B,EAAc1oE,WAInC2oE,GAAc,WACd,MAA4D,uBAArD7qE,OAAOC,UAAUrC,SAAS0B,KAAKmG,OAAOqlE,YAE7CC,GAAc,WACd,MAAO,YAAatlE,QAEpBulE,GAAe,WACf,MAAO,UAAW3mE,KAAKpE,WAEvBgrE,GAAqB,WACrB,MAAO,QAASxlE,QAAU,oBAAqBA,OAAO0iB,KAEtD+iD,GAAgB,WAChB,MAAO,oBAAqBxlE,UAE5BylE,GAAY,WACZ,MAAO,gBAAiB1lE,QAExB2lE,GAAiB,WACjB,MAAO,aAAe3lE,OAAO4lE,KAAO,KAEpCC,GAAS,WACT,MAAO,eAAehrE,KAAKmF,OAAOoiB,UAAUC,YAG5CyjD,IAEIxf,GAEA1yB,MAECwxC,MAEDK,MACAH,MACAC,MACAC,MACAE,OAECC,MAAoBE,MAElB,WACH,OAAOvf,KAOXtvB,GAAQ,CAER+uC,KAAM,IAINprE,GAAO,WAKP21B,GAAK,aAcT,GAbAt4B,EAAQ25C,OAAS,GACjB35C,EAAQguE,WAAa,GACrBhuE,EAAQ6xC,WAAa,GACrB7xC,EAAQiuE,YAAc,GACtBjuE,EAAQ4iB,OAAS0V,GACjBt4B,EAAQosB,QAAUkM,GAClBt4B,EAAQqtC,MAAQ/U,GAChBt4B,EAAQy5C,KAAOnhB,GACft4B,EAAQkuE,eAAiB51C,GACzBt4B,EAAQqzC,WAAa/a,GACrBt4B,EAAQszC,WAAahb,GAGjBw1C,KAAa,CAEb/kC,GACI,WACI/J,GAAM+uC,KAAKp0D,SAAQ,SAAS8yD,GACxB,OAAOA,EAAI7kC,cAGnB,SAASzF,GACLnD,GAAM+uC,KAAKp0D,SAAQ,SAAS8yD,GACxB,OAAOA,EAAI3kC,OAAO3F,SAM9B,IAAIx6B,GAAW,SAASA,IAEpBM,SAASC,cACL,IAAIC,YAAY,kBAAmB,CAC/BC,OAAQ,CACJ0lE,UAAWA,GACXlrD,OAAQ5iB,EAAQ4iB,OAChBwJ,QAASpsB,EAAQosB,QACjBihB,MAAOrtC,EAAQqtC,MACfoM,KAAMz5C,EAAQy5C,KACdy0B,eAAgBluE,EAAQkuE,eACxB56B,WAAYtzC,EAAQszC,eAMhCrrC,SAAS0K,oBAAoB,mBAAoBhL,IAGzB,YAAxBM,SAASg4C,WAETn2B,YAAW,WACP,OAAOniB,OACR,GAEHM,SAASsK,iBAAiB,mBAAoB5K,IAIlD,IAAIwmE,GAAoB,WACpB,OAAOpyC,EAAMsX,MAAc,SAASr9B,EAAKhU,GACrChC,EAAQiuE,YAAYj4D,GAAOhU,EAAM,OAIzChC,EAAQ25C,OAASp3C,OAAOmJ,OAAO,GAAIiuC,IACnC35C,EAAQ6xC,WAAatvC,OAAOmJ,OAAO,GAAImmC,IACvC7xC,EAAQguE,WAAazrE,OAAOmJ,OAAO,GAAIylC,IAEvCnxC,EAAQiuE,YAAc,GACtBE,KAGAnuE,EAAQ4iB,OAAS,WACb,IAAI6pD,EAAMC,GAAYhlD,WAAM,EAAQvT,WAGpC,OAFAs4D,EAAI36D,GAAG,UAAW9R,EAAQosB,SAC1B4S,GAAM+uC,KAAKluE,KAAK4sE,GACTG,GAAaH,IAIxBzsE,EAAQosB,QAAU,SAAiBgiD,GAE/B,IAAIC,EAAgBrvC,GAAM+uC,KAAKzpC,WAAU,SAASmoC,GAC9C,OAAOA,EAAIlB,aAAa6C,MAE5B,OAAIC,GAAiB,IAEPrvC,GAAM+uC,KAAKntC,OAAOytC,EAAe,GAAG,GAG1C/C,kBAEG,IAOftrE,EAAQqtC,MAAQ,SAAeihC,GAY3B,OAVmBntE,MAAMyB,KAAK0rE,EAAQ9B,iBAAiB,IAAM7pE,KAGjCoJ,QAAO,SAASwiE,GACxC,OAAQvvC,GAAM+uC,KAAKt0B,MAAK,SAASgzB,GAC7B,OAAOA,EAAIlB,aAAagD,SAKhBluE,KAAI,SAAS+tE,GACzB,OAAOpuE,EAAQ4iB,OAAOwrD,OAK9BpuE,EAAQy5C,KAAO,SAAc20B,GACzB,IAAI3B,EAAMztC,GAAM+uC,KAAKt0B,MAAK,SAASgzB,GAC/B,OAAOA,EAAIlB,aAAa6C,MAE5B,OAAK3B,EAGEG,GAAaH,GAFT,MAMfzsE,EAAQkuE,eAAiB,WACrB,IACI,IAAI1uC,EAAOrrB,UAAUpT,OAAQytE,EAAU,IAAIrtE,MAAMq+B,GAAOE,EAAO,EAC/DA,EAAOF,EACPE,IAEA8uC,EAAQ9uC,GAAQvrB,UAAUurB,GAI9B8uC,EAAQ70D,QAAQuzD,IAGhBiB,MAGJnuE,EAAQqzC,WAAa,WACjB,IAAIE,EAAO,GAIX,OAHAxX,EAAMsX,MAAc,SAASr9B,EAAKhU,GAC9BuxC,EAAKv9B,GAAOhU,EAAM,MAEfuxC,GAGXvzC,EAAQszC,WAAa,SAAsBC,GAYvC,OAXIzmC,GAASymC,KAETvU,GAAM+uC,KAAKp0D,SAAQ,SAAS8yD,GACxBA,EAAIn5B,WAAWC,MAInBD,GAAWC,IAIRvzC,EAAQqzC,cAIvBrzC,EAAQ8tE,UAAYA,GAEpBvrE,OAAOkvB,eAAezxB,EAAS,aAAc,CAAEgC,OAAO,IAl3YhDqG,CAAQrI,gCCRlB,IACMyuE,EADFC,EAEK,WAUL,YAToB,IAATD,IAMTA,EAAOE,QAAQ3mE,QAAUC,UAAYA,SAAStB,MAAQqB,OAAO+pB,OAGxD08C,GAIPG,EAAY,WACd,IAAIH,EAAO,GACX,OAAO,SAAkBh6D,GACvB,QAA4B,IAAjBg6D,EAAKh6D,GAAyB,CACvC,IAAIo6D,EAAc5mE,SAASiK,cAAcuC,GAEzC,GAAIzM,OAAO8mE,mBAAqBD,aAAuB7mE,OAAO8mE,kBAC5D,IAGED,EAAcA,EAAYE,gBAAgBC,KAC1C,MAAO5qE,GAEPyqE,EAAc,KAIlBJ,EAAKh6D,GAAUo6D,EAGjB,OAAOJ,EAAKh6D,IApBA,GAwBZw6D,EAAc,GAElB,SAASC,EAAqBC,GAG5B,IAFA,IAAIpqE,GAAU,EAELrE,EAAI,EAAGA,EAAIuuE,EAAYluE,OAAQL,IACtC,GAAIuuE,EAAYvuE,GAAGyuE,aAAeA,EAAY,CAC5CpqE,EAASrE,EACT,MAIJ,OAAOqE,EAGT,SAASqqE,EAAalvE,EAAMuE,GAI1B,IAHA,IAAI4qE,EAAa,GACbC,EAAc,GAET5uE,EAAI,EAAGA,EAAIR,EAAKa,OAAQL,IAAK,CACpC,IAAIJ,EAAOJ,EAAKQ,GACZX,EAAK0E,EAAQsmC,KAAOzqC,EAAK,GAAKmE,EAAQsmC,KAAOzqC,EAAK,GAClDq7C,EAAQ0zB,EAAWtvE,IAAO,EAC1BovE,EAAa,GAAG3uE,OAAOT,EAAI,KAAKS,OAAOm7C,GAC3C0zB,EAAWtvE,GAAM47C,EAAQ,EACzB,IAAIpiC,EAAQ21D,EAAqBC,GAC7BliE,EAAM,CACRsiE,IAAKjvE,EAAK,GACVkvE,MAAOlvE,EAAK,GACZmvE,UAAWnvE,EAAK,KAGH,IAAXiZ,GACF01D,EAAY11D,GAAOm2D,aACnBT,EAAY11D,GAAOo2D,QAAQ1iE,IAE3BgiE,EAAYpvE,KAAK,CACfsvE,WAAYA,EACZQ,QAASC,EAAS3iE,EAAKxI,GACvBirE,WAAY,IAIhBJ,EAAYzvE,KAAKsvE,GAGnB,OAAOG,EAGT,SAASO,EAAmBprE,GAC1B,IAAIuX,EAAQ/T,SAASmK,cAAc,SAC/BmuB,EAAa97B,EAAQ87B,YAAc,GAEvC,QAAgC,IAArBA,EAAWuvC,MAAuB,CAC3C,IAAIA,EAAmD,KAEnDA,IACFvvC,EAAWuvC,MAAQA,GAQvB,GAJAvtE,OAAOmX,KAAK6mB,GAAY5mB,SAAQ,SAAU3D,GACxCgG,EAAMpC,aAAa5D,EAAKuqB,EAAWvqB,OAGP,mBAAnBvR,EAAQsrE,OACjBtrE,EAAQsrE,OAAO/zD,OACV,CACL,IAAIvH,EAASm6D,EAAUnqE,EAAQsrE,QAAU,QAEzC,IAAKt7D,EACH,MAAM,IAAIu7D,MAAM,2GAGlBv7D,EAAOjC,YAAYwJ,GAGrB,OAAOA,EAcT,IACMi0D,EADFC,GACED,EAAY,GACT,SAAiB12D,EAAO42D,GAE7B,OADAF,EAAU12D,GAAS42D,EACZF,EAAUlkE,OAAO4iE,SAASluE,KAAK,QAI1C,SAAS2vE,EAAoBp0D,EAAOzC,EAAO8qB,EAAQp3B,GACjD,IAAIsiE,EAAMlrC,EAAS,GAAKp3B,EAAIuiE,MAAQ,UAAUhvE,OAAOyM,EAAIuiE,MAAO,MAAMhvE,OAAOyM,EAAIsiE,IAAK,KAAOtiE,EAAIsiE,IAIjG,GAAIvzD,EAAMq0D,WACRr0D,EAAMq0D,WAAW59C,QAAUy9C,EAAY32D,EAAOg2D,OACzC,CACL,IAAIe,EAAUroE,SAAS4iD,eAAe0kB,GAClC/zD,EAAaQ,EAAMR,WAEnBA,EAAWjC,IACbyC,EAAM+W,YAAYvX,EAAWjC,IAG3BiC,EAAWza,OACbib,EAAM2kB,aAAa2vC,EAAS90D,EAAWjC,IAEvCyC,EAAMxJ,YAAY89D,IAKxB,SAASC,EAAWv0D,EAAOvX,EAASwI,GAClC,IAAIsiE,EAAMtiE,EAAIsiE,IACVC,EAAQviE,EAAIuiE,MACZC,EAAYxiE,EAAIwiE,UAepB,GAbID,EACFxzD,EAAMpC,aAAa,QAAS41D,GAE5BxzD,EAAM4X,gBAAgB,SAGpB67C,GAA6B,oBAATpsE,OACtBksE,GAAO,uDAAuD/uE,OAAO6C,KAAKE,SAASC,mBAAmBC,KAAKC,UAAU+rE,MAAe,QAMlIzzD,EAAMq0D,WACRr0D,EAAMq0D,WAAW59C,QAAU88C,MACtB,CACL,KAAOvzD,EAAMw0D,YACXx0D,EAAM+W,YAAY/W,EAAMw0D,YAG1Bx0D,EAAMxJ,YAAYvK,SAAS4iD,eAAe0kB,KAI9C,IAAIkB,EAAY,KACZC,EAAmB,EAEvB,SAASd,EAAS3iE,EAAKxI,GACrB,IAAIuX,EACA20D,EACAtsC,EAEJ,GAAI5/B,EAAQgsE,UAAW,CACrB,IAAIG,EAAaF,IACjB10D,EAAQy0D,IAAcA,EAAYZ,EAAmBprE,IACrDksE,EAASP,EAAoBn3C,KAAK,KAAMjd,EAAO40D,GAAY,GAC3DvsC,EAAS+rC,EAAoBn3C,KAAK,KAAMjd,EAAO40D,GAAY,QAE3D50D,EAAQ6zD,EAAmBprE,GAC3BksE,EAASJ,EAAWt3C,KAAK,KAAMjd,EAAOvX,GAEtC4/B,EAAS,YAxFb,SAA4BroB,GAE1B,GAAyB,OAArBA,EAAM8W,WACR,OAAO,EAGT9W,EAAM8W,WAAWC,YAAY/W,GAmFzB60D,CAAmB70D,IAKvB,OADA20D,EAAO1jE,GACA,SAAqB6jE,GAC1B,GAAIA,EAAQ,CACV,GAAIA,EAAOvB,MAAQtiE,EAAIsiE,KAAOuB,EAAOtB,QAAUviE,EAAIuiE,OAASsB,EAAOrB,YAAcxiE,EAAIwiE,UACnF,OAGFkB,EAAO1jE,EAAM6jE,QAEbzsC,KAKNvkC,EAAOE,QAAU,SAAUE,EAAMuE,IAC/BA,EAAUA,GAAW,IAGRgsE,WAA0C,kBAAtBhsE,EAAQgsE,YACvChsE,EAAQgsE,UAAY/B,KAItB,IAAIqC,EAAkB3B,EADtBlvE,EAAOA,GAAQ,GAC0BuE,GACzC,OAAO,SAAgBusE,GAGrB,GAFAA,EAAUA,GAAW,GAE2B,mBAA5CzuE,OAAOC,UAAUrC,SAAS0B,KAAKmvE,GAAnC,CAIA,IAAK,IAAItwE,EAAI,EAAGA,EAAIqwE,EAAgBhwE,OAAQL,IAAK,CAC/C,IACI6Y,EAAQ21D,EADK6B,EAAgBrwE,IAEjCuuE,EAAY11D,GAAOm2D,aAKrB,IAFA,IAAIuB,EAAqB7B,EAAa4B,EAASvsE,GAEtCzD,EAAK,EAAGA,EAAK+vE,EAAgBhwE,OAAQC,IAAM,CAClD,IAEI4zD,EAASsa,EAFK6B,EAAgB/vE,IAIK,IAAnCiuE,EAAYra,GAAQ8a,aACtBT,EAAYra,GAAQ+a,UAEpBV,EAAYruC,OAAOg0B,EAAQ,IAI/Bmc,EAAkBE,OCzQlBC,EAA2B,GAG/B,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBh9D,IAAjBi9D,EACH,OAAOA,EAAarxE,QAGrB,IAAIF,EAASoxE,EAAyBE,GAAY,CACjDrxE,GAAIqxE,EAEJpxE,QAAS,IAOV,OAHAsxE,EAAoBF,GAAUvvE,KAAK/B,EAAOE,QAASF,EAAQA,EAAOE,QAASmxE,GAGpErxE,EAAOE,QCpBfmxE,EAAoB7uE,EAAKxC,IACxB,IAAI0jC,EAAS1jC,GAAUA,EAAOyxE,WAC7B,IAAOzxE,EAAiB,QACxB,IAAM,EAEP,OADAqxE,EAAoB50D,EAAEinB,EAAQ,CAAEzsB,EAAGysB,IAC5BA,GCLR2tC,EAAoB50D,EAAI,CAACvc,EAASggC,KACjC,IAAI,IAAIhqB,KAAOgqB,EACXmxC,EAAoBhvE,EAAE69B,EAAYhqB,KAASm7D,EAAoBhvE,EAAEnC,EAASgW,IAC5EzT,OAAOkvB,eAAezxB,EAASgW,EAAK,CAAEg4B,YAAY,EAAMzL,IAAKvC,EAAWhqB,MCJ3Em7D,EAAoBhvE,EAAI,CAAC8K,EAAKi4B,IAAU3iC,OAAOC,UAAUy9B,eAAep+B,KAAKoL,EAAKi4B,2OCG9EzgC,EAAU,CAEdA,OAAiB,OACjBA,WAAoB,GAEP,IAAI,IAASA,GAIX,yBCTX,EAAU,CAEd,OAAiB,OACjB,WAAoB,GAEP,IAAI,IAAS,GAIX,WCSf+sE,EAAEvpE,UAAUwpE,OAAM,WAClB,IAAIC,EAEAC,EAAAA,eACIC,IACAC,IACAC,IACAC,IACAC,IACAC,IACAC,IACAC,IACAC,KAIJ,IAAMC,EAAgBV,EAAAA,OAAiB1pE,SAASiK,cAAc,oBAC9DogE,eAAeC,QAAQ,kBAAmB,GAE1CF,EAAc/+B,WAAW,CACrBqC,UAAW,4EACXpB,SAAU,EACVd,UAAU,EACV3uB,eAAe,EACfhd,iBAAgB,EAChBsE,yBAAyB,EACzB8nC,cAAa,EACb7qC,YAAY,QACZS,yBAA0B,0BAC1BG,sBAAuB,2CACvBmB,kBAAkB,CAAC,aAKvBinE,EAAcr6B,UAAY,SAAC/1C,EAAK3B,GAC5B,IAAI2B,EAAJ,CAGI,IAAIyvE,EAAUpxE,EAAKkyE,uBACfvnE,EAAW3K,EAAK2K,SACpBumE,EAAEiB,KAAK,CACHntD,IAAM,0BACN0mB,QAAS,CAAC,eAAgBwlC,EAAE,2BAA2B/3D,KAAK,YAC5DjS,KAAO,OACP7D,KAAO,CAAE,KAAQ+tE,EAAS,SAAYzmE,GACtCuxB,QAAS,SAAUwd,KACnBvd,QAAS,SAASud,OAGtBs4B,eAAeC,QAAQ,kBAAmB,KAKlDF,EAAc95B,aAAc,SAACt2C,EAAK3B,GAC9B,IAAIm9B,EAAQ40C,EAAc1U,WAC1B,IAAI17D,EAAJ,CAGI,IAAIgJ,EAAW3K,EAAK2K,SACpBumE,EAAEiB,KAAK,CACHntD,IAAM,6BACN0mB,QAAS,CAAC,eAAgBwlC,EAAE,2BAA2B/3D,KAAK,YAC5DjS,KAAO,OACP7D,KAAO,CAAC,SAAYsH,GACpBuxB,QAAS,SAAUwd,KACnBvd,QAAS,SAASud,OAGV,GAATvc,GACC60C,eAAeC,QAAQ,kBAAmB,KAMtD,IAAMG,EAAoBf,EAAAA,OAAiB1pE,SAASiK,cAAc,cAClEwgE,EAAkBp/B,WAAW,CACzBqC,UAAW,4EACXpB,SAAU,EACVd,UAAU,EACV3uB,eAAe,EACfhd,iBAAgB,EAChBsE,yBAAyB,EACzB8nC,cAAa,EACb7qC,YAAY,QACZS,yBAA0B,0BAC1BG,sBAAuB,2CACvBmB,kBAAkB,CAAC,mBAAmB,kBAAkB,kBAAmB,aAG/EknE,eAAeC,QAAQ,sBAAuB,GAG9CG,EAAkB16B,UAAY,SAAC/1C,EAAK3B,GAChC,IAAI2B,EAAJ,CAGI,IAAIyvE,EAAUpxE,EAAKkyE,uBACfvnE,EAAW3K,EAAK2K,SACpBumE,EAAEiB,KAAK,CACHntD,IAAM,2BACN0mB,QAAS,CAAC,eAAgBwlC,EAAE,2BAA2B/3D,KAAK,YAC5DjS,KAAO,OACP7D,KAAO,CAAE,KAAQ+tE,EAAS,SAAYzmE,GACtCuxB,QAAS,SAAUwd,KACnBvd,QAAS,SAASud,OAGtBs4B,eAAeC,QAAQ,sBAAuB,KAKtDG,EAAkBn6B,aAAc,SAACt2C,EAAK3B,GAClC,IAAIm9B,EAAQi1C,EAAkB/U,WAC9B,IAAI17D,EAAJ,CAGI,IAAIgJ,EAAW3K,EAAK2K,SACpBumE,EAAEiB,KAAK,CACHntD,IAAM,4BACN0mB,QAAS,CAAC,eAAgBwlC,EAAE,2BAA2B/3D,KAAK,YAC5DjS,KAAO,OACP7D,KAAO,CAAC,SAAYsH,GACpBuxB,QAAS,SAAUwd,KACnBvd,QAAS,SAASud,OAGV,GAATvc,GACC60C,eAAeC,QAAQ,sBAAuB,KAM1DD,eAAeC,QAAQ,gBAAiB,GACxC,IAAMI,EAAmBhB,EAAAA,OAAiB1pE,SAASiK,cAAc,WACjEygE,EAAiBr/B,WAAW,CACxBqC,UAAW,4EACXxnC,gBAAe,EACf2W,eAAc,EACd6J,mBAAoB,GACpBvgB,qBAAsB,MACtBuhB,uBAAwB,IACxBC,wBAAyB,IACzBH,gBAAgB,QAChBspB,iBAAkB,iBAClBK,2BAA4B,gBAC5BC,+BAAgC,eAChCH,8BAA+B,YAC/BC,+BAAgC,eAChCjmC,gBAAe,EACfC,qCAAqC,kBACrCrL,iBAAgB,EAChBytC,OAAQ,CACJjwB,IAAK,gBACL0mB,QAAS,CACL,eAAgBwlC,EAAE,2BAA2B/3D,KAAK,aAG1DuyB,QAAS,CACL,eAAgBwlC,EAAE,2BAA2B/3D,KAAK,cAM1Dk5D,EAAiB36B,UAAY,SAAC/1C,EAAK3B,GAE/B,GAAI2B,EAIA,OAHAuvE,EAAE,yBAAyB/3D,KAAK,YAAY,QAE5C+3D,EAAE,mBAAmBoB,SAGrBpB,EAAE,yBAAyBqB,WAAW,YACtCrB,EAAE,mBAAmBsB,UACrBpB,EAAUpxE,EAAKkyE,uBACfF,eAAeC,QAAQ,gBAAiB,IAMhDI,EAAiBp6B,aAAc,SAACt2C,EAAK3B,GAC7B2B,EAEAuvE,EAAE,yBAAyB/3D,KAAK,YAAY,IAG5C+3D,EAAE,yBAAyBqB,WAAW,YACtCrB,EAAE,mBAAmBsB,UACrBR,eAAeC,QAAQ,gBAAiB,KAMhD,IAAMQ,EAAUpB,EAAAA,OAAiB1pE,SAASiK,cAAc,SACxD6gE,EAAQz/B,WAAW,CACfqC,UAAW,4EACX7wB,eAAc,EACdhd,iBAAgB,EAChB2rC,UAAU,EACVrnC,yBAAyB,EACzB/C,YAAY,QACZS,yBAA0B,0BAC1BG,sBAAuB,2CACvBmB,kBAAkB,CAAC,mBACnBmqC,OAAQ,CACJjwB,IAAK,OACL0mB,QAAS,CACL,eAAgBwlC,EAAE,2BAA2B/3D,KAAK,aAG1DuyB,QAAS,CACL,eAAgBwlC,EAAE,2BAA2B/3D,KAAK,cAM1Ds5D,EAAQ/6B,UAAY,SAAC/1C,EAAK3B,GAEtB,GAAI2B,EAIA,OAHAuvE,EAAE,yBAAyB/3D,KAAK,YAAY,QAE5C+3D,EAAE,iBAAiBoB,SAGnBpB,EAAE,yBAAyBqB,WAAW,YACtCrB,EAAE,iBAAiBsB,UACnBpB,EAAUpxE,EAAKkyE,uBACfhB,EAAE,oBAAoBrc,IAAIuc,IAKlCqB,EAAQx6B,aAAc,SAACt2C,EAAK3B,GACpB2B,EAEAuvE,EAAE,yBAAyB/3D,KAAK,YAAY,IAG5C+3D,EAAE,yBAAyBqB,WAAW,YACtCrB,EAAE,iBAAiBsB,UACnBtB,EAAE,oBAAoBrc,IAAI","sources":["webpack:///./node_modules/filepond-plugin-image-edit/dist/filepond-plugin-image-edit.css","webpack:///./node_modules/filepond-plugin-image-preview/dist/filepond-plugin-image-preview.css","webpack:///./node_modules/css-loader/dist/runtime/api.js","webpack:///./node_modules/css-loader/dist/runtime/cssWithMappingToString.js","webpack:///./node_modules/filepond-plugin-file-encode/dist/filepond-plugin-file-encode.js","webpack:///./node_modules/filepond-plugin-file-validate-size/dist/filepond-plugin-file-validate-size.js","webpack:///./node_modules/filepond-plugin-file-validate-type/dist/filepond-plugin-file-validate-type.js","webpack:///./node_modules/filepond-plugin-image-crop/dist/filepond-plugin-image-crop.js","webpack:///./node_modules/filepond-plugin-image-edit/dist/filepond-plugin-image-edit.js","webpack:///./node_modules/filepond-plugin-image-exif-orientation/dist/filepond-plugin-image-exif-orientation.js","webpack:///./node_modules/filepond-plugin-image-preview/dist/filepond-plugin-image-preview.js","webpack:///./node_modules/filepond-plugin-image-resize/dist/filepond-plugin-image-resize.js","webpack:///./node_modules/filepond-plugin-image-transform/dist/filepond-plugin-image-transform.js","webpack:///./node_modules/filepond/dist/filepond.js","webpack:///./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///./node_modules/filepond-plugin-image-preview/dist/filepond-plugin-image-preview.css?3692","webpack:///./node_modules/filepond-plugin-image-edit/dist/filepond-plugin-image-edit.css?4e09","webpack:///./resources/js/filepond.js"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"/*!\\n * FilePondPluginImageEdit 1.6.3\\n * Licensed under MIT, https://opensource.org/licenses/MIT/\\n * Please visit https://pqina.nl/filepond/ for details.\\n */.filepond--action-edit-item.filepond--action-edit-item{height:2em;padding:.1875em;width:2em}.filepond--action-edit-item.filepond--action-edit-item[data-align*=center]{margin-left:-.1875em}.filepond--action-edit-item.filepond--action-edit-item[data-align*=bottom]{margin-bottom:-.1875em}.filepond--action-edit-item-alt{background:transparent;border:none;color:inherit;font-family:inherit;line-height:inherit;margin:0 0 0 .25em;outline:none;padding:0;pointer-events:all;position:absolute}.filepond--action-edit-item-alt svg{height:1.3125em;width:1.3125em}.filepond--action-edit-item-alt span{font-size:0;opacity:0}.filepond--root[data-style-panel-layout~=circle] .filepond--action-edit-item{opacity:1!important;visibility:visible!important}\", \"\",{\"version\":3,\"sources\":[\"webpack://./node_modules/filepond-plugin-image-edit/dist/filepond-plugin-image-edit.css\"],\"names\":[],\"mappings\":\"AAAA;;;;EAIE,CAGF,uDAEE,UAAW,CACX,eAAiB,CAFjB,SAGF,CAEA,2EACE,oBACF,CAEA,2EACE,sBACF,CAEA,gCAGE,sBAAuB,CAFvB,WAAY,CAIZ,aAAc,CADd,mBAAoB,CAFpB,mBAAoB,CAMpB,kBAAoB,CAFpB,YAAa,CACb,SAAU,CAEV,kBAAmB,CACnB,iBACF,CAEA,oCAEE,eAAgB,CADhB,cAEF,CAEA,qCACE,WAAY,CACZ,SACF,CACA,6EACE,mBAAqB,CACrB,4BACF\",\"sourcesContent\":[\"/*!\\n * FilePondPluginImageEdit 1.6.3\\n * Licensed under MIT, https://opensource.org/licenses/MIT/\\n * Please visit https://pqina.nl/filepond/ for details.\\n */\\n\\n/* eslint-disable */\\n.filepond--action-edit-item.filepond--action-edit-item {\\n  width: 2em;\\n  height: 2em;\\n  padding: 0.1875em;\\n}\\n\\n.filepond--action-edit-item.filepond--action-edit-item[data-align*='center'] {\\n  margin-left: -0.1875em;\\n}\\n\\n.filepond--action-edit-item.filepond--action-edit-item[data-align*='bottom'] {\\n  margin-bottom: -0.1875em;\\n}\\n\\n.filepond--action-edit-item-alt {\\n  border: none;\\n  line-height: inherit;\\n  background: transparent;\\n  font-family: inherit;\\n  color: inherit;\\n  outline: none;\\n  padding: 0;\\n  margin: 0 0 0 0.25em;\\n  pointer-events: all;\\n  position: absolute;\\n}\\n\\n.filepond--action-edit-item-alt svg {\\n  width: 1.3125em;\\n  height: 1.3125em;\\n}\\n\\n.filepond--action-edit-item-alt span {\\n  font-size: 0;\\n  opacity: 0;\\n}\\n.filepond--root[data-style-panel-layout~='circle'] .filepond--action-edit-item {\\n  opacity: 1 !important;\\n  visibility: visible !important;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"/*!\\n * FilePondPluginImagePreview 4.6.10\\n * Licensed under MIT, https://opensource.org/licenses/MIT/\\n * Please visit https://pqina.nl/filepond/ for details.\\n */.filepond--image-preview-markup{left:0;position:absolute;top:0}.filepond--image-preview-wrapper{z-index:2}.filepond--image-preview-overlay{display:block;left:0;margin:0;max-height:7rem;min-height:5rem;opacity:0;pointer-events:none;position:absolute;top:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:100%;z-index:2}.filepond--image-preview-overlay svg{color:inherit;height:auto;max-height:inherit;width:100%}.filepond--image-preview-overlay-idle{color:rgba(40,40,40,.85);mix-blend-mode:multiply}.filepond--image-preview-overlay-success{color:#369763;mix-blend-mode:normal}.filepond--image-preview-overlay-failure{color:#c44e47;mix-blend-mode:normal}@supports (-webkit-marquee-repetition:infinite) and ((-o-object-fit:fill) or (object-fit:fill)){.filepond--image-preview-overlay-idle{mix-blend-mode:normal}}.filepond--image-preview-wrapper{background:rgba(0,0,0,.01);border-radius:.45em;height:100%;left:0;margin:0;overflow:hidden;position:absolute;right:0;top:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.filepond--image-preview{align-items:center;background:#222;display:flex;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%;will-change:transform,opacity;z-index:1}.filepond--image-clip{margin:0 auto;overflow:hidden;position:relative}.filepond--image-clip[data-transparency-indicator=grid] canvas,.filepond--image-clip[data-transparency-indicator=grid] img{background-color:#fff;background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg' fill='%23eee'%3E%3Cpath d='M0 0h50v50H0M50 50h50v50H50'/%3E%3C/svg%3E\\\");background-size:1.25em 1.25em}.filepond--image-bitmap,.filepond--image-vector{left:0;position:absolute;top:0;will-change:transform}.filepond--root[data-style-panel-layout~=integrated] .filepond--image-preview-wrapper{border-radius:0}.filepond--root[data-style-panel-layout~=integrated] .filepond--image-preview{align-items:center;display:flex;height:100%;justify-content:center}.filepond--root[data-style-panel-layout~=circle] .filepond--image-preview-wrapper{border-radius:99999rem}.filepond--root[data-style-panel-layout~=circle] .filepond--image-preview-overlay{bottom:0;top:auto;-webkit-transform:scaleY(-1);transform:scaleY(-1)}.filepond--root[data-style-panel-layout~=circle] .filepond--file .filepond--file-action-button[data-align*=bottom]:not([data-align*=center]){margin-bottom:.325em}.filepond--root[data-style-panel-layout~=circle] .filepond--file [data-align*=left]{left:calc(50% - 3em)}.filepond--root[data-style-panel-layout~=circle] .filepond--file [data-align*=right]{right:calc(50% - 3em)}.filepond--root[data-style-panel-layout~=circle] .filepond--progress-indicator[data-align*=bottom][data-align*=left],.filepond--root[data-style-panel-layout~=circle] .filepond--progress-indicator[data-align*=bottom][data-align*=right]{margin-bottom:.5125em}.filepond--root[data-style-panel-layout~=circle] .filepond--progress-indicator[data-align*=bottom][data-align*=center]{margin-bottom:.1875em;margin-left:.1875em;margin-top:0}\", \"\",{\"version\":3,\"sources\":[\"webpack://./node_modules/filepond-plugin-image-preview/dist/filepond-plugin-image-preview.css\"],\"names\":[],\"mappings\":\"AAAA;;;;EAIE,CAGF,gCAEE,MAAO,CADP,iBAAkB,CAElB,KACF,CACA,iCACE,SACF,CACA,iCACE,aAAc,CAEd,MAAO,CAKP,QAAS,CADT,eAAgB,CADhB,eAAgB,CAGhB,SAAU,CAEV,mBAAoB,CATpB,iBAAkB,CAElB,KAAM,CAQN,wBAAyB,CACzB,qBAAsB,CACtB,oBAAqB,CACrB,gBAAiB,CAVjB,UAAW,CAKX,SAMF,CACA,qCAGE,aAAc,CADd,WAAY,CAEZ,kBAAmB,CAHnB,UAIF,CACA,sCAEE,wBAA6B,CAD7B,uBAEF,CACA,yCAEE,aAA2B,CAD3B,qBAEF,CACA,yCAEE,aAA2B,CAD3B,qBAEF,CAEA,gGAEE,sCACE,qBACF,CACF,CACA,iCAoBE,0BAA+B,CAJ/B,mBAAqB,CAJrB,WAAY,CAHZ,MAAO,CAIP,QAAS,CAIT,eAAgB,CAThB,iBAAkB,CAGlB,OAAQ,CADR,KAAM,CARN,wBAAyB,CACzB,qBAAsB,CACtB,oBAAqB,CACrB,gBAgBF,CACA,yBAME,kBAAmB,CAInB,eAAgB,CALhB,YAAa,CAEb,WAAY,CALZ,MAAO,CAOP,mBAAoB,CARpB,iBAAkB,CAElB,KAAM,CAKN,UAAW,CAKX,6BAA+B,CAT/B,SAUF,CACA,sBAGE,aAAc,CADd,eAAgB,CADhB,iBAKF,CACA,2HAEE,qBAAsB,CACtB,8LAAyM,CACzM,6BACF,CACA,gDAGE,MAAO,CADP,iBAAkB,CAElB,KAAM,CACN,qBACF,CACA,sFAEE,eACF,CACA,8EAKE,kBAAmB,CAFnB,YAAa,CADb,WAAY,CAEZ,sBAEF,CACA,kFAEE,sBACF,CACA,kFAGE,QAAS,CADT,QAAS,CAET,4BAA6B,CAC7B,oBACF,CACA,6IAGE,oBACF,CACA,oFAGE,oBACF,CACA,qFAGE,qBACF,CACA,2OAIE,qBACF,CACA,uHAGE,qBAAuB,CACvB,mBAAqB,CAFrB,YAGF\",\"sourcesContent\":[\"/*!\\n * FilePondPluginImagePreview 4.6.10\\n * Licensed under MIT, https://opensource.org/licenses/MIT/\\n * Please visit https://pqina.nl/filepond/ for details.\\n */\\n\\n/* eslint-disable */\\n.filepond--image-preview-markup {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\\n.filepond--image-preview-wrapper {\\n  z-index: 2;\\n}\\n.filepond--image-preview-overlay {\\n  display: block;\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  width: 100%;\\n  min-height: 5rem;\\n  max-height: 7rem;\\n  margin: 0;\\n  opacity: 0;\\n  z-index: 2;\\n  pointer-events: none;\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  user-select: none;\\n}\\n.filepond--image-preview-overlay svg {\\n  width: 100%;\\n  height: auto;\\n  color: inherit;\\n  max-height: inherit;\\n}\\n.filepond--image-preview-overlay-idle {\\n  mix-blend-mode: multiply;\\n  color: rgba(40, 40, 40, 0.85);\\n}\\n.filepond--image-preview-overlay-success {\\n  mix-blend-mode: normal;\\n  color: rgba(54, 151, 99, 1);\\n}\\n.filepond--image-preview-overlay-failure {\\n  mix-blend-mode: normal;\\n  color: rgba(196, 78, 71, 1);\\n}\\n/* disable for Safari as mix-blend-mode causes the overflow:hidden of the parent container to not work */\\n@supports (-webkit-marquee-repetition: infinite) and\\n  ((-o-object-fit: fill) or (object-fit: fill)) {\\n  .filepond--image-preview-overlay-idle {\\n    mix-blend-mode: normal;\\n  }\\n}\\n.filepond--image-preview-wrapper {\\n  /* no interaction */\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  user-select: none;\\n\\n  /* have preview fill up all available space */\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  right: 0;\\n  height: 100%;\\n  margin: 0;\\n\\n  /* radius is .05em less to prevent the panel background color from shining through */\\n  border-radius: 0.45em;\\n  overflow: hidden;\\n\\n  /* this seems to prevent Chrome from redrawing this layer constantly */\\n  background: rgba(0, 0, 0, 0.01);\\n}\\n.filepond--image-preview {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  z-index: 1;\\n  display: flex; /* this aligns the graphic vertically if the panel is higher than the image */\\n  align-items: center;\\n  height: 100%;\\n  width: 100%;\\n  pointer-events: none;\\n  background: #222;\\n\\n  /* will be animated */\\n  will-change: transform, opacity;\\n}\\n.filepond--image-clip {\\n  position: relative;\\n  overflow: hidden;\\n  margin: 0 auto;\\n\\n  /* transparency indicator (currently only supports grid or basic color) */\\n}\\n.filepond--image-clip[data-transparency-indicator='grid'] img,\\n.filepond--image-clip[data-transparency-indicator='grid'] canvas {\\n  background-color: #fff;\\n  background-image: url(\\\"data:image/svg+xml,%3Csvg viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg' fill='%23eee'%3E%3Cpath d='M0 0 H50 V50 H0'/%3E%3Cpath d='M50 50 H100 V100 H50'/%3E%3C/svg%3E\\\");\\n  background-size: 1.25em 1.25em;\\n}\\n.filepond--image-bitmap,\\n.filepond--image-vector {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  will-change: transform;\\n}\\n.filepond--root[data-style-panel-layout~='integrated']\\n  .filepond--image-preview-wrapper {\\n  border-radius: 0;\\n}\\n.filepond--root[data-style-panel-layout~='integrated']\\n  .filepond--image-preview {\\n  height: 100%;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n}\\n.filepond--root[data-style-panel-layout~='circle']\\n  .filepond--image-preview-wrapper {\\n  border-radius: 99999rem;\\n}\\n.filepond--root[data-style-panel-layout~='circle']\\n  .filepond--image-preview-overlay {\\n  top: auto;\\n  bottom: 0;\\n  -webkit-transform: scaleY(-1);\\n  transform: scaleY(-1);\\n}\\n.filepond--root[data-style-panel-layout~='circle']\\n  .filepond--file\\n  .filepond--file-action-button[data-align*='bottom']:not([data-align*='center']) {\\n  margin-bottom: 0.325em;\\n}\\n.filepond--root[data-style-panel-layout~='circle']\\n  .filepond--file\\n  [data-align*='left'] {\\n  left: calc(50% - 3em);\\n}\\n.filepond--root[data-style-panel-layout~='circle']\\n  .filepond--file\\n  [data-align*='right'] {\\n  right: calc(50% - 3em);\\n}\\n.filepond--root[data-style-panel-layout~='circle']\\n  .filepond--progress-indicator[data-align*='bottom'][data-align*='left'],\\n.filepond--root[data-style-panel-layout~='circle']\\n  .filepond--progress-indicator[data-align*='bottom'][data-align*='right'] {\\n  margin-bottom: calc(0.325em + 0.1875em);\\n}\\n.filepond--root[data-style-panel-layout~='circle']\\n  .filepond--progress-indicator[data-align*='bottom'][data-align*='center'] {\\n  margin-top: 0;\\n  margin-bottom: 0.1875em;\\n  margin-left: 0.1875em;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (cssWithMappingToString) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join(\"\");\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === \"string\") {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, \"\"]];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};","\"use strict\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr && (typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]); if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nmodule.exports = function cssWithMappingToString(item) {\n  var _item = _slicedToArray(item, 4),\n      content = _item[1],\n      cssMapping = _item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (typeof btoa === \"function\") {\n    // eslint-disable-next-line no-undef\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || \"\").concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join(\"\\n\");\n  }\n\n  return [content].join(\"\\n\");\n};","/*!\n * FilePondPluginFileEncode 2.1.10\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n(function(global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined'\n    ? (module.exports = factory())\n    : typeof define === 'function' && define.amd\n    ? define(factory)\n    : ((global = global || self),\n      (global.FilePondPluginFileEncode = factory()));\n})(this, function() {\n  'use strict';\n\n  var DataURIWorker = function DataURIWorker() {\n    // route messages\n    self.onmessage = function(e) {\n      convert(e.data.message, function(response) {\n        self.postMessage({ id: e.data.id, message: response });\n      });\n    };\n\n    // convert file to data uri\n    var convert = function convert(options, cb) {\n      var file = options.file;\n\n      var reader = new FileReader();\n      reader.onloadend = function() {\n        cb(reader.result.replace('data:', '').replace(/^.+,/, ''));\n      };\n      reader.readAsDataURL(file);\n    };\n  };\n\n  var plugin = function plugin(_ref) {\n    var addFilter = _ref.addFilter,\n      utils = _ref.utils;\n\n    // get quick reference to Type utils\n    var Type = utils.Type,\n      createWorker = utils.createWorker,\n      createRoute = utils.createRoute,\n      isFile = utils.isFile;\n\n    var encode = function encode(_ref2) {\n      var name = _ref2.name,\n        file = _ref2.file;\n      return new Promise(function(resolve) {\n        var worker = createWorker(DataURIWorker);\n        worker.post({ file: file }, function(data) {\n          resolve({ name: name, data: data });\n          worker.terminate();\n        });\n      });\n    };\n\n    // holds base64 strings till can be moved to item\n    var base64Cache = [];\n    addFilter('DID_CREATE_ITEM', function(item, _ref3) {\n      var query = _ref3.query;\n\n      if (!query('GET_ALLOW_FILE_ENCODE')) return;\n\n      item.extend('getFileEncodeBase64String', function() {\n        return base64Cache[item.id] && base64Cache[item.id].data;\n      });\n      item.extend('getFileEncodeDataURL', function() {\n        return 'data:'\n          .concat(item.fileType, ';base64,')\n          .concat(base64Cache[item.id].data);\n      });\n    });\n\n    addFilter('SHOULD_PREPARE_OUTPUT', function(shouldPrepareOutput, _ref4) {\n      var query = _ref4.query;\n      return new Promise(function(resolve) {\n        resolve(query('GET_ALLOW_FILE_ENCODE'));\n      });\n    });\n\n    addFilter('COMPLETE_PREPARE_OUTPUT', function(file, _ref5) {\n      var item = _ref5.item,\n        query = _ref5.query;\n      return new Promise(function(resolve) {\n        // if it's not a file or a list of files, continue\n        if (\n          !query('GET_ALLOW_FILE_ENCODE') ||\n          (!isFile(file) && !Array.isArray(file))\n        ) {\n          return resolve(file);\n        }\n\n        // store metadata settings for this cache\n        base64Cache[item.id] = {\n          metadata: item.getMetadata(),\n          data: null\n        };\n\n        // wait for all file items to be encoded\n        Promise.all(\n          (file instanceof Blob ? [{ name: null, file: file }] : file).map(\n            encode\n          )\n        ).then(function(dataItems) {\n          base64Cache[item.id].data =\n            file instanceof Blob ? dataItems[0].data : dataItems;\n          resolve(file);\n        });\n      });\n    });\n\n    // called for each view that is created right after the 'create' method\n    addFilter('CREATE_VIEW', function(viewAPI) {\n      // get reference to created view\n      var is = viewAPI.is,\n        view = viewAPI.view,\n        query = viewAPI.query;\n\n      // only hook up to item view\n      if (!is('file-wrapper') || !query('GET_ALLOW_FILE_ENCODE')) {\n        return;\n      }\n\n      view.registerWriter(\n        createRoute({\n          DID_PREPARE_OUTPUT: function DID_PREPARE_OUTPUT(_ref6) {\n            var root = _ref6.root,\n              action = _ref6.action;\n\n            // only do this if is not uploading async\n            if (query('IS_ASYNC')) {\n              return;\n            }\n\n            var item = query('GET_ITEM', action.id);\n            if (!item) return;\n\n            // extract base64 string\n            var cache = base64Cache[item.id];\n            var metadata = cache.metadata;\n            var data = cache.data;\n\n            // create JSON string from encoded data\n            var value = JSON.stringify({\n              id: item.id,\n              name: item.file.name,\n              type: item.file.type,\n              size: item.file.size,\n              metadata: metadata,\n              data: data\n            });\n\n            // for filepond < 4.13.0\n            if (root.ref.data) {\n              root.ref.data.value = value;\n            }\n            // newer versions\n            else {\n              root.dispatch('DID_DEFINE_VALUE', {\n                id: item.id,\n                value: value\n              });\n            }\n          },\n          DID_REMOVE_ITEM: function DID_REMOVE_ITEM(_ref7) {\n            var action = _ref7.action;\n            var item = query('GET_ITEM', action.id);\n            if (!item) return;\n            delete base64Cache[item.id];\n          }\n        })\n      );\n    });\n\n    return {\n      options: {\n        // Enable or disable file encoding\n        allowFileEncode: [true, Type.BOOLEAN]\n      }\n    };\n  };\n\n  // fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\n  var isBrowser =\n    typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  if (isBrowser) {\n    document.dispatchEvent(\n      new CustomEvent('FilePond:pluginloaded', { detail: plugin })\n    );\n  }\n\n  return plugin;\n});\n","/*!\n * FilePondPluginFileValidateSize 2.2.4\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n(function(global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined'\n        ? (module.exports = factory())\n        : typeof define === 'function' && define.amd\n        ? define(factory)\n        : ((global = global || self), (global.FilePondPluginFileValidateSize = factory()));\n})(this, function() {\n    'use strict';\n\n    var plugin = function plugin(_ref) {\n        var addFilter = _ref.addFilter,\n            utils = _ref.utils;\n        // get quick reference to Type utils\n        var Type = utils.Type,\n            replaceInString = utils.replaceInString,\n            toNaturalFileSize = utils.toNaturalFileSize;\n\n        // filtering if an item is allowed in hopper\n        addFilter('ALLOW_HOPPER_ITEM', function(file, _ref2) {\n            var query = _ref2.query;\n            if (!query('GET_ALLOW_FILE_SIZE_VALIDATION')) {\n                return true;\n            }\n\n            var sizeMax = query('GET_MAX_FILE_SIZE');\n            if (sizeMax !== null && file.size >= sizeMax) {\n                return false;\n            }\n\n            var sizeMin = query('GET_MIN_FILE_SIZE');\n            if (sizeMin !== null && file.size <= sizeMin) {\n                return false;\n            }\n\n            return true;\n        });\n\n        // called for each file that is loaded\n        // right before it is set to the item state\n        // should return a promise\n        addFilter('LOAD_FILE', function(file, _ref3) {\n            var query = _ref3.query;\n            return new Promise(function(resolve, reject) {\n                // if not allowed, all fine, exit\n                if (!query('GET_ALLOW_FILE_SIZE_VALIDATION')) {\n                    return resolve(file);\n                }\n\n                // check if file should be filtered\n                var fileFilter = query('GET_FILE_VALIDATE_SIZE_FILTER');\n                if (fileFilter && !fileFilter(file)) {\n                    return resolve(file);\n                }\n\n                // reject or resolve based on file size\n                var sizeMax = query('GET_MAX_FILE_SIZE');\n                if (sizeMax !== null && file.size >= sizeMax) {\n                    reject({\n                        status: {\n                            main: query('GET_LABEL_MAX_FILE_SIZE_EXCEEDED'),\n                            sub: replaceInString(query('GET_LABEL_MAX_FILE_SIZE'), {\n                                filesize: toNaturalFileSize(\n                                    sizeMax,\n                                    '.',\n                                    query('GET_FILE_SIZE_BASE')\n                                ),\n                            }),\n                        },\n                    });\n\n                    return;\n                }\n\n                // reject or resolve based on file size\n                var sizeMin = query('GET_MIN_FILE_SIZE');\n                if (sizeMin !== null && file.size <= sizeMin) {\n                    reject({\n                        status: {\n                            main: query('GET_LABEL_MIN_FILE_SIZE_EXCEEDED'),\n                            sub: replaceInString(query('GET_LABEL_MIN_FILE_SIZE'), {\n                                filesize: toNaturalFileSize(\n                                    sizeMin,\n                                    '.',\n                                    query('GET_FILE_SIZE_BASE')\n                                ),\n                            }),\n                        },\n                    });\n\n                    return;\n                }\n\n                // returns the current option value\n                var totalSizeMax = query('GET_MAX_TOTAL_FILE_SIZE');\n                if (totalSizeMax !== null) {\n                    // get the current total file size\n                    var currentTotalSize = query('GET_ACTIVE_ITEMS').reduce(function(total, item) {\n                        return total + item.fileSize;\n                    }, 0);\n\n                    // get the size of the new file\n                    if (currentTotalSize > totalSizeMax) {\n                        reject({\n                            status: {\n                                main: query('GET_LABEL_MAX_TOTAL_FILE_SIZE_EXCEEDED'),\n                                sub: replaceInString(query('GET_LABEL_MAX_TOTAL_FILE_SIZE'), {\n                                    filesize: toNaturalFileSize(totalSizeMax),\n                                }),\n                            },\n                        });\n\n                        return;\n                    }\n                }\n\n                // file is fine, let's pass it back\n                resolve(file);\n            });\n        });\n\n        return {\n            options: {\n                // Enable or disable file type validation\n                allowFileSizeValidation: [true, Type.BOOLEAN],\n\n                // Max individual file size in bytes\n                maxFileSize: [null, Type.INT],\n\n                // Min individual file size in bytes\n                minFileSize: [null, Type.INT],\n\n                // Max total file size in bytes\n                maxTotalFileSize: [null, Type.INT],\n\n                // Filter the files that need to be validated for size\n                fileValidateSizeFilter: [null, Type.FUNCTION],\n\n                // error labels\n                labelMinFileSizeExceeded: ['File is too small', Type.STRING],\n                labelMinFileSize: ['Minimum file size is {filesize}', Type.STRING],\n\n                labelMaxFileSizeExceeded: ['File is too large', Type.STRING],\n                labelMaxFileSize: ['Maximum file size is {filesize}', Type.STRING],\n\n                labelMaxTotalFileSizeExceeded: ['Maximum total size exceeded', Type.STRING],\n                labelMaxTotalFileSize: ['Maximum total file size is {filesize}', Type.STRING],\n            },\n        };\n    };\n\n    // fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\n    var isBrowser = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n    if (isBrowser) {\n        document.dispatchEvent(new CustomEvent('FilePond:pluginloaded', { detail: plugin }));\n    }\n\n    return plugin;\n});\n","/*!\n * FilePondPluginFileValidateType 1.2.6\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n(function(global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined'\n    ? (module.exports = factory())\n    : typeof define === 'function' && define.amd\n    ? define(factory)\n    : ((global = global || self),\n      (global.FilePondPluginFileValidateType = factory()));\n})(this, function() {\n  'use strict';\n\n  var plugin = function plugin(_ref) {\n    var addFilter = _ref.addFilter,\n      utils = _ref.utils;\n    // get quick reference to Type utils\n    var Type = utils.Type,\n      isString = utils.isString,\n      replaceInString = utils.replaceInString,\n      guesstimateMimeType = utils.guesstimateMimeType,\n      getExtensionFromFilename = utils.getExtensionFromFilename,\n      getFilenameFromURL = utils.getFilenameFromURL;\n\n    var mimeTypeMatchesWildCard = function mimeTypeMatchesWildCard(\n      mimeType,\n      wildcard\n    ) {\n      var mimeTypeGroup = (/^[^/]+/.exec(mimeType) || []).pop(); // image/png -> image\n      var wildcardGroup = wildcard.slice(0, -2); // image/* -> image\n      return mimeTypeGroup === wildcardGroup;\n    };\n\n    var isValidMimeType = function isValidMimeType(\n      acceptedTypes,\n      userInputType\n    ) {\n      return acceptedTypes.some(function(acceptedType) {\n        // accepted is wildcard mime type\n        if (/\\*$/.test(acceptedType)) {\n          return mimeTypeMatchesWildCard(userInputType, acceptedType);\n        }\n\n        // is normal mime type\n        return acceptedType === userInputType;\n      });\n    };\n\n    var getItemType = function getItemType(item) {\n      // if the item is a url we guess the mime type by the extension\n      var type = '';\n      if (isString(item)) {\n        var filename = getFilenameFromURL(item);\n        var extension = getExtensionFromFilename(filename);\n        if (extension) {\n          type = guesstimateMimeType(extension);\n        }\n      } else {\n        type = item.type;\n      }\n\n      return type;\n    };\n\n    var validateFile = function validateFile(\n      item,\n      acceptedFileTypes,\n      typeDetector\n    ) {\n      // no types defined, everything is allowed \\o/\n      if (acceptedFileTypes.length === 0) {\n        return true;\n      }\n\n      // gets the item type\n      var type = getItemType(item);\n\n      // no type detector, test now\n      if (!typeDetector) {\n        return isValidMimeType(acceptedFileTypes, type);\n      }\n\n      // use type detector\n      return new Promise(function(resolve, reject) {\n        typeDetector(item, type)\n          .then(function(detectedType) {\n            if (isValidMimeType(acceptedFileTypes, detectedType)) {\n              resolve();\n            } else {\n              reject();\n            }\n          })\n          .catch(reject);\n      });\n    };\n\n    var applyMimeTypeMap = function applyMimeTypeMap(map) {\n      return function(acceptedFileType) {\n        return map[acceptedFileType] === null\n          ? false\n          : map[acceptedFileType] || acceptedFileType;\n      };\n    };\n\n    // setup attribute mapping for accept\n    addFilter('SET_ATTRIBUTE_TO_OPTION_MAP', function(map) {\n      return Object.assign(map, {\n        accept: 'acceptedFileTypes'\n      });\n    });\n\n    // filtering if an item is allowed in hopper\n    addFilter('ALLOW_HOPPER_ITEM', function(file, _ref2) {\n      var query = _ref2.query;\n      // if we are not doing file type validation exit\n      if (!query('GET_ALLOW_FILE_TYPE_VALIDATION')) {\n        return true;\n      }\n\n      // we validate the file against the accepted file types\n      return validateFile(file, query('GET_ACCEPTED_FILE_TYPES'));\n    });\n\n    // called for each file that is loaded\n    // right before it is set to the item state\n    // should return a promise\n    addFilter('LOAD_FILE', function(file, _ref3) {\n      var query = _ref3.query;\n      return new Promise(function(resolve, reject) {\n        if (!query('GET_ALLOW_FILE_TYPE_VALIDATION')) {\n          resolve(file);\n          return;\n        }\n\n        var acceptedFileTypes = query('GET_ACCEPTED_FILE_TYPES');\n\n        // custom type detector method\n        var typeDetector = query('GET_FILE_VALIDATE_TYPE_DETECT_TYPE');\n\n        // if invalid, exit here\n        var validationResult = validateFile(\n          file,\n          acceptedFileTypes,\n          typeDetector\n        );\n\n        var handleRejection = function handleRejection() {\n          var acceptedFileTypesMapped = acceptedFileTypes\n            .map(\n              applyMimeTypeMap(\n                query('GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES_MAP')\n              )\n            )\n            .filter(function(label) {\n              return label !== false;\n            });\n\n          reject({\n            status: {\n              main: query('GET_LABEL_FILE_TYPE_NOT_ALLOWED'),\n              sub: replaceInString(\n                query('GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES'),\n                {\n                  allTypes: acceptedFileTypesMapped.join(', '),\n                  allButLastType: acceptedFileTypesMapped\n                    .slice(0, -1)\n                    .join(', '),\n                  lastType:\n                    acceptedFileTypesMapped[acceptedFileTypesMapped.length - 1]\n                }\n              )\n            }\n          });\n        };\n\n        // has returned new filename immidiately\n        if (typeof validationResult === 'boolean') {\n          if (!validationResult) {\n            return handleRejection();\n          }\n          return resolve(file);\n        }\n\n        // is promise\n        validationResult\n          .then(function() {\n            resolve(file);\n          })\n          .catch(handleRejection);\n      });\n    });\n\n    // expose plugin\n    return {\n      // default options\n      options: {\n        // Enable or disable file type validation\n        allowFileTypeValidation: [true, Type.BOOLEAN],\n\n        // What file types to accept\n        acceptedFileTypes: [[], Type.ARRAY],\n        // - must be comma separated\n        // - mime types: image/png, image/jpeg, image/gif\n        // - extensions: .png, .jpg, .jpeg ( not enabled yet )\n        // - wildcards: image/*\n\n        // label to show when a type is not allowed\n        labelFileTypeNotAllowed: ['File is of invalid type', Type.STRING],\n\n        // nicer label\n        fileValidateTypeLabelExpectedTypes: [\n          'Expects {allButLastType} or {lastType}',\n          Type.STRING\n        ],\n\n        // map mime types to extensions\n        fileValidateTypeLabelExpectedTypesMap: [{}, Type.OBJECT],\n\n        // Custom function to detect type of file\n        fileValidateTypeDetectType: [null, Type.FUNCTION]\n      }\n    };\n  };\n\n  // fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\n  var isBrowser =\n    typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  if (isBrowser) {\n    document.dispatchEvent(\n      new CustomEvent('FilePond:pluginloaded', { detail: plugin })\n    );\n  }\n\n  return plugin;\n});\n","/*!\n * FilePondPluginImageCrop 2.0.6\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n(function(global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined'\n    ? (module.exports = factory())\n    : typeof define === 'function' && define.amd\n    ? define(factory)\n    : ((global = global || self), (global.FilePondPluginImageCrop = factory()));\n})(this, function() {\n  'use strict';\n\n  var isImage = function isImage(file) {\n    return /^image/.test(file.type);\n  };\n\n  /**\n   * Image Auto Crop Plugin\n   */\n  var plugin = function plugin(_ref) {\n    var addFilter = _ref.addFilter,\n      utils = _ref.utils;\n    var Type = utils.Type,\n      isFile = utils.isFile,\n      getNumericAspectRatioFromString = utils.getNumericAspectRatioFromString;\n\n    // tests if crop is allowed on this item\n    var allowCrop = function allowCrop(item, query) {\n      return !(!isImage(item.file) || !query('GET_ALLOW_IMAGE_CROP'));\n    };\n\n    var isObject = function isObject(value) {\n      return typeof value === 'object';\n    };\n\n    var isNumber = function isNumber(value) {\n      return typeof value === 'number';\n    };\n\n    var updateCrop = function updateCrop(item, obj) {\n      return item.setMetadata(\n        'crop',\n        Object.assign({}, item.getMetadata('crop'), obj)\n      );\n    };\n\n    // extend item methods\n    addFilter('DID_CREATE_ITEM', function(item, _ref2) {\n      var query = _ref2.query;\n\n      item.extend('setImageCrop', function(crop) {\n        if (!allowCrop(item, query) || !isObject(center)) return;\n        item.setMetadata('crop', crop);\n        return crop;\n      });\n\n      item.extend('setImageCropCenter', function(center) {\n        if (!allowCrop(item, query) || !isObject(center)) return;\n        return updateCrop(item, { center: center });\n      });\n\n      item.extend('setImageCropZoom', function(zoom) {\n        if (!allowCrop(item, query) || !isNumber(zoom)) return;\n        return updateCrop(item, { zoom: Math.max(1, zoom) });\n      });\n\n      item.extend('setImageCropRotation', function(rotation) {\n        if (!allowCrop(item, query) || !isNumber(rotation)) return;\n        return updateCrop(item, { rotation: rotation });\n      });\n\n      item.extend('setImageCropFlip', function(flip) {\n        if (!allowCrop(item, query) || !isObject(flip)) return;\n        return updateCrop(item, { flip: flip });\n      });\n\n      item.extend('setImageCropAspectRatio', function(newAspectRatio) {\n        if (!allowCrop(item, query) || typeof newAspectRatio === 'undefined')\n          return;\n\n        var currentCrop = item.getMetadata('crop');\n\n        var aspectRatio = getNumericAspectRatioFromString(newAspectRatio);\n\n        var newCrop = {\n          center: {\n            x: 0.5,\n            y: 0.5\n          },\n\n          flip: currentCrop\n            ? Object.assign({}, currentCrop.flip)\n            : {\n                horizontal: false,\n                vertical: false\n              },\n\n          rotation: 0,\n          zoom: 1,\n          aspectRatio: aspectRatio\n        };\n\n        item.setMetadata('crop', newCrop);\n\n        return newCrop;\n      });\n    });\n\n    // subscribe to file transformations\n    addFilter('DID_LOAD_ITEM', function(item, _ref3) {\n      var query = _ref3.query;\n      return new Promise(function(resolve, reject) {\n        // get file reference\n        var file = item.file;\n\n        // if this is not an image we do not have any business cropping it and we'll continue with the unaltered dataset\n        if (!isFile(file) || !isImage(file) || !query('GET_ALLOW_IMAGE_CROP')) {\n          return resolve(item);\n        }\n\n        // already has crop metadata set?\n        var crop = item.getMetadata('crop');\n        if (crop) {\n          return resolve(item);\n        }\n\n        // get the required aspect ratio and exit if it's not set\n        var humanAspectRatio = query('GET_IMAGE_CROP_ASPECT_RATIO');\n\n        // set default crop rectangle\n        item.setMetadata('crop', {\n          center: {\n            x: 0.5,\n            y: 0.5\n          },\n\n          flip: {\n            horizontal: false,\n            vertical: false\n          },\n\n          rotation: 0,\n          zoom: 1,\n          aspectRatio: humanAspectRatio\n            ? getNumericAspectRatioFromString(humanAspectRatio)\n            : null\n        });\n\n        // we done!\n        resolve(item);\n      });\n    });\n\n    // Expose plugin options\n    return {\n      options: {\n        // enable or disable image cropping\n        allowImageCrop: [true, Type.BOOLEAN],\n\n        // the aspect ratio of the crop ('1:1', '16:9', etc)\n        imageCropAspectRatio: [null, Type.STRING]\n      }\n    };\n  };\n\n  // fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\n  var isBrowser =\n    typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  if (isBrowser) {\n    document.dispatchEvent(\n      new CustomEvent('FilePond:pluginloaded', { detail: plugin })\n    );\n  }\n\n  return plugin;\n});\n","/*!\n * FilePondPluginImageEdit 1.6.3\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n(function(global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined'\n    ? (module.exports = factory())\n    : typeof define === 'function' && define.amd\n    ? define(factory)\n    : ((global = global || self), (global.FilePondPluginImageEdit = factory()));\n})(this, function() {\n  'use strict';\n\n  var isPreviewableImage = function isPreviewableImage(file) {\n    return /^image/.test(file.type);\n  };\n\n  /**\n   * Image Edit Proxy Plugin\n   */\n  var plugin = function plugin(_) {\n    var addFilter = _.addFilter,\n      utils = _.utils,\n      views = _.views;\n    var Type = utils.Type,\n      createRoute = utils.createRoute,\n      _utils$createItemAPI = utils.createItemAPI,\n      createItemAPI =\n        _utils$createItemAPI === void 0\n          ? function(item) {\n              return item;\n            }\n          : _utils$createItemAPI;\n    var fileActionButton = views.fileActionButton;\n\n    addFilter('SHOULD_REMOVE_ON_REVERT', function(shouldRemove, _ref) {\n      var item = _ref.item,\n        query = _ref.query;\n      return new Promise(function(resolve) {\n        var file = item.file;\n\n        // if this file is editable it shouldn't be removed immidiately even when instant uploading\n        var canEdit =\n          query('GET_ALLOW_IMAGE_EDIT') &&\n          query('GET_IMAGE_EDIT_ALLOW_EDIT') &&\n          isPreviewableImage(file);\n\n        // if the file cannot be edited it should be removed on revert\n        resolve(!canEdit);\n      });\n    });\n\n    // open editor when loading a new item\n    addFilter('DID_LOAD_ITEM', function(item, _ref2) {\n      var query = _ref2.query,\n        dispatch = _ref2.dispatch;\n      return new Promise(function(resolve, reject) {\n        // if is temp or local file\n        if (item.origin > 1) {\n          resolve(item);\n          return;\n        }\n\n        // get file reference\n        var file = item.file;\n        if (\n          !query('GET_ALLOW_IMAGE_EDIT') ||\n          !query('GET_IMAGE_EDIT_INSTANT_EDIT')\n        ) {\n          resolve(item);\n          return;\n        }\n\n        // exit if this is not an image\n        if (!isPreviewableImage(file)) {\n          resolve(item);\n          return;\n        }\n\n        var createEditorResponseHandler = function createEditorResponseHandler(\n          item,\n          resolve,\n          reject\n        ) {\n          return function(userDidConfirm) {\n            // remove item\n            editRequestQueue.shift();\n\n            // handle item\n            if (userDidConfirm) {\n              resolve(item);\n            } else {\n              reject(item);\n            }\n\n            // TODO: Fix, should not be needed to kick the internal loop in case no processes are running\n            dispatch('KICK');\n\n            // handle next item!\n            requestEdit();\n          };\n        };\n\n        var requestEdit = function requestEdit() {\n          if (!editRequestQueue.length) return;\n          var _editRequestQueue$ = editRequestQueue[0],\n            item = _editRequestQueue$.item,\n            resolve = _editRequestQueue$.resolve,\n            reject = _editRequestQueue$.reject;\n\n          dispatch('EDIT_ITEM', {\n            id: item.id,\n            handleEditorResponse: createEditorResponseHandler(\n              item,\n              resolve,\n              reject\n            )\n          });\n        };\n\n        queueEditRequest({ item: item, resolve: resolve, reject: reject });\n\n        if (editRequestQueue.length === 1) {\n          requestEdit();\n        }\n      });\n    });\n\n    // extend item methods\n    addFilter('DID_CREATE_ITEM', function(item, _ref3) {\n      var query = _ref3.query,\n        dispatch = _ref3.dispatch;\n      item.extend('edit', function() {\n        dispatch('EDIT_ITEM', { id: item.id });\n      });\n    });\n\n    var editRequestQueue = [];\n    var queueEditRequest = function queueEditRequest(editRequest) {\n      editRequestQueue.push(editRequest);\n      return editRequest;\n    };\n\n    // called for each view that is created right after the 'create' method\n    addFilter('CREATE_VIEW', function(viewAPI) {\n      // get reference to created view\n      var is = viewAPI.is,\n        view = viewAPI.view,\n        query = viewAPI.query;\n\n      if (!query('GET_ALLOW_IMAGE_EDIT')) return;\n\n      var canShowImagePreview = query('GET_ALLOW_IMAGE_PREVIEW');\n\n      // only run for either the file or the file info panel\n      var shouldExtendView =\n        (is('file-info') && !canShowImagePreview) ||\n        (is('file') && canShowImagePreview);\n\n      if (!shouldExtendView) return;\n\n      // no editor defined, then exit\n      var editor = query('GET_IMAGE_EDIT_EDITOR');\n      if (!editor) return;\n\n      // set default FilePond options and add bridge once\n      if (!editor.filepondCallbackBridge) {\n        editor.outputData = true;\n        editor.outputFile = false;\n        editor.filepondCallbackBridge = {\n          onconfirm: editor.onconfirm || function() {},\n          oncancel: editor.oncancel || function() {}\n        };\n      }\n\n      // opens the editor, if it does not already exist, it creates the editor\n      var openEditor = function openEditor(_ref4) {\n        var root = _ref4.root,\n          props = _ref4.props,\n          action = _ref4.action;\n        var id = props.id;\n        var handleEditorResponse = action.handleEditorResponse;\n\n        // update editor props that could have changed\n        editor.cropAspectRatio =\n          root.query('GET_IMAGE_CROP_ASPECT_RATIO') || editor.cropAspectRatio;\n        editor.outputCanvasBackgroundColor =\n          root.query('GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR') ||\n          editor.outputCanvasBackgroundColor;\n\n        // get item\n        var item = root.query('GET_ITEM', id);\n        if (!item) return;\n\n        // file to open\n        var file = item.file;\n\n        // crop data to pass to editor\n        var crop = item.getMetadata('crop');\n        var cropDefault = {\n          center: {\n            x: 0.5,\n            y: 0.5\n          },\n\n          flip: {\n            horizontal: false,\n            vertical: false\n          },\n\n          zoom: 1,\n          rotation: 0,\n          aspectRatio: null\n        };\n\n        // size data to pass to editor\n        var resize = item.getMetadata('resize');\n\n        // filter and color data to pass to editor\n        var filter = item.getMetadata('filter') || null;\n        var filters = item.getMetadata('filters') || null;\n        var colors = item.getMetadata('colors') || null;\n        var markup = item.getMetadata('markup') || null;\n\n        // build parameters object\n        var imageParameters = {\n          crop: crop || cropDefault,\n          size: resize\n            ? {\n                upscale: resize.upscale,\n                mode: resize.mode,\n                width: resize.size.width,\n                height: resize.size.height\n              }\n            : null,\n          filter: filters\n            ? filters.id || filters.matrix\n            : root.query('GET_ALLOW_IMAGE_FILTER') &&\n              root.query('GET_IMAGE_FILTER_COLOR_MATRIX') &&\n              !colors\n            ? filter\n            : null,\n          color: colors,\n          markup: markup\n        };\n\n        editor.onconfirm = function(_ref5) {\n          var data = _ref5.data;\n          var crop = data.crop,\n            size = data.size,\n            filter = data.filter,\n            color = data.color,\n            colorMatrix = data.colorMatrix,\n            markup = data.markup;\n\n          // create new metadata object\n          var metadata = {};\n\n          // append crop data\n          if (crop) {\n            metadata.crop = crop;\n          }\n\n          // append size data\n          if (size) {\n            var initialSize = (item.getMetadata('resize') || {}).size;\n            var targetSize = {\n              width: size.width,\n              height: size.height\n            };\n\n            if (!(targetSize.width && targetSize.height) && initialSize) {\n              targetSize.width = initialSize.width;\n              targetSize.height = initialSize.height;\n            }\n\n            if (targetSize.width || targetSize.height) {\n              metadata.resize = {\n                upscale: size.upscale,\n                mode: size.mode,\n                size: targetSize\n              };\n            }\n          }\n\n          if (markup) {\n            metadata.markup = markup;\n          }\n\n          // set filters and colors so we can restore them when re-editing the image\n          metadata.colors = color;\n          metadata.filters = filter;\n\n          // set merged color matrix to use in preview plugin\n          metadata.filter = colorMatrix;\n\n          // update crop metadata\n          item.setMetadata(metadata);\n\n          // call\n          editor.filepondCallbackBridge.onconfirm(data, createItemAPI(item));\n\n          // used in instant edit mode\n          if (!handleEditorResponse) return;\n          editor.onclose = function() {\n            handleEditorResponse(true);\n            editor.onclose = null;\n          };\n        };\n\n        editor.oncancel = function() {\n          // call\n          editor.filepondCallbackBridge.oncancel(createItemAPI(item));\n\n          // used in instant edit mode\n          if (!handleEditorResponse) return;\n          editor.onclose = function() {\n            handleEditorResponse(false);\n            editor.onclose = null;\n          };\n        };\n\n        editor.open(file, imageParameters);\n      };\n\n      /**\n       * Image Preview related\n       */\n\n      // create the image edit plugin, but only do so if the item is an image\n      var didLoadItem = function didLoadItem(_ref6) {\n        var root = _ref6.root,\n          props = _ref6.props;\n\n        if (!query('GET_IMAGE_EDIT_ALLOW_EDIT')) return;\n        var id = props.id;\n\n        // try to access item\n        var item = query('GET_ITEM', id);\n        if (!item) return;\n\n        // get the file object\n        var file = item.file;\n\n        // exit if this is not an image\n        if (!isPreviewableImage(file)) return;\n\n        // handle interactions\n        root.ref.handleEdit = function(e) {\n          e.stopPropagation();\n          root.dispatch('EDIT_ITEM', { id: id });\n        };\n\n        if (canShowImagePreview) {\n          // add edit button to preview\n          var buttonView = view.createChildView(fileActionButton, {\n            label: 'edit',\n            icon: query('GET_IMAGE_EDIT_ICON_EDIT'),\n            opacity: 0\n          });\n\n          // edit item classname\n          buttonView.element.classList.add('filepond--action-edit-item');\n          buttonView.element.dataset.align = query(\n            'GET_STYLE_IMAGE_EDIT_BUTTON_EDIT_ITEM_POSITION'\n          );\n          buttonView.on('click', root.ref.handleEdit);\n\n          root.ref.buttonEditItem = view.appendChildView(buttonView);\n        } else {\n          // view is file info\n          var filenameElement = view.element.querySelector(\n            '.filepond--file-info-main'\n          );\n          var editButton = document.createElement('button');\n          editButton.className = 'filepond--action-edit-item-alt';\n          editButton.innerHTML =\n            query('GET_IMAGE_EDIT_ICON_EDIT') + '<span>edit</span>';\n          editButton.addEventListener('click', root.ref.handleEdit);\n          filenameElement.appendChild(editButton);\n\n          root.ref.editButton = editButton;\n        }\n      };\n\n      view.registerDestroyer(function(_ref7) {\n        var root = _ref7.root;\n        if (root.ref.buttonEditItem) {\n          root.ref.buttonEditItem.off('click', root.ref.handleEdit);\n        }\n        if (root.ref.editButton) {\n          root.ref.editButton.removeEventListener('click', root.ref.handleEdit);\n        }\n      });\n\n      var routes = {\n        EDIT_ITEM: openEditor,\n        DID_LOAD_ITEM: didLoadItem\n      };\n\n      if (canShowImagePreview) {\n        // view is file\n        var didPreviewUpdate = function didPreviewUpdate(_ref8) {\n          var root = _ref8.root;\n          if (!root.ref.buttonEditItem) return;\n          root.ref.buttonEditItem.opacity = 1;\n        };\n\n        routes.DID_IMAGE_PREVIEW_SHOW = didPreviewUpdate;\n      } else {\n      }\n\n      // start writing\n      view.registerWriter(createRoute(routes));\n    });\n\n    // Expose plugin options\n    return {\n      options: {\n        // enable or disable image editing\n        allowImageEdit: [true, Type.BOOLEAN],\n\n        // location of processing button\n        styleImageEditButtonEditItemPosition: ['bottom center', Type.STRING],\n\n        // open editor when image is dropped\n        imageEditInstantEdit: [false, Type.BOOLEAN],\n\n        // allow editing\n        imageEditAllowEdit: [true, Type.BOOLEAN],\n\n        // the icon to use for the edit button\n        imageEditIconEdit: [\n          '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" focusable=\"false\"><path d=\"M8.5 17h1.586l7-7L15.5 8.414l-7 7V17zm-1.707-2.707l8-8a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1 0 1.414l-8 8A1 1 0 0 1 10.5 19h-3a1 1 0 0 1-1-1v-3a1 1 0 0 1 .293-.707z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n          Type.STRING\n        ],\n\n        // editor object\n        imageEditEditor: [null, Type.OBJECT]\n      }\n    };\n  };\n\n  // fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\n  var isBrowser =\n    typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  if (isBrowser) {\n    document.dispatchEvent(\n      new CustomEvent('FilePond:pluginloaded', { detail: plugin })\n    );\n  }\n\n  return plugin;\n});\n","/*!\n * FilePondPluginImageExifOrientation 1.0.11\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n(function(global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined'\n    ? (module.exports = factory())\n    : typeof define === 'function' && define.amd\n    ? define(factory)\n    : ((global = global || self),\n      (global.FilePondPluginImageExifOrientation = factory()));\n})(this, function() {\n  'use strict';\n\n  // test if file is of type image\n  var isJPEG = function isJPEG(file) {\n    return /^image\\/jpeg/.test(file.type);\n  };\n\n  var Marker = {\n    JPEG: 0xffd8,\n    APP1: 0xffe1,\n    EXIF: 0x45786966,\n    TIFF: 0x4949,\n    Orientation: 0x0112,\n    Unknown: 0xff00\n  };\n\n  var getUint16 = function getUint16(view, offset) {\n    var little =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    return view.getUint16(offset, little);\n  };\n  var getUint32 = function getUint32(view, offset) {\n    var little =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    return view.getUint32(offset, little);\n  };\n\n  var getImageOrientation = function getImageOrientation(file) {\n    return new Promise(function(resolve, reject) {\n      var reader = new FileReader();\n      reader.onload = function(e) {\n        var view = new DataView(e.target.result);\n\n        // Every JPEG file starts from binary value '0xFFD8'\n        if (getUint16(view, 0) !== Marker.JPEG) {\n          // This aint no JPEG\n          resolve(-1);\n          return;\n        }\n\n        var length = view.byteLength;\n        var offset = 2;\n\n        while (offset < length) {\n          var marker = getUint16(view, offset);\n          offset += 2;\n\n          // There's our APP1 Marker\n          if (marker === Marker.APP1) {\n            if (getUint32(view, (offset += 2)) !== Marker.EXIF) {\n              // no EXIF info defined\n              break;\n            }\n\n            // Get TIFF Header\n            var little = getUint16(view, (offset += 6)) === Marker.TIFF;\n            offset += getUint32(view, offset + 4, little);\n\n            var tags = getUint16(view, offset, little);\n            offset += 2;\n\n            for (var i = 0; i < tags; i++) {\n              // found the orientation tag\n              if (\n                getUint16(view, offset + i * 12, little) === Marker.Orientation\n              ) {\n                resolve(getUint16(view, offset + i * 12 + 8, little));\n\n                return;\n              }\n            }\n          } else if ((marker & Marker.Unknown) !== Marker.Unknown) {\n            // Invalid\n            break;\n          } else {\n            offset += getUint16(view, offset);\n          }\n        }\n\n        // Nothing found\n        resolve(-1);\n      };\n\n      // we don't need to read the entire file to get the orientation\n      reader.readAsArrayBuffer(file.slice(0, 64 * 1024));\n    });\n  };\n\n  var IS_BROWSER = (function() {\n    return (\n      typeof window !== 'undefined' && typeof window.document !== 'undefined'\n    );\n  })();\n  var isBrowser = function isBrowser() {\n    return IS_BROWSER;\n  };\n\n  // 2x1 pixel image 90CW rotated with orientation header\n  var testSrc =\n    'data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=';\n\n  // should correct orientation if is presented in landscape, in which case the browser doesn't autocorrect\n  var shouldCorrect = undefined;\n  var testImage = isBrowser() ? new Image() : {};\n  testImage.onload = function() {\n    return (shouldCorrect = testImage.naturalWidth > testImage.naturalHeight);\n  };\n  testImage.src = testSrc;\n\n  var shouldCorrectImageExifOrientation = function shouldCorrectImageExifOrientation() {\n    return shouldCorrect;\n  };\n\n  /**\n   * Read Image Orientation Plugin\n   */\n  var plugin = function plugin(_ref) {\n    var addFilter = _ref.addFilter,\n      utils = _ref.utils;\n    var Type = utils.Type,\n      isFile = utils.isFile;\n\n    // subscribe to file load and append required info\n    addFilter('DID_LOAD_ITEM', function(item, _ref2) {\n      var query = _ref2.query;\n      return new Promise(function(resolve, reject) {\n        // get file reference\n        var file = item.file;\n\n        // if this is not a jpeg image we are not interested\n        if (\n          !isFile(file) ||\n          !isJPEG(file) ||\n          !query('GET_ALLOW_IMAGE_EXIF_ORIENTATION') ||\n          !shouldCorrectImageExifOrientation()\n        ) {\n          // continue with the unaltered dataset\n          return resolve(item);\n        }\n\n        // get orientation from exif data\n        getImageOrientation(file).then(function(orientation) {\n          item.setMetadata('exif', { orientation: orientation });\n          resolve(item);\n        });\n      });\n    });\n\n    // Expose plugin options\n    return {\n      options: {\n        // Enable or disable image orientation reading\n        allowImageExifOrientation: [true, Type.BOOLEAN]\n      }\n    };\n  };\n\n  // fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\n  var isBrowser$1 =\n    typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  if (isBrowser$1) {\n    document.dispatchEvent(\n      new CustomEvent('FilePond:pluginloaded', { detail: plugin })\n    );\n  }\n\n  return plugin;\n});\n","/*!\n * FilePondPluginImagePreview 4.6.10\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n(function(global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined'\n    ? (module.exports = factory())\n    : typeof define === 'function' && define.amd\n    ? define(factory)\n    : ((global = global || self),\n      (global.FilePondPluginImagePreview = factory()));\n})(this, function() {\n  'use strict';\n\n  // test if file is of type image and can be viewed in canvas\n  var isPreviewableImage = function isPreviewableImage(file) {\n    return /^image/.test(file.type);\n  };\n\n  function _typeof(obj) {\n    if (typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol') {\n      _typeof = function(obj) {\n        return typeof obj;\n      };\n    } else {\n      _typeof = function(obj) {\n        return obj &&\n          typeof Symbol === 'function' &&\n          obj.constructor === Symbol &&\n          obj !== Symbol.prototype\n          ? 'symbol'\n          : typeof obj;\n      };\n    }\n\n    return _typeof(obj);\n  }\n\n  var REACT_ELEMENT_TYPE;\n\n  function _jsx(type, props, key, children) {\n    if (!REACT_ELEMENT_TYPE) {\n      REACT_ELEMENT_TYPE =\n        (typeof Symbol === 'function' &&\n          Symbol.for &&\n          Symbol.for('react.element')) ||\n        0xeac7;\n    }\n\n    var defaultProps = type && type.defaultProps;\n    var childrenLength = arguments.length - 3;\n\n    if (!props && childrenLength !== 0) {\n      props = {\n        children: void 0\n      };\n    }\n\n    if (props && defaultProps) {\n      for (var propName in defaultProps) {\n        if (props[propName] === void 0) {\n          props[propName] = defaultProps[propName];\n        }\n      }\n    } else if (!props) {\n      props = defaultProps || {};\n    }\n\n    if (childrenLength === 1) {\n      props.children = children;\n    } else if (childrenLength > 1) {\n      var childArray = new Array(childrenLength);\n\n      for (var i = 0; i < childrenLength; i++) {\n        childArray[i] = arguments[i + 3];\n      }\n\n      props.children = childArray;\n    }\n\n    return {\n      $$typeof: REACT_ELEMENT_TYPE,\n      type: type,\n      key: key === undefined ? null : '' + key,\n      ref: null,\n      props: props,\n      _owner: null\n    };\n  }\n\n  function _asyncIterator(iterable) {\n    var method;\n\n    if (typeof Symbol === 'function') {\n      if (Symbol.asyncIterator) {\n        method = iterable[Symbol.asyncIterator];\n        if (method != null) return method.call(iterable);\n      }\n\n      if (Symbol.iterator) {\n        method = iterable[Symbol.iterator];\n        if (method != null) return method.call(iterable);\n      }\n    }\n\n    throw new TypeError('Object is not async iterable');\n  }\n\n  function _AwaitValue(value) {\n    this.wrapped = value;\n  }\n\n  function _AsyncGenerator(gen) {\n    var front, back;\n\n    function send(key, arg) {\n      return new Promise(function(resolve, reject) {\n        var request = {\n          key: key,\n          arg: arg,\n          resolve: resolve,\n          reject: reject,\n          next: null\n        };\n\n        if (back) {\n          back = back.next = request;\n        } else {\n          front = back = request;\n          resume(key, arg);\n        }\n      });\n    }\n\n    function resume(key, arg) {\n      try {\n        var result = gen[key](arg);\n        var value = result.value;\n        var wrappedAwait = value instanceof _AwaitValue;\n        Promise.resolve(wrappedAwait ? value.wrapped : value).then(\n          function(arg) {\n            if (wrappedAwait) {\n              resume('next', arg);\n              return;\n            }\n\n            settle(result.done ? 'return' : 'normal', arg);\n          },\n          function(err) {\n            resume('throw', err);\n          }\n        );\n      } catch (err) {\n        settle('throw', err);\n      }\n    }\n\n    function settle(type, value) {\n      switch (type) {\n        case 'return':\n          front.resolve({\n            value: value,\n            done: true\n          });\n          break;\n\n        case 'throw':\n          front.reject(value);\n          break;\n\n        default:\n          front.resolve({\n            value: value,\n            done: false\n          });\n          break;\n      }\n\n      front = front.next;\n\n      if (front) {\n        resume(front.key, front.arg);\n      } else {\n        back = null;\n      }\n    }\n\n    this._invoke = send;\n\n    if (typeof gen.return !== 'function') {\n      this.return = undefined;\n    }\n  }\n\n  if (typeof Symbol === 'function' && Symbol.asyncIterator) {\n    _AsyncGenerator.prototype[Symbol.asyncIterator] = function() {\n      return this;\n    };\n  }\n\n  _AsyncGenerator.prototype.next = function(arg) {\n    return this._invoke('next', arg);\n  };\n\n  _AsyncGenerator.prototype.throw = function(arg) {\n    return this._invoke('throw', arg);\n  };\n\n  _AsyncGenerator.prototype.return = function(arg) {\n    return this._invoke('return', arg);\n  };\n\n  function _wrapAsyncGenerator(fn) {\n    return function() {\n      return new _AsyncGenerator(fn.apply(this, arguments));\n    };\n  }\n\n  function _awaitAsyncGenerator(value) {\n    return new _AwaitValue(value);\n  }\n\n  function _asyncGeneratorDelegate(inner, awaitWrap) {\n    var iter = {},\n      waiting = false;\n\n    function pump(key, value) {\n      waiting = true;\n      value = new Promise(function(resolve) {\n        resolve(inner[key](value));\n      });\n      return {\n        done: false,\n        value: awaitWrap(value)\n      };\n    }\n\n    if (typeof Symbol === 'function' && Symbol.iterator) {\n      iter[Symbol.iterator] = function() {\n        return this;\n      };\n    }\n\n    iter.next = function(value) {\n      if (waiting) {\n        waiting = false;\n        return value;\n      }\n\n      return pump('next', value);\n    };\n\n    if (typeof inner.throw === 'function') {\n      iter.throw = function(value) {\n        if (waiting) {\n          waiting = false;\n          throw value;\n        }\n\n        return pump('throw', value);\n      };\n    }\n\n    if (typeof inner.return === 'function') {\n      iter.return = function(value) {\n        return pump('return', value);\n      };\n    }\n\n    return iter;\n  }\n\n  function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n    try {\n      var info = gen[key](arg);\n      var value = info.value;\n    } catch (error) {\n      reject(error);\n      return;\n    }\n\n    if (info.done) {\n      resolve(value);\n    } else {\n      Promise.resolve(value).then(_next, _throw);\n    }\n  }\n\n  function _asyncToGenerator(fn) {\n    return function() {\n      var self = this,\n        args = arguments;\n      return new Promise(function(resolve, reject) {\n        var gen = fn.apply(self, args);\n\n        function _next(value) {\n          asyncGeneratorStep(\n            gen,\n            resolve,\n            reject,\n            _next,\n            _throw,\n            'next',\n            value\n          );\n        }\n\n        function _throw(err) {\n          asyncGeneratorStep(gen, resolve, reject, _next, _throw, 'throw', err);\n        }\n\n        _next(undefined);\n      });\n    };\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError('Cannot call a class as a function');\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if ('value' in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _defineEnumerableProperties(obj, descs) {\n    for (var key in descs) {\n      var desc = descs[key];\n      desc.configurable = desc.enumerable = true;\n      if ('value' in desc) desc.writable = true;\n      Object.defineProperty(obj, key, desc);\n    }\n\n    if (Object.getOwnPropertySymbols) {\n      var objectSymbols = Object.getOwnPropertySymbols(descs);\n\n      for (var i = 0; i < objectSymbols.length; i++) {\n        var sym = objectSymbols[i];\n        var desc = descs[sym];\n        desc.configurable = desc.enumerable = true;\n        if ('value' in desc) desc.writable = true;\n        Object.defineProperty(obj, sym, desc);\n      }\n    }\n\n    return obj;\n  }\n\n  function _defaults(obj, defaults) {\n    var keys = Object.getOwnPropertyNames(defaults);\n\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i];\n      var value = Object.getOwnPropertyDescriptor(defaults, key);\n\n      if (value && value.configurable && obj[key] === undefined) {\n        Object.defineProperty(obj, key, value);\n      }\n    }\n\n    return obj;\n  }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function _extends() {\n    _extends =\n      Object.assign ||\n      function(target) {\n        for (var i = 1; i < arguments.length; i++) {\n          var source = arguments[i];\n\n          for (var key in source) {\n            if (Object.prototype.hasOwnProperty.call(source, key)) {\n              target[key] = source[key];\n            }\n          }\n        }\n\n        return target;\n      };\n\n    return _extends.apply(this, arguments);\n  }\n\n  function _objectSpread(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n      var ownKeys = Object.keys(source);\n\n      if (typeof Object.getOwnPropertySymbols === 'function') {\n        ownKeys = ownKeys.concat(\n          Object.getOwnPropertySymbols(source).filter(function(sym) {\n            return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n          })\n        );\n      }\n\n      ownKeys.forEach(function(key) {\n        _defineProperty(target, key, source[key]);\n      });\n    }\n\n    return target;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== 'function' && superClass !== null) {\n      throw new TypeError('Super expression must either be null or a function');\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) _setPrototypeOf(subClass, superClass);\n  }\n\n  function _inheritsLoose(subClass, superClass) {\n    subClass.prototype = Object.create(superClass.prototype);\n    subClass.prototype.constructor = subClass;\n    subClass.__proto__ = superClass;\n  }\n\n  function _getPrototypeOf(o) {\n    _getPrototypeOf = Object.setPrototypeOf\n      ? Object.getPrototypeOf\n      : function _getPrototypeOf(o) {\n          return o.__proto__ || Object.getPrototypeOf(o);\n        };\n    return _getPrototypeOf(o);\n  }\n\n  function _setPrototypeOf(o, p) {\n    _setPrototypeOf =\n      Object.setPrototypeOf ||\n      function _setPrototypeOf(o, p) {\n        o.__proto__ = p;\n        return o;\n      };\n\n    return _setPrototypeOf(o, p);\n  }\n\n  function isNativeReflectConstruct() {\n    if (typeof Reflect === 'undefined' || !Reflect.construct) return false;\n    if (Reflect.construct.sham) return false;\n    if (typeof Proxy === 'function') return true;\n\n    try {\n      Date.prototype.toString.call(Reflect.construct(Date, [], function() {}));\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  function _construct(Parent, args, Class) {\n    if (isNativeReflectConstruct()) {\n      _construct = Reflect.construct;\n    } else {\n      _construct = function _construct(Parent, args, Class) {\n        var a = [null];\n        a.push.apply(a, args);\n        var Constructor = Function.bind.apply(Parent, a);\n        var instance = new Constructor();\n        if (Class) _setPrototypeOf(instance, Class.prototype);\n        return instance;\n      };\n    }\n\n    return _construct.apply(null, arguments);\n  }\n\n  function _isNativeFunction(fn) {\n    return Function.toString.call(fn).indexOf('[native code]') !== -1;\n  }\n\n  function _wrapNativeSuper(Class) {\n    var _cache = typeof Map === 'function' ? new Map() : undefined;\n\n    _wrapNativeSuper = function _wrapNativeSuper(Class) {\n      if (Class === null || !_isNativeFunction(Class)) return Class;\n\n      if (typeof Class !== 'function') {\n        throw new TypeError(\n          'Super expression must either be null or a function'\n        );\n      }\n\n      if (typeof _cache !== 'undefined') {\n        if (_cache.has(Class)) return _cache.get(Class);\n\n        _cache.set(Class, Wrapper);\n      }\n\n      function Wrapper() {\n        return _construct(Class, arguments, _getPrototypeOf(this).constructor);\n      }\n\n      Wrapper.prototype = Object.create(Class.prototype, {\n        constructor: {\n          value: Wrapper,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n      return _setPrototypeOf(Wrapper, Class);\n    };\n\n    return _wrapNativeSuper(Class);\n  }\n\n  function _instanceof(left, right) {\n    if (\n      right != null &&\n      typeof Symbol !== 'undefined' &&\n      right[Symbol.hasInstance]\n    ) {\n      return right[Symbol.hasInstance](left);\n    } else {\n      return left instanceof right;\n    }\n  }\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule\n      ? obj\n      : {\n          default: obj\n        };\n  }\n\n  function _interopRequireWildcard(obj) {\n    if (obj && obj.__esModule) {\n      return obj;\n    } else {\n      var newObj = {};\n\n      if (obj != null) {\n        for (var key in obj) {\n          if (Object.prototype.hasOwnProperty.call(obj, key)) {\n            var desc =\n              Object.defineProperty && Object.getOwnPropertyDescriptor\n                ? Object.getOwnPropertyDescriptor(obj, key)\n                : {};\n\n            if (desc.get || desc.set) {\n              Object.defineProperty(newObj, key, desc);\n            } else {\n              newObj[key] = obj[key];\n            }\n          }\n        }\n      }\n\n      newObj.default = obj;\n      return newObj;\n    }\n  }\n\n  function _newArrowCheck(innerThis, boundThis) {\n    if (innerThis !== boundThis) {\n      throw new TypeError('Cannot instantiate an arrow function');\n    }\n  }\n\n  function _objectDestructuringEmpty(obj) {\n    if (obj == null) throw new TypeError('Cannot destructure undefined');\n  }\n\n  function _objectWithoutPropertiesLoose(source, excluded) {\n    if (source == null) return {};\n    var target = {};\n    var sourceKeys = Object.keys(source);\n    var key, i;\n\n    for (i = 0; i < sourceKeys.length; i++) {\n      key = sourceKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      target[key] = source[key];\n    }\n\n    return target;\n  }\n\n  function _objectWithoutProperties(source, excluded) {\n    if (source == null) return {};\n\n    var target = _objectWithoutPropertiesLoose(source, excluded);\n\n    var key, i;\n\n    if (Object.getOwnPropertySymbols) {\n      var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n      for (i = 0; i < sourceSymbolKeys.length; i++) {\n        key = sourceSymbolKeys[i];\n        if (excluded.indexOf(key) >= 0) continue;\n        if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n        target[key] = source[key];\n      }\n    }\n\n    return target;\n  }\n\n  function _assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\n        \"this hasn't been initialised - super() hasn't been called\"\n      );\n    }\n\n    return self;\n  }\n\n  function _possibleConstructorReturn(self, call) {\n    if (call && (typeof call === 'object' || typeof call === 'function')) {\n      return call;\n    }\n\n    return _assertThisInitialized(self);\n  }\n\n  function _superPropBase(object, property) {\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\n      object = _getPrototypeOf(object);\n      if (object === null) break;\n    }\n\n    return object;\n  }\n\n  function _get(target, property, receiver) {\n    if (typeof Reflect !== 'undefined' && Reflect.get) {\n      _get = Reflect.get;\n    } else {\n      _get = function _get(target, property, receiver) {\n        var base = _superPropBase(target, property);\n\n        if (!base) return;\n        var desc = Object.getOwnPropertyDescriptor(base, property);\n\n        if (desc.get) {\n          return desc.get.call(receiver);\n        }\n\n        return desc.value;\n      };\n    }\n\n    return _get(target, property, receiver || target);\n  }\n\n  function set(target, property, value, receiver) {\n    if (typeof Reflect !== 'undefined' && Reflect.set) {\n      set = Reflect.set;\n    } else {\n      set = function set(target, property, value, receiver) {\n        var base = _superPropBase(target, property);\n\n        var desc;\n\n        if (base) {\n          desc = Object.getOwnPropertyDescriptor(base, property);\n\n          if (desc.set) {\n            desc.set.call(receiver, value);\n            return true;\n          } else if (!desc.writable) {\n            return false;\n          }\n        }\n\n        desc = Object.getOwnPropertyDescriptor(receiver, property);\n\n        if (desc) {\n          if (!desc.writable) {\n            return false;\n          }\n\n          desc.value = value;\n          Object.defineProperty(receiver, property, desc);\n        } else {\n          _defineProperty(receiver, property, value);\n        }\n\n        return true;\n      };\n    }\n\n    return set(target, property, value, receiver);\n  }\n\n  function _set(target, property, value, receiver, isStrict) {\n    var s = set(target, property, value, receiver || target);\n\n    if (!s && isStrict) {\n      throw new Error('failed to set property');\n    }\n\n    return value;\n  }\n\n  function _taggedTemplateLiteral(strings, raw) {\n    if (!raw) {\n      raw = strings.slice(0);\n    }\n\n    return Object.freeze(\n      Object.defineProperties(strings, {\n        raw: {\n          value: Object.freeze(raw)\n        }\n      })\n    );\n  }\n\n  function _taggedTemplateLiteralLoose(strings, raw) {\n    if (!raw) {\n      raw = strings.slice(0);\n    }\n\n    strings.raw = raw;\n    return strings;\n  }\n\n  function _temporalRef(val, name) {\n    if (val === _temporalUndefined) {\n      throw new ReferenceError(name + ' is not defined - temporal dead zone');\n    } else {\n      return val;\n    }\n  }\n\n  function _readOnlyError(name) {\n    throw new Error('\"' + name + '\" is read-only');\n  }\n\n  function _classNameTDZError(name) {\n    throw new Error(\n      'Class \"' + name + '\" cannot be referenced in computed property keys.'\n    );\n  }\n\n  var _temporalUndefined = {};\n\n  function _slicedToArray(arr, i) {\n    return (\n      _arrayWithHoles(arr) ||\n      _iterableToArrayLimit(arr, i) ||\n      _nonIterableRest()\n    );\n  }\n\n  function _slicedToArrayLoose(arr, i) {\n    return (\n      _arrayWithHoles(arr) ||\n      _iterableToArrayLimitLoose(arr, i) ||\n      _nonIterableRest()\n    );\n  }\n\n  function _toArray(arr) {\n    return _arrayWithHoles(arr) || _iterableToArray(arr) || _nonIterableRest();\n  }\n\n  function _toConsumableArray(arr) {\n    return (\n      _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread()\n    );\n  }\n\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) {\n      for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++)\n        arr2[i] = arr[i];\n\n      return arr2;\n    }\n  }\n\n  function _arrayWithHoles(arr) {\n    if (Array.isArray(arr)) return arr;\n  }\n\n  function _iterableToArray(iter) {\n    if (\n      Symbol.iterator in Object(iter) ||\n      Object.prototype.toString.call(iter) === '[object Arguments]'\n    )\n      return Array.from(iter);\n  }\n\n  function _iterableToArrayLimit(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (\n        var _i = arr[Symbol.iterator](), _s;\n        !(_n = (_s = _i.next()).done);\n        _n = true\n      ) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i['return'] != null) _i['return']();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  function _iterableToArrayLimitLoose(arr, i) {\n    var _arr = [];\n\n    for (\n      var _iterator = arr[Symbol.iterator](), _step;\n      !(_step = _iterator.next()).done;\n\n    ) {\n      _arr.push(_step.value);\n\n      if (i && _arr.length === i) break;\n    }\n\n    return _arr;\n  }\n\n  function _nonIterableSpread() {\n    throw new TypeError('Invalid attempt to spread non-iterable instance');\n  }\n\n  function _nonIterableRest() {\n    throw new TypeError('Invalid attempt to destructure non-iterable instance');\n  }\n\n  function _skipFirstGeneratorNext(fn) {\n    return function() {\n      var it = fn.apply(this, arguments);\n      it.next();\n      return it;\n    };\n  }\n\n  function _toPrimitive(input, hint) {\n    if (typeof input !== 'object' || input === null) return input;\n    var prim = input[Symbol.toPrimitive];\n\n    if (prim !== undefined) {\n      var res = prim.call(input, hint || 'default');\n      if (typeof res !== 'object') return res;\n      throw new TypeError('@@toPrimitive must return a primitive value.');\n    }\n\n    return (hint === 'string' ? String : Number)(input);\n  }\n\n  function _toPropertyKey(arg) {\n    var key = _toPrimitive(arg, 'string');\n\n    return typeof key === 'symbol' ? key : String(key);\n  }\n\n  function _initializerWarningHelper(descriptor, context) {\n    throw new Error(\n      'Decorating class property failed. Please ensure that ' +\n        'proposal-class-properties is enabled and set to use loose mode. ' +\n        'To use proposal-class-properties in spec mode with decorators, wait for ' +\n        'the next major version of decorators in stage 2.'\n    );\n  }\n\n  function _initializerDefineProperty(target, property, descriptor, context) {\n    if (!descriptor) return;\n    Object.defineProperty(target, property, {\n      enumerable: descriptor.enumerable,\n      configurable: descriptor.configurable,\n      writable: descriptor.writable,\n      value: descriptor.initializer\n        ? descriptor.initializer.call(context)\n        : void 0\n    });\n  }\n\n  function _applyDecoratedDescriptor(\n    target,\n    property,\n    decorators,\n    descriptor,\n    context\n  ) {\n    var desc = {};\n    Object.keys(descriptor).forEach(function(key) {\n      desc[key] = descriptor[key];\n    });\n    desc.enumerable = !!desc.enumerable;\n    desc.configurable = !!desc.configurable;\n\n    if ('value' in desc || desc.initializer) {\n      desc.writable = true;\n    }\n\n    desc = decorators\n      .slice()\n      .reverse()\n      .reduce(function(desc, decorator) {\n        return decorator(target, property, desc) || desc;\n      }, desc);\n\n    if (context && desc.initializer !== void 0) {\n      desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n      desc.initializer = undefined;\n    }\n\n    if (desc.initializer === void 0) {\n      Object.defineProperty(target, property, desc);\n      desc = null;\n    }\n\n    return desc;\n  }\n\n  var id = 0;\n\n  function _classPrivateFieldLooseKey(name) {\n    return '__private_' + id++ + '_' + name;\n  }\n\n  function _classPrivateFieldLooseBase(receiver, privateKey) {\n    if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) {\n      throw new TypeError('attempted to use private field on non-instance');\n    }\n\n    return receiver;\n  }\n\n  function _classPrivateFieldGet(receiver, privateMap) {\n    if (!privateMap.has(receiver)) {\n      throw new TypeError('attempted to get private field on non-instance');\n    }\n\n    var descriptor = privateMap.get(receiver);\n\n    if (descriptor.get) {\n      return descriptor.get.call(receiver);\n    }\n\n    return descriptor.value;\n  }\n\n  function _classPrivateFieldSet(receiver, privateMap, value) {\n    if (!privateMap.has(receiver)) {\n      throw new TypeError('attempted to set private field on non-instance');\n    }\n\n    var descriptor = privateMap.get(receiver);\n\n    if (descriptor.set) {\n      descriptor.set.call(receiver, value);\n    } else {\n      if (!descriptor.writable) {\n        throw new TypeError('attempted to set read only private field');\n      }\n\n      descriptor.value = value;\n    }\n\n    return value;\n  }\n\n  function _classStaticPrivateFieldSpecGet(\n    receiver,\n    classConstructor,\n    descriptor\n  ) {\n    if (receiver !== classConstructor) {\n      throw new TypeError('Private static access of wrong provenance');\n    }\n\n    return descriptor.value;\n  }\n\n  function _classStaticPrivateFieldSpecSet(\n    receiver,\n    classConstructor,\n    descriptor,\n    value\n  ) {\n    if (receiver !== classConstructor) {\n      throw new TypeError('Private static access of wrong provenance');\n    }\n\n    if (!descriptor.writable) {\n      throw new TypeError('attempted to set read only private field');\n    }\n\n    descriptor.value = value;\n    return value;\n  }\n\n  function _classStaticPrivateMethodGet(receiver, classConstructor, method) {\n    if (receiver !== classConstructor) {\n      throw new TypeError('Private static access of wrong provenance');\n    }\n\n    return method;\n  }\n\n  function _classStaticPrivateMethodSet() {\n    throw new TypeError('attempted to set read only static private field');\n  }\n\n  function _decorate(decorators, factory, superClass, mixins) {\n    var api = _getDecoratorsApi();\n\n    if (mixins) {\n      for (var i = 0; i < mixins.length; i++) {\n        api = mixins[i](api);\n      }\n    }\n\n    var r = factory(function initialize(O) {\n      api.initializeInstanceElements(O, decorated.elements);\n    }, superClass);\n    var decorated = api.decorateClass(\n      _coalesceClassElements(r.d.map(_createElementDescriptor)),\n      decorators\n    );\n    api.initializeClassElements(r.F, decorated.elements);\n    return api.runClassFinishers(r.F, decorated.finishers);\n  }\n\n  function _getDecoratorsApi() {\n    _getDecoratorsApi = function() {\n      return api;\n    };\n\n    var api = {\n      elementsDefinitionOrder: [['method'], ['field']],\n      initializeInstanceElements: function(O, elements) {\n        ['method', 'field'].forEach(function(kind) {\n          elements.forEach(function(element) {\n            if (element.kind === kind && element.placement === 'own') {\n              this.defineClassElement(O, element);\n            }\n          }, this);\n        }, this);\n      },\n      initializeClassElements: function(F, elements) {\n        var proto = F.prototype;\n        ['method', 'field'].forEach(function(kind) {\n          elements.forEach(function(element) {\n            var placement = element.placement;\n\n            if (\n              element.kind === kind &&\n              (placement === 'static' || placement === 'prototype')\n            ) {\n              var receiver = placement === 'static' ? F : proto;\n              this.defineClassElement(receiver, element);\n            }\n          }, this);\n        }, this);\n      },\n      defineClassElement: function(receiver, element) {\n        var descriptor = element.descriptor;\n\n        if (element.kind === 'field') {\n          var initializer = element.initializer;\n          descriptor = {\n            enumerable: descriptor.enumerable,\n            writable: descriptor.writable,\n            configurable: descriptor.configurable,\n            value: initializer === void 0 ? void 0 : initializer.call(receiver)\n          };\n        }\n\n        Object.defineProperty(receiver, element.key, descriptor);\n      },\n      decorateClass: function(elements, decorators) {\n        var newElements = [];\n        var finishers = [];\n        var placements = {\n          static: [],\n          prototype: [],\n          own: []\n        };\n        elements.forEach(function(element) {\n          this.addElementPlacement(element, placements);\n        }, this);\n        elements.forEach(function(element) {\n          if (!_hasDecorators(element)) return newElements.push(element);\n          var elementFinishersExtras = this.decorateElement(\n            element,\n            placements\n          );\n          newElements.push(elementFinishersExtras.element);\n          newElements.push.apply(newElements, elementFinishersExtras.extras);\n          finishers.push.apply(finishers, elementFinishersExtras.finishers);\n        }, this);\n\n        if (!decorators) {\n          return {\n            elements: newElements,\n            finishers: finishers\n          };\n        }\n\n        var result = this.decorateConstructor(newElements, decorators);\n        finishers.push.apply(finishers, result.finishers);\n        result.finishers = finishers;\n        return result;\n      },\n      addElementPlacement: function(element, placements, silent) {\n        var keys = placements[element.placement];\n\n        if (!silent && keys.indexOf(element.key) !== -1) {\n          throw new TypeError('Duplicated element (' + element.key + ')');\n        }\n\n        keys.push(element.key);\n      },\n      decorateElement: function(element, placements) {\n        var extras = [];\n        var finishers = [];\n\n        for (\n          var decorators = element.decorators, i = decorators.length - 1;\n          i >= 0;\n          i--\n        ) {\n          var keys = placements[element.placement];\n          keys.splice(keys.indexOf(element.key), 1);\n          var elementObject = this.fromElementDescriptor(element);\n          var elementFinisherExtras = this.toElementFinisherExtras(\n            (0, decorators[i])(elementObject) || elementObject\n          );\n          element = elementFinisherExtras.element;\n          this.addElementPlacement(element, placements);\n\n          if (elementFinisherExtras.finisher) {\n            finishers.push(elementFinisherExtras.finisher);\n          }\n\n          var newExtras = elementFinisherExtras.extras;\n\n          if (newExtras) {\n            for (var j = 0; j < newExtras.length; j++) {\n              this.addElementPlacement(newExtras[j], placements);\n            }\n\n            extras.push.apply(extras, newExtras);\n          }\n        }\n\n        return {\n          element: element,\n          finishers: finishers,\n          extras: extras\n        };\n      },\n      decorateConstructor: function(elements, decorators) {\n        var finishers = [];\n\n        for (var i = decorators.length - 1; i >= 0; i--) {\n          var obj = this.fromClassDescriptor(elements);\n          var elementsAndFinisher = this.toClassDescriptor(\n            (0, decorators[i])(obj) || obj\n          );\n\n          if (elementsAndFinisher.finisher !== undefined) {\n            finishers.push(elementsAndFinisher.finisher);\n          }\n\n          if (elementsAndFinisher.elements !== undefined) {\n            elements = elementsAndFinisher.elements;\n\n            for (var j = 0; j < elements.length - 1; j++) {\n              for (var k = j + 1; k < elements.length; k++) {\n                if (\n                  elements[j].key === elements[k].key &&\n                  elements[j].placement === elements[k].placement\n                ) {\n                  throw new TypeError(\n                    'Duplicated element (' + elements[j].key + ')'\n                  );\n                }\n              }\n            }\n          }\n        }\n\n        return {\n          elements: elements,\n          finishers: finishers\n        };\n      },\n      fromElementDescriptor: function(element) {\n        var obj = {\n          kind: element.kind,\n          key: element.key,\n          placement: element.placement,\n          descriptor: element.descriptor\n        };\n        var desc = {\n          value: 'Descriptor',\n          configurable: true\n        };\n        Object.defineProperty(obj, Symbol.toStringTag, desc);\n        if (element.kind === 'field') obj.initializer = element.initializer;\n        return obj;\n      },\n      toElementDescriptors: function(elementObjects) {\n        if (elementObjects === undefined) return;\n        return _toArray(elementObjects).map(function(elementObject) {\n          var element = this.toElementDescriptor(elementObject);\n          this.disallowProperty(\n            elementObject,\n            'finisher',\n            'An element descriptor'\n          );\n          this.disallowProperty(\n            elementObject,\n            'extras',\n            'An element descriptor'\n          );\n          return element;\n        }, this);\n      },\n      toElementDescriptor: function(elementObject) {\n        var kind = String(elementObject.kind);\n\n        if (kind !== 'method' && kind !== 'field') {\n          throw new TypeError(\n            'An element descriptor\\'s .kind property must be either \"method\" or' +\n              ' \"field\", but a decorator created an element descriptor with' +\n              ' .kind \"' +\n              kind +\n              '\"'\n          );\n        }\n\n        var key = _toPropertyKey(elementObject.key);\n\n        var placement = String(elementObject.placement);\n\n        if (\n          placement !== 'static' &&\n          placement !== 'prototype' &&\n          placement !== 'own'\n        ) {\n          throw new TypeError(\n            'An element descriptor\\'s .placement property must be one of \"static\",' +\n              ' \"prototype\" or \"own\", but a decorator created an element descriptor' +\n              ' with .placement \"' +\n              placement +\n              '\"'\n          );\n        }\n\n        var descriptor = elementObject.descriptor;\n        this.disallowProperty(\n          elementObject,\n          'elements',\n          'An element descriptor'\n        );\n        var element = {\n          kind: kind,\n          key: key,\n          placement: placement,\n          descriptor: Object.assign({}, descriptor)\n        };\n\n        if (kind !== 'field') {\n          this.disallowProperty(\n            elementObject,\n            'initializer',\n            'A method descriptor'\n          );\n        } else {\n          this.disallowProperty(\n            descriptor,\n            'get',\n            'The property descriptor of a field descriptor'\n          );\n          this.disallowProperty(\n            descriptor,\n            'set',\n            'The property descriptor of a field descriptor'\n          );\n          this.disallowProperty(\n            descriptor,\n            'value',\n            'The property descriptor of a field descriptor'\n          );\n          element.initializer = elementObject.initializer;\n        }\n\n        return element;\n      },\n      toElementFinisherExtras: function(elementObject) {\n        var element = this.toElementDescriptor(elementObject);\n\n        var finisher = _optionalCallableProperty(elementObject, 'finisher');\n\n        var extras = this.toElementDescriptors(elementObject.extras);\n        return {\n          element: element,\n          finisher: finisher,\n          extras: extras\n        };\n      },\n      fromClassDescriptor: function(elements) {\n        var obj = {\n          kind: 'class',\n          elements: elements.map(this.fromElementDescriptor, this)\n        };\n        var desc = {\n          value: 'Descriptor',\n          configurable: true\n        };\n        Object.defineProperty(obj, Symbol.toStringTag, desc);\n        return obj;\n      },\n      toClassDescriptor: function(obj) {\n        var kind = String(obj.kind);\n\n        if (kind !== 'class') {\n          throw new TypeError(\n            'A class descriptor\\'s .kind property must be \"class\", but a decorator' +\n              ' created a class descriptor with .kind \"' +\n              kind +\n              '\"'\n          );\n        }\n\n        this.disallowProperty(obj, 'key', 'A class descriptor');\n        this.disallowProperty(obj, 'placement', 'A class descriptor');\n        this.disallowProperty(obj, 'descriptor', 'A class descriptor');\n        this.disallowProperty(obj, 'initializer', 'A class descriptor');\n        this.disallowProperty(obj, 'extras', 'A class descriptor');\n\n        var finisher = _optionalCallableProperty(obj, 'finisher');\n\n        var elements = this.toElementDescriptors(obj.elements);\n        return {\n          elements: elements,\n          finisher: finisher\n        };\n      },\n      runClassFinishers: function(constructor, finishers) {\n        for (var i = 0; i < finishers.length; i++) {\n          var newConstructor = (0, finishers[i])(constructor);\n\n          if (newConstructor !== undefined) {\n            if (typeof newConstructor !== 'function') {\n              throw new TypeError('Finishers must return a constructor.');\n            }\n\n            constructor = newConstructor;\n          }\n        }\n\n        return constructor;\n      },\n      disallowProperty: function(obj, name, objectType) {\n        if (obj[name] !== undefined) {\n          throw new TypeError(\n            objectType + \" can't have a .\" + name + ' property.'\n          );\n        }\n      }\n    };\n    return api;\n  }\n\n  function _createElementDescriptor(def) {\n    var key = _toPropertyKey(def.key);\n\n    var descriptor;\n\n    if (def.kind === 'method') {\n      descriptor = {\n        value: def.value,\n        writable: true,\n        configurable: true,\n        enumerable: false\n      };\n    } else if (def.kind === 'get') {\n      descriptor = {\n        get: def.value,\n        configurable: true,\n        enumerable: false\n      };\n    } else if (def.kind === 'set') {\n      descriptor = {\n        set: def.value,\n        configurable: true,\n        enumerable: false\n      };\n    } else if (def.kind === 'field') {\n      descriptor = {\n        configurable: true,\n        writable: true,\n        enumerable: true\n      };\n    }\n\n    var element = {\n      kind: def.kind === 'field' ? 'field' : 'method',\n      key: key,\n      placement: def.static\n        ? 'static'\n        : def.kind === 'field'\n        ? 'own'\n        : 'prototype',\n      descriptor: descriptor\n    };\n    if (def.decorators) element.decorators = def.decorators;\n    if (def.kind === 'field') element.initializer = def.value;\n    return element;\n  }\n\n  function _coalesceGetterSetter(element, other) {\n    if (element.descriptor.get !== undefined) {\n      other.descriptor.get = element.descriptor.get;\n    } else {\n      other.descriptor.set = element.descriptor.set;\n    }\n  }\n\n  function _coalesceClassElements(elements) {\n    var newElements = [];\n\n    var isSameElement = function(other) {\n      return (\n        other.kind === 'method' &&\n        other.key === element.key &&\n        other.placement === element.placement\n      );\n    };\n\n    for (var i = 0; i < elements.length; i++) {\n      var element = elements[i];\n      var other;\n\n      if (\n        element.kind === 'method' &&\n        (other = newElements.find(isSameElement))\n      ) {\n        if (\n          _isDataDescriptor(element.descriptor) ||\n          _isDataDescriptor(other.descriptor)\n        ) {\n          if (_hasDecorators(element) || _hasDecorators(other)) {\n            throw new ReferenceError(\n              'Duplicated methods (' + element.key + \") can't be decorated.\"\n            );\n          }\n\n          other.descriptor = element.descriptor;\n        } else {\n          if (_hasDecorators(element)) {\n            if (_hasDecorators(other)) {\n              throw new ReferenceError(\n                \"Decorators can't be placed on different accessors with for \" +\n                  'the same property (' +\n                  element.key +\n                  ').'\n              );\n            }\n\n            other.decorators = element.decorators;\n          }\n\n          _coalesceGetterSetter(element, other);\n        }\n      } else {\n        newElements.push(element);\n      }\n    }\n\n    return newElements;\n  }\n\n  function _hasDecorators(element) {\n    return element.decorators && element.decorators.length;\n  }\n\n  function _isDataDescriptor(desc) {\n    return (\n      desc !== undefined &&\n      !(desc.value === undefined && desc.writable === undefined)\n    );\n  }\n\n  function _optionalCallableProperty(obj, name) {\n    var value = obj[name];\n\n    if (value !== undefined && typeof value !== 'function') {\n      throw new TypeError(\"Expected '\" + name + \"' to be a function\");\n    }\n\n    return value;\n  }\n\n  function _classPrivateMethodGet(receiver, privateSet, fn) {\n    if (!privateSet.has(receiver)) {\n      throw new TypeError('attempted to get private field on non-instance');\n    }\n\n    return fn;\n  }\n\n  function _classPrivateMethodSet() {\n    throw new TypeError('attempted to reassign private method');\n  }\n\n  function _wrapRegExp(re, groups) {\n    _wrapRegExp = function(re, groups) {\n      return new BabelRegExp(re, groups);\n    };\n\n    var _RegExp = _wrapNativeSuper(RegExp);\n\n    var _super = RegExp.prototype;\n\n    var _groups = new WeakMap();\n\n    function BabelRegExp(re, groups) {\n      var _this = _RegExp.call(this, re);\n\n      _groups.set(_this, groups);\n\n      return _this;\n    }\n\n    _inherits(BabelRegExp, _RegExp);\n\n    BabelRegExp.prototype.exec = function(str) {\n      var result = _super.exec.call(this, str);\n\n      if (result) result.groups = buildGroups(result, this);\n      return result;\n    };\n\n    BabelRegExp.prototype[Symbol.replace] = function(str, substitution) {\n      if (typeof substitution === 'string') {\n        var groups = _groups.get(this);\n\n        return _super[Symbol.replace].call(\n          this,\n          str,\n          substitution.replace(/\\$<([^>]+)>/g, function(_, name) {\n            return '$' + groups[name];\n          })\n        );\n      } else if (typeof substitution === 'function') {\n        var _this = this;\n\n        return _super[Symbol.replace].call(this, str, function() {\n          var args = [];\n          args.push.apply(args, arguments);\n\n          if (typeof args[args.length - 1] !== 'object') {\n            args.push(buildGroups(args, _this));\n          }\n\n          return substitution.apply(this, args);\n        });\n      } else {\n        return _super[Symbol.replace].call(this, str, substitution);\n      }\n    };\n\n    function buildGroups(result, re) {\n      var g = _groups.get(re);\n\n      return Object.keys(g).reduce(function(groups, name) {\n        groups[name] = result[g[name]];\n        return groups;\n      }, Object.create(null));\n    }\n\n    return _wrapRegExp.apply(this, arguments);\n  }\n\n  var vectorMultiply = function vectorMultiply(v, amount) {\n    return createVector(v.x * amount, v.y * amount);\n  };\n\n  var vectorAdd = function vectorAdd(a, b) {\n    return createVector(a.x + b.x, a.y + b.y);\n  };\n\n  var vectorNormalize = function vectorNormalize(v) {\n    var l = Math.sqrt(v.x * v.x + v.y * v.y);\n    if (l === 0) {\n      return {\n        x: 0,\n        y: 0\n      };\n    }\n    return createVector(v.x / l, v.y / l);\n  };\n\n  var vectorRotate = function vectorRotate(v, radians, origin) {\n    var cos = Math.cos(radians);\n    var sin = Math.sin(radians);\n    var t = createVector(v.x - origin.x, v.y - origin.y);\n    return createVector(\n      origin.x + cos * t.x - sin * t.y,\n      origin.y + sin * t.x + cos * t.y\n    );\n  };\n\n  var createVector = function createVector() {\n    var x =\n      arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var y =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    return { x: x, y: y };\n  };\n\n  var getMarkupValue = function getMarkupValue(value, size) {\n    var scalar =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n    var axis = arguments.length > 3 ? arguments[3] : undefined;\n    if (typeof value === 'string') {\n      return parseFloat(value) * scalar;\n    }\n    if (typeof value === 'number') {\n      return value * (axis ? size[axis] : Math.min(size.width, size.height));\n    }\n    return;\n  };\n\n  var getMarkupStyles = function getMarkupStyles(markup, size, scale) {\n    var lineStyle = markup.borderStyle || markup.lineStyle || 'solid';\n    var fill = markup.backgroundColor || markup.fontColor || 'transparent';\n    var stroke = markup.borderColor || markup.lineColor || 'transparent';\n    var strokeWidth = getMarkupValue(\n      markup.borderWidth || markup.lineWidth,\n      size,\n      scale\n    );\n    var lineCap = markup.lineCap || 'round';\n    var lineJoin = markup.lineJoin || 'round';\n    var dashes =\n      typeof lineStyle === 'string'\n        ? ''\n        : lineStyle\n            .map(function(v) {\n              return getMarkupValue(v, size, scale);\n            })\n            .join(',');\n    var opacity = markup.opacity || 1;\n    return {\n      'stroke-linecap': lineCap,\n      'stroke-linejoin': lineJoin,\n      'stroke-width': strokeWidth || 0,\n      'stroke-dasharray': dashes,\n      stroke: stroke,\n      fill: fill,\n      opacity: opacity\n    };\n  };\n\n  var isDefined = function isDefined(value) {\n    return value != null;\n  };\n\n  var getMarkupRect = function getMarkupRect(rect, size) {\n    var scalar =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\n    var left =\n      getMarkupValue(rect.x, size, scalar, 'width') ||\n      getMarkupValue(rect.left, size, scalar, 'width');\n    var top =\n      getMarkupValue(rect.y, size, scalar, 'height') ||\n      getMarkupValue(rect.top, size, scalar, 'height');\n    var width = getMarkupValue(rect.width, size, scalar, 'width');\n    var height = getMarkupValue(rect.height, size, scalar, 'height');\n    var right = getMarkupValue(rect.right, size, scalar, 'width');\n    var bottom = getMarkupValue(rect.bottom, size, scalar, 'height');\n\n    if (!isDefined(top)) {\n      if (isDefined(height) && isDefined(bottom)) {\n        top = size.height - height - bottom;\n      } else {\n        top = bottom;\n      }\n    }\n\n    if (!isDefined(left)) {\n      if (isDefined(width) && isDefined(right)) {\n        left = size.width - width - right;\n      } else {\n        left = right;\n      }\n    }\n\n    if (!isDefined(width)) {\n      if (isDefined(left) && isDefined(right)) {\n        width = size.width - left - right;\n      } else {\n        width = 0;\n      }\n    }\n\n    if (!isDefined(height)) {\n      if (isDefined(top) && isDefined(bottom)) {\n        height = size.height - top - bottom;\n      } else {\n        height = 0;\n      }\n    }\n\n    return {\n      x: left || 0,\n      y: top || 0,\n      width: width || 0,\n      height: height || 0\n    };\n  };\n\n  var pointsToPathShape = function pointsToPathShape(points) {\n    return points\n      .map(function(point, index) {\n        return ''\n          .concat(index === 0 ? 'M' : 'L', ' ')\n          .concat(point.x, ' ')\n          .concat(point.y);\n      })\n      .join(' ');\n  };\n\n  var setAttributes = function setAttributes(element, attr) {\n    return Object.keys(attr).forEach(function(key) {\n      return element.setAttribute(key, attr[key]);\n    });\n  };\n\n  var ns = 'http://www.w3.org/2000/svg';\n  var svg = function svg(tag, attr) {\n    var element = document.createElementNS(ns, tag);\n    if (attr) {\n      setAttributes(element, attr);\n    }\n    return element;\n  };\n\n  var updateRect = function updateRect(element) {\n    return setAttributes(\n      element,\n      Object.assign({}, element.rect, element.styles)\n    );\n  };\n\n  var updateEllipse = function updateEllipse(element) {\n    var cx = element.rect.x + element.rect.width * 0.5;\n    var cy = element.rect.y + element.rect.height * 0.5;\n    var rx = element.rect.width * 0.5;\n    var ry = element.rect.height * 0.5;\n    return setAttributes(\n      element,\n      Object.assign(\n        {\n          cx: cx,\n          cy: cy,\n          rx: rx,\n          ry: ry\n        },\n        element.styles\n      )\n    );\n  };\n\n  var IMAGE_FIT_STYLE = {\n    contain: 'xMidYMid meet',\n    cover: 'xMidYMid slice'\n  };\n\n  var updateImage = function updateImage(element, markup) {\n    setAttributes(\n      element,\n      Object.assign({}, element.rect, element.styles, {\n        preserveAspectRatio: IMAGE_FIT_STYLE[markup.fit] || 'none'\n      })\n    );\n  };\n\n  var TEXT_ANCHOR = {\n    left: 'start',\n    center: 'middle',\n    right: 'end'\n  };\n\n  var updateText = function updateText(element, markup, size, scale) {\n    var fontSize = getMarkupValue(markup.fontSize, size, scale);\n    var fontFamily = markup.fontFamily || 'sans-serif';\n    var fontWeight = markup.fontWeight || 'normal';\n    var textAlign = TEXT_ANCHOR[markup.textAlign] || 'start';\n\n    setAttributes(\n      element,\n      Object.assign({}, element.rect, element.styles, {\n        'stroke-width': 0,\n        'font-weight': fontWeight,\n        'font-size': fontSize,\n        'font-family': fontFamily,\n        'text-anchor': textAlign\n      })\n    );\n\n    // update text\n    if (element.text !== markup.text) {\n      element.text = markup.text;\n      element.textContent = markup.text.length ? markup.text : ' ';\n    }\n  };\n\n  var updateLine = function updateLine(element, markup, size, scale) {\n    setAttributes(\n      element,\n      Object.assign({}, element.rect, element.styles, {\n        fill: 'none'\n      })\n    );\n\n    var line = element.childNodes[0];\n    var begin = element.childNodes[1];\n    var end = element.childNodes[2];\n\n    var origin = element.rect;\n\n    var target = {\n      x: element.rect.x + element.rect.width,\n      y: element.rect.y + element.rect.height\n    };\n\n    setAttributes(line, {\n      x1: origin.x,\n      y1: origin.y,\n      x2: target.x,\n      y2: target.y\n    });\n\n    if (!markup.lineDecoration) return;\n\n    begin.style.display = 'none';\n    end.style.display = 'none';\n\n    var v = vectorNormalize({\n      x: target.x - origin.x,\n      y: target.y - origin.y\n    });\n\n    var l = getMarkupValue(0.05, size, scale);\n\n    if (markup.lineDecoration.indexOf('arrow-begin') !== -1) {\n      var arrowBeginRotationPoint = vectorMultiply(v, l);\n      var arrowBeginCenter = vectorAdd(origin, arrowBeginRotationPoint);\n      var arrowBeginA = vectorRotate(origin, 2, arrowBeginCenter);\n      var arrowBeginB = vectorRotate(origin, -2, arrowBeginCenter);\n\n      setAttributes(begin, {\n        style: 'display:block;',\n        d: 'M'\n          .concat(arrowBeginA.x, ',')\n          .concat(arrowBeginA.y, ' L')\n          .concat(origin.x, ',')\n          .concat(origin.y, ' L')\n          .concat(arrowBeginB.x, ',')\n          .concat(arrowBeginB.y)\n      });\n    }\n\n    if (markup.lineDecoration.indexOf('arrow-end') !== -1) {\n      var arrowEndRotationPoint = vectorMultiply(v, -l);\n      var arrowEndCenter = vectorAdd(target, arrowEndRotationPoint);\n      var arrowEndA = vectorRotate(target, 2, arrowEndCenter);\n      var arrowEndB = vectorRotate(target, -2, arrowEndCenter);\n\n      setAttributes(end, {\n        style: 'display:block;',\n        d: 'M'\n          .concat(arrowEndA.x, ',')\n          .concat(arrowEndA.y, ' L')\n          .concat(target.x, ',')\n          .concat(target.y, ' L')\n          .concat(arrowEndB.x, ',')\n          .concat(arrowEndB.y)\n      });\n    }\n  };\n\n  var updatePath = function updatePath(element, markup, size, scale) {\n    setAttributes(\n      element,\n      Object.assign({}, element.styles, {\n        fill: 'none',\n        d: pointsToPathShape(\n          markup.points.map(function(point) {\n            return {\n              x: getMarkupValue(point.x, size, scale, 'width'),\n              y: getMarkupValue(point.y, size, scale, 'height')\n            };\n          })\n        )\n      })\n    );\n  };\n\n  var createShape = function createShape(node) {\n    return function(markup) {\n      return svg(node, { id: markup.id });\n    };\n  };\n\n  var createImage = function createImage(markup) {\n    var shape = svg('image', {\n      id: markup.id,\n      'stroke-linecap': 'round',\n      'stroke-linejoin': 'round',\n      opacity: '0'\n    });\n\n    shape.onload = function() {\n      shape.setAttribute('opacity', markup.opacity || 1);\n    };\n    shape.setAttributeNS(\n      'http://www.w3.org/1999/xlink',\n      'xlink:href',\n      markup.src\n    );\n    return shape;\n  };\n\n  var createLine = function createLine(markup) {\n    var shape = svg('g', {\n      id: markup.id,\n      'stroke-linecap': 'round',\n      'stroke-linejoin': 'round'\n    });\n\n    var line = svg('line');\n    shape.appendChild(line);\n\n    var begin = svg('path');\n    shape.appendChild(begin);\n\n    var end = svg('path');\n    shape.appendChild(end);\n\n    return shape;\n  };\n\n  var CREATE_TYPE_ROUTES = {\n    image: createImage,\n    rect: createShape('rect'),\n    ellipse: createShape('ellipse'),\n    text: createShape('text'),\n    path: createShape('path'),\n    line: createLine\n  };\n\n  var UPDATE_TYPE_ROUTES = {\n    rect: updateRect,\n    ellipse: updateEllipse,\n    image: updateImage,\n    text: updateText,\n    path: updatePath,\n    line: updateLine\n  };\n\n  var createMarkupByType = function createMarkupByType(type, markup) {\n    return CREATE_TYPE_ROUTES[type](markup);\n  };\n\n  var updateMarkupByType = function updateMarkupByType(\n    element,\n    type,\n    markup,\n    size,\n    scale\n  ) {\n    if (type !== 'path') {\n      element.rect = getMarkupRect(markup, size, scale);\n    }\n    element.styles = getMarkupStyles(markup, size, scale);\n    UPDATE_TYPE_ROUTES[type](element, markup, size, scale);\n  };\n\n  var MARKUP_RECT = [\n    'x',\n    'y',\n    'left',\n    'top',\n    'right',\n    'bottom',\n    'width',\n    'height'\n  ];\n\n  var toOptionalFraction = function toOptionalFraction(value) {\n    return typeof value === 'string' && /%/.test(value)\n      ? parseFloat(value) / 100\n      : value;\n  };\n\n  // adds default markup properties, clones markup\n  var prepareMarkup = function prepareMarkup(markup) {\n    var _markup = _slicedToArray(markup, 2),\n      type = _markup[0],\n      props = _markup[1];\n\n    var rect = props.points\n      ? {}\n      : MARKUP_RECT.reduce(function(prev, curr) {\n          prev[curr] = toOptionalFraction(props[curr]);\n          return prev;\n        }, {});\n\n    return [\n      type,\n      Object.assign(\n        {\n          zIndex: 0\n        },\n        props,\n        rect\n      )\n    ];\n  };\n\n  var sortMarkupByZIndex = function sortMarkupByZIndex(a, b) {\n    if (a[1].zIndex > b[1].zIndex) {\n      return 1;\n    }\n    if (a[1].zIndex < b[1].zIndex) {\n      return -1;\n    }\n    return 0;\n  };\n\n  var createMarkupView = function createMarkupView(_) {\n    return _.utils.createView({\n      name: 'image-preview-markup',\n      tag: 'svg',\n      ignoreRect: true,\n      mixins: {\n        apis: ['width', 'height', 'crop', 'markup', 'resize', 'dirty']\n      },\n\n      write: function write(_ref) {\n        var root = _ref.root,\n          props = _ref.props;\n\n        if (!props.dirty) return;\n        var crop = props.crop,\n          resize = props.resize,\n          markup = props.markup;\n\n        var viewWidth = props.width;\n        var viewHeight = props.height;\n\n        var cropWidth = crop.width;\n        var cropHeight = crop.height;\n\n        if (resize) {\n          var _size = resize.size;\n\n          var outputWidth = _size && _size.width;\n          var outputHeight = _size && _size.height;\n          var outputFit = resize.mode;\n          var outputUpscale = resize.upscale;\n\n          if (outputWidth && !outputHeight) outputHeight = outputWidth;\n          if (outputHeight && !outputWidth) outputWidth = outputHeight;\n\n          var shouldUpscale =\n            cropWidth < outputWidth && cropHeight < outputHeight;\n\n          if (!shouldUpscale || (shouldUpscale && outputUpscale)) {\n            var scalarWidth = outputWidth / cropWidth;\n            var scalarHeight = outputHeight / cropHeight;\n\n            if (outputFit === 'force') {\n              cropWidth = outputWidth;\n              cropHeight = outputHeight;\n            } else {\n              var scalar;\n              if (outputFit === 'cover') {\n                scalar = Math.max(scalarWidth, scalarHeight);\n              } else if (outputFit === 'contain') {\n                scalar = Math.min(scalarWidth, scalarHeight);\n              }\n              cropWidth = cropWidth * scalar;\n              cropHeight = cropHeight * scalar;\n            }\n          }\n        }\n\n        var size = {\n          width: viewWidth,\n          height: viewHeight\n        };\n\n        root.element.setAttribute('width', size.width);\n        root.element.setAttribute('height', size.height);\n\n        var scale = Math.min(viewWidth / cropWidth, viewHeight / cropHeight);\n\n        // clear\n        root.element.innerHTML = '';\n\n        // get filter\n        var markupFilter = root.query('GET_IMAGE_PREVIEW_MARKUP_FILTER');\n\n        // draw new\n        markup\n          .filter(markupFilter)\n          .map(prepareMarkup)\n          .sort(sortMarkupByZIndex)\n          .forEach(function(markup) {\n            var _markup = _slicedToArray(markup, 2),\n              type = _markup[0],\n              settings = _markup[1];\n\n            // create\n            var element = createMarkupByType(type, settings);\n\n            // update\n            updateMarkupByType(element, type, settings, size, scale);\n\n            // add\n            root.element.appendChild(element);\n          });\n      }\n    });\n  };\n\n  var createVector$1 = function createVector(x, y) {\n    return { x: x, y: y };\n  };\n\n  var vectorDot = function vectorDot(a, b) {\n    return a.x * b.x + a.y * b.y;\n  };\n\n  var vectorSubtract = function vectorSubtract(a, b) {\n    return createVector$1(a.x - b.x, a.y - b.y);\n  };\n\n  var vectorDistanceSquared = function vectorDistanceSquared(a, b) {\n    return vectorDot(vectorSubtract(a, b), vectorSubtract(a, b));\n  };\n\n  var vectorDistance = function vectorDistance(a, b) {\n    return Math.sqrt(vectorDistanceSquared(a, b));\n  };\n\n  var getOffsetPointOnEdge = function getOffsetPointOnEdge(length, rotation) {\n    var a = length;\n\n    var A = 1.5707963267948966;\n    var B = rotation;\n    var C = 1.5707963267948966 - rotation;\n\n    var sinA = Math.sin(A);\n    var sinB = Math.sin(B);\n    var sinC = Math.sin(C);\n    var cosC = Math.cos(C);\n    var ratio = a / sinA;\n    var b = ratio * sinB;\n    var c = ratio * sinC;\n\n    return createVector$1(cosC * b, cosC * c);\n  };\n\n  var getRotatedRectSize = function getRotatedRectSize(rect, rotation) {\n    var w = rect.width;\n    var h = rect.height;\n\n    var hor = getOffsetPointOnEdge(w, rotation);\n    var ver = getOffsetPointOnEdge(h, rotation);\n\n    var tl = createVector$1(rect.x + Math.abs(hor.x), rect.y - Math.abs(hor.y));\n\n    var tr = createVector$1(\n      rect.x + rect.width + Math.abs(ver.y),\n      rect.y + Math.abs(ver.x)\n    );\n\n    var bl = createVector$1(\n      rect.x - Math.abs(ver.y),\n      rect.y + rect.height - Math.abs(ver.x)\n    );\n\n    return {\n      width: vectorDistance(tl, tr),\n      height: vectorDistance(tl, bl)\n    };\n  };\n\n  var calculateCanvasSize = function calculateCanvasSize(\n    image,\n    canvasAspectRatio\n  ) {\n    var zoom =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\n    var imageAspectRatio = image.height / image.width;\n\n    // determine actual pixels on x and y axis\n    var canvasWidth = 1;\n    var canvasHeight = canvasAspectRatio;\n    var imgWidth = 1;\n    var imgHeight = imageAspectRatio;\n    if (imgHeight > canvasHeight) {\n      imgHeight = canvasHeight;\n      imgWidth = imgHeight / imageAspectRatio;\n    }\n\n    var scalar = Math.max(canvasWidth / imgWidth, canvasHeight / imgHeight);\n    var width = image.width / (zoom * scalar * imgWidth);\n    var height = width * canvasAspectRatio;\n\n    return {\n      width: width,\n      height: height\n    };\n  };\n\n  var getImageRectZoomFactor = function getImageRectZoomFactor(\n    imageRect,\n    cropRect,\n    rotation,\n    center\n  ) {\n    // calculate available space round image center position\n    var cx = center.x > 0.5 ? 1 - center.x : center.x;\n    var cy = center.y > 0.5 ? 1 - center.y : center.y;\n    var imageWidth = cx * 2 * imageRect.width;\n    var imageHeight = cy * 2 * imageRect.height;\n\n    // calculate rotated crop rectangle size\n    var rotatedCropSize = getRotatedRectSize(cropRect, rotation);\n\n    // calculate scalar required to fit image\n    return Math.max(\n      rotatedCropSize.width / imageWidth,\n      rotatedCropSize.height / imageHeight\n    );\n  };\n\n  var getCenteredCropRect = function getCenteredCropRect(\n    container,\n    aspectRatio\n  ) {\n    var width = container.width;\n    var height = width * aspectRatio;\n    if (height > container.height) {\n      height = container.height;\n      width = height / aspectRatio;\n    }\n    var x = (container.width - width) * 0.5;\n    var y = (container.height - height) * 0.5;\n\n    return {\n      x: x,\n      y: y,\n      width: width,\n      height: height\n    };\n  };\n\n  var getCurrentCropSize = function getCurrentCropSize(imageSize) {\n    var crop =\n      arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var zoom = crop.zoom,\n      rotation = crop.rotation,\n      center = crop.center,\n      aspectRatio = crop.aspectRatio;\n\n    if (!aspectRatio) aspectRatio = imageSize.height / imageSize.width;\n\n    var canvasSize = calculateCanvasSize(imageSize, aspectRatio, zoom);\n\n    var canvasCenter = {\n      x: canvasSize.width * 0.5,\n      y: canvasSize.height * 0.5\n    };\n\n    var stage = {\n      x: 0,\n      y: 0,\n      width: canvasSize.width,\n      height: canvasSize.height,\n      center: canvasCenter\n    };\n\n    var shouldLimit = typeof crop.scaleToFit === 'undefined' || crop.scaleToFit;\n\n    var stageZoomFactor = getImageRectZoomFactor(\n      imageSize,\n      getCenteredCropRect(stage, aspectRatio),\n      rotation,\n      shouldLimit ? center : { x: 0.5, y: 0.5 }\n    );\n\n    var scale = zoom * stageZoomFactor;\n\n    // start drawing\n    return {\n      widthFloat: canvasSize.width / scale,\n      heightFloat: canvasSize.height / scale,\n      width: Math.round(canvasSize.width / scale),\n      height: Math.round(canvasSize.height / scale)\n    };\n  };\n\n  var IMAGE_SCALE_SPRING_PROPS = {\n    type: 'spring',\n    stiffness: 0.5,\n    damping: 0.45,\n    mass: 10\n  };\n\n  // does horizontal and vertical flipping\n  var createBitmapView = function createBitmapView(_) {\n    return _.utils.createView({\n      name: 'image-bitmap',\n      ignoreRect: true,\n      mixins: { styles: ['scaleX', 'scaleY'] },\n      create: function create(_ref) {\n        var root = _ref.root,\n          props = _ref.props;\n        root.appendChild(props.image);\n      }\n    });\n  };\n\n  // shifts and rotates image\n  var createImageCanvasWrapper = function createImageCanvasWrapper(_) {\n    return _.utils.createView({\n      name: 'image-canvas-wrapper',\n      tag: 'div',\n      ignoreRect: true,\n      mixins: {\n        apis: ['crop', 'width', 'height'],\n\n        styles: [\n          'originX',\n          'originY',\n          'translateX',\n          'translateY',\n          'scaleX',\n          'scaleY',\n          'rotateZ'\n        ],\n\n        animations: {\n          originX: IMAGE_SCALE_SPRING_PROPS,\n          originY: IMAGE_SCALE_SPRING_PROPS,\n          scaleX: IMAGE_SCALE_SPRING_PROPS,\n          scaleY: IMAGE_SCALE_SPRING_PROPS,\n          translateX: IMAGE_SCALE_SPRING_PROPS,\n          translateY: IMAGE_SCALE_SPRING_PROPS,\n          rotateZ: IMAGE_SCALE_SPRING_PROPS\n        }\n      },\n\n      create: function create(_ref2) {\n        var root = _ref2.root,\n          props = _ref2.props;\n        props.width = props.image.width;\n        props.height = props.image.height;\n        root.ref.bitmap = root.appendChildView(\n          root.createChildView(createBitmapView(_), { image: props.image })\n        );\n      },\n      write: function write(_ref3) {\n        var root = _ref3.root,\n          props = _ref3.props;\n        var flip = props.crop.flip;\n        var bitmap = root.ref.bitmap;\n        bitmap.scaleX = flip.horizontal ? -1 : 1;\n        bitmap.scaleY = flip.vertical ? -1 : 1;\n      }\n    });\n  };\n\n  // clips canvas to correct aspect ratio\n  var createClipView = function createClipView(_) {\n    return _.utils.createView({\n      name: 'image-clip',\n      tag: 'div',\n      ignoreRect: true,\n      mixins: {\n        apis: [\n          'crop',\n          'markup',\n          'resize',\n          'width',\n          'height',\n          'dirty',\n          'background'\n        ],\n\n        styles: ['width', 'height', 'opacity'],\n        animations: {\n          opacity: { type: 'tween', duration: 250 }\n        }\n      },\n\n      didWriteView: function didWriteView(_ref4) {\n        var root = _ref4.root,\n          props = _ref4.props;\n        if (!props.background) return;\n        root.element.style.backgroundColor = props.background;\n      },\n      create: function create(_ref5) {\n        var root = _ref5.root,\n          props = _ref5.props;\n\n        root.ref.image = root.appendChildView(\n          root.createChildView(\n            createImageCanvasWrapper(_),\n            Object.assign({}, props)\n          )\n        );\n\n        root.ref.createMarkup = function() {\n          if (root.ref.markup) return;\n          root.ref.markup = root.appendChildView(\n            root.createChildView(createMarkupView(_), Object.assign({}, props))\n          );\n        };\n\n        root.ref.destroyMarkup = function() {\n          if (!root.ref.markup) return;\n          root.removeChildView(root.ref.markup);\n          root.ref.markup = null;\n        };\n\n        // set up transparency grid\n        var transparencyIndicator = root.query(\n          'GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR'\n        );\n        if (transparencyIndicator === null) return;\n\n        // grid pattern\n        if (transparencyIndicator === 'grid') {\n          root.element.dataset.transparencyIndicator = transparencyIndicator;\n        }\n        // basic color\n        else {\n          root.element.dataset.transparencyIndicator = 'color';\n        }\n      },\n      write: function write(_ref6) {\n        var root = _ref6.root,\n          props = _ref6.props,\n          shouldOptimize = _ref6.shouldOptimize;\n        var crop = props.crop,\n          markup = props.markup,\n          resize = props.resize,\n          dirty = props.dirty,\n          width = props.width,\n          height = props.height;\n\n        root.ref.image.crop = crop;\n\n        var stage = {\n          x: 0,\n          y: 0,\n          width: width,\n          height: height,\n          center: {\n            x: width * 0.5,\n            y: height * 0.5\n          }\n        };\n\n        var image = {\n          width: root.ref.image.width,\n          height: root.ref.image.height\n        };\n\n        var origin = {\n          x: crop.center.x * image.width,\n          y: crop.center.y * image.height\n        };\n\n        var translation = {\n          x: stage.center.x - image.width * crop.center.x,\n          y: stage.center.y - image.height * crop.center.y\n        };\n\n        var rotation = Math.PI * 2 + (crop.rotation % (Math.PI * 2));\n\n        var cropAspectRatio = crop.aspectRatio || image.height / image.width;\n\n        var shouldLimit =\n          typeof crop.scaleToFit === 'undefined' || crop.scaleToFit;\n\n        var stageZoomFactor = getImageRectZoomFactor(\n          image,\n          getCenteredCropRect(stage, cropAspectRatio),\n\n          rotation,\n          shouldLimit ? crop.center : { x: 0.5, y: 0.5 }\n        );\n\n        var scale = crop.zoom * stageZoomFactor;\n\n        // update markup view\n        if (markup && markup.length) {\n          root.ref.createMarkup();\n          root.ref.markup.width = width;\n          root.ref.markup.height = height;\n          root.ref.markup.resize = resize;\n          root.ref.markup.dirty = dirty;\n          root.ref.markup.markup = markup;\n          root.ref.markup.crop = getCurrentCropSize(image, crop);\n        } else if (root.ref.markup) {\n          root.ref.destroyMarkup();\n        }\n\n        // update image view\n        var imageView = root.ref.image;\n\n        // don't update clip layout\n        if (shouldOptimize) {\n          imageView.originX = null;\n          imageView.originY = null;\n          imageView.translateX = null;\n          imageView.translateY = null;\n          imageView.rotateZ = null;\n          imageView.scaleX = null;\n          imageView.scaleY = null;\n          return;\n        }\n\n        imageView.originX = origin.x;\n        imageView.originY = origin.y;\n        imageView.translateX = translation.x;\n        imageView.translateY = translation.y;\n        imageView.rotateZ = rotation;\n        imageView.scaleX = scale;\n        imageView.scaleY = scale;\n      }\n    });\n  };\n\n  var createImageView = function createImageView(_) {\n    return _.utils.createView({\n      name: 'image-preview',\n      tag: 'div',\n      ignoreRect: true,\n      mixins: {\n        apis: ['image', 'crop', 'markup', 'resize', 'dirty', 'background'],\n\n        styles: ['translateY', 'scaleX', 'scaleY', 'opacity'],\n\n        animations: {\n          scaleX: IMAGE_SCALE_SPRING_PROPS,\n          scaleY: IMAGE_SCALE_SPRING_PROPS,\n          translateY: IMAGE_SCALE_SPRING_PROPS,\n          opacity: { type: 'tween', duration: 400 }\n        }\n      },\n\n      create: function create(_ref7) {\n        var root = _ref7.root,\n          props = _ref7.props;\n        root.ref.clip = root.appendChildView(\n          root.createChildView(createClipView(_), {\n            id: props.id,\n            image: props.image,\n            crop: props.crop,\n            markup: props.markup,\n            resize: props.resize,\n            dirty: props.dirty,\n            background: props.background\n          })\n        );\n      },\n      write: function write(_ref8) {\n        var root = _ref8.root,\n          props = _ref8.props,\n          shouldOptimize = _ref8.shouldOptimize;\n        var clip = root.ref.clip;\n        var image = props.image,\n          crop = props.crop,\n          markup = props.markup,\n          resize = props.resize,\n          dirty = props.dirty;\n\n        clip.crop = crop;\n        clip.markup = markup;\n        clip.resize = resize;\n        clip.dirty = dirty;\n\n        // don't update clip layout\n        clip.opacity = shouldOptimize ? 0 : 1;\n\n        // don't re-render if optimizing or hidden (width will be zero resulting in weird animations)\n        if (shouldOptimize || root.rect.element.hidden) return;\n\n        // calculate scaled preview image size\n        var imageAspectRatio = image.height / image.width;\n        var aspectRatio = crop.aspectRatio || imageAspectRatio;\n\n        // calculate container size\n        var containerWidth = root.rect.inner.width;\n        var containerHeight = root.rect.inner.height;\n\n        var fixedPreviewHeight = root.query('GET_IMAGE_PREVIEW_HEIGHT');\n        var minPreviewHeight = root.query('GET_IMAGE_PREVIEW_MIN_HEIGHT');\n        var maxPreviewHeight = root.query('GET_IMAGE_PREVIEW_MAX_HEIGHT');\n\n        var panelAspectRatio = root.query('GET_PANEL_ASPECT_RATIO');\n        var allowMultiple = root.query('GET_ALLOW_MULTIPLE');\n\n        if (panelAspectRatio && !allowMultiple) {\n          fixedPreviewHeight = containerWidth * panelAspectRatio;\n          aspectRatio = panelAspectRatio;\n        }\n\n        // determine clip width and height\n        var clipHeight =\n          fixedPreviewHeight !== null\n            ? fixedPreviewHeight\n            : Math.max(\n                minPreviewHeight,\n                Math.min(containerWidth * aspectRatio, maxPreviewHeight)\n              );\n\n        var clipWidth = clipHeight / aspectRatio;\n        if (clipWidth > containerWidth) {\n          clipWidth = containerWidth;\n          clipHeight = clipWidth * aspectRatio;\n        }\n\n        if (clipHeight > containerHeight) {\n          clipHeight = containerHeight;\n          clipWidth = containerHeight / aspectRatio;\n        }\n\n        clip.width = clipWidth;\n        clip.height = clipHeight;\n      }\n    });\n  };\n\n  var SVG_MASK =\n    '<svg width=\"500\" height=\"200\" viewBox=\"0 0 500 200\" preserveAspectRatio=\"none\">\\n    <defs>\\n        <radialGradient id=\"gradient-__UID__\" cx=\".5\" cy=\"1.25\" r=\"1.15\">\\n            <stop offset=\\'50%\\' stop-color=\\'#000000\\'/>\\n            <stop offset=\\'56%\\' stop-color=\\'#0a0a0a\\'/>\\n            <stop offset=\\'63%\\' stop-color=\\'#262626\\'/>\\n            <stop offset=\\'69%\\' stop-color=\\'#4f4f4f\\'/>\\n            <stop offset=\\'75%\\' stop-color=\\'#808080\\'/>\\n            <stop offset=\\'81%\\' stop-color=\\'#b1b1b1\\'/>\\n            <stop offset=\\'88%\\' stop-color=\\'#dadada\\'/>\\n            <stop offset=\\'94%\\' stop-color=\\'#f6f6f6\\'/>\\n            <stop offset=\\'100%\\' stop-color=\\'#ffffff\\'/>\\n        </radialGradient>\\n        <mask id=\"mask-__UID__\">\\n            <rect x=\"0\" y=\"0\" width=\"500\" height=\"200\" fill=\"url(#gradient-__UID__)\"></rect>\\n        </mask>\\n    </defs>\\n    <rect x=\"0\" width=\"500\" height=\"200\" fill=\"currentColor\" mask=\"url(#mask-__UID__)\"></rect>\\n</svg>';\n\n  var SVGMaskUniqueId = 0;\n\n  var createImageOverlayView = function createImageOverlayView(fpAPI) {\n    return fpAPI.utils.createView({\n      name: 'image-preview-overlay',\n      tag: 'div',\n      ignoreRect: true,\n      create: function create(_ref) {\n        var root = _ref.root,\n          props = _ref.props;\n        var mask = SVG_MASK;\n        if (document.querySelector('base')) {\n          var url = window.location.href.replace(window.location.hash, '');\n          mask = mask.replace(/url\\(\\#/g, 'url(' + url + '#');\n        }\n\n        SVGMaskUniqueId++;\n        root.element.classList.add(\n          'filepond--image-preview-overlay-'.concat(props.status)\n        );\n\n        root.element.innerHTML = mask.replace(/__UID__/g, SVGMaskUniqueId);\n      },\n      mixins: {\n        styles: ['opacity'],\n        animations: {\n          opacity: { type: 'spring', mass: 25 }\n        }\n      }\n    });\n  };\n\n  /**\n   * Bitmap Worker\n   */\n  var BitmapWorker = function BitmapWorker() {\n    self.onmessage = function(e) {\n      createImageBitmap(e.data.message.file).then(function(bitmap) {\n        self.postMessage({ id: e.data.id, message: bitmap }, [bitmap]);\n      });\n    };\n  };\n\n  /**\n   * ColorMatrix Worker\n   */\n  var ColorMatrixWorker = function ColorMatrixWorker() {\n    self.onmessage = function(e) {\n      var imageData = e.data.message.imageData;\n      var matrix = e.data.message.colorMatrix;\n\n      var data = imageData.data;\n      var l = data.length;\n\n      var m11 = matrix[0];\n      var m12 = matrix[1];\n      var m13 = matrix[2];\n      var m14 = matrix[3];\n      var m15 = matrix[4];\n\n      var m21 = matrix[5];\n      var m22 = matrix[6];\n      var m23 = matrix[7];\n      var m24 = matrix[8];\n      var m25 = matrix[9];\n\n      var m31 = matrix[10];\n      var m32 = matrix[11];\n      var m33 = matrix[12];\n      var m34 = matrix[13];\n      var m35 = matrix[14];\n\n      var m41 = matrix[15];\n      var m42 = matrix[16];\n      var m43 = matrix[17];\n      var m44 = matrix[18];\n      var m45 = matrix[19];\n\n      var index = 0,\n        r = 0.0,\n        g = 0.0,\n        b = 0.0,\n        a = 0.0;\n\n      for (; index < l; index += 4) {\n        r = data[index] / 255;\n        g = data[index + 1] / 255;\n        b = data[index + 2] / 255;\n        a = data[index + 3] / 255;\n        data[index] = Math.max(\n          0,\n          Math.min((r * m11 + g * m12 + b * m13 + a * m14 + m15) * 255, 255)\n        );\n        data[index + 1] = Math.max(\n          0,\n          Math.min((r * m21 + g * m22 + b * m23 + a * m24 + m25) * 255, 255)\n        );\n        data[index + 2] = Math.max(\n          0,\n          Math.min((r * m31 + g * m32 + b * m33 + a * m34 + m35) * 255, 255)\n        );\n        data[index + 3] = Math.max(\n          0,\n          Math.min((r * m41 + g * m42 + b * m43 + a * m44 + m45) * 255, 255)\n        );\n      }\n\n      self.postMessage({ id: e.data.id, message: imageData }, [\n        imageData.data.buffer\n      ]);\n    };\n  };\n\n  var getImageSize = function getImageSize(url, cb) {\n    var image = new Image();\n    image.onload = function() {\n      var width = image.naturalWidth;\n      var height = image.naturalHeight;\n      image = null;\n      cb(width, height);\n    };\n    image.src = url;\n  };\n\n  var transforms = {\n    1: function _() {\n      return [1, 0, 0, 1, 0, 0];\n    },\n    2: function _(width) {\n      return [-1, 0, 0, 1, width, 0];\n    },\n    3: function _(width, height) {\n      return [-1, 0, 0, -1, width, height];\n    },\n    4: function _(width, height) {\n      return [1, 0, 0, -1, 0, height];\n    },\n    5: function _() {\n      return [0, 1, 1, 0, 0, 0];\n    },\n    6: function _(width, height) {\n      return [0, 1, -1, 0, height, 0];\n    },\n    7: function _(width, height) {\n      return [0, -1, -1, 0, height, width];\n    },\n    8: function _(width) {\n      return [0, -1, 1, 0, 0, width];\n    }\n  };\n\n  var fixImageOrientation = function fixImageOrientation(\n    ctx,\n    width,\n    height,\n    orientation\n  ) {\n    // no orientation supplied\n    if (orientation === -1) {\n      return;\n    }\n\n    ctx.transform.apply(ctx, transforms[orientation](width, height));\n  };\n\n  // draws the preview image to canvas\n  var createPreviewImage = function createPreviewImage(\n    data,\n    width,\n    height,\n    orientation\n  ) {\n    // can't draw on half pixels\n    width = Math.round(width);\n    height = Math.round(height);\n\n    // draw image\n    var canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    var ctx = canvas.getContext('2d');\n\n    // if is rotated incorrectly swap width and height\n    if (orientation >= 5 && orientation <= 8) {\n      var _ref = [height, width];\n      width = _ref[0];\n      height = _ref[1];\n    }\n\n    // correct image orientation\n    fixImageOrientation(ctx, width, height, orientation);\n\n    // draw the image\n    ctx.drawImage(data, 0, 0, width, height);\n\n    return canvas;\n  };\n\n  var isBitmap = function isBitmap(file) {\n    return /^image/.test(file.type) && !/svg/.test(file.type);\n  };\n\n  var MAX_WIDTH = 10;\n  var MAX_HEIGHT = 10;\n\n  var calculateAverageColor = function calculateAverageColor(image) {\n    var scalar = Math.min(MAX_WIDTH / image.width, MAX_HEIGHT / image.height);\n\n    var canvas = document.createElement('canvas');\n    var ctx = canvas.getContext('2d');\n    var width = (canvas.width = Math.ceil(image.width * scalar));\n    var height = (canvas.height = Math.ceil(image.height * scalar));\n    ctx.drawImage(image, 0, 0, width, height);\n    var data = null;\n    try {\n      data = ctx.getImageData(0, 0, width, height).data;\n    } catch (e) {\n      return null;\n    }\n    var l = data.length;\n\n    var r = 0;\n    var g = 0;\n    var b = 0;\n    var i = 0;\n\n    for (; i < l; i += 4) {\n      r += data[i] * data[i];\n      g += data[i + 1] * data[i + 1];\n      b += data[i + 2] * data[i + 2];\n    }\n\n    r = averageColor(r, l);\n    g = averageColor(g, l);\n    b = averageColor(b, l);\n\n    return { r: r, g: g, b: b };\n  };\n\n  var averageColor = function averageColor(c, l) {\n    return Math.floor(Math.sqrt(c / (l / 4)));\n  };\n\n  var cloneCanvas = function cloneCanvas(origin, target) {\n    target = target || document.createElement('canvas');\n    target.width = origin.width;\n    target.height = origin.height;\n    var ctx = target.getContext('2d');\n    ctx.drawImage(origin, 0, 0);\n    return target;\n  };\n\n  var cloneImageData = function cloneImageData(imageData) {\n    var id;\n    try {\n      id = new ImageData(imageData.width, imageData.height);\n    } catch (e) {\n      var canvas = document.createElement('canvas');\n      var ctx = canvas.getContext('2d');\n      id = ctx.createImageData(imageData.width, imageData.height);\n    }\n    id.data.set(new Uint8ClampedArray(imageData.data));\n    return id;\n  };\n\n  var loadImage = function loadImage(url) {\n    return new Promise(function(resolve, reject) {\n      var img = new Image();\n      img.crossOrigin = 'Anonymous';\n      img.onload = function() {\n        resolve(img);\n      };\n      img.onerror = function(e) {\n        reject(e);\n      };\n      img.src = url;\n    });\n  };\n\n  var createImageWrapperView = function createImageWrapperView(_) {\n    // create overlay view\n    var OverlayView = createImageOverlayView(_);\n\n    var ImageView = createImageView(_);\n    var createWorker = _.utils.createWorker;\n\n    var applyFilter = function applyFilter(root, filter, target) {\n      return new Promise(function(resolve) {\n        // will store image data for future filter updates\n        if (!root.ref.imageData) {\n          root.ref.imageData = target\n            .getContext('2d')\n            .getImageData(0, 0, target.width, target.height);\n        }\n\n        // get image data reference\n        var imageData = cloneImageData(root.ref.imageData);\n\n        if (!filter || filter.length !== 20) {\n          target.getContext('2d').putImageData(imageData, 0, 0);\n          return resolve();\n        }\n\n        var worker = createWorker(ColorMatrixWorker);\n        worker.post(\n          {\n            imageData: imageData,\n            colorMatrix: filter\n          },\n\n          function(response) {\n            // apply filtered colors\n            target.getContext('2d').putImageData(response, 0, 0);\n\n            // stop worker\n            worker.terminate();\n\n            // done!\n            resolve();\n          },\n          [imageData.data.buffer]\n        );\n      });\n    };\n\n    var removeImageView = function removeImageView(root, imageView) {\n      root.removeChildView(imageView);\n      imageView.image.width = 1;\n      imageView.image.height = 1;\n      imageView._destroy();\n    };\n\n    // remove an image\n    var shiftImage = function shiftImage(_ref) {\n      var root = _ref.root;\n      var imageView = root.ref.images.shift();\n      imageView.opacity = 0;\n      imageView.translateY = -15;\n      root.ref.imageViewBin.push(imageView);\n      return imageView;\n    };\n\n    // add new image\n    var pushImage = function pushImage(_ref2) {\n      var root = _ref2.root,\n        props = _ref2.props,\n        image = _ref2.image;\n      var id = props.id;\n      var item = root.query('GET_ITEM', { id: id });\n      if (!item) return;\n\n      var crop = item.getMetadata('crop') || {\n        center: {\n          x: 0.5,\n          y: 0.5\n        },\n\n        flip: {\n          horizontal: false,\n          vertical: false\n        },\n\n        zoom: 1,\n        rotation: 0,\n        aspectRatio: null\n      };\n\n      var background = root.query(\n        'GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR'\n      );\n\n      var markup;\n      var resize;\n      var dirty = false;\n      if (root.query('GET_IMAGE_PREVIEW_MARKUP_SHOW')) {\n        markup = item.getMetadata('markup') || [];\n        resize = item.getMetadata('resize');\n        dirty = true;\n      }\n\n      // append image presenter\n      var imageView = root.appendChildView(\n        root.createChildView(ImageView, {\n          id: id,\n          image: image,\n          crop: crop,\n          resize: resize,\n          markup: markup,\n          dirty: dirty,\n          background: background,\n          opacity: 0,\n          scaleX: 1.15,\n          scaleY: 1.15,\n          translateY: 15\n        }),\n\n        root.childViews.length\n      );\n\n      root.ref.images.push(imageView);\n\n      // reveal the preview image\n      imageView.opacity = 1;\n      imageView.scaleX = 1;\n      imageView.scaleY = 1;\n      imageView.translateY = 0;\n\n      // the preview is now ready to be drawn\n      setTimeout(function() {\n        root.dispatch('DID_IMAGE_PREVIEW_SHOW', { id: id });\n      }, 250);\n    };\n\n    var updateImage = function updateImage(_ref3) {\n      var root = _ref3.root,\n        props = _ref3.props;\n      var item = root.query('GET_ITEM', { id: props.id });\n      if (!item) return;\n      var imageView = root.ref.images[root.ref.images.length - 1];\n      imageView.crop = item.getMetadata('crop');\n      imageView.background = root.query(\n        'GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR'\n      );\n\n      if (root.query('GET_IMAGE_PREVIEW_MARKUP_SHOW')) {\n        imageView.dirty = true;\n        imageView.resize = item.getMetadata('resize');\n        imageView.markup = item.getMetadata('markup');\n      }\n    };\n\n    // replace image preview\n    var didUpdateItemMetadata = function didUpdateItemMetadata(_ref4) {\n      var root = _ref4.root,\n        props = _ref4.props,\n        action = _ref4.action;\n      // only filter and crop trigger redraw\n      if (!/crop|filter|markup|resize/.test(action.change.key)) return;\n\n      // no images to update, exit\n      if (!root.ref.images.length) return;\n\n      // no item found, exit\n      var item = root.query('GET_ITEM', { id: props.id });\n      if (!item) return;\n\n      // for now, update existing image when filtering\n      if (/filter/.test(action.change.key)) {\n        var imageView = root.ref.images[root.ref.images.length - 1];\n        applyFilter(root, action.change.value, imageView.image);\n        return;\n      }\n\n      if (/crop|markup|resize/.test(action.change.key)) {\n        var crop = item.getMetadata('crop');\n        var image = root.ref.images[root.ref.images.length - 1];\n\n        // if aspect ratio has changed, we need to create a new image\n        if (\n          crop &&\n          crop.aspectRatio &&\n          image.crop &&\n          image.crop.aspectRatio &&\n          Math.abs(crop.aspectRatio - image.crop.aspectRatio) > 0.00001\n        ) {\n          var _imageView = shiftImage({ root: root });\n          pushImage({\n            root: root,\n            props: props,\n            image: cloneCanvas(_imageView.image)\n          });\n        }\n        // if not, we can update the current image\n        else {\n          updateImage({ root: root, props: props });\n        }\n      }\n    };\n\n    var canCreateImageBitmap = function canCreateImageBitmap(file) {\n      // Firefox versions before 58 will freeze when running createImageBitmap\n      // in a Web Worker so we detect those versions and return false for support\n      var userAgent = window.navigator.userAgent;\n      var isFirefox = userAgent.match(/Firefox\\/([0-9]+)\\./);\n      var firefoxVersion = isFirefox ? parseInt(isFirefox[1]) : null;\n      if (firefoxVersion <= 58) return false;\n\n      return 'createImageBitmap' in window && isBitmap(file);\n    };\n\n    /**\n     * Write handler for when preview container has been created\n     */\n    var didCreatePreviewContainer = function didCreatePreviewContainer(_ref5) {\n      var root = _ref5.root,\n        props = _ref5.props;\n      var id = props.id;\n\n      // we need to get the file data to determine the eventual image size\n      var item = root.query('GET_ITEM', id);\n      if (!item) return;\n\n      // get url to file (we'll revoke it later on when done)\n      var fileURL = URL.createObjectURL(item.file);\n\n      // determine image size of this item\n      getImageSize(fileURL, function(width, height) {\n        // we can now scale the panel to the final size\n        root.dispatch('DID_IMAGE_PREVIEW_CALCULATE_SIZE', {\n          id: id,\n          width: width,\n          height: height\n        });\n      });\n    };\n\n    var drawPreview = function drawPreview(_ref6) {\n      var root = _ref6.root,\n        props = _ref6.props;\n      var id = props.id;\n\n      // we need to get the file data to determine the eventual image size\n      var item = root.query('GET_ITEM', id);\n      if (!item) return;\n\n      // get url to file (we'll revoke it later on when done)\n      var fileURL = URL.createObjectURL(item.file);\n\n      // fallback\n      var loadPreviewFallback = function loadPreviewFallback() {\n        // let's scale the image in the main thread :(\n        loadImage(fileURL).then(previewImageLoaded);\n      };\n\n      // image is now ready\n      var previewImageLoaded = function previewImageLoaded(imageData) {\n        // the file url is no longer needed\n        URL.revokeObjectURL(fileURL);\n\n        // draw the scaled down version here and use that as source so bitmapdata can be closed\n        // orientation info\n        var exif = item.getMetadata('exif') || {};\n        var orientation = exif.orientation || -1;\n\n        // get width and height from action, and swap if orientation is incorrect\n        var width = imageData.width,\n          height = imageData.height;\n\n        // if no width or height, just return early.\n        if (!width || !height) return;\n\n        if (orientation >= 5 && orientation <= 8) {\n          var _ref7 = [height, width];\n          width = _ref7[0];\n          height = _ref7[1];\n        }\n\n        // scale canvas based on pixel density\n        // we multiply by .75 as that creates smaller but still clear images on screens with high res displays\n        var pixelDensityFactor = Math.max(1, window.devicePixelRatio * 0.75);\n\n        // we want as much pixels to work with as possible,\n        // this multiplies the minimum image resolution,\n        // so when zooming in it doesn't get too blurry\n        var zoomFactor = root.query('GET_IMAGE_PREVIEW_ZOOM_FACTOR');\n\n        // imaeg scale factor\n        var scaleFactor = zoomFactor * pixelDensityFactor;\n\n        // calculate scaled preview image size\n        var previewImageRatio = height / width;\n\n        // calculate image preview height and width\n        var previewContainerWidth = root.rect.element.width;\n        var previewContainerHeight = root.rect.element.height;\n\n        var imageWidth = previewContainerWidth;\n        var imageHeight = imageWidth * previewImageRatio;\n\n        if (previewImageRatio > 1) {\n          imageWidth = Math.min(width, previewContainerWidth * scaleFactor);\n          imageHeight = imageWidth * previewImageRatio;\n        } else {\n          imageHeight = Math.min(height, previewContainerHeight * scaleFactor);\n          imageWidth = imageHeight / previewImageRatio;\n        }\n\n        // transfer to image tag so no canvas memory wasted on iOS\n        var previewImage = createPreviewImage(\n          imageData,\n          imageWidth,\n          imageHeight,\n          orientation\n        );\n\n        // done\n        var done = function done() {\n          // calculate average image color, disabled for now\n          var averageColor = root.query(\n            'GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR'\n          )\n            ? calculateAverageColor(data)\n            : null;\n          item.setMetadata('color', averageColor, true);\n\n          // data has been transferred to canvas ( if was ImageBitmap )\n          if ('close' in imageData) {\n            imageData.close();\n          }\n\n          // show the overlay\n          root.ref.overlayShadow.opacity = 1;\n\n          // create the first image\n          pushImage({ root: root, props: props, image: previewImage });\n        };\n\n        // apply filter\n        var filter = item.getMetadata('filter');\n        if (filter) {\n          applyFilter(root, filter, previewImage).then(done);\n        } else {\n          done();\n        }\n      };\n\n      // if we support scaling using createImageBitmap we use a worker\n      if (canCreateImageBitmap(item.file)) {\n        // let's scale the image in a worker\n        var worker = createWorker(BitmapWorker);\n\n        worker.post(\n          {\n            file: item.file\n          },\n\n          function(imageBitmap) {\n            // destroy worker\n            worker.terminate();\n\n            // no bitmap returned, must be something wrong,\n            // try the oldschool way\n            if (!imageBitmap) {\n              loadPreviewFallback();\n              return;\n            }\n\n            // yay we got our bitmap, let's continue showing the preview\n            previewImageLoaded(imageBitmap);\n          }\n        );\n      } else {\n        // create fallback preview\n        loadPreviewFallback();\n      }\n    };\n\n    /**\n     * Write handler for when the preview image is ready to be animated\n     */\n    var didDrawPreview = function didDrawPreview(_ref8) {\n      var root = _ref8.root;\n      // get last added image\n      var image = root.ref.images[root.ref.images.length - 1];\n      image.translateY = 0;\n      image.scaleX = 1.0;\n      image.scaleY = 1.0;\n      image.opacity = 1;\n    };\n\n    /**\n     * Write handler for when the preview has been loaded\n     */\n    var restoreOverlay = function restoreOverlay(_ref9) {\n      var root = _ref9.root;\n      root.ref.overlayShadow.opacity = 1;\n      root.ref.overlayError.opacity = 0;\n      root.ref.overlaySuccess.opacity = 0;\n    };\n\n    var didThrowError = function didThrowError(_ref10) {\n      var root = _ref10.root;\n      root.ref.overlayShadow.opacity = 0.25;\n      root.ref.overlayError.opacity = 1;\n    };\n\n    var didCompleteProcessing = function didCompleteProcessing(_ref11) {\n      var root = _ref11.root;\n      root.ref.overlayShadow.opacity = 0.25;\n      root.ref.overlaySuccess.opacity = 1;\n    };\n\n    /**\n     * Constructor\n     */\n    var create = function create(_ref12) {\n      var root = _ref12.root;\n      // image view\n      root.ref.images = [];\n\n      // the preview image data (we need this to filter the image)\n      root.ref.imageData = null;\n\n      // image bin\n      root.ref.imageViewBin = [];\n\n      // image overlays\n      root.ref.overlayShadow = root.appendChildView(\n        root.createChildView(OverlayView, {\n          opacity: 0,\n          status: 'idle'\n        })\n      );\n\n      root.ref.overlaySuccess = root.appendChildView(\n        root.createChildView(OverlayView, {\n          opacity: 0,\n          status: 'success'\n        })\n      );\n\n      root.ref.overlayError = root.appendChildView(\n        root.createChildView(OverlayView, {\n          opacity: 0,\n          status: 'failure'\n        })\n      );\n    };\n\n    return _.utils.createView({\n      name: 'image-preview-wrapper',\n      create: create,\n      styles: ['height'],\n      apis: ['height'],\n      destroy: function destroy(_ref13) {\n        var root = _ref13.root;\n        // we resize the image so memory on iOS 12 is released more quickly (it seems)\n        root.ref.images.forEach(function(imageView) {\n          imageView.image.width = 1;\n          imageView.image.height = 1;\n        });\n      },\n      didWriteView: function didWriteView(_ref14) {\n        var root = _ref14.root;\n        root.ref.images.forEach(function(imageView) {\n          imageView.dirty = false;\n        });\n      },\n      write: _.utils.createRoute(\n        {\n          // image preview stated\n          DID_IMAGE_PREVIEW_DRAW: didDrawPreview,\n          DID_IMAGE_PREVIEW_CONTAINER_CREATE: didCreatePreviewContainer,\n          DID_FINISH_CALCULATE_PREVIEWSIZE: drawPreview,\n          DID_UPDATE_ITEM_METADATA: didUpdateItemMetadata,\n\n          // file states\n          DID_THROW_ITEM_LOAD_ERROR: didThrowError,\n          DID_THROW_ITEM_PROCESSING_ERROR: didThrowError,\n          DID_THROW_ITEM_INVALID: didThrowError,\n          DID_COMPLETE_ITEM_PROCESSING: didCompleteProcessing,\n          DID_START_ITEM_PROCESSING: restoreOverlay,\n          DID_REVERT_ITEM_PROCESSING: restoreOverlay\n        },\n\n        function(_ref15) {\n          var root = _ref15.root;\n          // views on death row\n          var viewsToRemove = root.ref.imageViewBin.filter(function(imageView) {\n            return imageView.opacity === 0;\n          });\n\n          // views to retain\n          root.ref.imageViewBin = root.ref.imageViewBin.filter(function(\n            imageView\n          ) {\n            return imageView.opacity > 0;\n          });\n\n          // remove these views\n          viewsToRemove.forEach(function(imageView) {\n            return removeImageView(root, imageView);\n          });\n          viewsToRemove.length = 0;\n        }\n      )\n    });\n  };\n\n  /**\n   * Image Preview Plugin\n   */\n  var plugin = function plugin(fpAPI) {\n    var addFilter = fpAPI.addFilter,\n      utils = fpAPI.utils;\n    var Type = utils.Type,\n      createRoute = utils.createRoute,\n      isFile = utils.isFile;\n\n    // imagePreviewView\n    var imagePreviewView = createImageWrapperView(fpAPI);\n\n    // called for each view that is created right after the 'create' method\n    addFilter('CREATE_VIEW', function(viewAPI) {\n      // get reference to created view\n      var is = viewAPI.is,\n        view = viewAPI.view,\n        query = viewAPI.query;\n\n      // only hook up to item view and only if is enabled for this cropper\n      if (!is('file') || !query('GET_ALLOW_IMAGE_PREVIEW')) return;\n\n      // create the image preview plugin, but only do so if the item is an image\n      var didLoadItem = function didLoadItem(_ref) {\n        var root = _ref.root,\n          props = _ref.props;\n        var id = props.id;\n        var item = query('GET_ITEM', id);\n\n        // item could theoretically have been removed in the mean time\n        if (!item || !isFile(item.file) || item.archived) return;\n\n        // get the file object\n        var file = item.file;\n\n        // exit if this is not an image\n        if (!isPreviewableImage(file)) return;\n\n        // test if is filtered\n        if (!query('GET_IMAGE_PREVIEW_FILTER_ITEM')(item)) return;\n\n        // exit if image size is too high and no createImageBitmap support\n        // this would simply bring the browser to its knees and that is not what we want\n        var supportsCreateImageBitmap = 'createImageBitmap' in (window || {});\n        var maxPreviewFileSize = query('GET_IMAGE_PREVIEW_MAX_FILE_SIZE');\n        if (\n          !supportsCreateImageBitmap &&\n          maxPreviewFileSize &&\n          file.size > maxPreviewFileSize\n        )\n          return;\n\n        // set preview view\n        root.ref.imagePreview = view.appendChildView(\n          view.createChildView(imagePreviewView, { id: id })\n        );\n\n        // update height if is fixed\n        var fixedPreviewHeight = root.query('GET_IMAGE_PREVIEW_HEIGHT');\n        if (fixedPreviewHeight) {\n          root.dispatch('DID_UPDATE_PANEL_HEIGHT', {\n            id: item.id,\n            height: fixedPreviewHeight\n          });\n        }\n\n        // now ready\n        var queue =\n          !supportsCreateImageBitmap &&\n          file.size > query('GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE');\n        root.dispatch('DID_IMAGE_PREVIEW_CONTAINER_CREATE', { id: id }, queue);\n      };\n\n      var rescaleItem = function rescaleItem(root, props) {\n        if (!root.ref.imagePreview) return;\n        var id = props.id;\n\n        // get item\n        var item = root.query('GET_ITEM', { id: id });\n        if (!item) return;\n\n        // if is fixed height or panel has aspect ratio, exit here, height has already been defined\n        var panelAspectRatio = root.query('GET_PANEL_ASPECT_RATIO');\n        var itemPanelAspectRatio = root.query('GET_ITEM_PANEL_ASPECT_RATIO');\n        var fixedHeight = root.query('GET_IMAGE_PREVIEW_HEIGHT');\n        if (panelAspectRatio || itemPanelAspectRatio || fixedHeight) return;\n\n        // no data!\n        var _root$ref = root.ref,\n          imageWidth = _root$ref.imageWidth,\n          imageHeight = _root$ref.imageHeight;\n        if (!imageWidth || !imageHeight) return;\n\n        // get height min and max\n        var minPreviewHeight = root.query('GET_IMAGE_PREVIEW_MIN_HEIGHT');\n        var maxPreviewHeight = root.query('GET_IMAGE_PREVIEW_MAX_HEIGHT');\n\n        // orientation info\n        var exif = item.getMetadata('exif') || {};\n        var orientation = exif.orientation || -1;\n\n        // get width and height from action, and swap of orientation is incorrect\n        if (orientation >= 5 && orientation <= 8) {\n          var _ref2 = [imageHeight, imageWidth];\n          imageWidth = _ref2[0];\n          imageHeight = _ref2[1];\n        }\n\n        // scale up width and height when we're dealing with an SVG\n        if (!isBitmap(item.file) || root.query('GET_IMAGE_PREVIEW_UPSCALE')) {\n          var scalar = 2048 / imageWidth;\n          imageWidth *= scalar;\n          imageHeight *= scalar;\n        }\n\n        // image aspect ratio\n        var imageAspectRatio = imageHeight / imageWidth;\n\n        // we need the item to get to the crop size\n        var previewAspectRatio =\n          (item.getMetadata('crop') || {}).aspectRatio || imageAspectRatio;\n\n        // preview height range\n        var previewHeightMax = Math.max(\n          minPreviewHeight,\n          Math.min(imageHeight, maxPreviewHeight)\n        );\n\n        var itemWidth = root.rect.element.width;\n        var previewHeight = Math.min(\n          itemWidth * previewAspectRatio,\n          previewHeightMax\n        );\n\n        // request update to panel height\n        root.dispatch('DID_UPDATE_PANEL_HEIGHT', {\n          id: item.id,\n          height: previewHeight\n        });\n      };\n\n      var didResizeView = function didResizeView(_ref3) {\n        var root = _ref3.root;\n        // actions in next write operation\n        root.ref.shouldRescale = true;\n      };\n\n      var didUpdateItemMetadata = function didUpdateItemMetadata(_ref4) {\n        var root = _ref4.root,\n          action = _ref4.action;\n        if (action.change.key !== 'crop') return;\n\n        // actions in next write operation\n        root.ref.shouldRescale = true;\n      };\n\n      var didCalculatePreviewSize = function didCalculatePreviewSize(_ref5) {\n        var root = _ref5.root,\n          action = _ref5.action;\n        // remember dimensions\n        root.ref.imageWidth = action.width;\n        root.ref.imageHeight = action.height;\n\n        // actions in next write operation\n        root.ref.shouldRescale = true;\n        root.ref.shouldDrawPreview = true;\n\n        // as image load could take a while and fire when draw loop is resting we need to give it a kick\n        root.dispatch('KICK');\n      };\n\n      // start writing\n      view.registerWriter(\n        createRoute(\n          {\n            DID_RESIZE_ROOT: didResizeView,\n            DID_STOP_RESIZE: didResizeView,\n            DID_LOAD_ITEM: didLoadItem,\n            DID_IMAGE_PREVIEW_CALCULATE_SIZE: didCalculatePreviewSize,\n            DID_UPDATE_ITEM_METADATA: didUpdateItemMetadata\n          },\n\n          function(_ref6) {\n            var root = _ref6.root,\n              props = _ref6.props;\n            // no preview view attached\n            if (!root.ref.imagePreview) return;\n\n            // don't do anything while hidden\n            if (root.rect.element.hidden) return;\n\n            // resize the item panel\n            if (root.ref.shouldRescale) {\n              rescaleItem(root, props);\n              root.ref.shouldRescale = false;\n            }\n\n            if (root.ref.shouldDrawPreview) {\n              // queue till next frame so we're sure the height has been applied this forces the draw image call inside the wrapper view to use the correct height\n              requestAnimationFrame(function() {\n                // this requestAnimationFrame nesting is horrible but it fixes an issue with 100hz displays on Chrome\n                // https://github.com/pqina/filepond-plugin-image-preview/issues/57\n                requestAnimationFrame(function() {\n                  root.dispatch('DID_FINISH_CALCULATE_PREVIEWSIZE', {\n                    id: props.id\n                  });\n                });\n              });\n\n              root.ref.shouldDrawPreview = false;\n            }\n          }\n        )\n      );\n    });\n\n    // expose plugin\n    return {\n      options: {\n        // Enable or disable image preview\n        allowImagePreview: [true, Type.BOOLEAN],\n\n        // filters file items to determine which are shown as preview\n        imagePreviewFilterItem: [\n          function() {\n            return true;\n          },\n          Type.FUNCTION\n        ],\n\n        // Fixed preview height\n        imagePreviewHeight: [null, Type.INT],\n\n        // Min image height\n        imagePreviewMinHeight: [44, Type.INT],\n\n        // Max image height\n        imagePreviewMaxHeight: [256, Type.INT],\n\n        // Max size of preview file for when createImageBitmap is not supported\n        imagePreviewMaxFileSize: [null, Type.INT],\n\n        // The amount of extra pixels added to the image preview to allow comfortable zooming\n        imagePreviewZoomFactor: [2, Type.INT],\n\n        // Should we upscale small images to fit the max bounding box of the preview area\n        imagePreviewUpscale: [false, Type.BOOLEAN],\n\n        // Max size of preview file that we allow to try to instant preview if createImageBitmap is not supported, else image is queued for loading\n        imagePreviewMaxInstantPreviewFileSize: [1000000, Type.INT],\n\n        // Style of the transparancy indicator used behind images\n        imagePreviewTransparencyIndicator: [null, Type.STRING],\n\n        // Enables or disables reading average image color\n        imagePreviewCalculateAverageImageColor: [false, Type.BOOLEAN],\n\n        // Enables or disables the previewing of markup\n        imagePreviewMarkupShow: [true, Type.BOOLEAN],\n\n        // Allows filtering of markup to only show certain shapes\n        imagePreviewMarkupFilter: [\n          function() {\n            return true;\n          },\n          Type.FUNCTION\n        ]\n      }\n    };\n  };\n\n  // fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\n  var isBrowser =\n    typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  if (isBrowser) {\n    document.dispatchEvent(\n      new CustomEvent('FilePond:pluginloaded', { detail: plugin })\n    );\n  }\n\n  return plugin;\n});\n","/*!\n * FilePondPluginImageResize 2.0.10\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n(function(global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined'\n        ? (module.exports = factory())\n        : typeof define === 'function' && define.amd\n        ? define(factory)\n        : ((global = global || self), (global.FilePondPluginImageResize = factory()));\n})(this, function() {\n    'use strict';\n\n    // test if file is of type image\n    var isImage = function isImage(file) {\n        return /^image/.test(file.type);\n    };\n\n    var getImageSize = function getImageSize(url, cb) {\n        var image = new Image();\n        image.onload = function() {\n            var width = image.naturalWidth;\n            var height = image.naturalHeight;\n            image = null;\n            cb({ width: width, height: height });\n        };\n        image.onerror = function() {\n            return cb(null);\n        };\n        image.src = url;\n    };\n\n    /**\n     * Image Auto Resize Plugin\n     */\n    var plugin = function plugin(_ref) {\n        var addFilter = _ref.addFilter,\n            utils = _ref.utils;\n        var Type = utils.Type;\n\n        // subscribe to file load and append required transformations\n        addFilter('DID_LOAD_ITEM', function(item, _ref2) {\n            var query = _ref2.query;\n            return new Promise(function(resolve, reject) {\n                // get file reference\n                var file = item.file;\n\n                // if this is not an image we do not have any business cropping it\n                if (!isImage(file) || !query('GET_ALLOW_IMAGE_RESIZE')) {\n                    // continue with the unaltered dataset\n                    return resolve(item);\n                }\n\n                var mode = query('GET_IMAGE_RESIZE_MODE');\n                var width = query('GET_IMAGE_RESIZE_TARGET_WIDTH');\n                var height = query('GET_IMAGE_RESIZE_TARGET_HEIGHT');\n                var upscale = query('GET_IMAGE_RESIZE_UPSCALE');\n\n                // no resizing to be done\n                if (width === null && height === null) return resolve(item);\n\n                var targetWidth = width === null ? height : width;\n                var targetHeight = height === null ? targetWidth : height;\n\n                // if should not upscale, we need to determine the size of the file\n                var fileURL = URL.createObjectURL(file);\n                getImageSize(fileURL, function(size) {\n                    URL.revokeObjectURL(fileURL);\n\n                    // something went wrong\n                    if (!size) return resolve(item);\n                    var imageWidth = size.width,\n                        imageHeight = size.height;\n\n                    // get exif orientation\n                    var orientation = (item.getMetadata('exif') || {}).orientation || -1;\n\n                    // swap width and height if orientation needs correcting\n                    if (orientation >= 5 && orientation <= 8) {\n                        var _ref3 = [imageHeight, imageWidth];\n                        imageWidth = _ref3[0];\n                        imageHeight = _ref3[1];\n                    }\n\n                    // image is already perfect size, no transformations required\n                    if (imageWidth === targetWidth && imageHeight === targetHeight)\n                        return resolve(item);\n\n                    // already contained?\n                    // can't upscale image, so if already at correct scale, exit\n                    if (!upscale) {\n                        // covering target size\n                        if (mode === 'cover') {\n                            // if one of edges is smaller than target size, exit\n                            if (imageWidth <= targetWidth || imageHeight <= targetHeight)\n                                return resolve(item);\n                        }\n\n                        // not covering target size, if image is contained in target size, exit\n                        else if (imageWidth <= targetWidth && imageHeight <= targetWidth) {\n                            return resolve(item);\n                        }\n                    }\n\n                    // the image needs to be resized\n                    item.setMetadata('resize', {\n                        mode: mode,\n                        upscale: upscale,\n                        size: {\n                            width: targetWidth,\n                            height: targetHeight,\n                        },\n                    });\n\n                    resolve(item);\n                });\n            });\n        });\n\n        // Expose plugin options\n        return {\n            options: {\n                // Enable or disable image resizing\n                allowImageResize: [true, Type.BOOLEAN],\n\n                // the method of rescaling\n                // - force => force set size\n                // - cover => pick biggest dimension\n                // - contain => pick smaller dimension\n                imageResizeMode: ['cover', Type.STRING],\n\n                // set to false to disable upscaling of image smaller than the target width / height\n                imageResizeUpscale: [true, Type.BOOLEAN],\n\n                // target width\n                imageResizeTargetWidth: [null, Type.INT],\n\n                // target height\n                imageResizeTargetHeight: [null, Type.INT],\n            },\n        };\n    };\n\n    // fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\n    var isBrowser = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n    if (isBrowser) {\n        document.dispatchEvent(new CustomEvent('FilePond:pluginloaded', { detail: plugin }));\n    }\n\n    return plugin;\n});\n","/*!\n * FilePondPluginImageTransform 3.8.7\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n(function(global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined'\n        ? (module.exports = factory())\n        : typeof define === 'function' && define.amd\n        ? define(factory)\n        : ((global = global || self), (global.FilePondPluginImageTransform = factory()));\n})(this, function() {\n    'use strict';\n\n    // test if file is of type image\n    var isImage = function isImage(file) {\n        return /^image/.test(file.type);\n    };\n\n    var getFilenameWithoutExtension = function getFilenameWithoutExtension(name) {\n        return name.substr(0, name.lastIndexOf('.')) || name;\n    };\n\n    // only handles image/jpg, image/jpeg, image/png, and image/svg+xml for now\n    var ExtensionMap = {\n        jpeg: 'jpg',\n        'svg+xml': 'svg',\n    };\n\n    var renameFileToMatchMimeType = function renameFileToMatchMimeType(filename, mimeType) {\n        var name = getFilenameWithoutExtension(filename);\n        var type = mimeType.split('/')[1];\n        var extension = ExtensionMap[type] || type;\n        return ''.concat(name, '.').concat(extension);\n    };\n\n    // returns all the valid output formats we can encode towards\n    var getValidOutputMimeType = function getValidOutputMimeType(type) {\n        return /jpeg|png|svg\\+xml/.test(type) ? type : 'image/jpeg';\n    };\n\n    // test if file is of type image\n    var isImage$1 = function isImage(file) {\n        return /^image/.test(file.type);\n    };\n\n    var MATRICES = {\n        1: function _() {\n            return [1, 0, 0, 1, 0, 0];\n        },\n        2: function _(width) {\n            return [-1, 0, 0, 1, width, 0];\n        },\n        3: function _(width, height) {\n            return [-1, 0, 0, -1, width, height];\n        },\n        4: function _(width, height) {\n            return [1, 0, 0, -1, 0, height];\n        },\n        5: function _() {\n            return [0, 1, 1, 0, 0, 0];\n        },\n        6: function _(width, height) {\n            return [0, 1, -1, 0, height, 0];\n        },\n        7: function _(width, height) {\n            return [0, -1, -1, 0, height, width];\n        },\n        8: function _(width) {\n            return [0, -1, 1, 0, 0, width];\n        },\n    };\n\n    var getImageOrientationMatrix = function getImageOrientationMatrix(width, height, orientation) {\n        if (orientation === -1) {\n            orientation = 1;\n        }\n        return MATRICES[orientation](width, height);\n    };\n\n    var createVector = function createVector(x, y) {\n        return { x: x, y: y };\n    };\n\n    var vectorDot = function vectorDot(a, b) {\n        return a.x * b.x + a.y * b.y;\n    };\n\n    var vectorSubtract = function vectorSubtract(a, b) {\n        return createVector(a.x - b.x, a.y - b.y);\n    };\n\n    var vectorDistanceSquared = function vectorDistanceSquared(a, b) {\n        return vectorDot(vectorSubtract(a, b), vectorSubtract(a, b));\n    };\n\n    var vectorDistance = function vectorDistance(a, b) {\n        return Math.sqrt(vectorDistanceSquared(a, b));\n    };\n\n    var getOffsetPointOnEdge = function getOffsetPointOnEdge(length, rotation) {\n        var a = length;\n\n        var A = 1.5707963267948966;\n        var B = rotation;\n        var C = 1.5707963267948966 - rotation;\n\n        var sinA = Math.sin(A);\n        var sinB = Math.sin(B);\n        var sinC = Math.sin(C);\n        var cosC = Math.cos(C);\n        var ratio = a / sinA;\n        var b = ratio * sinB;\n        var c = ratio * sinC;\n\n        return createVector(cosC * b, cosC * c);\n    };\n\n    var getRotatedRectSize = function getRotatedRectSize(rect, rotation) {\n        var w = rect.width;\n        var h = rect.height;\n\n        var hor = getOffsetPointOnEdge(w, rotation);\n        var ver = getOffsetPointOnEdge(h, rotation);\n\n        var tl = createVector(rect.x + Math.abs(hor.x), rect.y - Math.abs(hor.y));\n\n        var tr = createVector(rect.x + rect.width + Math.abs(ver.y), rect.y + Math.abs(ver.x));\n\n        var bl = createVector(rect.x - Math.abs(ver.y), rect.y + rect.height - Math.abs(ver.x));\n\n        return {\n            width: vectorDistance(tl, tr),\n            height: vectorDistance(tl, bl),\n        };\n    };\n\n    var getImageRectZoomFactor = function getImageRectZoomFactor(imageRect, cropRect) {\n        var rotation = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n        var center =\n            arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : { x: 0.5, y: 0.5 };\n\n        // calculate available space round image center position\n        var cx = center.x > 0.5 ? 1 - center.x : center.x;\n        var cy = center.y > 0.5 ? 1 - center.y : center.y;\n        var imageWidth = cx * 2 * imageRect.width;\n        var imageHeight = cy * 2 * imageRect.height;\n\n        // calculate rotated crop rectangle size\n        var rotatedCropSize = getRotatedRectSize(cropRect, rotation);\n\n        return Math.max(rotatedCropSize.width / imageWidth, rotatedCropSize.height / imageHeight);\n    };\n\n    var getCenteredCropRect = function getCenteredCropRect(container, aspectRatio) {\n        var width = container.width;\n        var height = width * aspectRatio;\n        if (height > container.height) {\n            height = container.height;\n            width = height / aspectRatio;\n        }\n        var x = (container.width - width) * 0.5;\n        var y = (container.height - height) * 0.5;\n\n        return {\n            x: x,\n            y: y,\n            width: width,\n            height: height,\n        };\n    };\n\n    var calculateCanvasSize = function calculateCanvasSize(image, canvasAspectRatio) {\n        var zoom = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\n        var imageAspectRatio = image.height / image.width;\n\n        // determine actual pixels on x and y axis\n        var canvasWidth = 1;\n        var canvasHeight = canvasAspectRatio;\n        var imgWidth = 1;\n        var imgHeight = imageAspectRatio;\n        if (imgHeight > canvasHeight) {\n            imgHeight = canvasHeight;\n            imgWidth = imgHeight / imageAspectRatio;\n        }\n\n        var scalar = Math.max(canvasWidth / imgWidth, canvasHeight / imgHeight);\n        var width = image.width / (zoom * scalar * imgWidth);\n        var height = width * canvasAspectRatio;\n\n        return {\n            width: width,\n            height: height,\n        };\n    };\n\n    var canvasRelease = function canvasRelease(canvas) {\n        canvas.width = 1;\n        canvas.height = 1;\n        var ctx = canvas.getContext('2d');\n        ctx.clearRect(0, 0, 1, 1);\n    };\n\n    var isFlipped = function isFlipped(flip) {\n        return flip && (flip.horizontal || flip.vertical);\n    };\n\n    var getBitmap = function getBitmap(image, orientation, flip) {\n        if (orientation <= 1 && !isFlipped(flip)) {\n            image.width = image.naturalWidth;\n            image.height = image.naturalHeight;\n            return image;\n        }\n\n        var canvas = document.createElement('canvas');\n        var width = image.naturalWidth;\n        var height = image.naturalHeight;\n\n        // if is rotated incorrectly swap width and height\n        var swapped = orientation >= 5 && orientation <= 8;\n        if (swapped) {\n            canvas.width = height;\n            canvas.height = width;\n        } else {\n            canvas.width = width;\n            canvas.height = height;\n        }\n\n        // draw the image but first fix orientation and set correct flip\n        var ctx = canvas.getContext('2d');\n\n        // get base transformation matrix\n        if (orientation) {\n            ctx.transform.apply(ctx, getImageOrientationMatrix(width, height, orientation));\n        }\n\n        if (isFlipped(flip)) {\n            // flip horizontal\n            // [-1, 0, 0, 1, width, 0]\n            var matrix = [1, 0, 0, 1, 0, 0];\n            if ((!swapped && flip.horizontal) || swapped & flip.vertical) {\n                matrix[0] = -1;\n                matrix[4] = width;\n            }\n\n            // flip vertical\n            // [1, 0, 0, -1, 0, height]\n            if ((!swapped && flip.vertical) || (swapped && flip.horizontal)) {\n                matrix[3] = -1;\n                matrix[5] = height;\n            }\n\n            ctx.transform.apply(ctx, matrix);\n        }\n\n        ctx.drawImage(image, 0, 0, width, height);\n\n        return canvas;\n    };\n\n    var imageToImageData = function imageToImageData(imageElement, orientation) {\n        var crop = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n        var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n        var canvasMemoryLimit = options.canvasMemoryLimit,\n            _options$background = options.background,\n            background = _options$background === void 0 ? null : _options$background;\n\n        var zoom = crop.zoom || 1;\n\n        // fixes possible image orientation problems by drawing the image on the correct canvas\n        var bitmap = getBitmap(imageElement, orientation, crop.flip);\n        var imageSize = {\n            width: bitmap.width,\n            height: bitmap.height,\n        };\n\n        var aspectRatio = crop.aspectRatio || imageSize.height / imageSize.width;\n\n        var canvasSize = calculateCanvasSize(imageSize, aspectRatio, zoom);\n\n        if (canvasMemoryLimit) {\n            var requiredMemory = canvasSize.width * canvasSize.height;\n            if (requiredMemory > canvasMemoryLimit) {\n                var scalar = Math.sqrt(canvasMemoryLimit) / Math.sqrt(requiredMemory);\n                imageSize.width = Math.floor(imageSize.width * scalar);\n                imageSize.height = Math.floor(imageSize.height * scalar);\n                canvasSize = calculateCanvasSize(imageSize, aspectRatio, zoom);\n            }\n        }\n\n        var canvas = document.createElement('canvas');\n\n        var canvasCenter = {\n            x: canvasSize.width * 0.5,\n            y: canvasSize.height * 0.5,\n        };\n\n        var stage = {\n            x: 0,\n            y: 0,\n            width: canvasSize.width,\n            height: canvasSize.height,\n            center: canvasCenter,\n        };\n\n        var shouldLimit = typeof crop.scaleToFit === 'undefined' || crop.scaleToFit;\n\n        var scale =\n            zoom *\n            getImageRectZoomFactor(\n                imageSize,\n                getCenteredCropRect(stage, aspectRatio),\n                crop.rotation,\n                shouldLimit ? crop.center : { x: 0.5, y: 0.5 }\n            );\n\n        // start drawing\n        canvas.width = Math.round(canvasSize.width / scale);\n        canvas.height = Math.round(canvasSize.height / scale);\n\n        canvasCenter.x /= scale;\n        canvasCenter.y /= scale;\n\n        var imageOffset = {\n            x: canvasCenter.x - imageSize.width * (crop.center ? crop.center.x : 0.5),\n            y: canvasCenter.y - imageSize.height * (crop.center ? crop.center.y : 0.5),\n        };\n\n        var ctx = canvas.getContext('2d');\n        if (background) {\n            ctx.fillStyle = background;\n            ctx.fillRect(0, 0, canvas.width, canvas.height);\n        }\n\n        // move to draw offset\n        ctx.translate(canvasCenter.x, canvasCenter.y);\n        ctx.rotate(crop.rotation || 0);\n\n        // draw the image\n        ctx.drawImage(\n            bitmap,\n            imageOffset.x - canvasCenter.x,\n            imageOffset.y - canvasCenter.y,\n            imageSize.width,\n            imageSize.height\n        );\n\n        // get data from canvas\n        var imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n\n        // release canvas\n        canvasRelease(canvas);\n\n        // return data\n        return imageData;\n    };\n\n    /**\n     * Polyfill toBlob for Edge\n     */\n    var IS_BROWSER = (function() {\n        return typeof window !== 'undefined' && typeof window.document !== 'undefined';\n    })();\n    if (IS_BROWSER) {\n        if (!HTMLCanvasElement.prototype.toBlob) {\n            Object.defineProperty(HTMLCanvasElement.prototype, 'toBlob', {\n                value: function value(callback, type, quality) {\n                    var dataURL = this.toDataURL(type, quality).split(',')[1];\n                    setTimeout(function() {\n                        var binStr = atob(dataURL);\n                        var len = binStr.length;\n                        var arr = new Uint8Array(len);\n                        for (var i = 0; i < len; i++) {\n                            arr[i] = binStr.charCodeAt(i);\n                        }\n                        callback(new Blob([arr], { type: type || 'image/png' }));\n                    });\n                },\n            });\n        }\n    }\n\n    var canvasToBlob = function canvasToBlob(canvas, options) {\n        var beforeCreateBlob =\n            arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n        return new Promise(function(resolve) {\n            var promisedImage = beforeCreateBlob ? beforeCreateBlob(canvas) : canvas;\n            Promise.resolve(promisedImage).then(function(canvas) {\n                canvas.toBlob(resolve, options.type, options.quality);\n            });\n        });\n    };\n\n    var vectorMultiply = function vectorMultiply(v, amount) {\n        return createVector$1(v.x * amount, v.y * amount);\n    };\n\n    var vectorAdd = function vectorAdd(a, b) {\n        return createVector$1(a.x + b.x, a.y + b.y);\n    };\n\n    var vectorNormalize = function vectorNormalize(v) {\n        var l = Math.sqrt(v.x * v.x + v.y * v.y);\n        if (l === 0) {\n            return {\n                x: 0,\n                y: 0,\n            };\n        }\n        return createVector$1(v.x / l, v.y / l);\n    };\n\n    var vectorRotate = function vectorRotate(v, radians, origin) {\n        var cos = Math.cos(radians);\n        var sin = Math.sin(radians);\n        var t = createVector$1(v.x - origin.x, v.y - origin.y);\n        return createVector$1(origin.x + cos * t.x - sin * t.y, origin.y + sin * t.x + cos * t.y);\n    };\n\n    var createVector$1 = function createVector() {\n        var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n        var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n        return { x: x, y: y };\n    };\n\n    var getMarkupValue = function getMarkupValue(value, size) {\n        var scalar = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n        var axis = arguments.length > 3 ? arguments[3] : undefined;\n        if (typeof value === 'string') {\n            return parseFloat(value) * scalar;\n        }\n        if (typeof value === 'number') {\n            return value * (axis ? size[axis] : Math.min(size.width, size.height));\n        }\n        return;\n    };\n\n    var getMarkupStyles = function getMarkupStyles(markup, size, scale) {\n        var lineStyle = markup.borderStyle || markup.lineStyle || 'solid';\n        var fill = markup.backgroundColor || markup.fontColor || 'transparent';\n        var stroke = markup.borderColor || markup.lineColor || 'transparent';\n        var strokeWidth = getMarkupValue(markup.borderWidth || markup.lineWidth, size, scale);\n        var lineCap = markup.lineCap || 'round';\n        var lineJoin = markup.lineJoin || 'round';\n        var dashes =\n            typeof lineStyle === 'string'\n                ? ''\n                : lineStyle\n                      .map(function(v) {\n                          return getMarkupValue(v, size, scale);\n                      })\n                      .join(',');\n        var opacity = markup.opacity || 1;\n        return {\n            'stroke-linecap': lineCap,\n            'stroke-linejoin': lineJoin,\n            'stroke-width': strokeWidth || 0,\n            'stroke-dasharray': dashes,\n            stroke: stroke,\n            fill: fill,\n            opacity: opacity,\n        };\n    };\n\n    var isDefined = function isDefined(value) {\n        return value != null;\n    };\n\n    var getMarkupRect = function getMarkupRect(rect, size) {\n        var scalar = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\n        var left =\n            getMarkupValue(rect.x, size, scalar, 'width') ||\n            getMarkupValue(rect.left, size, scalar, 'width');\n        var top =\n            getMarkupValue(rect.y, size, scalar, 'height') ||\n            getMarkupValue(rect.top, size, scalar, 'height');\n        var width = getMarkupValue(rect.width, size, scalar, 'width');\n        var height = getMarkupValue(rect.height, size, scalar, 'height');\n        var right = getMarkupValue(rect.right, size, scalar, 'width');\n        var bottom = getMarkupValue(rect.bottom, size, scalar, 'height');\n\n        if (!isDefined(top)) {\n            if (isDefined(height) && isDefined(bottom)) {\n                top = size.height - height - bottom;\n            } else {\n                top = bottom;\n            }\n        }\n\n        if (!isDefined(left)) {\n            if (isDefined(width) && isDefined(right)) {\n                left = size.width - width - right;\n            } else {\n                left = right;\n            }\n        }\n\n        if (!isDefined(width)) {\n            if (isDefined(left) && isDefined(right)) {\n                width = size.width - left - right;\n            } else {\n                width = 0;\n            }\n        }\n\n        if (!isDefined(height)) {\n            if (isDefined(top) && isDefined(bottom)) {\n                height = size.height - top - bottom;\n            } else {\n                height = 0;\n            }\n        }\n\n        return {\n            x: left || 0,\n            y: top || 0,\n            width: width || 0,\n            height: height || 0,\n        };\n    };\n\n    var pointsToPathShape = function pointsToPathShape(points) {\n        return points\n            .map(function(point, index) {\n                return ''\n                    .concat(index === 0 ? 'M' : 'L', ' ')\n                    .concat(point.x, ' ')\n                    .concat(point.y);\n            })\n            .join(' ');\n    };\n\n    var setAttributes = function setAttributes(element, attr) {\n        return Object.keys(attr).forEach(function(key) {\n            return element.setAttribute(key, attr[key]);\n        });\n    };\n\n    var ns = 'http://www.w3.org/2000/svg';\n    var svg = function svg(tag, attr) {\n        var element = document.createElementNS(ns, tag);\n        if (attr) {\n            setAttributes(element, attr);\n        }\n        return element;\n    };\n\n    var updateRect = function updateRect(element) {\n        return setAttributes(element, Object.assign({}, element.rect, element.styles));\n    };\n\n    var updateEllipse = function updateEllipse(element) {\n        var cx = element.rect.x + element.rect.width * 0.5;\n        var cy = element.rect.y + element.rect.height * 0.5;\n        var rx = element.rect.width * 0.5;\n        var ry = element.rect.height * 0.5;\n        return setAttributes(\n            element,\n            Object.assign(\n                {\n                    cx: cx,\n                    cy: cy,\n                    rx: rx,\n                    ry: ry,\n                },\n                element.styles\n            )\n        );\n    };\n\n    var IMAGE_FIT_STYLE = {\n        contain: 'xMidYMid meet',\n        cover: 'xMidYMid slice',\n    };\n\n    var updateImage = function updateImage(element, markup) {\n        setAttributes(\n            element,\n            Object.assign({}, element.rect, element.styles, {\n                preserveAspectRatio: IMAGE_FIT_STYLE[markup.fit] || 'none',\n            })\n        );\n    };\n\n    var TEXT_ANCHOR = {\n        left: 'start',\n        center: 'middle',\n        right: 'end',\n    };\n\n    var updateText = function updateText(element, markup, size, scale) {\n        var fontSize = getMarkupValue(markup.fontSize, size, scale);\n        var fontFamily = markup.fontFamily || 'sans-serif';\n        var fontWeight = markup.fontWeight || 'normal';\n        var textAlign = TEXT_ANCHOR[markup.textAlign] || 'start';\n\n        setAttributes(\n            element,\n            Object.assign({}, element.rect, element.styles, {\n                'stroke-width': 0,\n                'font-weight': fontWeight,\n                'font-size': fontSize,\n                'font-family': fontFamily,\n                'text-anchor': textAlign,\n            })\n        );\n\n        // update text\n        if (element.text !== markup.text) {\n            element.text = markup.text;\n            element.textContent = markup.text.length ? markup.text : ' ';\n        }\n    };\n\n    var updateLine = function updateLine(element, markup, size, scale) {\n        setAttributes(\n            element,\n            Object.assign({}, element.rect, element.styles, {\n                fill: 'none',\n            })\n        );\n\n        var line = element.childNodes[0];\n        var begin = element.childNodes[1];\n        var end = element.childNodes[2];\n\n        var origin = element.rect;\n\n        var target = {\n            x: element.rect.x + element.rect.width,\n            y: element.rect.y + element.rect.height,\n        };\n\n        setAttributes(line, {\n            x1: origin.x,\n            y1: origin.y,\n            x2: target.x,\n            y2: target.y,\n        });\n\n        if (!markup.lineDecoration) return;\n\n        begin.style.display = 'none';\n        end.style.display = 'none';\n\n        var v = vectorNormalize({\n            x: target.x - origin.x,\n            y: target.y - origin.y,\n        });\n\n        var l = getMarkupValue(0.05, size, scale);\n\n        if (markup.lineDecoration.indexOf('arrow-begin') !== -1) {\n            var arrowBeginRotationPoint = vectorMultiply(v, l);\n            var arrowBeginCenter = vectorAdd(origin, arrowBeginRotationPoint);\n            var arrowBeginA = vectorRotate(origin, 2, arrowBeginCenter);\n            var arrowBeginB = vectorRotate(origin, -2, arrowBeginCenter);\n\n            setAttributes(begin, {\n                style: 'display:block;',\n                d: 'M'\n                    .concat(arrowBeginA.x, ',')\n                    .concat(arrowBeginA.y, ' L')\n                    .concat(origin.x, ',')\n                    .concat(origin.y, ' L')\n                    .concat(arrowBeginB.x, ',')\n                    .concat(arrowBeginB.y),\n            });\n        }\n\n        if (markup.lineDecoration.indexOf('arrow-end') !== -1) {\n            var arrowEndRotationPoint = vectorMultiply(v, -l);\n            var arrowEndCenter = vectorAdd(target, arrowEndRotationPoint);\n            var arrowEndA = vectorRotate(target, 2, arrowEndCenter);\n            var arrowEndB = vectorRotate(target, -2, arrowEndCenter);\n\n            setAttributes(end, {\n                style: 'display:block;',\n                d: 'M'\n                    .concat(arrowEndA.x, ',')\n                    .concat(arrowEndA.y, ' L')\n                    .concat(target.x, ',')\n                    .concat(target.y, ' L')\n                    .concat(arrowEndB.x, ',')\n                    .concat(arrowEndB.y),\n            });\n        }\n    };\n\n    var updatePath = function updatePath(element, markup, size, scale) {\n        setAttributes(\n            element,\n            Object.assign({}, element.styles, {\n                fill: 'none',\n                d: pointsToPathShape(\n                    markup.points.map(function(point) {\n                        return {\n                            x: getMarkupValue(point.x, size, scale, 'width'),\n                            y: getMarkupValue(point.y, size, scale, 'height'),\n                        };\n                    })\n                ),\n            })\n        );\n    };\n\n    var createShape = function createShape(node) {\n        return function(markup) {\n            return svg(node, { id: markup.id });\n        };\n    };\n\n    var createImage = function createImage(markup) {\n        var shape = svg('image', {\n            id: markup.id,\n            'stroke-linecap': 'round',\n            'stroke-linejoin': 'round',\n            opacity: '0',\n        });\n\n        shape.onload = function() {\n            shape.setAttribute('opacity', markup.opacity || 1);\n        };\n        shape.setAttributeNS('http://www.w3.org/1999/xlink', 'xlink:href', markup.src);\n        return shape;\n    };\n\n    var createLine = function createLine(markup) {\n        var shape = svg('g', {\n            id: markup.id,\n            'stroke-linecap': 'round',\n            'stroke-linejoin': 'round',\n        });\n\n        var line = svg('line');\n        shape.appendChild(line);\n\n        var begin = svg('path');\n        shape.appendChild(begin);\n\n        var end = svg('path');\n        shape.appendChild(end);\n\n        return shape;\n    };\n\n    var CREATE_TYPE_ROUTES = {\n        image: createImage,\n        rect: createShape('rect'),\n        ellipse: createShape('ellipse'),\n        text: createShape('text'),\n        path: createShape('path'),\n        line: createLine,\n    };\n\n    var UPDATE_TYPE_ROUTES = {\n        rect: updateRect,\n        ellipse: updateEllipse,\n        image: updateImage,\n        text: updateText,\n        path: updatePath,\n        line: updateLine,\n    };\n\n    var createMarkupByType = function createMarkupByType(type, markup) {\n        return CREATE_TYPE_ROUTES[type](markup);\n    };\n\n    var updateMarkupByType = function updateMarkupByType(element, type, markup, size, scale) {\n        if (type !== 'path') {\n            element.rect = getMarkupRect(markup, size, scale);\n        }\n        element.styles = getMarkupStyles(markup, size, scale);\n        UPDATE_TYPE_ROUTES[type](element, markup, size, scale);\n    };\n\n    var sortMarkupByZIndex = function sortMarkupByZIndex(a, b) {\n        if (a[1].zIndex > b[1].zIndex) {\n            return 1;\n        }\n        if (a[1].zIndex < b[1].zIndex) {\n            return -1;\n        }\n        return 0;\n    };\n\n    var cropSVG = function cropSVG(blob) {\n        var crop = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        var markup = arguments.length > 2 ? arguments[2] : undefined;\n        var options = arguments.length > 3 ? arguments[3] : undefined;\n        return new Promise(function(resolve) {\n            var _options$background = options.background,\n                background = _options$background === void 0 ? null : _options$background;\n\n            // load blob contents and wrap in crop svg\n            var fr = new FileReader();\n            fr.onloadend = function() {\n                // get svg text\n                var text = fr.result;\n\n                // create element with svg and get size\n                var original = document.createElement('div');\n                original.style.cssText =\n                    'position:absolute;pointer-events:none;width:0;height:0;visibility:hidden;';\n                original.innerHTML = text;\n                var originalNode = original.querySelector('svg');\n                document.body.appendChild(original);\n\n                // request bounding box dimensions\n                var bBox = originalNode.getBBox();\n                original.parentNode.removeChild(original);\n\n                // get title\n                var titleNode = original.querySelector('title');\n\n                // calculate new heights and widths\n                var viewBoxAttribute = originalNode.getAttribute('viewBox') || '';\n                var widthAttribute = originalNode.getAttribute('width') || '';\n                var heightAttribute = originalNode.getAttribute('height') || '';\n                var width = parseFloat(widthAttribute) || null;\n                var height = parseFloat(heightAttribute) || null;\n                var widthUnits = (widthAttribute.match(/[a-z]+/) || [])[0] || '';\n                var heightUnits = (heightAttribute.match(/[a-z]+/) || [])[0] || '';\n\n                // create new size\n                var viewBoxList = viewBoxAttribute.split(' ').map(parseFloat);\n                var viewBox = viewBoxList.length\n                    ? {\n                          x: viewBoxList[0],\n                          y: viewBoxList[1],\n                          width: viewBoxList[2],\n                          height: viewBoxList[3],\n                      }\n                    : bBox;\n\n                var imageWidth = width != null ? width : viewBox.width;\n                var imageHeight = height != null ? height : viewBox.height;\n\n                originalNode.style.overflow = 'visible';\n                originalNode.setAttribute('width', imageWidth);\n                originalNode.setAttribute('height', imageHeight);\n\n                // markup\n                var markupSVG = '';\n                if (markup && markup.length) {\n                    var size = {\n                        width: imageWidth,\n                        height: imageHeight,\n                    };\n\n                    markupSVG = markup.sort(sortMarkupByZIndex).reduce(function(prev, shape) {\n                        var el = createMarkupByType(shape[0], shape[1]);\n                        updateMarkupByType(el, shape[0], shape[1], size);\n                        el.removeAttribute('id');\n                        if (el.getAttribute('opacity') === 1) {\n                            el.removeAttribute('opacity');\n                        }\n                        return prev + '\\n' + el.outerHTML + '\\n';\n                    }, '');\n                    markupSVG = '\\n\\n<g>'.concat(markupSVG.replace(/&nbsp;/g, ' '), '</g>\\n\\n');\n                }\n\n                var aspectRatio = crop.aspectRatio || imageHeight / imageWidth;\n\n                var canvasWidth = imageWidth;\n                var canvasHeight = canvasWidth * aspectRatio;\n\n                var shouldLimit = typeof crop.scaleToFit === 'undefined' || crop.scaleToFit;\n\n                var cropCenterX = crop.center ? crop.center.x : 0.5;\n                var cropCenterY = crop.center ? crop.center.y : 0.5;\n\n                var canvasZoomFactor = getImageRectZoomFactor(\n                    {\n                        width: imageWidth,\n                        height: imageHeight,\n                    },\n\n                    getCenteredCropRect(\n                        {\n                            width: canvasWidth,\n                            height: canvasHeight,\n                        },\n\n                        aspectRatio\n                    ),\n\n                    crop.rotation,\n                    shouldLimit\n                        ? { x: cropCenterX, y: cropCenterY }\n                        : {\n                              x: 0.5,\n                              y: 0.5,\n                          }\n                );\n\n                var scale = crop.zoom * canvasZoomFactor;\n\n                var rotation = crop.rotation * (180 / Math.PI);\n\n                var canvasCenter = {\n                    x: canvasWidth * 0.5,\n                    y: canvasHeight * 0.5,\n                };\n\n                var imageOffset = {\n                    x: canvasCenter.x - imageWidth * cropCenterX,\n                    y: canvasCenter.y - imageHeight * cropCenterY,\n                };\n\n                var cropTransforms = [\n                    // rotate\n                    'rotate('\n                        .concat(rotation, ' ')\n                        .concat(canvasCenter.x, ' ')\n                        .concat(canvasCenter.y, ')'),\n\n                    // scale\n                    'translate('.concat(canvasCenter.x, ' ').concat(canvasCenter.y, ')'),\n                    'scale('.concat(scale, ')'),\n                    'translate('.concat(-canvasCenter.x, ' ').concat(-canvasCenter.y, ')'),\n\n                    // offset\n                    'translate('.concat(imageOffset.x, ' ').concat(imageOffset.y, ')'),\n                ];\n\n                var cropFlipHorizontal = crop.flip && crop.flip.horizontal;\n                var cropFlipVertical = crop.flip && crop.flip.vertical;\n\n                var flipTransforms = [\n                    'scale('\n                        .concat(cropFlipHorizontal ? -1 : 1, ' ')\n                        .concat(cropFlipVertical ? -1 : 1, ')'),\n                    'translate('\n                        .concat(cropFlipHorizontal ? -imageWidth : 0, ' ')\n                        .concat(cropFlipVertical ? -imageHeight : 0, ')'),\n                ];\n\n                // crop\n                var transformed = '<?xml version=\"1.0\" encoding=\"UTF-8\"?>\\n<svg width=\"'\n                    .concat(canvasWidth)\n                    .concat(widthUnits, '\" height=\"')\n                    .concat(canvasHeight)\n                    .concat(heightUnits, '\" \\nviewBox=\"0 0 ')\n                    .concat(canvasWidth, ' ')\n                    .concat(canvasHeight, '\" ')\n                    .concat(\n                        background ? 'style=\"background:' + background + '\" ' : '',\n                        '\\npreserveAspectRatio=\"xMinYMin\"\\nxmlns:xlink=\"http://www.w3.org/1999/xlink\"\\nxmlns=\"http://www.w3.org/2000/svg\">\\n<!-- Generated by PQINA - https://pqina.nl/ -->\\n<title>'\n                    )\n                    .concat(titleNode ? titleNode.textContent : '', '</title>\\n<g transform=\"')\n                    .concat(cropTransforms.join(' '), '\">\\n<g transform=\"')\n                    .concat(flipTransforms.join(' '), '\">\\n')\n                    .concat(originalNode.outerHTML)\n                    .concat(markupSVG, '\\n</g>\\n</g>\\n</svg>');\n\n                // create new svg file\n                resolve(transformed);\n            };\n\n            fr.readAsText(blob);\n        });\n    };\n\n    var objectToImageData = function objectToImageData(obj) {\n        var imageData;\n        try {\n            imageData = new ImageData(obj.width, obj.height);\n        } catch (e) {\n            // IE + Old EDGE (tested on 12)\n            var canvas = document.createElement('canvas');\n            imageData = canvas.getContext('2d').createImageData(obj.width, obj.height);\n        }\n        imageData.data.set(obj.data);\n        return imageData;\n    };\n\n    /* javascript-obfuscator:disable */\n    var TransformWorker = function TransformWorker() {\n        // maps transform types to transform functions\n        var TRANSFORMS = { resize: resize, filter: filter };\n\n        // applies all image transforms to the image data array\n        var applyTransforms = function applyTransforms(transforms, imageData) {\n            transforms.forEach(function(transform) {\n                imageData = TRANSFORMS[transform.type](imageData, transform.data);\n            });\n            return imageData;\n        };\n\n        // transform image hub\n        var transform = function transform(data, cb) {\n            var transforms = data.transforms;\n\n            // if has filter and has resize, move filter to resize operation\n            var filterTransform = null;\n            transforms.forEach(function(transform) {\n                if (transform.type === 'filter') {\n                    filterTransform = transform;\n                }\n            });\n            if (filterTransform) {\n                // find resize\n                var resizeTransform = null;\n                transforms.forEach(function(transform) {\n                    if (transform.type === 'resize') {\n                        resizeTransform = transform;\n                    }\n                });\n\n                if (resizeTransform) {\n                    // update resize operation\n                    resizeTransform.data.matrix = filterTransform.data;\n\n                    // remove filter\n                    transforms = transforms.filter(function(transform) {\n                        return transform.type !== 'filter';\n                    });\n                }\n            }\n\n            cb(applyTransforms(transforms, data.imageData));\n        };\n\n        // eslint-disable-next-line no-restricted-globals\n        self.onmessage = function(e) {\n            transform(e.data.message, function(response) {\n                // eslint-disable-next-line no-restricted-globals\n                self.postMessage({ id: e.data.id, message: response }, [response.data.buffer]);\n            });\n        };\n\n        var br = 1.0;\n        var bg = 1.0;\n        var bb = 1.0;\n        function applyFilterMatrix(index, data, m) {\n            var ir = data[index] / 255;\n            var ig = data[index + 1] / 255;\n            var ib = data[index + 2] / 255;\n            var ia = data[index + 3] / 255;\n\n            var mr = ir * m[0] + ig * m[1] + ib * m[2] + ia * m[3] + m[4];\n            var mg = ir * m[5] + ig * m[6] + ib * m[7] + ia * m[8] + m[9];\n            var mb = ir * m[10] + ig * m[11] + ib * m[12] + ia * m[13] + m[14];\n            var ma = ir * m[15] + ig * m[16] + ib * m[17] + ia * m[18] + m[19];\n\n            var or = Math.max(0, mr * ma) + br * (1.0 - ma);\n            var og = Math.max(0, mg * ma) + bg * (1.0 - ma);\n            var ob = Math.max(0, mb * ma) + bb * (1.0 - ma);\n\n            data[index] = Math.max(0.0, Math.min(1.0, or)) * 255;\n            data[index + 1] = Math.max(0.0, Math.min(1.0, og)) * 255;\n            data[index + 2] = Math.max(0.0, Math.min(1.0, ob)) * 255;\n        }\n\n        var identityMatrix = self.JSON.stringify([\n            1,\n            0,\n            0,\n            0,\n            0,\n            0,\n            1,\n            0,\n            0,\n            0,\n            0,\n            0,\n            1,\n            0,\n            0,\n            0,\n            0,\n            0,\n            1,\n            0,\n        ]);\n        function isIdentityMatrix(filter) {\n            return self.JSON.stringify(filter || []) === identityMatrix;\n        }\n\n        function filter(imageData, matrix) {\n            if (!matrix || isIdentityMatrix(matrix)) return imageData;\n\n            var data = imageData.data;\n            var l = data.length;\n\n            var m11 = matrix[0];\n            var m12 = matrix[1];\n            var m13 = matrix[2];\n            var m14 = matrix[3];\n            var m15 = matrix[4];\n\n            var m21 = matrix[5];\n            var m22 = matrix[6];\n            var m23 = matrix[7];\n            var m24 = matrix[8];\n            var m25 = matrix[9];\n\n            var m31 = matrix[10];\n            var m32 = matrix[11];\n            var m33 = matrix[12];\n            var m34 = matrix[13];\n            var m35 = matrix[14];\n\n            var m41 = matrix[15];\n            var m42 = matrix[16];\n            var m43 = matrix[17];\n            var m44 = matrix[18];\n            var m45 = matrix[19];\n\n            var index = 0,\n                r = 0.0,\n                g = 0.0,\n                b = 0.0,\n                a = 0.0,\n                mr = 0.0,\n                mg = 0.0,\n                mb = 0.0,\n                ma = 0.0,\n                or = 0.0,\n                og = 0.0,\n                ob = 0.0;\n\n            for (; index < l; index += 4) {\n                r = data[index] / 255;\n                g = data[index + 1] / 255;\n                b = data[index + 2] / 255;\n                a = data[index + 3] / 255;\n\n                mr = r * m11 + g * m12 + b * m13 + a * m14 + m15;\n                mg = r * m21 + g * m22 + b * m23 + a * m24 + m25;\n                mb = r * m31 + g * m32 + b * m33 + a * m34 + m35;\n                ma = r * m41 + g * m42 + b * m43 + a * m44 + m45;\n\n                or = Math.max(0, mr * ma) + br * (1.0 - ma);\n                og = Math.max(0, mg * ma) + bg * (1.0 - ma);\n                ob = Math.max(0, mb * ma) + bb * (1.0 - ma);\n\n                data[index] = Math.max(0.0, Math.min(1.0, or)) * 255;\n                data[index + 1] = Math.max(0.0, Math.min(1.0, og)) * 255;\n                data[index + 2] = Math.max(0.0, Math.min(1.0, ob)) * 255;\n                // don't update alpha value\n            }\n\n            return imageData;\n        }\n\n        function resize(imageData, data) {\n            var _data$mode = data.mode,\n                mode = _data$mode === void 0 ? 'contain' : _data$mode,\n                _data$upscale = data.upscale,\n                upscale = _data$upscale === void 0 ? false : _data$upscale,\n                width = data.width,\n                height = data.height,\n                matrix = data.matrix;\n\n            // test if is identity matrix\n            matrix = !matrix || isIdentityMatrix(matrix) ? null : matrix;\n\n            // need at least a width or a height\n            // also 0 is not a valid width or height\n            if (!width && !height) {\n                return filter(imageData, matrix);\n            }\n\n            // make sure all bounds are set\n            if (width === null) {\n                width = height;\n            } else if (height === null) {\n                height = width;\n            }\n\n            if (mode !== 'force') {\n                var scalarWidth = width / imageData.width;\n                var scalarHeight = height / imageData.height;\n                var scalar = 1;\n\n                if (mode === 'cover') {\n                    scalar = Math.max(scalarWidth, scalarHeight);\n                } else if (mode === 'contain') {\n                    scalar = Math.min(scalarWidth, scalarHeight);\n                }\n\n                // if image is too small, exit here with original image\n                if (scalar > 1 && upscale === false) {\n                    return filter(imageData, matrix);\n                }\n\n                width = imageData.width * scalar;\n                height = imageData.height * scalar;\n            }\n\n            var originWidth = imageData.width;\n            var originHeight = imageData.height;\n            var targetWidth = Math.round(width);\n            var targetHeight = Math.round(height);\n            var inputData = imageData.data;\n            var outputData = new Uint8ClampedArray(targetWidth * targetHeight * 4);\n            var ratioWidth = originWidth / targetWidth;\n            var ratioHeight = originHeight / targetHeight;\n            var ratioWidthHalf = Math.ceil(ratioWidth * 0.5);\n            var ratioHeightHalf = Math.ceil(ratioHeight * 0.5);\n\n            for (var j = 0; j < targetHeight; j++) {\n                for (var i = 0; i < targetWidth; i++) {\n                    var x2 = (i + j * targetWidth) * 4;\n                    var weight = 0;\n                    var weights = 0;\n                    var weightsAlpha = 0;\n                    var r = 0;\n                    var g = 0;\n                    var b = 0;\n                    var a = 0;\n                    var centerY = (j + 0.5) * ratioHeight;\n\n                    for (var yy = Math.floor(j * ratioHeight); yy < (j + 1) * ratioHeight; yy++) {\n                        var dy = Math.abs(centerY - (yy + 0.5)) / ratioHeightHalf;\n                        var centerX = (i + 0.5) * ratioWidth;\n                        var w0 = dy * dy;\n\n                        for (var xx = Math.floor(i * ratioWidth); xx < (i + 1) * ratioWidth; xx++) {\n                            var dx = Math.abs(centerX - (xx + 0.5)) / ratioWidthHalf;\n                            var w = Math.sqrt(w0 + dx * dx);\n\n                            if (w >= -1 && w <= 1) {\n                                weight = 2 * w * w * w - 3 * w * w + 1;\n\n                                if (weight > 0) {\n                                    dx = 4 * (xx + yy * originWidth);\n\n                                    var ref = inputData[dx + 3];\n                                    a += weight * ref;\n                                    weightsAlpha += weight;\n\n                                    if (ref < 255) {\n                                        weight = (weight * ref) / 250;\n                                    }\n\n                                    r += weight * inputData[dx];\n                                    g += weight * inputData[dx + 1];\n                                    b += weight * inputData[dx + 2];\n                                    weights += weight;\n                                }\n                            }\n                        }\n                    }\n\n                    outputData[x2] = r / weights;\n                    outputData[x2 + 1] = g / weights;\n                    outputData[x2 + 2] = b / weights;\n                    outputData[x2 + 3] = a / weightsAlpha;\n\n                    matrix && applyFilterMatrix(x2, outputData, matrix);\n                }\n            }\n\n            return {\n                data: outputData,\n                width: targetWidth,\n                height: targetHeight,\n            };\n        }\n    };\n    /* javascript-obfuscator:enable */\n\n    var correctOrientation = function correctOrientation(view, offset) {\n        // Missing 0x45786966 Marker? No Exif Header, stop here\n        if (view.getUint32(offset + 4, false) !== 0x45786966) return;\n\n        // next byte!\n        offset += 4;\n\n        // First 2bytes defines byte align of TIFF data.\n        // If it is 0x4949=\"I I\", it means \"Intel\" type byte align\n        var intelByteAligned = view.getUint16((offset += 6), false) === 0x4949;\n        offset += view.getUint32(offset + 4, intelByteAligned);\n\n        var tags = view.getUint16(offset, intelByteAligned);\n        offset += 2;\n\n        // find Orientation tag\n        for (var i = 0; i < tags; i++) {\n            if (view.getUint16(offset + i * 12, intelByteAligned) === 0x0112) {\n                view.setUint16(offset + i * 12 + 8, 1, intelByteAligned);\n                return true;\n            }\n        }\n        return false;\n    };\n\n    var readData = function readData(data) {\n        var view = new DataView(data);\n\n        // Every JPEG file starts from binary value '0xFFD8'\n        // If it's not present, exit here\n        if (view.getUint16(0) !== 0xffd8) return null;\n\n        var offset = 2; // Start at 2 as we skipped two bytes (FFD8)\n        var marker;\n        var markerLength;\n        var orientationCorrected = false;\n\n        while (offset < view.byteLength) {\n            marker = view.getUint16(offset, false);\n            markerLength = view.getUint16(offset + 2, false) + 2;\n\n            // Test if is APP and COM markers\n            var isData = (marker >= 0xffe0 && marker <= 0xffef) || marker === 0xfffe;\n            if (!isData) {\n                break;\n            }\n\n            if (!orientationCorrected) {\n                orientationCorrected = correctOrientation(view, offset, markerLength);\n            }\n\n            if (offset + markerLength > view.byteLength) {\n                break;\n            }\n\n            offset += markerLength;\n        }\n        return data.slice(0, offset);\n    };\n\n    var getImageHead = function getImageHead(file) {\n        return new Promise(function(resolve) {\n            var reader = new FileReader();\n            reader.onload = function() {\n                return resolve(readData(reader.result) || null);\n            };\n            reader.readAsArrayBuffer(file.slice(0, 256 * 1024));\n        });\n    };\n\n    var getBlobBuilder = function getBlobBuilder() {\n        return (window.BlobBuilder =\n            window.BlobBuilder ||\n            window.WebKitBlobBuilder ||\n            window.MozBlobBuilder ||\n            window.MSBlobBuilder);\n    };\n\n    var createBlob = function createBlob(arrayBuffer, mimeType) {\n        var BB = getBlobBuilder();\n\n        if (BB) {\n            var bb = new BB();\n            bb.append(arrayBuffer);\n            return bb.getBlob(mimeType);\n        }\n\n        return new Blob([arrayBuffer], {\n            type: mimeType,\n        });\n    };\n\n    var getUniqueId = function getUniqueId() {\n        return Math.random()\n            .toString(36)\n            .substr(2, 9);\n    };\n\n    var createWorker = function createWorker(fn) {\n        var workerBlob = new Blob(['(', fn.toString(), ')()'], { type: 'application/javascript' });\n        var workerURL = URL.createObjectURL(workerBlob);\n        var worker = new Worker(workerURL);\n\n        var trips = [];\n\n        return {\n            transfer: function transfer() {}, // (message, cb) => {}\n            post: function post(message, cb, transferList) {\n                var id = getUniqueId();\n                trips[id] = cb;\n\n                worker.onmessage = function(e) {\n                    var cb = trips[e.data.id];\n                    if (!cb) return;\n                    cb(e.data.message);\n                    delete trips[e.data.id];\n                };\n\n                worker.postMessage(\n                    {\n                        id: id,\n                        message: message,\n                    },\n\n                    transferList\n                );\n            },\n            terminate: function terminate() {\n                worker.terminate();\n                URL.revokeObjectURL(workerURL);\n            },\n        };\n    };\n\n    var loadImage = function loadImage(url) {\n        return new Promise(function(resolve, reject) {\n            var img = new Image();\n            img.onload = function() {\n                resolve(img);\n            };\n            img.onerror = function(e) {\n                reject(e);\n            };\n            img.src = url;\n        });\n    };\n\n    var chain = function chain(funcs) {\n        return funcs.reduce(function(promise, func) {\n            return promise.then(function(result) {\n                return func().then(Array.prototype.concat.bind(result));\n            });\n        }, Promise.resolve([]));\n    };\n\n    var canvasApplyMarkup = function canvasApplyMarkup(canvas, markup) {\n        return new Promise(function(resolve) {\n            var size = {\n                width: canvas.width,\n                height: canvas.height,\n            };\n\n            var ctx = canvas.getContext('2d');\n\n            var drawers = markup.sort(sortMarkupByZIndex).map(function(item) {\n                return function() {\n                    return new Promise(function(resolve) {\n                        var result = TYPE_DRAW_ROUTES[item[0]](ctx, size, item[1], resolve);\n                        if (result) resolve();\n                    });\n                };\n            });\n\n            chain(drawers).then(function() {\n                return resolve(canvas);\n            });\n        });\n    };\n\n    var applyMarkupStyles = function applyMarkupStyles(ctx, styles) {\n        ctx.beginPath();\n        ctx.lineCap = styles['stroke-linecap'];\n        ctx.lineJoin = styles['stroke-linejoin'];\n        ctx.lineWidth = styles['stroke-width'];\n        if (styles['stroke-dasharray'].length) {\n            ctx.setLineDash(styles['stroke-dasharray'].split(','));\n        }\n        ctx.fillStyle = styles['fill'];\n        ctx.strokeStyle = styles['stroke'];\n        ctx.globalAlpha = styles.opacity || 1;\n    };\n\n    var drawMarkupStyles = function drawMarkupStyles(ctx) {\n        ctx.fill();\n        ctx.stroke();\n        ctx.globalAlpha = 1;\n    };\n\n    var drawRect = function drawRect(ctx, size, markup) {\n        var rect = getMarkupRect(markup, size);\n        var styles = getMarkupStyles(markup, size);\n        applyMarkupStyles(ctx, styles);\n        ctx.rect(rect.x, rect.y, rect.width, rect.height);\n        drawMarkupStyles(ctx, styles);\n        return true;\n    };\n\n    var drawEllipse = function drawEllipse(ctx, size, markup) {\n        var rect = getMarkupRect(markup, size);\n        var styles = getMarkupStyles(markup, size);\n        applyMarkupStyles(ctx, styles);\n\n        var x = rect.x,\n            y = rect.y,\n            w = rect.width,\n            h = rect.height,\n            kappa = 0.5522848,\n            ox = (w / 2) * kappa,\n            oy = (h / 2) * kappa,\n            xe = x + w,\n            ye = y + h,\n            xm = x + w / 2,\n            ym = y + h / 2;\n\n        ctx.moveTo(x, ym);\n        ctx.bezierCurveTo(x, ym - oy, xm - ox, y, xm, y);\n        ctx.bezierCurveTo(xm + ox, y, xe, ym - oy, xe, ym);\n        ctx.bezierCurveTo(xe, ym + oy, xm + ox, ye, xm, ye);\n        ctx.bezierCurveTo(xm - ox, ye, x, ym + oy, x, ym);\n\n        drawMarkupStyles(ctx, styles);\n        return true;\n    };\n\n    var drawImage = function drawImage(ctx, size, markup, done) {\n        var rect = getMarkupRect(markup, size);\n        var styles = getMarkupStyles(markup, size);\n        applyMarkupStyles(ctx, styles);\n\n        var image = new Image();\n\n        // if is cross origin image add cross origin attribute\n        var isCrossOriginImage =\n            new URL(markup.src, window.location.href).origin !== window.location.origin;\n        if (isCrossOriginImage) image.crossOrigin = '';\n\n        image.onload = function() {\n            if (markup.fit === 'cover') {\n                var ar = rect.width / rect.height;\n                var width = ar > 1 ? image.width : image.height * ar;\n                var height = ar > 1 ? image.width / ar : image.height;\n                var x = image.width * 0.5 - width * 0.5;\n                var y = image.height * 0.5 - height * 0.5;\n                ctx.drawImage(image, x, y, width, height, rect.x, rect.y, rect.width, rect.height);\n            } else if (markup.fit === 'contain') {\n                var scalar = Math.min(rect.width / image.width, rect.height / image.height);\n                var _width = scalar * image.width;\n                var _height = scalar * image.height;\n                var _x = rect.x + rect.width * 0.5 - _width * 0.5;\n                var _y = rect.y + rect.height * 0.5 - _height * 0.5;\n                ctx.drawImage(image, 0, 0, image.width, image.height, _x, _y, _width, _height);\n            } else {\n                ctx.drawImage(\n                    image,\n                    0,\n                    0,\n                    image.width,\n                    image.height,\n                    rect.x,\n                    rect.y,\n                    rect.width,\n                    rect.height\n                );\n            }\n\n            drawMarkupStyles(ctx, styles);\n            done();\n        };\n        image.src = markup.src;\n    };\n\n    var drawText = function drawText(ctx, size, markup) {\n        var rect = getMarkupRect(markup, size);\n        var styles = getMarkupStyles(markup, size);\n        applyMarkupStyles(ctx, styles);\n\n        var fontSize = getMarkupValue(markup.fontSize, size);\n        var fontFamily = markup.fontFamily || 'sans-serif';\n        var fontWeight = markup.fontWeight || 'normal';\n        var textAlign = markup.textAlign || 'left';\n\n        ctx.font = ''\n            .concat(fontWeight, ' ')\n            .concat(fontSize, 'px ')\n            .concat(fontFamily);\n        ctx.textAlign = textAlign;\n        ctx.fillText(markup.text, rect.x, rect.y);\n\n        drawMarkupStyles(ctx, styles);\n        return true;\n    };\n\n    var drawPath = function drawPath(ctx, size, markup) {\n        var styles = getMarkupStyles(markup, size);\n        applyMarkupStyles(ctx, styles);\n        ctx.beginPath();\n\n        var points = markup.points.map(function(point) {\n            return {\n                x: getMarkupValue(point.x, size, 1, 'width'),\n                y: getMarkupValue(point.y, size, 1, 'height'),\n            };\n        });\n\n        ctx.moveTo(points[0].x, points[0].y);\n        var l = points.length;\n        for (var i = 1; i < l; i++) {\n            ctx.lineTo(points[i].x, points[i].y);\n        }\n\n        drawMarkupStyles(ctx, styles);\n        return true;\n    };\n\n    var drawLine = function drawLine(ctx, size, markup) {\n        var rect = getMarkupRect(markup, size);\n        var styles = getMarkupStyles(markup, size);\n        applyMarkupStyles(ctx, styles);\n\n        ctx.beginPath();\n\n        var origin = {\n            x: rect.x,\n            y: rect.y,\n        };\n\n        var target = {\n            x: rect.x + rect.width,\n            y: rect.y + rect.height,\n        };\n\n        ctx.moveTo(origin.x, origin.y);\n        ctx.lineTo(target.x, target.y);\n\n        var v = vectorNormalize({\n            x: target.x - origin.x,\n            y: target.y - origin.y,\n        });\n\n        var l = 0.04 * Math.min(size.width, size.height);\n\n        if (markup.lineDecoration.indexOf('arrow-begin') !== -1) {\n            var arrowBeginRotationPoint = vectorMultiply(v, l);\n            var arrowBeginCenter = vectorAdd(origin, arrowBeginRotationPoint);\n            var arrowBeginA = vectorRotate(origin, 2, arrowBeginCenter);\n            var arrowBeginB = vectorRotate(origin, -2, arrowBeginCenter);\n\n            ctx.moveTo(arrowBeginA.x, arrowBeginA.y);\n            ctx.lineTo(origin.x, origin.y);\n            ctx.lineTo(arrowBeginB.x, arrowBeginB.y);\n        }\n        if (markup.lineDecoration.indexOf('arrow-end') !== -1) {\n            var arrowEndRotationPoint = vectorMultiply(v, -l);\n            var arrowEndCenter = vectorAdd(target, arrowEndRotationPoint);\n            var arrowEndA = vectorRotate(target, 2, arrowEndCenter);\n            var arrowEndB = vectorRotate(target, -2, arrowEndCenter);\n\n            ctx.moveTo(arrowEndA.x, arrowEndA.y);\n            ctx.lineTo(target.x, target.y);\n            ctx.lineTo(arrowEndB.x, arrowEndB.y);\n        }\n\n        drawMarkupStyles(ctx, styles);\n        return true;\n    };\n\n    var TYPE_DRAW_ROUTES = {\n        rect: drawRect,\n        ellipse: drawEllipse,\n        image: drawImage,\n        text: drawText,\n        line: drawLine,\n        path: drawPath,\n    };\n\n    var imageDataToCanvas = function imageDataToCanvas(imageData) {\n        var image = document.createElement('canvas');\n        image.width = imageData.width;\n        image.height = imageData.height;\n        var ctx = image.getContext('2d');\n        ctx.putImageData(imageData, 0, 0);\n        return image;\n    };\n\n    var transformImage = function transformImage(file, instructions) {\n        var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n        return new Promise(function(resolve, reject) {\n            // if the file is not an image we do not have any business transforming it\n            if (!file || !isImage$1(file))\n                return reject({ status: 'not an image file', file: file });\n\n            // get separate options for easier use\n            var stripImageHead = options.stripImageHead,\n                beforeCreateBlob = options.beforeCreateBlob,\n                afterCreateBlob = options.afterCreateBlob,\n                canvasMemoryLimit = options.canvasMemoryLimit;\n\n            // get crop\n            var crop = instructions.crop,\n                size = instructions.size,\n                filter = instructions.filter,\n                markup = instructions.markup,\n                output = instructions.output;\n\n            // get exif orientation\n            var orientation =\n                instructions.image && instructions.image.orientation\n                    ? Math.max(1, Math.min(8, instructions.image.orientation))\n                    : null;\n\n            // compression quality 0 => 100\n            var qualityAsPercentage = output && output.quality;\n            var quality = qualityAsPercentage === null ? null : qualityAsPercentage / 100;\n\n            // output format\n            var type = (output && output.type) || null;\n\n            // background color\n            var background = (output && output.background) || null;\n\n            // get transforms\n            var transforms = [];\n\n            // add resize transforms if set\n            if (size && (typeof size.width === 'number' || typeof size.height === 'number')) {\n                transforms.push({ type: 'resize', data: size });\n            }\n\n            // add filters\n            if (filter && filter.length === 20) {\n                transforms.push({ type: 'filter', data: filter });\n            }\n\n            // resolves with supplied blob\n            var resolveWithBlob = function resolveWithBlob(blob) {\n                var promisedBlob = afterCreateBlob ? afterCreateBlob(blob) : blob;\n                Promise.resolve(promisedBlob).then(resolve);\n            };\n\n            // done\n            var toBlob = function toBlob(imageData, options) {\n                var canvas = imageDataToCanvas(imageData);\n                var promisedCanvas = markup.length ? canvasApplyMarkup(canvas, markup) : canvas;\n                Promise.resolve(promisedCanvas).then(function(canvas) {\n                    canvasToBlob(canvas, options, beforeCreateBlob)\n                        .then(function(blob) {\n                            // force release of canvas memory\n                            canvasRelease(canvas);\n\n                            // remove image head (default)\n                            if (stripImageHead) return resolveWithBlob(blob);\n\n                            // try to copy image head from original file to generated blob\n                            getImageHead(file).then(function(imageHead) {\n                                // re-inject image head in case of JPEG, as the image head is removed by canvas export\n                                if (imageHead !== null) {\n                                    blob = new Blob([imageHead, blob.slice(20)], {\n                                        type: blob.type,\n                                    });\n                                }\n\n                                // done!\n                                resolveWithBlob(blob);\n                            });\n                        })\n                        .catch(reject);\n                });\n            };\n\n            // if this is an svg and we want it to stay an svg\n            if (/svg/.test(file.type) && type === null) {\n                return cropSVG(file, crop, markup, { background: background }).then(function(text) {\n                    resolve(createBlob(text, 'image/svg+xml'));\n                });\n            }\n\n            // get file url\n            var url = URL.createObjectURL(file);\n\n            // turn the file into an image\n            loadImage(url)\n                .then(function(image) {\n                    // url is no longer needed\n                    URL.revokeObjectURL(url);\n\n                    // draw to canvas and start transform chain\n                    var imageData = imageToImageData(image, orientation, crop, {\n                        canvasMemoryLimit: canvasMemoryLimit,\n                        background: background,\n                    });\n\n                    // determine the format of the blob that we will output\n                    var outputFormat = {\n                        quality: quality,\n                        type: type || file.type,\n                    };\n\n                    // no transforms necessary, we done!\n                    if (!transforms.length) {\n                        return toBlob(imageData, outputFormat);\n                    }\n\n                    // send to the transform worker to transform the blob on a separate thread\n                    var worker = createWorker(TransformWorker);\n                    worker.post(\n                        {\n                            transforms: transforms,\n                            imageData: imageData,\n                        },\n\n                        function(response) {\n                            // finish up\n                            toBlob(objectToImageData(response), outputFormat);\n\n                            // stop worker\n                            worker.terminate();\n                        },\n                        [imageData.data.buffer]\n                    );\n                })\n                .catch(reject);\n        });\n    };\n\n    function _typeof(obj) {\n        if (typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol') {\n            _typeof = function(obj) {\n                return typeof obj;\n            };\n        } else {\n            _typeof = function(obj) {\n                return obj &&\n                    typeof Symbol === 'function' &&\n                    obj.constructor === Symbol &&\n                    obj !== Symbol.prototype\n                    ? 'symbol'\n                    : typeof obj;\n            };\n        }\n\n        return _typeof(obj);\n    }\n\n    var REACT_ELEMENT_TYPE;\n\n    function _jsx(type, props, key, children) {\n        if (!REACT_ELEMENT_TYPE) {\n            REACT_ELEMENT_TYPE =\n                (typeof Symbol === 'function' && Symbol.for && Symbol.for('react.element')) ||\n                0xeac7;\n        }\n\n        var defaultProps = type && type.defaultProps;\n        var childrenLength = arguments.length - 3;\n\n        if (!props && childrenLength !== 0) {\n            props = {\n                children: void 0,\n            };\n        }\n\n        if (props && defaultProps) {\n            for (var propName in defaultProps) {\n                if (props[propName] === void 0) {\n                    props[propName] = defaultProps[propName];\n                }\n            }\n        } else if (!props) {\n            props = defaultProps || {};\n        }\n\n        if (childrenLength === 1) {\n            props.children = children;\n        } else if (childrenLength > 1) {\n            var childArray = new Array(childrenLength);\n\n            for (var i = 0; i < childrenLength; i++) {\n                childArray[i] = arguments[i + 3];\n            }\n\n            props.children = childArray;\n        }\n\n        return {\n            $$typeof: REACT_ELEMENT_TYPE,\n            type: type,\n            key: key === undefined ? null : '' + key,\n            ref: null,\n            props: props,\n            _owner: null,\n        };\n    }\n\n    function _asyncIterator(iterable) {\n        var method;\n\n        if (typeof Symbol === 'function') {\n            if (Symbol.asyncIterator) {\n                method = iterable[Symbol.asyncIterator];\n                if (method != null) return method.call(iterable);\n            }\n\n            if (Symbol.iterator) {\n                method = iterable[Symbol.iterator];\n                if (method != null) return method.call(iterable);\n            }\n        }\n\n        throw new TypeError('Object is not async iterable');\n    }\n\n    function _AwaitValue(value) {\n        this.wrapped = value;\n    }\n\n    function _AsyncGenerator(gen) {\n        var front, back;\n\n        function send(key, arg) {\n            return new Promise(function(resolve, reject) {\n                var request = {\n                    key: key,\n                    arg: arg,\n                    resolve: resolve,\n                    reject: reject,\n                    next: null,\n                };\n\n                if (back) {\n                    back = back.next = request;\n                } else {\n                    front = back = request;\n                    resume(key, arg);\n                }\n            });\n        }\n\n        function resume(key, arg) {\n            try {\n                var result = gen[key](arg);\n                var value = result.value;\n                var wrappedAwait = value instanceof _AwaitValue;\n                Promise.resolve(wrappedAwait ? value.wrapped : value).then(\n                    function(arg) {\n                        if (wrappedAwait) {\n                            resume('next', arg);\n                            return;\n                        }\n\n                        settle(result.done ? 'return' : 'normal', arg);\n                    },\n                    function(err) {\n                        resume('throw', err);\n                    }\n                );\n            } catch (err) {\n                settle('throw', err);\n            }\n        }\n\n        function settle(type, value) {\n            switch (type) {\n                case 'return':\n                    front.resolve({\n                        value: value,\n                        done: true,\n                    });\n                    break;\n\n                case 'throw':\n                    front.reject(value);\n                    break;\n\n                default:\n                    front.resolve({\n                        value: value,\n                        done: false,\n                    });\n                    break;\n            }\n\n            front = front.next;\n\n            if (front) {\n                resume(front.key, front.arg);\n            } else {\n                back = null;\n            }\n        }\n\n        this._invoke = send;\n\n        if (typeof gen.return !== 'function') {\n            this.return = undefined;\n        }\n    }\n\n    if (typeof Symbol === 'function' && Symbol.asyncIterator) {\n        _AsyncGenerator.prototype[Symbol.asyncIterator] = function() {\n            return this;\n        };\n    }\n\n    _AsyncGenerator.prototype.next = function(arg) {\n        return this._invoke('next', arg);\n    };\n\n    _AsyncGenerator.prototype.throw = function(arg) {\n        return this._invoke('throw', arg);\n    };\n\n    _AsyncGenerator.prototype.return = function(arg) {\n        return this._invoke('return', arg);\n    };\n\n    function _wrapAsyncGenerator(fn) {\n        return function() {\n            return new _AsyncGenerator(fn.apply(this, arguments));\n        };\n    }\n\n    function _awaitAsyncGenerator(value) {\n        return new _AwaitValue(value);\n    }\n\n    function _asyncGeneratorDelegate(inner, awaitWrap) {\n        var iter = {},\n            waiting = false;\n\n        function pump(key, value) {\n            waiting = true;\n            value = new Promise(function(resolve) {\n                resolve(inner[key](value));\n            });\n            return {\n                done: false,\n                value: awaitWrap(value),\n            };\n        }\n\n        if (typeof Symbol === 'function' && Symbol.iterator) {\n            iter[Symbol.iterator] = function() {\n                return this;\n            };\n        }\n\n        iter.next = function(value) {\n            if (waiting) {\n                waiting = false;\n                return value;\n            }\n\n            return pump('next', value);\n        };\n\n        if (typeof inner.throw === 'function') {\n            iter.throw = function(value) {\n                if (waiting) {\n                    waiting = false;\n                    throw value;\n                }\n\n                return pump('throw', value);\n            };\n        }\n\n        if (typeof inner.return === 'function') {\n            iter.return = function(value) {\n                return pump('return', value);\n            };\n        }\n\n        return iter;\n    }\n\n    function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n        try {\n            var info = gen[key](arg);\n            var value = info.value;\n        } catch (error) {\n            reject(error);\n            return;\n        }\n\n        if (info.done) {\n            resolve(value);\n        } else {\n            Promise.resolve(value).then(_next, _throw);\n        }\n    }\n\n    function _asyncToGenerator(fn) {\n        return function() {\n            var self = this,\n                args = arguments;\n            return new Promise(function(resolve, reject) {\n                var gen = fn.apply(self, args);\n\n                function _next(value) {\n                    asyncGeneratorStep(gen, resolve, reject, _next, _throw, 'next', value);\n                }\n\n                function _throw(err) {\n                    asyncGeneratorStep(gen, resolve, reject, _next, _throw, 'throw', err);\n                }\n\n                _next(undefined);\n            });\n        };\n    }\n\n    function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n            throw new TypeError('Cannot call a class as a function');\n        }\n    }\n\n    function _defineProperties(target, props) {\n        for (var i = 0; i < props.length; i++) {\n            var descriptor = props[i];\n            descriptor.enumerable = descriptor.enumerable || false;\n            descriptor.configurable = true;\n            if ('value' in descriptor) descriptor.writable = true;\n            Object.defineProperty(target, descriptor.key, descriptor);\n        }\n    }\n\n    function _createClass(Constructor, protoProps, staticProps) {\n        if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n        if (staticProps) _defineProperties(Constructor, staticProps);\n        return Constructor;\n    }\n\n    function _defineEnumerableProperties(obj, descs) {\n        for (var key in descs) {\n            var desc = descs[key];\n            desc.configurable = desc.enumerable = true;\n            if ('value' in desc) desc.writable = true;\n            Object.defineProperty(obj, key, desc);\n        }\n\n        if (Object.getOwnPropertySymbols) {\n            var objectSymbols = Object.getOwnPropertySymbols(descs);\n\n            for (var i = 0; i < objectSymbols.length; i++) {\n                var sym = objectSymbols[i];\n                var desc = descs[sym];\n                desc.configurable = desc.enumerable = true;\n                if ('value' in desc) desc.writable = true;\n                Object.defineProperty(obj, sym, desc);\n            }\n        }\n\n        return obj;\n    }\n\n    function _defaults(obj, defaults) {\n        var keys = Object.getOwnPropertyNames(defaults);\n\n        for (var i = 0; i < keys.length; i++) {\n            var key = keys[i];\n            var value = Object.getOwnPropertyDescriptor(defaults, key);\n\n            if (value && value.configurable && obj[key] === undefined) {\n                Object.defineProperty(obj, key, value);\n            }\n        }\n\n        return obj;\n    }\n\n    function _defineProperty(obj, key, value) {\n        if (key in obj) {\n            Object.defineProperty(obj, key, {\n                value: value,\n                enumerable: true,\n                configurable: true,\n                writable: true,\n            });\n        } else {\n            obj[key] = value;\n        }\n\n        return obj;\n    }\n\n    function _extends() {\n        _extends =\n            Object.assign ||\n            function(target) {\n                for (var i = 1; i < arguments.length; i++) {\n                    var source = arguments[i];\n\n                    for (var key in source) {\n                        if (Object.prototype.hasOwnProperty.call(source, key)) {\n                            target[key] = source[key];\n                        }\n                    }\n                }\n\n                return target;\n            };\n\n        return _extends.apply(this, arguments);\n    }\n\n    function _objectSpread(target) {\n        for (var i = 1; i < arguments.length; i++) {\n            var source = arguments[i] != null ? arguments[i] : {};\n            var ownKeys = Object.keys(source);\n\n            if (typeof Object.getOwnPropertySymbols === 'function') {\n                ownKeys = ownKeys.concat(\n                    Object.getOwnPropertySymbols(source).filter(function(sym) {\n                        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n                    })\n                );\n            }\n\n            ownKeys.forEach(function(key) {\n                _defineProperty(target, key, source[key]);\n            });\n        }\n\n        return target;\n    }\n\n    function _inherits(subClass, superClass) {\n        if (typeof superClass !== 'function' && superClass !== null) {\n            throw new TypeError('Super expression must either be null or a function');\n        }\n\n        subClass.prototype = Object.create(superClass && superClass.prototype, {\n            constructor: {\n                value: subClass,\n                writable: true,\n                configurable: true,\n            },\n        });\n        if (superClass) _setPrototypeOf(subClass, superClass);\n    }\n\n    function _inheritsLoose(subClass, superClass) {\n        subClass.prototype = Object.create(superClass.prototype);\n        subClass.prototype.constructor = subClass;\n        subClass.__proto__ = superClass;\n    }\n\n    function _getPrototypeOf(o) {\n        _getPrototypeOf = Object.setPrototypeOf\n            ? Object.getPrototypeOf\n            : function _getPrototypeOf(o) {\n                  return o.__proto__ || Object.getPrototypeOf(o);\n              };\n        return _getPrototypeOf(o);\n    }\n\n    function _setPrototypeOf(o, p) {\n        _setPrototypeOf =\n            Object.setPrototypeOf ||\n            function _setPrototypeOf(o, p) {\n                o.__proto__ = p;\n                return o;\n            };\n\n        return _setPrototypeOf(o, p);\n    }\n\n    function isNativeReflectConstruct() {\n        if (typeof Reflect === 'undefined' || !Reflect.construct) return false;\n        if (Reflect.construct.sham) return false;\n        if (typeof Proxy === 'function') return true;\n\n        try {\n            Date.prototype.toString.call(Reflect.construct(Date, [], function() {}));\n            return true;\n        } catch (e) {\n            return false;\n        }\n    }\n\n    function _construct(Parent, args, Class) {\n        if (isNativeReflectConstruct()) {\n            _construct = Reflect.construct;\n        } else {\n            _construct = function _construct(Parent, args, Class) {\n                var a = [null];\n                a.push.apply(a, args);\n                var Constructor = Function.bind.apply(Parent, a);\n                var instance = new Constructor();\n                if (Class) _setPrototypeOf(instance, Class.prototype);\n                return instance;\n            };\n        }\n\n        return _construct.apply(null, arguments);\n    }\n\n    function _isNativeFunction(fn) {\n        return Function.toString.call(fn).indexOf('[native code]') !== -1;\n    }\n\n    function _wrapNativeSuper(Class) {\n        var _cache = typeof Map === 'function' ? new Map() : undefined;\n\n        _wrapNativeSuper = function _wrapNativeSuper(Class) {\n            if (Class === null || !_isNativeFunction(Class)) return Class;\n\n            if (typeof Class !== 'function') {\n                throw new TypeError('Super expression must either be null or a function');\n            }\n\n            if (typeof _cache !== 'undefined') {\n                if (_cache.has(Class)) return _cache.get(Class);\n\n                _cache.set(Class, Wrapper);\n            }\n\n            function Wrapper() {\n                return _construct(Class, arguments, _getPrototypeOf(this).constructor);\n            }\n\n            Wrapper.prototype = Object.create(Class.prototype, {\n                constructor: {\n                    value: Wrapper,\n                    enumerable: false,\n                    writable: true,\n                    configurable: true,\n                },\n            });\n            return _setPrototypeOf(Wrapper, Class);\n        };\n\n        return _wrapNativeSuper(Class);\n    }\n\n    function _instanceof(left, right) {\n        if (right != null && typeof Symbol !== 'undefined' && right[Symbol.hasInstance]) {\n            return right[Symbol.hasInstance](left);\n        } else {\n            return left instanceof right;\n        }\n    }\n\n    function _interopRequireDefault(obj) {\n        return obj && obj.__esModule\n            ? obj\n            : {\n                  default: obj,\n              };\n    }\n\n    function _interopRequireWildcard(obj) {\n        if (obj && obj.__esModule) {\n            return obj;\n        } else {\n            var newObj = {};\n\n            if (obj != null) {\n                for (var key in obj) {\n                    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n                        var desc =\n                            Object.defineProperty && Object.getOwnPropertyDescriptor\n                                ? Object.getOwnPropertyDescriptor(obj, key)\n                                : {};\n\n                        if (desc.get || desc.set) {\n                            Object.defineProperty(newObj, key, desc);\n                        } else {\n                            newObj[key] = obj[key];\n                        }\n                    }\n                }\n            }\n\n            newObj.default = obj;\n            return newObj;\n        }\n    }\n\n    function _newArrowCheck(innerThis, boundThis) {\n        if (innerThis !== boundThis) {\n            throw new TypeError('Cannot instantiate an arrow function');\n        }\n    }\n\n    function _objectDestructuringEmpty(obj) {\n        if (obj == null) throw new TypeError('Cannot destructure undefined');\n    }\n\n    function _objectWithoutPropertiesLoose(source, excluded) {\n        if (source == null) return {};\n        var target = {};\n        var sourceKeys = Object.keys(source);\n        var key, i;\n\n        for (i = 0; i < sourceKeys.length; i++) {\n            key = sourceKeys[i];\n            if (excluded.indexOf(key) >= 0) continue;\n            target[key] = source[key];\n        }\n\n        return target;\n    }\n\n    function _objectWithoutProperties(source, excluded) {\n        if (source == null) return {};\n\n        var target = _objectWithoutPropertiesLoose(source, excluded);\n\n        var key, i;\n\n        if (Object.getOwnPropertySymbols) {\n            var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n            for (i = 0; i < sourceSymbolKeys.length; i++) {\n                key = sourceSymbolKeys[i];\n                if (excluded.indexOf(key) >= 0) continue;\n                if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n                target[key] = source[key];\n            }\n        }\n\n        return target;\n    }\n\n    function _assertThisInitialized(self) {\n        if (self === void 0) {\n            throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n        }\n\n        return self;\n    }\n\n    function _possibleConstructorReturn(self, call) {\n        if (call && (typeof call === 'object' || typeof call === 'function')) {\n            return call;\n        }\n\n        return _assertThisInitialized(self);\n    }\n\n    function _superPropBase(object, property) {\n        while (!Object.prototype.hasOwnProperty.call(object, property)) {\n            object = _getPrototypeOf(object);\n            if (object === null) break;\n        }\n\n        return object;\n    }\n\n    function _get(target, property, receiver) {\n        if (typeof Reflect !== 'undefined' && Reflect.get) {\n            _get = Reflect.get;\n        } else {\n            _get = function _get(target, property, receiver) {\n                var base = _superPropBase(target, property);\n\n                if (!base) return;\n                var desc = Object.getOwnPropertyDescriptor(base, property);\n\n                if (desc.get) {\n                    return desc.get.call(receiver);\n                }\n\n                return desc.value;\n            };\n        }\n\n        return _get(target, property, receiver || target);\n    }\n\n    function set(target, property, value, receiver) {\n        if (typeof Reflect !== 'undefined' && Reflect.set) {\n            set = Reflect.set;\n        } else {\n            set = function set(target, property, value, receiver) {\n                var base = _superPropBase(target, property);\n\n                var desc;\n\n                if (base) {\n                    desc = Object.getOwnPropertyDescriptor(base, property);\n\n                    if (desc.set) {\n                        desc.set.call(receiver, value);\n                        return true;\n                    } else if (!desc.writable) {\n                        return false;\n                    }\n                }\n\n                desc = Object.getOwnPropertyDescriptor(receiver, property);\n\n                if (desc) {\n                    if (!desc.writable) {\n                        return false;\n                    }\n\n                    desc.value = value;\n                    Object.defineProperty(receiver, property, desc);\n                } else {\n                    _defineProperty(receiver, property, value);\n                }\n\n                return true;\n            };\n        }\n\n        return set(target, property, value, receiver);\n    }\n\n    function _set(target, property, value, receiver, isStrict) {\n        var s = set(target, property, value, receiver || target);\n\n        if (!s && isStrict) {\n            throw new Error('failed to set property');\n        }\n\n        return value;\n    }\n\n    function _taggedTemplateLiteral(strings, raw) {\n        if (!raw) {\n            raw = strings.slice(0);\n        }\n\n        return Object.freeze(\n            Object.defineProperties(strings, {\n                raw: {\n                    value: Object.freeze(raw),\n                },\n            })\n        );\n    }\n\n    function _taggedTemplateLiteralLoose(strings, raw) {\n        if (!raw) {\n            raw = strings.slice(0);\n        }\n\n        strings.raw = raw;\n        return strings;\n    }\n\n    function _temporalRef(val, name) {\n        if (val === _temporalUndefined) {\n            throw new ReferenceError(name + ' is not defined - temporal dead zone');\n        } else {\n            return val;\n        }\n    }\n\n    function _readOnlyError(name) {\n        throw new Error('\"' + name + '\" is read-only');\n    }\n\n    function _classNameTDZError(name) {\n        throw new Error('Class \"' + name + '\" cannot be referenced in computed property keys.');\n    }\n\n    var _temporalUndefined = {};\n\n    function _slicedToArray(arr, i) {\n        return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n    }\n\n    function _slicedToArrayLoose(arr, i) {\n        return _arrayWithHoles(arr) || _iterableToArrayLimitLoose(arr, i) || _nonIterableRest();\n    }\n\n    function _toArray(arr) {\n        return _arrayWithHoles(arr) || _iterableToArray(arr) || _nonIterableRest();\n    }\n\n    function _toConsumableArray(arr) {\n        return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n    }\n\n    function _arrayWithoutHoles(arr) {\n        if (Array.isArray(arr)) {\n            for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n            return arr2;\n        }\n    }\n\n    function _arrayWithHoles(arr) {\n        if (Array.isArray(arr)) return arr;\n    }\n\n    function _iterableToArray(iter) {\n        if (\n            Symbol.iterator in Object(iter) ||\n            Object.prototype.toString.call(iter) === '[object Arguments]'\n        )\n            return Array.from(iter);\n    }\n\n    function _iterableToArrayLimit(arr, i) {\n        var _arr = [];\n        var _n = true;\n        var _d = false;\n        var _e = undefined;\n\n        try {\n            for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n                _arr.push(_s.value);\n\n                if (i && _arr.length === i) break;\n            }\n        } catch (err) {\n            _d = true;\n            _e = err;\n        } finally {\n            try {\n                if (!_n && _i['return'] != null) _i['return']();\n            } finally {\n                if (_d) throw _e;\n            }\n        }\n\n        return _arr;\n    }\n\n    function _iterableToArrayLimitLoose(arr, i) {\n        var _arr = [];\n\n        for (var _iterator = arr[Symbol.iterator](), _step; !(_step = _iterator.next()).done; ) {\n            _arr.push(_step.value);\n\n            if (i && _arr.length === i) break;\n        }\n\n        return _arr;\n    }\n\n    function _nonIterableSpread() {\n        throw new TypeError('Invalid attempt to spread non-iterable instance');\n    }\n\n    function _nonIterableRest() {\n        throw new TypeError('Invalid attempt to destructure non-iterable instance');\n    }\n\n    function _skipFirstGeneratorNext(fn) {\n        return function() {\n            var it = fn.apply(this, arguments);\n            it.next();\n            return it;\n        };\n    }\n\n    function _toPrimitive(input, hint) {\n        if (typeof input !== 'object' || input === null) return input;\n        var prim = input[Symbol.toPrimitive];\n\n        if (prim !== undefined) {\n            var res = prim.call(input, hint || 'default');\n            if (typeof res !== 'object') return res;\n            throw new TypeError('@@toPrimitive must return a primitive value.');\n        }\n\n        return (hint === 'string' ? String : Number)(input);\n    }\n\n    function _toPropertyKey(arg) {\n        var key = _toPrimitive(arg, 'string');\n\n        return typeof key === 'symbol' ? key : String(key);\n    }\n\n    function _initializerWarningHelper(descriptor, context) {\n        throw new Error(\n            'Decorating class property failed. Please ensure that ' +\n                'proposal-class-properties is enabled and set to use loose mode. ' +\n                'To use proposal-class-properties in spec mode with decorators, wait for ' +\n                'the next major version of decorators in stage 2.'\n        );\n    }\n\n    function _initializerDefineProperty(target, property, descriptor, context) {\n        if (!descriptor) return;\n        Object.defineProperty(target, property, {\n            enumerable: descriptor.enumerable,\n            configurable: descriptor.configurable,\n            writable: descriptor.writable,\n            value: descriptor.initializer ? descriptor.initializer.call(context) : void 0,\n        });\n    }\n\n    function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {\n        var desc = {};\n        Object.keys(descriptor).forEach(function(key) {\n            desc[key] = descriptor[key];\n        });\n        desc.enumerable = !!desc.enumerable;\n        desc.configurable = !!desc.configurable;\n\n        if ('value' in desc || desc.initializer) {\n            desc.writable = true;\n        }\n\n        desc = decorators\n            .slice()\n            .reverse()\n            .reduce(function(desc, decorator) {\n                return decorator(target, property, desc) || desc;\n            }, desc);\n\n        if (context && desc.initializer !== void 0) {\n            desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n            desc.initializer = undefined;\n        }\n\n        if (desc.initializer === void 0) {\n            Object.defineProperty(target, property, desc);\n            desc = null;\n        }\n\n        return desc;\n    }\n\n    var id = 0;\n\n    function _classPrivateFieldLooseKey(name) {\n        return '__private_' + id++ + '_' + name;\n    }\n\n    function _classPrivateFieldLooseBase(receiver, privateKey) {\n        if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) {\n            throw new TypeError('attempted to use private field on non-instance');\n        }\n\n        return receiver;\n    }\n\n    function _classPrivateFieldGet(receiver, privateMap) {\n        if (!privateMap.has(receiver)) {\n            throw new TypeError('attempted to get private field on non-instance');\n        }\n\n        var descriptor = privateMap.get(receiver);\n\n        if (descriptor.get) {\n            return descriptor.get.call(receiver);\n        }\n\n        return descriptor.value;\n    }\n\n    function _classPrivateFieldSet(receiver, privateMap, value) {\n        if (!privateMap.has(receiver)) {\n            throw new TypeError('attempted to set private field on non-instance');\n        }\n\n        var descriptor = privateMap.get(receiver);\n\n        if (descriptor.set) {\n            descriptor.set.call(receiver, value);\n        } else {\n            if (!descriptor.writable) {\n                throw new TypeError('attempted to set read only private field');\n            }\n\n            descriptor.value = value;\n        }\n\n        return value;\n    }\n\n    function _classStaticPrivateFieldSpecGet(receiver, classConstructor, descriptor) {\n        if (receiver !== classConstructor) {\n            throw new TypeError('Private static access of wrong provenance');\n        }\n\n        return descriptor.value;\n    }\n\n    function _classStaticPrivateFieldSpecSet(receiver, classConstructor, descriptor, value) {\n        if (receiver !== classConstructor) {\n            throw new TypeError('Private static access of wrong provenance');\n        }\n\n        if (!descriptor.writable) {\n            throw new TypeError('attempted to set read only private field');\n        }\n\n        descriptor.value = value;\n        return value;\n    }\n\n    function _classStaticPrivateMethodGet(receiver, classConstructor, method) {\n        if (receiver !== classConstructor) {\n            throw new TypeError('Private static access of wrong provenance');\n        }\n\n        return method;\n    }\n\n    function _classStaticPrivateMethodSet() {\n        throw new TypeError('attempted to set read only static private field');\n    }\n\n    function _decorate(decorators, factory, superClass, mixins) {\n        var api = _getDecoratorsApi();\n\n        if (mixins) {\n            for (var i = 0; i < mixins.length; i++) {\n                api = mixins[i](api);\n            }\n        }\n\n        var r = factory(function initialize(O) {\n            api.initializeInstanceElements(O, decorated.elements);\n        }, superClass);\n        var decorated = api.decorateClass(\n            _coalesceClassElements(r.d.map(_createElementDescriptor)),\n            decorators\n        );\n        api.initializeClassElements(r.F, decorated.elements);\n        return api.runClassFinishers(r.F, decorated.finishers);\n    }\n\n    function _getDecoratorsApi() {\n        _getDecoratorsApi = function() {\n            return api;\n        };\n\n        var api = {\n            elementsDefinitionOrder: [['method'], ['field']],\n            initializeInstanceElements: function(O, elements) {\n                ['method', 'field'].forEach(function(kind) {\n                    elements.forEach(function(element) {\n                        if (element.kind === kind && element.placement === 'own') {\n                            this.defineClassElement(O, element);\n                        }\n                    }, this);\n                }, this);\n            },\n            initializeClassElements: function(F, elements) {\n                var proto = F.prototype;\n                ['method', 'field'].forEach(function(kind) {\n                    elements.forEach(function(element) {\n                        var placement = element.placement;\n\n                        if (\n                            element.kind === kind &&\n                            (placement === 'static' || placement === 'prototype')\n                        ) {\n                            var receiver = placement === 'static' ? F : proto;\n                            this.defineClassElement(receiver, element);\n                        }\n                    }, this);\n                }, this);\n            },\n            defineClassElement: function(receiver, element) {\n                var descriptor = element.descriptor;\n\n                if (element.kind === 'field') {\n                    var initializer = element.initializer;\n                    descriptor = {\n                        enumerable: descriptor.enumerable,\n                        writable: descriptor.writable,\n                        configurable: descriptor.configurable,\n                        value: initializer === void 0 ? void 0 : initializer.call(receiver),\n                    };\n                }\n\n                Object.defineProperty(receiver, element.key, descriptor);\n            },\n            decorateClass: function(elements, decorators) {\n                var newElements = [];\n                var finishers = [];\n                var placements = {\n                    static: [],\n                    prototype: [],\n                    own: [],\n                };\n                elements.forEach(function(element) {\n                    this.addElementPlacement(element, placements);\n                }, this);\n                elements.forEach(function(element) {\n                    if (!_hasDecorators(element)) return newElements.push(element);\n                    var elementFinishersExtras = this.decorateElement(element, placements);\n                    newElements.push(elementFinishersExtras.element);\n                    newElements.push.apply(newElements, elementFinishersExtras.extras);\n                    finishers.push.apply(finishers, elementFinishersExtras.finishers);\n                }, this);\n\n                if (!decorators) {\n                    return {\n                        elements: newElements,\n                        finishers: finishers,\n                    };\n                }\n\n                var result = this.decorateConstructor(newElements, decorators);\n                finishers.push.apply(finishers, result.finishers);\n                result.finishers = finishers;\n                return result;\n            },\n            addElementPlacement: function(element, placements, silent) {\n                var keys = placements[element.placement];\n\n                if (!silent && keys.indexOf(element.key) !== -1) {\n                    throw new TypeError('Duplicated element (' + element.key + ')');\n                }\n\n                keys.push(element.key);\n            },\n            decorateElement: function(element, placements) {\n                var extras = [];\n                var finishers = [];\n\n                for (var decorators = element.decorators, i = decorators.length - 1; i >= 0; i--) {\n                    var keys = placements[element.placement];\n                    keys.splice(keys.indexOf(element.key), 1);\n                    var elementObject = this.fromElementDescriptor(element);\n                    var elementFinisherExtras = this.toElementFinisherExtras(\n                        (0, decorators[i])(elementObject) || elementObject\n                    );\n                    element = elementFinisherExtras.element;\n                    this.addElementPlacement(element, placements);\n\n                    if (elementFinisherExtras.finisher) {\n                        finishers.push(elementFinisherExtras.finisher);\n                    }\n\n                    var newExtras = elementFinisherExtras.extras;\n\n                    if (newExtras) {\n                        for (var j = 0; j < newExtras.length; j++) {\n                            this.addElementPlacement(newExtras[j], placements);\n                        }\n\n                        extras.push.apply(extras, newExtras);\n                    }\n                }\n\n                return {\n                    element: element,\n                    finishers: finishers,\n                    extras: extras,\n                };\n            },\n            decorateConstructor: function(elements, decorators) {\n                var finishers = [];\n\n                for (var i = decorators.length - 1; i >= 0; i--) {\n                    var obj = this.fromClassDescriptor(elements);\n                    var elementsAndFinisher = this.toClassDescriptor(\n                        (0, decorators[i])(obj) || obj\n                    );\n\n                    if (elementsAndFinisher.finisher !== undefined) {\n                        finishers.push(elementsAndFinisher.finisher);\n                    }\n\n                    if (elementsAndFinisher.elements !== undefined) {\n                        elements = elementsAndFinisher.elements;\n\n                        for (var j = 0; j < elements.length - 1; j++) {\n                            for (var k = j + 1; k < elements.length; k++) {\n                                if (\n                                    elements[j].key === elements[k].key &&\n                                    elements[j].placement === elements[k].placement\n                                ) {\n                                    throw new TypeError(\n                                        'Duplicated element (' + elements[j].key + ')'\n                                    );\n                                }\n                            }\n                        }\n                    }\n                }\n\n                return {\n                    elements: elements,\n                    finishers: finishers,\n                };\n            },\n            fromElementDescriptor: function(element) {\n                var obj = {\n                    kind: element.kind,\n                    key: element.key,\n                    placement: element.placement,\n                    descriptor: element.descriptor,\n                };\n                var desc = {\n                    value: 'Descriptor',\n                    configurable: true,\n                };\n                Object.defineProperty(obj, Symbol.toStringTag, desc);\n                if (element.kind === 'field') obj.initializer = element.initializer;\n                return obj;\n            },\n            toElementDescriptors: function(elementObjects) {\n                if (elementObjects === undefined) return;\n                return _toArray(elementObjects).map(function(elementObject) {\n                    var element = this.toElementDescriptor(elementObject);\n                    this.disallowProperty(elementObject, 'finisher', 'An element descriptor');\n                    this.disallowProperty(elementObject, 'extras', 'An element descriptor');\n                    return element;\n                }, this);\n            },\n            toElementDescriptor: function(elementObject) {\n                var kind = String(elementObject.kind);\n\n                if (kind !== 'method' && kind !== 'field') {\n                    throw new TypeError(\n                        'An element descriptor\\'s .kind property must be either \"method\" or' +\n                            ' \"field\", but a decorator created an element descriptor with' +\n                            ' .kind \"' +\n                            kind +\n                            '\"'\n                    );\n                }\n\n                var key = _toPropertyKey(elementObject.key);\n\n                var placement = String(elementObject.placement);\n\n                if (placement !== 'static' && placement !== 'prototype' && placement !== 'own') {\n                    throw new TypeError(\n                        'An element descriptor\\'s .placement property must be one of \"static\",' +\n                            ' \"prototype\" or \"own\", but a decorator created an element descriptor' +\n                            ' with .placement \"' +\n                            placement +\n                            '\"'\n                    );\n                }\n\n                var descriptor = elementObject.descriptor;\n                this.disallowProperty(elementObject, 'elements', 'An element descriptor');\n                var element = {\n                    kind: kind,\n                    key: key,\n                    placement: placement,\n                    descriptor: Object.assign({}, descriptor),\n                };\n\n                if (kind !== 'field') {\n                    this.disallowProperty(elementObject, 'initializer', 'A method descriptor');\n                } else {\n                    this.disallowProperty(\n                        descriptor,\n                        'get',\n                        'The property descriptor of a field descriptor'\n                    );\n                    this.disallowProperty(\n                        descriptor,\n                        'set',\n                        'The property descriptor of a field descriptor'\n                    );\n                    this.disallowProperty(\n                        descriptor,\n                        'value',\n                        'The property descriptor of a field descriptor'\n                    );\n                    element.initializer = elementObject.initializer;\n                }\n\n                return element;\n            },\n            toElementFinisherExtras: function(elementObject) {\n                var element = this.toElementDescriptor(elementObject);\n\n                var finisher = _optionalCallableProperty(elementObject, 'finisher');\n\n                var extras = this.toElementDescriptors(elementObject.extras);\n                return {\n                    element: element,\n                    finisher: finisher,\n                    extras: extras,\n                };\n            },\n            fromClassDescriptor: function(elements) {\n                var obj = {\n                    kind: 'class',\n                    elements: elements.map(this.fromElementDescriptor, this),\n                };\n                var desc = {\n                    value: 'Descriptor',\n                    configurable: true,\n                };\n                Object.defineProperty(obj, Symbol.toStringTag, desc);\n                return obj;\n            },\n            toClassDescriptor: function(obj) {\n                var kind = String(obj.kind);\n\n                if (kind !== 'class') {\n                    throw new TypeError(\n                        'A class descriptor\\'s .kind property must be \"class\", but a decorator' +\n                            ' created a class descriptor with .kind \"' +\n                            kind +\n                            '\"'\n                    );\n                }\n\n                this.disallowProperty(obj, 'key', 'A class descriptor');\n                this.disallowProperty(obj, 'placement', 'A class descriptor');\n                this.disallowProperty(obj, 'descriptor', 'A class descriptor');\n                this.disallowProperty(obj, 'initializer', 'A class descriptor');\n                this.disallowProperty(obj, 'extras', 'A class descriptor');\n\n                var finisher = _optionalCallableProperty(obj, 'finisher');\n\n                var elements = this.toElementDescriptors(obj.elements);\n                return {\n                    elements: elements,\n                    finisher: finisher,\n                };\n            },\n            runClassFinishers: function(constructor, finishers) {\n                for (var i = 0; i < finishers.length; i++) {\n                    var newConstructor = (0, finishers[i])(constructor);\n\n                    if (newConstructor !== undefined) {\n                        if (typeof newConstructor !== 'function') {\n                            throw new TypeError('Finishers must return a constructor.');\n                        }\n\n                        constructor = newConstructor;\n                    }\n                }\n\n                return constructor;\n            },\n            disallowProperty: function(obj, name, objectType) {\n                if (obj[name] !== undefined) {\n                    throw new TypeError(objectType + \" can't have a .\" + name + ' property.');\n                }\n            },\n        };\n        return api;\n    }\n\n    function _createElementDescriptor(def) {\n        var key = _toPropertyKey(def.key);\n\n        var descriptor;\n\n        if (def.kind === 'method') {\n            descriptor = {\n                value: def.value,\n                writable: true,\n                configurable: true,\n                enumerable: false,\n            };\n        } else if (def.kind === 'get') {\n            descriptor = {\n                get: def.value,\n                configurable: true,\n                enumerable: false,\n            };\n        } else if (def.kind === 'set') {\n            descriptor = {\n                set: def.value,\n                configurable: true,\n                enumerable: false,\n            };\n        } else if (def.kind === 'field') {\n            descriptor = {\n                configurable: true,\n                writable: true,\n                enumerable: true,\n            };\n        }\n\n        var element = {\n            kind: def.kind === 'field' ? 'field' : 'method',\n            key: key,\n            placement: def.static ? 'static' : def.kind === 'field' ? 'own' : 'prototype',\n            descriptor: descriptor,\n        };\n        if (def.decorators) element.decorators = def.decorators;\n        if (def.kind === 'field') element.initializer = def.value;\n        return element;\n    }\n\n    function _coalesceGetterSetter(element, other) {\n        if (element.descriptor.get !== undefined) {\n            other.descriptor.get = element.descriptor.get;\n        } else {\n            other.descriptor.set = element.descriptor.set;\n        }\n    }\n\n    function _coalesceClassElements(elements) {\n        var newElements = [];\n\n        var isSameElement = function(other) {\n            return (\n                other.kind === 'method' &&\n                other.key === element.key &&\n                other.placement === element.placement\n            );\n        };\n\n        for (var i = 0; i < elements.length; i++) {\n            var element = elements[i];\n            var other;\n\n            if (element.kind === 'method' && (other = newElements.find(isSameElement))) {\n                if (_isDataDescriptor(element.descriptor) || _isDataDescriptor(other.descriptor)) {\n                    if (_hasDecorators(element) || _hasDecorators(other)) {\n                        throw new ReferenceError(\n                            'Duplicated methods (' + element.key + \") can't be decorated.\"\n                        );\n                    }\n\n                    other.descriptor = element.descriptor;\n                } else {\n                    if (_hasDecorators(element)) {\n                        if (_hasDecorators(other)) {\n                            throw new ReferenceError(\n                                \"Decorators can't be placed on different accessors with for \" +\n                                    'the same property (' +\n                                    element.key +\n                                    ').'\n                            );\n                        }\n\n                        other.decorators = element.decorators;\n                    }\n\n                    _coalesceGetterSetter(element, other);\n                }\n            } else {\n                newElements.push(element);\n            }\n        }\n\n        return newElements;\n    }\n\n    function _hasDecorators(element) {\n        return element.decorators && element.decorators.length;\n    }\n\n    function _isDataDescriptor(desc) {\n        return desc !== undefined && !(desc.value === undefined && desc.writable === undefined);\n    }\n\n    function _optionalCallableProperty(obj, name) {\n        var value = obj[name];\n\n        if (value !== undefined && typeof value !== 'function') {\n            throw new TypeError(\"Expected '\" + name + \"' to be a function\");\n        }\n\n        return value;\n    }\n\n    function _classPrivateMethodGet(receiver, privateSet, fn) {\n        if (!privateSet.has(receiver)) {\n            throw new TypeError('attempted to get private field on non-instance');\n        }\n\n        return fn;\n    }\n\n    function _classPrivateMethodSet() {\n        throw new TypeError('attempted to reassign private method');\n    }\n\n    function _wrapRegExp(re, groups) {\n        _wrapRegExp = function(re, groups) {\n            return new BabelRegExp(re, groups);\n        };\n\n        var _RegExp = _wrapNativeSuper(RegExp);\n\n        var _super = RegExp.prototype;\n\n        var _groups = new WeakMap();\n\n        function BabelRegExp(re, groups) {\n            var _this = _RegExp.call(this, re);\n\n            _groups.set(_this, groups);\n\n            return _this;\n        }\n\n        _inherits(BabelRegExp, _RegExp);\n\n        BabelRegExp.prototype.exec = function(str) {\n            var result = _super.exec.call(this, str);\n\n            if (result) result.groups = buildGroups(result, this);\n            return result;\n        };\n\n        BabelRegExp.prototype[Symbol.replace] = function(str, substitution) {\n            if (typeof substitution === 'string') {\n                var groups = _groups.get(this);\n\n                return _super[Symbol.replace].call(\n                    this,\n                    str,\n                    substitution.replace(/\\$<([^>]+)>/g, function(_, name) {\n                        return '$' + groups[name];\n                    })\n                );\n            } else if (typeof substitution === 'function') {\n                var _this = this;\n\n                return _super[Symbol.replace].call(this, str, function() {\n                    var args = [];\n                    args.push.apply(args, arguments);\n\n                    if (typeof args[args.length - 1] !== 'object') {\n                        args.push(buildGroups(args, _this));\n                    }\n\n                    return substitution.apply(this, args);\n                });\n            } else {\n                return _super[Symbol.replace].call(this, str, substitution);\n            }\n        };\n\n        function buildGroups(result, re) {\n            var g = _groups.get(re);\n\n            return Object.keys(g).reduce(function(groups, name) {\n                groups[name] = result[g[name]];\n                return groups;\n            }, Object.create(null));\n        }\n\n        return _wrapRegExp.apply(this, arguments);\n    }\n\n    var MARKUP_RECT = ['x', 'y', 'left', 'top', 'right', 'bottom', 'width', 'height'];\n\n    var toOptionalFraction = function toOptionalFraction(value) {\n        return typeof value === 'string' && /%/.test(value) ? parseFloat(value) / 100 : value;\n    };\n\n    // adds default markup properties, clones markup\n    var prepareMarkup = function prepareMarkup(markup) {\n        var _markup = _slicedToArray(markup, 2),\n            type = _markup[0],\n            props = _markup[1];\n\n        var rect = props.points\n            ? {}\n            : MARKUP_RECT.reduce(function(prev, curr) {\n                  prev[curr] = toOptionalFraction(props[curr]);\n                  return prev;\n              }, {});\n\n        return [\n            type,\n            Object.assign(\n                {\n                    zIndex: 0,\n                },\n                props,\n                rect\n            ),\n        ];\n    };\n\n    var getImageSize = function getImageSize(file) {\n        return new Promise(function(resolve, reject) {\n            var imageElement = new Image();\n            imageElement.src = URL.createObjectURL(file);\n\n            // start testing size\n            var measure = function measure() {\n                var width = imageElement.naturalWidth;\n                var height = imageElement.naturalHeight;\n                var hasSize = width && height;\n                if (!hasSize) return;\n\n                URL.revokeObjectURL(imageElement.src);\n                clearInterval(intervalId);\n                resolve({ width: width, height: height });\n            };\n\n            imageElement.onerror = function(err) {\n                URL.revokeObjectURL(imageElement.src);\n                clearInterval(intervalId);\n                reject(err);\n            };\n\n            var intervalId = setInterval(measure, 1);\n\n            measure();\n        });\n    };\n\n    /**\n     * Polyfill Edge and IE when in Browser\n     */\n    if (typeof window !== 'undefined' && typeof window.document !== 'undefined') {\n        if (!HTMLCanvasElement.prototype.toBlob) {\n            Object.defineProperty(HTMLCanvasElement.prototype, 'toBlob', {\n                value: function value(cb, type, quality) {\n                    var canvas = this;\n                    setTimeout(function() {\n                        var dataURL = canvas.toDataURL(type, quality).split(',')[1];\n                        var binStr = atob(dataURL);\n                        var index = binStr.length;\n                        var data = new Uint8Array(index);\n                        while (index--) {\n                            data[index] = binStr.charCodeAt(index);\n                        }\n                        cb(new Blob([data], { type: type || 'image/png' }));\n                    });\n                },\n            });\n        }\n    }\n\n    var isBrowser = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n    var isIOS = isBrowser && /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n\n    /**\n     * Image Transform Plugin\n     */\n    var plugin = function plugin(_ref) {\n        var addFilter = _ref.addFilter,\n            utils = _ref.utils;\n        var Type = utils.Type,\n            forin = utils.forin,\n            getFileFromBlob = utils.getFileFromBlob,\n            isFile = utils.isFile;\n\n        /**\n         * Helper functions\n         */\n\n        // valid transforms (in correct order)\n        var TRANSFORM_LIST = ['crop', 'resize', 'filter', 'markup', 'output'];\n\n        var createVariantCreator = function createVariantCreator(updateMetadata) {\n            return function(transform, file, metadata) {\n                return transform(file, updateMetadata ? updateMetadata(metadata) : metadata);\n            };\n        };\n\n        var isDefaultCrop = function isDefaultCrop(crop) {\n            return (\n                crop.aspectRatio === null &&\n                crop.rotation === 0 &&\n                crop.zoom === 1 &&\n                crop.center &&\n                crop.center.x === 0.5 &&\n                crop.center.y === 0.5 &&\n                crop.flip &&\n                crop.flip.horizontal === false &&\n                crop.flip.vertical === false\n            );\n        };\n\n        /**\n         * Filters\n         */\n        addFilter('SHOULD_PREPARE_OUTPUT', function(shouldPrepareOutput, _ref2) {\n            var query = _ref2.query;\n            return new Promise(function(resolve) {\n                // If is not async should prepare now\n                resolve(!query('IS_ASYNC'));\n            });\n        });\n\n        var shouldTransformFile = function shouldTransformFile(query, file, item) {\n            return new Promise(function(resolve) {\n                if (\n                    !query('GET_ALLOW_IMAGE_TRANSFORM') ||\n                    item.archived ||\n                    !isFile(file) ||\n                    !isImage(file)\n                ) {\n                    return resolve(false);\n                }\n\n                // if size can't be read this browser doesn't support image\n                getImageSize(file)\n                    .then(function() {\n                        var fn = query('GET_IMAGE_TRANSFORM_IMAGE_FILTER');\n                        if (fn) {\n                            var filterResult = fn(file);\n                            if (filterResult == null) {\n                                // undefined or null\n                                return handleRevert(true);\n                            }\n                            if (typeof filterResult === 'boolean') {\n                                return resolve(filterResult);\n                            }\n                            if (typeof filterResult.then === 'function') {\n                                return filterResult.then(resolve);\n                            }\n                        }\n\n                        resolve(true);\n                    })\n                    .catch(function(err) {\n                        resolve(false);\n                    });\n            });\n        };\n\n        addFilter('DID_CREATE_ITEM', function(item, _ref3) {\n            var query = _ref3.query,\n                dispatch = _ref3.dispatch;\n            if (!query('GET_ALLOW_IMAGE_TRANSFORM')) return;\n\n            item.extend('requestPrepare', function() {\n                return new Promise(function(resolve, reject) {\n                    dispatch(\n                        'REQUEST_PREPARE_OUTPUT',\n                        {\n                            query: item.id,\n                            item: item,\n                            success: resolve,\n                            failure: reject,\n                        },\n\n                        true\n                    );\n                });\n            });\n        });\n\n        // subscribe to file transformations\n        addFilter('PREPARE_OUTPUT', function(file, _ref4) {\n            var query = _ref4.query,\n                item = _ref4.item;\n            return new Promise(function(resolve) {\n                shouldTransformFile(query, file, item).then(function(shouldTransform) {\n                    // no need to transform, exit\n                    if (!shouldTransform) return resolve(file);\n\n                    // get variants\n                    var variants = [];\n\n                    // add original file\n                    if (query('GET_IMAGE_TRANSFORM_VARIANTS_INCLUDE_ORIGINAL')) {\n                        variants.push(function() {\n                            return new Promise(function(resolve) {\n                                resolve({\n                                    name: query('GET_IMAGE_TRANSFORM_VARIANTS_ORIGINAL_NAME'),\n                                    file: file,\n                                });\n                            });\n                        });\n                    }\n\n                    // add default output version if output default set to true or if no variants defined\n                    if (query('GET_IMAGE_TRANSFORM_VARIANTS_INCLUDE_DEFAULT')) {\n                        variants.push(function(transform, file, metadata) {\n                            return new Promise(function(resolve) {\n                                transform(file, metadata).then(function(file) {\n                                    return resolve({\n                                        name: query('GET_IMAGE_TRANSFORM_VARIANTS_DEFAULT_NAME'),\n\n                                        file: file,\n                                    });\n                                });\n                            });\n                        });\n                    }\n\n                    // get other variants\n                    var variantsDefinition = query('GET_IMAGE_TRANSFORM_VARIANTS') || {};\n                    forin(variantsDefinition, function(key, fn) {\n                        var createVariant = createVariantCreator(fn);\n                        variants.push(function(transform, file, metadata) {\n                            return new Promise(function(resolve) {\n                                createVariant(transform, file, metadata).then(function(file) {\n                                    return resolve({ name: key, file: file });\n                                });\n                            });\n                        });\n                    });\n\n                    // output format (quality 0 => 100)\n                    var qualityAsPercentage = query('GET_IMAGE_TRANSFORM_OUTPUT_QUALITY');\n                    var qualityMode = query('GET_IMAGE_TRANSFORM_OUTPUT_QUALITY_MODE');\n                    var quality = qualityAsPercentage === null ? null : qualityAsPercentage / 100;\n                    var type = query('GET_IMAGE_TRANSFORM_OUTPUT_MIME_TYPE');\n                    var clientTransforms =\n                        query('GET_IMAGE_TRANSFORM_CLIENT_TRANSFORMS') || TRANSFORM_LIST;\n\n                    // update transform metadata object\n                    item.setMetadata(\n                        'output',\n                        {\n                            type: type,\n                            quality: quality,\n                            client: clientTransforms,\n                        },\n\n                        true\n                    );\n\n                    // the function that is used to apply the file transformations\n                    var transform = function transform(file, metadata) {\n                        return new Promise(function(resolve, reject) {\n                            var filteredMetadata = Object.assign({}, metadata);\n\n                            Object.keys(filteredMetadata)\n                                .filter(function(instruction) {\n                                    return instruction !== 'exif';\n                                })\n                                .forEach(function(instruction) {\n                                    // if not in list, remove from object, the instruction will be handled by the server\n                                    if (clientTransforms.indexOf(instruction) === -1) {\n                                        delete filteredMetadata[instruction];\n                                    }\n                                });\n                            var resize = filteredMetadata.resize,\n                                exif = filteredMetadata.exif,\n                                output = filteredMetadata.output,\n                                crop = filteredMetadata.crop,\n                                filter = filteredMetadata.filter,\n                                markup = filteredMetadata.markup;\n\n                            var instructions = {\n                                image: {\n                                    orientation: exif ? exif.orientation : null,\n                                },\n\n                                output:\n                                    output &&\n                                    (output.type ||\n                                        typeof output.quality === 'number' ||\n                                        output.background)\n                                        ? {\n                                              type: output.type,\n                                              quality:\n                                                  typeof output.quality === 'number'\n                                                      ? output.quality * 100\n                                                      : null,\n                                              background:\n                                                  output.background ||\n                                                  query(\n                                                      'GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR'\n                                                  ) ||\n                                                  null,\n                                          }\n                                        : undefined,\n                                size:\n                                    resize && (resize.size.width || resize.size.height)\n                                        ? Object.assign(\n                                              {\n                                                  mode: resize.mode,\n                                                  upscale: resize.upscale,\n                                              },\n                                              resize.size\n                                          )\n                                        : undefined,\n                                crop:\n                                    crop && !isDefaultCrop(crop)\n                                        ? Object.assign(\n                                              {},\n\n                                              crop\n                                          )\n                                        : undefined,\n                                markup: markup && markup.length ? markup.map(prepareMarkup) : [],\n                                filter: filter,\n                            };\n\n                            if (instructions.output) {\n                                // determine if file type will change\n                                var willChangeType = output.type\n                                    ? // type set\n                                      output.type !== file.type\n                                    : // type not set\n                                      false;\n\n                                var canChangeQuality = /\\/jpe?g$/.test(file.type);\n                                var willChangeQuality =\n                                    output.quality !== null\n                                        ? // quality set\n                                          canChangeQuality && qualityMode === 'always'\n                                        : // quality not set\n                                          false;\n\n                                // determine if file data will be modified\n                                var willModifyImageData = !!(\n                                    instructions.size ||\n                                    instructions.crop ||\n                                    instructions.filter ||\n                                    willChangeType ||\n                                    willChangeQuality\n                                );\n\n                                // if we're not modifying the image data then we don't have to modify the output\n                                if (!willModifyImageData) return resolve(file);\n                            }\n\n                            var options = {\n                                beforeCreateBlob: query('GET_IMAGE_TRANSFORM_BEFORE_CREATE_BLOB'),\n                                afterCreateBlob: query('GET_IMAGE_TRANSFORM_AFTER_CREATE_BLOB'),\n                                canvasMemoryLimit: query('GET_IMAGE_TRANSFORM_CANVAS_MEMORY_LIMIT'),\n                                stripImageHead: query(\n                                    'GET_IMAGE_TRANSFORM_OUTPUT_STRIP_IMAGE_HEAD'\n                                ),\n                            };\n\n                            transformImage(file, instructions, options)\n                                .then(function(blob) {\n                                    // set file object\n                                    var out = getFileFromBlob(\n                                        blob,\n                                        // rename the original filename to match the mime type of the output image\n                                        renameFileToMatchMimeType(\n                                            file.name,\n                                            getValidOutputMimeType(blob.type)\n                                        )\n                                    );\n\n                                    resolve(out);\n                                })\n                                .catch(reject);\n                        });\n                    };\n\n                    // start creating variants\n                    var variantPromises = variants.map(function(create) {\n                        return create(transform, file, item.getMetadata());\n                    });\n\n                    // wait for results\n                    Promise.all(variantPromises).then(function(files) {\n                        // if single file object in array, return the single file object else, return array of\n                        resolve(\n                            files.length === 1 && files[0].name === null\n                                ? // return the File object\n                                  files[0].file\n                                : // return an array of files { name:'name', file:File }\n                                  files\n                        );\n                    });\n                });\n            });\n        });\n\n        // Expose plugin options\n        return {\n            options: {\n                allowImageTransform: [true, Type.BOOLEAN],\n\n                // filter images to transform\n                imageTransformImageFilter: [null, Type.FUNCTION],\n\n                // null, 'image/jpeg', 'image/png'\n                imageTransformOutputMimeType: [null, Type.STRING],\n\n                // null, 0 - 100\n                imageTransformOutputQuality: [null, Type.INT],\n\n                // set to false to copy image exif data to output\n                imageTransformOutputStripImageHead: [true, Type.BOOLEAN],\n\n                // only apply transforms in this list\n                imageTransformClientTransforms: [null, Type.ARRAY],\n\n                // only apply output quality when a transform is required\n                imageTransformOutputQualityMode: ['always', Type.STRING],\n                // 'always'\n                // 'optional'\n                // 'mismatch' (future feature, only applied if quality differs from input)\n\n                // get image transform variants\n                imageTransformVariants: [null, Type.OBJECT],\n\n                // should we post the default transformed file\n                imageTransformVariantsIncludeDefault: [true, Type.BOOLEAN],\n\n                // which name to prefix the default transformed file with\n                imageTransformVariantsDefaultName: [null, Type.STRING],\n\n                // should we post the original file\n                imageTransformVariantsIncludeOriginal: [false, Type.BOOLEAN],\n\n                // which name to prefix the original file with\n                imageTransformVariantsOriginalName: ['original_', Type.STRING],\n\n                // called before creating the blob, receives canvas, expects promise resolve with canvas\n                imageTransformBeforeCreateBlob: [null, Type.FUNCTION],\n\n                // expects promise resolved with blob\n                imageTransformAfterCreateBlob: [null, Type.FUNCTION],\n\n                // canvas memory limit\n                imageTransformCanvasMemoryLimit: [\n                    isBrowser && isIOS ? 4096 * 4096 : null,\n                    Type.INT,\n                ],\n\n                // background image of the output canvas\n                imageTransformCanvasBackgroundColor: [null, Type.STRING],\n            },\n        };\n    };\n\n    // fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\n    if (isBrowser) {\n        document.dispatchEvent(new CustomEvent('FilePond:pluginloaded', { detail: plugin }));\n    }\n\n    return plugin;\n});\n","/*!\n * FilePond 4.29.1\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n(function(global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined'\n        ? factory(exports)\n        : typeof define === 'function' && define.amd\n        ? define(['exports'], factory)\n        : ((global = global || self), factory((global.FilePond = {})));\n})(this, function(exports) {\n    'use strict';\n\n    var isNode = function isNode(value) {\n        return value instanceof HTMLElement;\n    };\n\n    var createStore = function createStore(initialState) {\n        var queries = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n        var actions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n        // internal state\n        var state = Object.assign({}, initialState);\n\n        // contains all actions for next frame, is clear when actions are requested\n        var actionQueue = [];\n        var dispatchQueue = [];\n\n        // returns a duplicate of the current state\n        var getState = function getState() {\n            return Object.assign({}, state);\n        };\n\n        // returns a duplicate of the actions array and clears the actions array\n        var processActionQueue = function processActionQueue() {\n            // create copy of actions queue\n            var queue = [].concat(actionQueue);\n\n            // clear actions queue (we don't want no double actions)\n            actionQueue.length = 0;\n\n            return queue;\n        };\n\n        // processes actions that might block the main UI thread\n        var processDispatchQueue = function processDispatchQueue() {\n            // create copy of actions queue\n            var queue = [].concat(dispatchQueue);\n\n            // clear actions queue (we don't want no double actions)\n            dispatchQueue.length = 0;\n\n            // now dispatch these actions\n            queue.forEach(function(_ref) {\n                var type = _ref.type,\n                    data = _ref.data;\n                dispatch(type, data);\n            });\n        };\n\n        // adds a new action, calls its handler and\n        var dispatch = function dispatch(type, data, isBlocking) {\n            // is blocking action (should never block if document is hidden)\n            if (isBlocking && !document.hidden) {\n                dispatchQueue.push({ type: type, data: data });\n                return;\n            }\n\n            // if this action has a handler, handle the action\n            if (actionHandlers[type]) {\n                actionHandlers[type](data);\n            }\n\n            // now add action\n            actionQueue.push({\n                type: type,\n                data: data,\n            });\n        };\n\n        var query = function query(str) {\n            var _queryHandles;\n            for (\n                var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1;\n                _key < _len;\n                _key++\n            ) {\n                args[_key - 1] = arguments[_key];\n            }\n            return queryHandles[str]\n                ? (_queryHandles = queryHandles)[str].apply(_queryHandles, args)\n                : null;\n        };\n\n        var api = {\n            getState: getState,\n            processActionQueue: processActionQueue,\n            processDispatchQueue: processDispatchQueue,\n            dispatch: dispatch,\n            query: query,\n        };\n\n        var queryHandles = {};\n        queries.forEach(function(query) {\n            queryHandles = Object.assign({}, query(state), {}, queryHandles);\n        });\n\n        var actionHandlers = {};\n        actions.forEach(function(action) {\n            actionHandlers = Object.assign({}, action(dispatch, query, state), {}, actionHandlers);\n        });\n\n        return api;\n    };\n\n    var defineProperty = function defineProperty(obj, property, definition) {\n        if (typeof definition === 'function') {\n            obj[property] = definition;\n            return;\n        }\n        Object.defineProperty(obj, property, Object.assign({}, definition));\n    };\n\n    var forin = function forin(obj, cb) {\n        for (var key in obj) {\n            if (!obj.hasOwnProperty(key)) {\n                continue;\n            }\n\n            cb(key, obj[key]);\n        }\n    };\n\n    var createObject = function createObject(definition) {\n        var obj = {};\n        forin(definition, function(property) {\n            defineProperty(obj, property, definition[property]);\n        });\n        return obj;\n    };\n\n    var attr = function attr(node, name) {\n        var value = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n        if (value === null) {\n            return node.getAttribute(name) || node.hasAttribute(name);\n        }\n        node.setAttribute(name, value);\n    };\n\n    var ns = 'http://www.w3.org/2000/svg';\n    var svgElements = ['svg', 'path']; // only svg elements used\n\n    var isSVGElement = function isSVGElement(tag) {\n        return svgElements.includes(tag);\n    };\n\n    var createElement = function createElement(tag, className) {\n        var attributes = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n        if (typeof className === 'object') {\n            attributes = className;\n            className = null;\n        }\n        var element = isSVGElement(tag)\n            ? document.createElementNS(ns, tag)\n            : document.createElement(tag);\n        if (className) {\n            if (isSVGElement(tag)) {\n                attr(element, 'class', className);\n            } else {\n                element.className = className;\n            }\n        }\n        forin(attributes, function(name, value) {\n            attr(element, name, value);\n        });\n        return element;\n    };\n\n    var appendChild = function appendChild(parent) {\n        return function(child, index) {\n            if (typeof index !== 'undefined' && parent.children[index]) {\n                parent.insertBefore(child, parent.children[index]);\n            } else {\n                parent.appendChild(child);\n            }\n        };\n    };\n\n    var appendChildView = function appendChildView(parent, childViews) {\n        return function(view, index) {\n            if (typeof index !== 'undefined') {\n                childViews.splice(index, 0, view);\n            } else {\n                childViews.push(view);\n            }\n\n            return view;\n        };\n    };\n\n    var removeChildView = function removeChildView(parent, childViews) {\n        return function(view) {\n            // remove from child views\n            childViews.splice(childViews.indexOf(view), 1);\n\n            // remove the element\n            if (view.element.parentNode) {\n                parent.removeChild(view.element);\n            }\n\n            return view;\n        };\n    };\n\n    var IS_BROWSER = (function() {\n        return typeof window !== 'undefined' && typeof window.document !== 'undefined';\n    })();\n    var isBrowser = function isBrowser() {\n        return IS_BROWSER;\n    };\n\n    var testElement = isBrowser() ? createElement('svg') : {};\n    var getChildCount =\n        'children' in testElement\n            ? function(el) {\n                  return el.children.length;\n              }\n            : function(el) {\n                  return el.childNodes.length;\n              };\n\n    var getViewRect = function getViewRect(elementRect, childViews, offset, scale) {\n        var left = offset[0] || elementRect.left;\n        var top = offset[1] || elementRect.top;\n        var right = left + elementRect.width;\n        var bottom = top + elementRect.height * (scale[1] || 1);\n\n        var rect = {\n            // the rectangle of the element itself\n            element: Object.assign({}, elementRect),\n\n            // the rectangle of the element expanded to contain its children, does not include any margins\n            inner: {\n                left: elementRect.left,\n                top: elementRect.top,\n                right: elementRect.right,\n                bottom: elementRect.bottom,\n            },\n\n            // the rectangle of the element expanded to contain its children including own margin and child margins\n            // margins will be added after we've recalculated the size\n            outer: {\n                left: left,\n                top: top,\n                right: right,\n                bottom: bottom,\n            },\n        };\n\n        // expand rect to fit all child rectangles\n        childViews\n            .filter(function(childView) {\n                return !childView.isRectIgnored();\n            })\n            .map(function(childView) {\n                return childView.rect;\n            })\n            .forEach(function(childViewRect) {\n                expandRect(rect.inner, Object.assign({}, childViewRect.inner));\n                expandRect(rect.outer, Object.assign({}, childViewRect.outer));\n            });\n\n        // calculate inner width and height\n        calculateRectSize(rect.inner);\n\n        // append additional margin (top and left margins are included in top and left automatically)\n        rect.outer.bottom += rect.element.marginBottom;\n        rect.outer.right += rect.element.marginRight;\n\n        // calculate outer width and height\n        calculateRectSize(rect.outer);\n\n        return rect;\n    };\n\n    var expandRect = function expandRect(parent, child) {\n        // adjust for parent offset\n        child.top += parent.top;\n        child.right += parent.left;\n        child.bottom += parent.top;\n        child.left += parent.left;\n\n        if (child.bottom > parent.bottom) {\n            parent.bottom = child.bottom;\n        }\n\n        if (child.right > parent.right) {\n            parent.right = child.right;\n        }\n    };\n\n    var calculateRectSize = function calculateRectSize(rect) {\n        rect.width = rect.right - rect.left;\n        rect.height = rect.bottom - rect.top;\n    };\n\n    var isNumber = function isNumber(value) {\n        return typeof value === 'number';\n    };\n\n    /**\n     * Determines if position is at destination\n     * @param position\n     * @param destination\n     * @param velocity\n     * @param errorMargin\n     * @returns {boolean}\n     */\n    var thereYet = function thereYet(position, destination, velocity) {\n        var errorMargin = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0.001;\n        return Math.abs(position - destination) < errorMargin && Math.abs(velocity) < errorMargin;\n    };\n\n    /**\n     * Spring animation\n     */\n    var spring =\n        // default options\n        function spring() // method definition\n        {\n            var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n                _ref$stiffness = _ref.stiffness,\n                stiffness = _ref$stiffness === void 0 ? 0.5 : _ref$stiffness,\n                _ref$damping = _ref.damping,\n                damping = _ref$damping === void 0 ? 0.75 : _ref$damping,\n                _ref$mass = _ref.mass,\n                mass = _ref$mass === void 0 ? 10 : _ref$mass;\n            var target = null;\n            var position = null;\n            var velocity = 0;\n            var resting = false;\n\n            // updates spring state\n            var interpolate = function interpolate(ts, skipToEndState) {\n                // in rest, don't animate\n                if (resting) return;\n\n                // need at least a target or position to do springy things\n                if (!(isNumber(target) && isNumber(position))) {\n                    resting = true;\n                    velocity = 0;\n                    return;\n                }\n\n                // calculate spring force\n                var f = -(position - target) * stiffness;\n\n                // update velocity by adding force based on mass\n                velocity += f / mass;\n\n                // update position by adding velocity\n                position += velocity;\n\n                // slow down based on amount of damping\n                velocity *= damping;\n\n                // we've arrived if we're near target and our velocity is near zero\n                if (thereYet(position, target, velocity) || skipToEndState) {\n                    position = target;\n                    velocity = 0;\n                    resting = true;\n\n                    // we done\n                    api.onupdate(position);\n                    api.oncomplete(position);\n                } else {\n                    // progress update\n                    api.onupdate(position);\n                }\n            };\n\n            /**\n             * Set new target value\n             * @param value\n             */\n            var setTarget = function setTarget(value) {\n                // if currently has no position, set target and position to this value\n                if (isNumber(value) && !isNumber(position)) {\n                    position = value;\n                }\n\n                // next target value will not be animated to\n                if (target === null) {\n                    target = value;\n                    position = value;\n                }\n\n                // let start moving to target\n                target = value;\n\n                // already at target\n                if (position === target || typeof target === 'undefined') {\n                    // now resting as target is current position, stop moving\n                    resting = true;\n                    velocity = 0;\n\n                    // done!\n                    api.onupdate(position);\n                    api.oncomplete(position);\n\n                    return;\n                }\n\n                resting = false;\n            };\n\n            // need 'api' to call onupdate callback\n            var api = createObject({\n                interpolate: interpolate,\n                target: {\n                    set: setTarget,\n                    get: function get() {\n                        return target;\n                    },\n                },\n\n                resting: {\n                    get: function get() {\n                        return resting;\n                    },\n                },\n\n                onupdate: function onupdate(value) {},\n                oncomplete: function oncomplete(value) {},\n            });\n\n            return api;\n        };\n\n    var easeLinear = function easeLinear(t) {\n        return t;\n    };\n    var easeInOutQuad = function easeInOutQuad(t) {\n        return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n    };\n\n    var tween =\n        // default values\n        function tween() // method definition\n        {\n            var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n                _ref$duration = _ref.duration,\n                duration = _ref$duration === void 0 ? 500 : _ref$duration,\n                _ref$easing = _ref.easing,\n                easing = _ref$easing === void 0 ? easeInOutQuad : _ref$easing,\n                _ref$delay = _ref.delay,\n                delay = _ref$delay === void 0 ? 0 : _ref$delay;\n            var start = null;\n            var t;\n            var p;\n            var resting = true;\n            var reverse = false;\n            var target = null;\n\n            var interpolate = function interpolate(ts, skipToEndState) {\n                if (resting || target === null) return;\n\n                if (start === null) {\n                    start = ts;\n                }\n\n                if (ts - start < delay) return;\n\n                t = ts - start - delay;\n\n                if (t >= duration || skipToEndState) {\n                    t = 1;\n                    p = reverse ? 0 : 1;\n                    api.onupdate(p * target);\n                    api.oncomplete(p * target);\n                    resting = true;\n                } else {\n                    p = t / duration;\n                    api.onupdate((t >= 0 ? easing(reverse ? 1 - p : p) : 0) * target);\n                }\n            };\n\n            // need 'api' to call onupdate callback\n            var api = createObject({\n                interpolate: interpolate,\n                target: {\n                    get: function get() {\n                        return reverse ? 0 : target;\n                    },\n                    set: function set(value) {\n                        // is initial value\n                        if (target === null) {\n                            target = value;\n                            api.onupdate(value);\n                            api.oncomplete(value);\n                            return;\n                        }\n\n                        // want to tween to a smaller value and have a current value\n                        if (value < target) {\n                            target = 1;\n                            reverse = true;\n                        } else {\n                            // not tweening to a smaller value\n                            reverse = false;\n                            target = value;\n                        }\n\n                        // let's go!\n                        resting = false;\n                        start = null;\n                    },\n                },\n\n                resting: {\n                    get: function get() {\n                        return resting;\n                    },\n                },\n\n                onupdate: function onupdate(value) {},\n                oncomplete: function oncomplete(value) {},\n            });\n\n            return api;\n        };\n\n    var animator = {\n        spring: spring,\n        tween: tween,\n    };\n\n    /*\n                       { type: 'spring', stiffness: .5, damping: .75, mass: 10 };\n                       { translation: { type: 'spring', ... }, ... }\n                       { translation: { x: { type: 'spring', ... } } }\n                      */\n    var createAnimator = function createAnimator(definition, category, property) {\n        // default is single definition\n        // we check if transform is set, if so, we check if property is set\n        var def =\n            definition[category] && typeof definition[category][property] === 'object'\n                ? definition[category][property]\n                : definition[category] || definition;\n\n        var type = typeof def === 'string' ? def : def.type;\n        var props = typeof def === 'object' ? Object.assign({}, def) : {};\n\n        return animator[type] ? animator[type](props) : null;\n    };\n\n    var addGetSet = function addGetSet(keys, obj, props) {\n        var overwrite = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n        obj = Array.isArray(obj) ? obj : [obj];\n        obj.forEach(function(o) {\n            keys.forEach(function(key) {\n                var name = key;\n                var getter = function getter() {\n                    return props[key];\n                };\n                var setter = function setter(value) {\n                    return (props[key] = value);\n                };\n\n                if (typeof key === 'object') {\n                    name = key.key;\n                    getter = key.getter || getter;\n                    setter = key.setter || setter;\n                }\n\n                if (o[name] && !overwrite) {\n                    return;\n                }\n\n                o[name] = {\n                    get: getter,\n                    set: setter,\n                };\n            });\n        });\n    };\n\n    // add to state,\n    // add getters and setters to internal and external api (if not set)\n    // setup animators\n\n    var animations = function animations(_ref) {\n        var mixinConfig = _ref.mixinConfig,\n            viewProps = _ref.viewProps,\n            viewInternalAPI = _ref.viewInternalAPI,\n            viewExternalAPI = _ref.viewExternalAPI;\n        // initial properties\n        var initialProps = Object.assign({}, viewProps);\n\n        // list of all active animations\n        var animations = [];\n\n        // setup animators\n        forin(mixinConfig, function(property, animation) {\n            var animator = createAnimator(animation);\n            if (!animator) {\n                return;\n            }\n\n            // when the animator updates, update the view state value\n            animator.onupdate = function(value) {\n                viewProps[property] = value;\n            };\n\n            // set animator target\n            animator.target = initialProps[property];\n\n            // when value is set, set the animator target value\n            var prop = {\n                key: property,\n                setter: function setter(value) {\n                    // if already at target, we done!\n                    if (animator.target === value) {\n                        return;\n                    }\n\n                    animator.target = value;\n                },\n                getter: function getter() {\n                    return viewProps[property];\n                },\n            };\n\n            // add getters and setters\n            addGetSet([prop], [viewInternalAPI, viewExternalAPI], viewProps, true);\n\n            // add it to the list for easy updating from the _write method\n            animations.push(animator);\n        });\n\n        // expose internal write api\n        return {\n            write: function write(ts) {\n                var skipToEndState = document.hidden;\n                var resting = true;\n                animations.forEach(function(animation) {\n                    if (!animation.resting) resting = false;\n                    animation.interpolate(ts, skipToEndState);\n                });\n                return resting;\n            },\n            destroy: function destroy() {},\n        };\n    };\n\n    var addEvent = function addEvent(element) {\n        return function(type, fn) {\n            element.addEventListener(type, fn);\n        };\n    };\n\n    var removeEvent = function removeEvent(element) {\n        return function(type, fn) {\n            element.removeEventListener(type, fn);\n        };\n    };\n\n    // mixin\n    var listeners = function listeners(_ref) {\n        var mixinConfig = _ref.mixinConfig,\n            viewProps = _ref.viewProps,\n            viewInternalAPI = _ref.viewInternalAPI,\n            viewExternalAPI = _ref.viewExternalAPI,\n            viewState = _ref.viewState,\n            view = _ref.view;\n        var events = [];\n\n        var add = addEvent(view.element);\n        var remove = removeEvent(view.element);\n\n        viewExternalAPI.on = function(type, fn) {\n            events.push({\n                type: type,\n                fn: fn,\n            });\n\n            add(type, fn);\n        };\n\n        viewExternalAPI.off = function(type, fn) {\n            events.splice(\n                events.findIndex(function(event) {\n                    return event.type === type && event.fn === fn;\n                }),\n                1\n            );\n\n            remove(type, fn);\n        };\n\n        return {\n            write: function write() {\n                // not busy\n                return true;\n            },\n            destroy: function destroy() {\n                events.forEach(function(event) {\n                    remove(event.type, event.fn);\n                });\n            },\n        };\n    };\n\n    // add to external api and link to props\n\n    var apis = function apis(_ref) {\n        var mixinConfig = _ref.mixinConfig,\n            viewProps = _ref.viewProps,\n            viewExternalAPI = _ref.viewExternalAPI;\n        addGetSet(mixinConfig, viewExternalAPI, viewProps);\n    };\n\n    var isDefined = function isDefined(value) {\n        return value != null;\n    };\n\n    // add to state,\n    // add getters and setters to internal and external api (if not set)\n    // set initial state based on props in viewProps\n    // apply as transforms each frame\n\n    var defaults = {\n        opacity: 1,\n        scaleX: 1,\n        scaleY: 1,\n        translateX: 0,\n        translateY: 0,\n        rotateX: 0,\n        rotateY: 0,\n        rotateZ: 0,\n        originX: 0,\n        originY: 0,\n    };\n\n    var styles = function styles(_ref) {\n        var mixinConfig = _ref.mixinConfig,\n            viewProps = _ref.viewProps,\n            viewInternalAPI = _ref.viewInternalAPI,\n            viewExternalAPI = _ref.viewExternalAPI,\n            view = _ref.view;\n        // initial props\n        var initialProps = Object.assign({}, viewProps);\n\n        // current props\n        var currentProps = {};\n\n        // we will add those properties to the external API and link them to the viewState\n        addGetSet(mixinConfig, [viewInternalAPI, viewExternalAPI], viewProps);\n\n        // override rect on internal and external rect getter so it takes in account transforms\n        var getOffset = function getOffset() {\n            return [viewProps['translateX'] || 0, viewProps['translateY'] || 0];\n        };\n\n        var getScale = function getScale() {\n            return [viewProps['scaleX'] || 0, viewProps['scaleY'] || 0];\n        };\n        var getRect = function getRect() {\n            return view.rect\n                ? getViewRect(view.rect, view.childViews, getOffset(), getScale())\n                : null;\n        };\n        viewInternalAPI.rect = { get: getRect };\n        viewExternalAPI.rect = { get: getRect };\n\n        // apply view props\n        mixinConfig.forEach(function(key) {\n            viewProps[key] =\n                typeof initialProps[key] === 'undefined' ? defaults[key] : initialProps[key];\n        });\n\n        // expose api\n        return {\n            write: function write() {\n                // see if props have changed\n                if (!propsHaveChanged(currentProps, viewProps)) {\n                    return;\n                }\n\n                // moves element to correct position on screen\n                applyStyles(view.element, viewProps);\n\n                // store new transforms\n                Object.assign(currentProps, Object.assign({}, viewProps));\n\n                // no longer busy\n                return true;\n            },\n            destroy: function destroy() {},\n        };\n    };\n\n    var propsHaveChanged = function propsHaveChanged(currentProps, newProps) {\n        // different amount of keys\n        if (Object.keys(currentProps).length !== Object.keys(newProps).length) {\n            return true;\n        }\n\n        // lets analyze the individual props\n        for (var prop in newProps) {\n            if (newProps[prop] !== currentProps[prop]) {\n                return true;\n            }\n        }\n\n        return false;\n    };\n\n    var applyStyles = function applyStyles(element, _ref2) {\n        var opacity = _ref2.opacity,\n            perspective = _ref2.perspective,\n            translateX = _ref2.translateX,\n            translateY = _ref2.translateY,\n            scaleX = _ref2.scaleX,\n            scaleY = _ref2.scaleY,\n            rotateX = _ref2.rotateX,\n            rotateY = _ref2.rotateY,\n            rotateZ = _ref2.rotateZ,\n            originX = _ref2.originX,\n            originY = _ref2.originY,\n            width = _ref2.width,\n            height = _ref2.height;\n\n        var transforms = '';\n        var styles = '';\n\n        // handle transform origin\n        if (isDefined(originX) || isDefined(originY)) {\n            styles += 'transform-origin: ' + (originX || 0) + 'px ' + (originY || 0) + 'px;';\n        }\n\n        // transform order is relevant\n        // 0. perspective\n        if (isDefined(perspective)) {\n            transforms += 'perspective(' + perspective + 'px) ';\n        }\n\n        // 1. translate\n        if (isDefined(translateX) || isDefined(translateY)) {\n            transforms +=\n                'translate3d(' + (translateX || 0) + 'px, ' + (translateY || 0) + 'px, 0) ';\n        }\n\n        // 2. scale\n        if (isDefined(scaleX) || isDefined(scaleY)) {\n            transforms +=\n                'scale3d(' +\n                (isDefined(scaleX) ? scaleX : 1) +\n                ', ' +\n                (isDefined(scaleY) ? scaleY : 1) +\n                ', 1) ';\n        }\n\n        // 3. rotate\n        if (isDefined(rotateZ)) {\n            transforms += 'rotateZ(' + rotateZ + 'rad) ';\n        }\n\n        if (isDefined(rotateX)) {\n            transforms += 'rotateX(' + rotateX + 'rad) ';\n        }\n\n        if (isDefined(rotateY)) {\n            transforms += 'rotateY(' + rotateY + 'rad) ';\n        }\n\n        // add transforms\n        if (transforms.length) {\n            styles += 'transform:' + transforms + ';';\n        }\n\n        // add opacity\n        if (isDefined(opacity)) {\n            styles += 'opacity:' + opacity + ';';\n\n            // if we reach zero, we make the element inaccessible\n            if (opacity === 0) {\n                styles += 'visibility:hidden;';\n            }\n\n            // if we're below 100% opacity this element can't be clicked\n            if (opacity < 1) {\n                styles += 'pointer-events:none;';\n            }\n        }\n\n        // add height\n        if (isDefined(height)) {\n            styles += 'height:' + height + 'px;';\n        }\n\n        // add width\n        if (isDefined(width)) {\n            styles += 'width:' + width + 'px;';\n        }\n\n        // apply styles\n        var elementCurrentStyle = element.elementCurrentStyle || '';\n\n        // if new styles does not match current styles, lets update!\n        if (styles.length !== elementCurrentStyle.length || styles !== elementCurrentStyle) {\n            element.style.cssText = styles;\n            // store current styles so we can compare them to new styles later on\n            // _not_ getting the style value is faster\n            element.elementCurrentStyle = styles;\n        }\n    };\n\n    var Mixins = {\n        styles: styles,\n        listeners: listeners,\n        animations: animations,\n        apis: apis,\n    };\n\n    var updateRect = function updateRect() {\n        var rect = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var element = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        var style = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n        if (!element.layoutCalculated) {\n            rect.paddingTop = parseInt(style.paddingTop, 10) || 0;\n            rect.marginTop = parseInt(style.marginTop, 10) || 0;\n            rect.marginRight = parseInt(style.marginRight, 10) || 0;\n            rect.marginBottom = parseInt(style.marginBottom, 10) || 0;\n            rect.marginLeft = parseInt(style.marginLeft, 10) || 0;\n            element.layoutCalculated = true;\n        }\n\n        rect.left = element.offsetLeft || 0;\n        rect.top = element.offsetTop || 0;\n        rect.width = element.offsetWidth || 0;\n        rect.height = element.offsetHeight || 0;\n\n        rect.right = rect.left + rect.width;\n        rect.bottom = rect.top + rect.height;\n\n        rect.scrollTop = element.scrollTop;\n\n        rect.hidden = element.offsetParent === null;\n\n        return rect;\n    };\n\n    var createView =\n        // default view definition\n        function createView() {\n            var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n                _ref$tag = _ref.tag,\n                tag = _ref$tag === void 0 ? 'div' : _ref$tag,\n                _ref$name = _ref.name,\n                name = _ref$name === void 0 ? null : _ref$name,\n                _ref$attributes = _ref.attributes,\n                attributes = _ref$attributes === void 0 ? {} : _ref$attributes,\n                _ref$read = _ref.read,\n                read = _ref$read === void 0 ? function() {} : _ref$read,\n                _ref$write = _ref.write,\n                write = _ref$write === void 0 ? function() {} : _ref$write,\n                _ref$create = _ref.create,\n                create = _ref$create === void 0 ? function() {} : _ref$create,\n                _ref$destroy = _ref.destroy,\n                destroy = _ref$destroy === void 0 ? function() {} : _ref$destroy,\n                _ref$filterFrameActio = _ref.filterFrameActionsForChild,\n                filterFrameActionsForChild =\n                    _ref$filterFrameActio === void 0\n                        ? function(child, actions) {\n                              return actions;\n                          }\n                        : _ref$filterFrameActio,\n                _ref$didCreateView = _ref.didCreateView,\n                didCreateView = _ref$didCreateView === void 0 ? function() {} : _ref$didCreateView,\n                _ref$didWriteView = _ref.didWriteView,\n                didWriteView = _ref$didWriteView === void 0 ? function() {} : _ref$didWriteView,\n                _ref$ignoreRect = _ref.ignoreRect,\n                ignoreRect = _ref$ignoreRect === void 0 ? false : _ref$ignoreRect,\n                _ref$ignoreRectUpdate = _ref.ignoreRectUpdate,\n                ignoreRectUpdate = _ref$ignoreRectUpdate === void 0 ? false : _ref$ignoreRectUpdate,\n                _ref$mixins = _ref.mixins,\n                mixins = _ref$mixins === void 0 ? [] : _ref$mixins;\n            return function(\n                // each view requires reference to store\n                store\n            ) {\n                var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n                // root element should not be changed\n                var element = createElement(tag, 'filepond--' + name, attributes);\n\n                // style reference should also not be changed\n                var style = window.getComputedStyle(element, null);\n\n                // element rectangle\n                var rect = updateRect();\n                var frameRect = null;\n\n                // rest state\n                var isResting = false;\n\n                // pretty self explanatory\n                var childViews = [];\n\n                // loaded mixins\n                var activeMixins = [];\n\n                // references to created children\n                var ref = {};\n\n                // state used for each instance\n                var state = {};\n\n                // list of writers that will be called to update this view\n                var writers = [\n                    write, // default writer\n                ];\n\n                var readers = [\n                    read, // default reader\n                ];\n\n                var destroyers = [\n                    destroy, // default destroy\n                ];\n\n                // core view methods\n                var getElement = function getElement() {\n                    return element;\n                };\n                var getChildViews = function getChildViews() {\n                    return childViews.concat();\n                };\n                var getReference = function getReference() {\n                    return ref;\n                };\n                var createChildView = function createChildView(store) {\n                    return function(view, props) {\n                        return view(store, props);\n                    };\n                };\n                var getRect = function getRect() {\n                    if (frameRect) {\n                        return frameRect;\n                    }\n                    frameRect = getViewRect(rect, childViews, [0, 0], [1, 1]);\n                    return frameRect;\n                };\n                var getStyle = function getStyle() {\n                    return style;\n                };\n\n                /**\n                 * Read data from DOM\n                 * @private\n                 */\n                var _read = function _read() {\n                    frameRect = null;\n\n                    // read child views\n                    childViews.forEach(function(child) {\n                        return child._read();\n                    });\n\n                    var shouldUpdate = !(ignoreRectUpdate && rect.width && rect.height);\n                    if (shouldUpdate) {\n                        updateRect(rect, element, style);\n                    }\n\n                    // readers\n                    var api = { root: internalAPI, props: props, rect: rect };\n                    readers.forEach(function(reader) {\n                        return reader(api);\n                    });\n                };\n\n                /**\n                 * Write data to DOM\n                 * @private\n                 */\n                var _write = function _write(ts, frameActions, shouldOptimize) {\n                    // if no actions, we assume that the view is resting\n                    var resting = frameActions.length === 0;\n\n                    // writers\n                    writers.forEach(function(writer) {\n                        var writerResting = writer({\n                            props: props,\n                            root: internalAPI,\n                            actions: frameActions,\n                            timestamp: ts,\n                            shouldOptimize: shouldOptimize,\n                        });\n\n                        if (writerResting === false) {\n                            resting = false;\n                        }\n                    });\n\n                    // run mixins\n                    activeMixins.forEach(function(mixin) {\n                        // if one of the mixins is still busy after write operation, we are not resting\n                        var mixinResting = mixin.write(ts);\n                        if (mixinResting === false) {\n                            resting = false;\n                        }\n                    });\n\n                    // updates child views that are currently attached to the DOM\n                    childViews\n                        .filter(function(child) {\n                            return !!child.element.parentNode;\n                        })\n                        .forEach(function(child) {\n                            // if a child view is not resting, we are not resting\n                            var childResting = child._write(\n                                ts,\n                                filterFrameActionsForChild(child, frameActions),\n                                shouldOptimize\n                            );\n\n                            if (!childResting) {\n                                resting = false;\n                            }\n                        });\n\n                    // append new elements to DOM and update those\n                    childViews\n                        //.filter(child => !child.element.parentNode)\n                        .forEach(function(child, index) {\n                            // skip\n                            if (child.element.parentNode) {\n                                return;\n                            }\n\n                            // append to DOM\n                            internalAPI.appendChild(child.element, index);\n\n                            // call read (need to know the size of these elements)\n                            child._read();\n\n                            // re-call write\n                            child._write(\n                                ts,\n                                filterFrameActionsForChild(child, frameActions),\n                                shouldOptimize\n                            );\n\n                            // we just added somthing to the dom, no rest\n                            resting = false;\n                        });\n\n                    // update resting state\n                    isResting = resting;\n\n                    didWriteView({\n                        props: props,\n                        root: internalAPI,\n                        actions: frameActions,\n                        timestamp: ts,\n                    });\n\n                    // let parent know if we are resting\n                    return resting;\n                };\n\n                var _destroy = function _destroy() {\n                    activeMixins.forEach(function(mixin) {\n                        return mixin.destroy();\n                    });\n                    destroyers.forEach(function(destroyer) {\n                        destroyer({ root: internalAPI, props: props });\n                    });\n                    childViews.forEach(function(child) {\n                        return child._destroy();\n                    });\n                };\n\n                // sharedAPI\n                var sharedAPIDefinition = {\n                    element: {\n                        get: getElement,\n                    },\n\n                    style: {\n                        get: getStyle,\n                    },\n\n                    childViews: {\n                        get: getChildViews,\n                    },\n                };\n\n                // private API definition\n                var internalAPIDefinition = Object.assign({}, sharedAPIDefinition, {\n                    rect: {\n                        get: getRect,\n                    },\n\n                    // access to custom children references\n                    ref: {\n                        get: getReference,\n                    },\n\n                    // dom modifiers\n                    is: function is(needle) {\n                        return name === needle;\n                    },\n                    appendChild: appendChild(element),\n                    createChildView: createChildView(store),\n                    linkView: function linkView(view) {\n                        childViews.push(view);\n                        return view;\n                    },\n                    unlinkView: function unlinkView(view) {\n                        childViews.splice(childViews.indexOf(view), 1);\n                    },\n                    appendChildView: appendChildView(element, childViews),\n                    removeChildView: removeChildView(element, childViews),\n                    registerWriter: function registerWriter(writer) {\n                        return writers.push(writer);\n                    },\n                    registerReader: function registerReader(reader) {\n                        return readers.push(reader);\n                    },\n                    registerDestroyer: function registerDestroyer(destroyer) {\n                        return destroyers.push(destroyer);\n                    },\n                    invalidateLayout: function invalidateLayout() {\n                        return (element.layoutCalculated = false);\n                    },\n\n                    // access to data store\n                    dispatch: store.dispatch,\n                    query: store.query,\n                });\n\n                // public view API methods\n                var externalAPIDefinition = {\n                    element: {\n                        get: getElement,\n                    },\n\n                    childViews: {\n                        get: getChildViews,\n                    },\n\n                    rect: {\n                        get: getRect,\n                    },\n\n                    resting: {\n                        get: function get() {\n                            return isResting;\n                        },\n                    },\n\n                    isRectIgnored: function isRectIgnored() {\n                        return ignoreRect;\n                    },\n                    _read: _read,\n                    _write: _write,\n                    _destroy: _destroy,\n                };\n\n                // mixin API methods\n                var mixinAPIDefinition = Object.assign({}, sharedAPIDefinition, {\n                    rect: {\n                        get: function get() {\n                            return rect;\n                        },\n                    },\n                });\n\n                // add mixin functionality\n                Object.keys(mixins)\n                    .sort(function(a, b) {\n                        // move styles to the back of the mixin list (so adjustments of other mixins are applied to the props correctly)\n                        if (a === 'styles') {\n                            return 1;\n                        } else if (b === 'styles') {\n                            return -1;\n                        }\n                        return 0;\n                    })\n                    .forEach(function(key) {\n                        var mixinAPI = Mixins[key]({\n                            mixinConfig: mixins[key],\n                            viewProps: props,\n                            viewState: state,\n                            viewInternalAPI: internalAPIDefinition,\n                            viewExternalAPI: externalAPIDefinition,\n                            view: createObject(mixinAPIDefinition),\n                        });\n\n                        if (mixinAPI) {\n                            activeMixins.push(mixinAPI);\n                        }\n                    });\n\n                // construct private api\n                var internalAPI = createObject(internalAPIDefinition);\n\n                // create the view\n                create({\n                    root: internalAPI,\n                    props: props,\n                });\n\n                // append created child views to root node\n                var childCount = getChildCount(element); // need to know the current child count so appending happens in correct order\n                childViews.forEach(function(child, index) {\n                    internalAPI.appendChild(child.element, childCount + index);\n                });\n\n                // call did create\n                didCreateView(internalAPI);\n\n                // expose public api\n                return createObject(externalAPIDefinition);\n            };\n        };\n\n    var createPainter = function createPainter(read, write) {\n        var fps = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 60;\n\n        var name = '__framePainter';\n\n        // set global painter\n        if (window[name]) {\n            window[name].readers.push(read);\n            window[name].writers.push(write);\n            return;\n        }\n\n        window[name] = {\n            readers: [read],\n            writers: [write],\n        };\n\n        var painter = window[name];\n\n        var interval = 1000 / fps;\n        var last = null;\n        var id = null;\n        var requestTick = null;\n        var cancelTick = null;\n\n        var setTimerType = function setTimerType() {\n            if (document.hidden) {\n                requestTick = function requestTick() {\n                    return window.setTimeout(function() {\n                        return tick(performance.now());\n                    }, interval);\n                };\n                cancelTick = function cancelTick() {\n                    return window.clearTimeout(id);\n                };\n            } else {\n                requestTick = function requestTick() {\n                    return window.requestAnimationFrame(tick);\n                };\n                cancelTick = function cancelTick() {\n                    return window.cancelAnimationFrame(id);\n                };\n            }\n        };\n\n        document.addEventListener('visibilitychange', function() {\n            if (cancelTick) cancelTick();\n            setTimerType();\n            tick(performance.now());\n        });\n\n        var tick = function tick(ts) {\n            // queue next tick\n            id = requestTick(tick);\n\n            // limit fps\n            if (!last) {\n                last = ts;\n            }\n\n            var delta = ts - last;\n\n            if (delta <= interval) {\n                // skip frame\n                return;\n            }\n\n            // align next frame\n            last = ts - (delta % interval);\n\n            // update view\n            painter.readers.forEach(function(read) {\n                return read();\n            });\n            painter.writers.forEach(function(write) {\n                return write(ts);\n            });\n        };\n\n        setTimerType();\n        tick(performance.now());\n\n        return {\n            pause: function pause() {\n                cancelTick(id);\n            },\n        };\n    };\n\n    var createRoute = function createRoute(routes, fn) {\n        return function(_ref) {\n            var root = _ref.root,\n                props = _ref.props,\n                _ref$actions = _ref.actions,\n                actions = _ref$actions === void 0 ? [] : _ref$actions,\n                timestamp = _ref.timestamp,\n                shouldOptimize = _ref.shouldOptimize;\n            actions\n                .filter(function(action) {\n                    return routes[action.type];\n                })\n                .forEach(function(action) {\n                    return routes[action.type]({\n                        root: root,\n                        props: props,\n                        action: action.data,\n                        timestamp: timestamp,\n                        shouldOptimize: shouldOptimize,\n                    });\n                });\n\n            if (fn) {\n                fn({\n                    root: root,\n                    props: props,\n                    actions: actions,\n                    timestamp: timestamp,\n                    shouldOptimize: shouldOptimize,\n                });\n            }\n        };\n    };\n\n    var insertBefore = function insertBefore(newNode, referenceNode) {\n        return referenceNode.parentNode.insertBefore(newNode, referenceNode);\n    };\n\n    var insertAfter = function insertAfter(newNode, referenceNode) {\n        return referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\n    };\n\n    var isArray = function isArray(value) {\n        return Array.isArray(value);\n    };\n\n    var isEmpty = function isEmpty(value) {\n        return value == null;\n    };\n\n    var trim = function trim(str) {\n        return str.trim();\n    };\n\n    var toString = function toString(value) {\n        return '' + value;\n    };\n\n    var toArray = function toArray(value) {\n        var splitter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ',';\n        if (isEmpty(value)) {\n            return [];\n        }\n        if (isArray(value)) {\n            return value;\n        }\n        return toString(value)\n            .split(splitter)\n            .map(trim)\n            .filter(function(str) {\n                return str.length;\n            });\n    };\n\n    var isBoolean = function isBoolean(value) {\n        return typeof value === 'boolean';\n    };\n\n    var toBoolean = function toBoolean(value) {\n        return isBoolean(value) ? value : value === 'true';\n    };\n\n    var isString = function isString(value) {\n        return typeof value === 'string';\n    };\n\n    var toNumber = function toNumber(value) {\n        return isNumber(value)\n            ? value\n            : isString(value)\n            ? toString(value).replace(/[a-z]+/gi, '')\n            : 0;\n    };\n\n    var toInt = function toInt(value) {\n        return parseInt(toNumber(value), 10);\n    };\n\n    var toFloat = function toFloat(value) {\n        return parseFloat(toNumber(value));\n    };\n\n    var isInt = function isInt(value) {\n        return isNumber(value) && isFinite(value) && Math.floor(value) === value;\n    };\n\n    var toBytes = function toBytes(value) {\n        var base = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1000;\n        // is in bytes\n        if (isInt(value)) {\n            return value;\n        }\n\n        // is natural file size\n        var naturalFileSize = toString(value).trim();\n\n        // if is value in megabytes\n        if (/MB$/i.test(naturalFileSize)) {\n            naturalFileSize = naturalFileSize.replace(/MB$i/, '').trim();\n            return toInt(naturalFileSize) * base * base;\n        }\n\n        // if is value in kilobytes\n        if (/KB/i.test(naturalFileSize)) {\n            naturalFileSize = naturalFileSize.replace(/KB$i/, '').trim();\n            return toInt(naturalFileSize) * base;\n        }\n\n        return toInt(naturalFileSize);\n    };\n\n    var isFunction = function isFunction(value) {\n        return typeof value === 'function';\n    };\n\n    var toFunctionReference = function toFunctionReference(string) {\n        var ref = self;\n        var levels = string.split('.');\n        var level = null;\n        while ((level = levels.shift())) {\n            ref = ref[level];\n            if (!ref) {\n                return null;\n            }\n        }\n        return ref;\n    };\n\n    var methods = {\n        process: 'POST',\n        patch: 'PATCH',\n        revert: 'DELETE',\n        fetch: 'GET',\n        restore: 'GET',\n        load: 'GET',\n    };\n\n    var createServerAPI = function createServerAPI(outline) {\n        var api = {};\n\n        api.url = isString(outline) ? outline : outline.url || '';\n        api.timeout = outline.timeout ? parseInt(outline.timeout, 10) : 0;\n        api.headers = outline.headers ? outline.headers : {};\n\n        forin(methods, function(key) {\n            api[key] = createAction(key, outline[key], methods[key], api.timeout, api.headers);\n        });\n\n        // remove process if no url or process on outline\n        api.process = outline.process || isString(outline) || outline.url ? api.process : null;\n\n        // special treatment for remove\n        api.remove = outline.remove || null;\n\n        // remove generic headers from api object\n        delete api.headers;\n\n        return api;\n    };\n\n    var createAction = function createAction(name, outline, method, timeout, headers) {\n        // is explicitely set to null so disable\n        if (outline === null) {\n            return null;\n        }\n\n        // if is custom function, done! Dev handles everything.\n        if (typeof outline === 'function') {\n            return outline;\n        }\n\n        // build action object\n        var action = {\n            url: method === 'GET' || method === 'PATCH' ? '?' + name + '=' : '',\n            method: method,\n            headers: headers,\n            withCredentials: false,\n            timeout: timeout,\n            onload: null,\n            ondata: null,\n            onerror: null,\n        };\n\n        // is a single url\n        if (isString(outline)) {\n            action.url = outline;\n            return action;\n        }\n\n        // overwrite\n        Object.assign(action, outline);\n\n        // see if should reformat headers;\n        if (isString(action.headers)) {\n            var parts = action.headers.split(/:(.+)/);\n            action.headers = {\n                header: parts[0],\n                value: parts[1],\n            };\n        }\n\n        // if is bool withCredentials\n        action.withCredentials = toBoolean(action.withCredentials);\n\n        return action;\n    };\n\n    var toServerAPI = function toServerAPI(value) {\n        return createServerAPI(value);\n    };\n\n    var isNull = function isNull(value) {\n        return value === null;\n    };\n\n    var isObject = function isObject(value) {\n        return typeof value === 'object' && value !== null;\n    };\n\n    var isAPI = function isAPI(value) {\n        return (\n            isObject(value) &&\n            isString(value.url) &&\n            isObject(value.process) &&\n            isObject(value.revert) &&\n            isObject(value.restore) &&\n            isObject(value.fetch)\n        );\n    };\n\n    var getType = function getType(value) {\n        if (isArray(value)) {\n            return 'array';\n        }\n\n        if (isNull(value)) {\n            return 'null';\n        }\n\n        if (isInt(value)) {\n            return 'int';\n        }\n\n        if (/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(value)) {\n            return 'bytes';\n        }\n\n        if (isAPI(value)) {\n            return 'api';\n        }\n\n        return typeof value;\n    };\n\n    var replaceSingleQuotes = function replaceSingleQuotes(str) {\n        return str\n            .replace(/{\\s*'/g, '{\"')\n            .replace(/'\\s*}/g, '\"}')\n            .replace(/'\\s*:/g, '\":')\n            .replace(/:\\s*'/g, ':\"')\n            .replace(/,\\s*'/g, ',\"')\n            .replace(/'\\s*,/g, '\",');\n    };\n\n    var conversionTable = {\n        array: toArray,\n        boolean: toBoolean,\n        int: function int(value) {\n            return getType(value) === 'bytes' ? toBytes(value) : toInt(value);\n        },\n        number: toFloat,\n        float: toFloat,\n        bytes: toBytes,\n        string: function string(value) {\n            return isFunction(value) ? value : toString(value);\n        },\n        function: function _function(value) {\n            return toFunctionReference(value);\n        },\n        serverapi: toServerAPI,\n        object: function object(value) {\n            try {\n                return JSON.parse(replaceSingleQuotes(value));\n            } catch (e) {\n                return null;\n            }\n        },\n    };\n\n    var convertTo = function convertTo(value, type) {\n        return conversionTable[type](value);\n    };\n\n    var getValueByType = function getValueByType(newValue, defaultValue, valueType) {\n        // can always assign default value\n        if (newValue === defaultValue) {\n            return newValue;\n        }\n\n        // get the type of the new value\n        var newValueType = getType(newValue);\n\n        // is valid type?\n        if (newValueType !== valueType) {\n            // is string input, let's attempt to convert\n            var convertedValue = convertTo(newValue, valueType);\n\n            // what is the type now\n            newValueType = getType(convertedValue);\n\n            // no valid conversions found\n            if (convertedValue === null) {\n                throw 'Trying to assign value with incorrect type to \"' +\n                    option +\n                    '\", allowed type: \"' +\n                    valueType +\n                    '\"';\n            } else {\n                newValue = convertedValue;\n            }\n        }\n\n        // assign new value\n        return newValue;\n    };\n\n    var createOption = function createOption(defaultValue, valueType) {\n        var currentValue = defaultValue;\n        return {\n            enumerable: true,\n            get: function get() {\n                return currentValue;\n            },\n            set: function set(newValue) {\n                currentValue = getValueByType(newValue, defaultValue, valueType);\n            },\n        };\n    };\n\n    var createOptions = function createOptions(options) {\n        var obj = {};\n        forin(options, function(prop) {\n            var optionDefinition = options[prop];\n            obj[prop] = createOption(optionDefinition[0], optionDefinition[1]);\n        });\n        return createObject(obj);\n    };\n\n    var createInitialState = function createInitialState(options) {\n        return {\n            // model\n            items: [],\n\n            // timeout used for calling update items\n            listUpdateTimeout: null,\n\n            // timeout used for stacking metadata updates\n            itemUpdateTimeout: null,\n\n            // queue of items waiting to be processed\n            processingQueue: [],\n\n            // options\n            options: createOptions(options),\n        };\n    };\n\n    var fromCamels = function fromCamels(string) {\n        var separator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '-';\n        return string\n            .split(/(?=[A-Z])/)\n            .map(function(part) {\n                return part.toLowerCase();\n            })\n            .join(separator);\n    };\n\n    var createOptionAPI = function createOptionAPI(store, options) {\n        var obj = {};\n        forin(options, function(key) {\n            obj[key] = {\n                get: function get() {\n                    return store.getState().options[key];\n                },\n                set: function set(value) {\n                    store.dispatch('SET_' + fromCamels(key, '_').toUpperCase(), {\n                        value: value,\n                    });\n                },\n            };\n        });\n        return obj;\n    };\n\n    var createOptionActions = function createOptionActions(options) {\n        return function(dispatch, query, state) {\n            var obj = {};\n            forin(options, function(key) {\n                var name = fromCamels(key, '_').toUpperCase();\n\n                obj['SET_' + name] = function(action) {\n                    try {\n                        state.options[key] = action.value;\n                    } catch (e) {} // nope, failed\n\n                    // we successfully set the value of this option\n                    dispatch('DID_SET_' + name, { value: state.options[key] });\n                };\n            });\n            return obj;\n        };\n    };\n\n    var createOptionQueries = function createOptionQueries(options) {\n        return function(state) {\n            var obj = {};\n            forin(options, function(key) {\n                obj['GET_' + fromCamels(key, '_').toUpperCase()] = function(action) {\n                    return state.options[key];\n                };\n            });\n            return obj;\n        };\n    };\n\n    var InteractionMethod = {\n        API: 1,\n        DROP: 2,\n        BROWSE: 3,\n        PASTE: 4,\n        NONE: 5,\n    };\n\n    var getUniqueId = function getUniqueId() {\n        return Math.random()\n            .toString(36)\n            .substr(2, 9);\n    };\n\n    function _typeof(obj) {\n        if (typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol') {\n            _typeof = function(obj) {\n                return typeof obj;\n            };\n        } else {\n            _typeof = function(obj) {\n                return obj &&\n                    typeof Symbol === 'function' &&\n                    obj.constructor === Symbol &&\n                    obj !== Symbol.prototype\n                    ? 'symbol'\n                    : typeof obj;\n            };\n        }\n\n        return _typeof(obj);\n    }\n\n    var REACT_ELEMENT_TYPE;\n\n    function _jsx(type, props, key, children) {\n        if (!REACT_ELEMENT_TYPE) {\n            REACT_ELEMENT_TYPE =\n                (typeof Symbol === 'function' && Symbol['for'] && Symbol['for']('react.element')) ||\n                0xeac7;\n        }\n\n        var defaultProps = type && type.defaultProps;\n        var childrenLength = arguments.length - 3;\n\n        if (!props && childrenLength !== 0) {\n            props = {\n                children: void 0,\n            };\n        }\n\n        if (props && defaultProps) {\n            for (var propName in defaultProps) {\n                if (props[propName] === void 0) {\n                    props[propName] = defaultProps[propName];\n                }\n            }\n        } else if (!props) {\n            props = defaultProps || {};\n        }\n\n        if (childrenLength === 1) {\n            props.children = children;\n        } else if (childrenLength > 1) {\n            var childArray = new Array(childrenLength);\n\n            for (var i = 0; i < childrenLength; i++) {\n                childArray[i] = arguments[i + 3];\n            }\n\n            props.children = childArray;\n        }\n\n        return {\n            $$typeof: REACT_ELEMENT_TYPE,\n            type: type,\n            key: key === undefined ? null : '' + key,\n            ref: null,\n            props: props,\n            _owner: null,\n        };\n    }\n\n    function _asyncIterator(iterable) {\n        var method;\n\n        if (typeof Symbol !== 'undefined') {\n            if (Symbol.asyncIterator) {\n                method = iterable[Symbol.asyncIterator];\n                if (method != null) return method.call(iterable);\n            }\n\n            if (Symbol.iterator) {\n                method = iterable[Symbol.iterator];\n                if (method != null) return method.call(iterable);\n            }\n        }\n\n        throw new TypeError('Object is not async iterable');\n    }\n\n    function _AwaitValue(value) {\n        this.wrapped = value;\n    }\n\n    function _AsyncGenerator(gen) {\n        var front, back;\n\n        function send(key, arg) {\n            return new Promise(function(resolve, reject) {\n                var request = {\n                    key: key,\n                    arg: arg,\n                    resolve: resolve,\n                    reject: reject,\n                    next: null,\n                };\n\n                if (back) {\n                    back = back.next = request;\n                } else {\n                    front = back = request;\n                    resume(key, arg);\n                }\n            });\n        }\n\n        function resume(key, arg) {\n            try {\n                var result = gen[key](arg);\n                var value = result.value;\n                var wrappedAwait = value instanceof _AwaitValue;\n                Promise.resolve(wrappedAwait ? value.wrapped : value).then(\n                    function(arg) {\n                        if (wrappedAwait) {\n                            resume('next', arg);\n                            return;\n                        }\n\n                        settle(result.done ? 'return' : 'normal', arg);\n                    },\n                    function(err) {\n                        resume('throw', err);\n                    }\n                );\n            } catch (err) {\n                settle('throw', err);\n            }\n        }\n\n        function settle(type, value) {\n            switch (type) {\n                case 'return':\n                    front.resolve({\n                        value: value,\n                        done: true,\n                    });\n                    break;\n\n                case 'throw':\n                    front.reject(value);\n                    break;\n\n                default:\n                    front.resolve({\n                        value: value,\n                        done: false,\n                    });\n                    break;\n            }\n\n            front = front.next;\n\n            if (front) {\n                resume(front.key, front.arg);\n            } else {\n                back = null;\n            }\n        }\n\n        this._invoke = send;\n\n        if (typeof gen.return !== 'function') {\n            this.return = undefined;\n        }\n    }\n\n    if (typeof Symbol === 'function' && Symbol.asyncIterator) {\n        _AsyncGenerator.prototype[Symbol.asyncIterator] = function() {\n            return this;\n        };\n    }\n\n    _AsyncGenerator.prototype.next = function(arg) {\n        return this._invoke('next', arg);\n    };\n\n    _AsyncGenerator.prototype.throw = function(arg) {\n        return this._invoke('throw', arg);\n    };\n\n    _AsyncGenerator.prototype.return = function(arg) {\n        return this._invoke('return', arg);\n    };\n\n    function _wrapAsyncGenerator(fn) {\n        return function() {\n            return new _AsyncGenerator(fn.apply(this, arguments));\n        };\n    }\n\n    function _awaitAsyncGenerator(value) {\n        return new _AwaitValue(value);\n    }\n\n    function _asyncGeneratorDelegate(inner, awaitWrap) {\n        var iter = {},\n            waiting = false;\n\n        function pump(key, value) {\n            waiting = true;\n            value = new Promise(function(resolve) {\n                resolve(inner[key](value));\n            });\n            return {\n                done: false,\n                value: awaitWrap(value),\n            };\n        }\n\n        if (typeof Symbol === 'function' && Symbol.iterator) {\n            iter[Symbol.iterator] = function() {\n                return this;\n            };\n        }\n\n        iter.next = function(value) {\n            if (waiting) {\n                waiting = false;\n                return value;\n            }\n\n            return pump('next', value);\n        };\n\n        if (typeof inner.throw === 'function') {\n            iter.throw = function(value) {\n                if (waiting) {\n                    waiting = false;\n                    throw value;\n                }\n\n                return pump('throw', value);\n            };\n        }\n\n        if (typeof inner.return === 'function') {\n            iter.return = function(value) {\n                return pump('return', value);\n            };\n        }\n\n        return iter;\n    }\n\n    function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n        try {\n            var info = gen[key](arg);\n            var value = info.value;\n        } catch (error) {\n            reject(error);\n            return;\n        }\n\n        if (info.done) {\n            resolve(value);\n        } else {\n            Promise.resolve(value).then(_next, _throw);\n        }\n    }\n\n    function _asyncToGenerator(fn) {\n        return function() {\n            var self = this,\n                args = arguments;\n            return new Promise(function(resolve, reject) {\n                var gen = fn.apply(self, args);\n\n                function _next(value) {\n                    asyncGeneratorStep(gen, resolve, reject, _next, _throw, 'next', value);\n                }\n\n                function _throw(err) {\n                    asyncGeneratorStep(gen, resolve, reject, _next, _throw, 'throw', err);\n                }\n\n                _next(undefined);\n            });\n        };\n    }\n\n    function _classCallCheck(instance, Constructor) {\n        if (!(instance instanceof Constructor)) {\n            throw new TypeError('Cannot call a class as a function');\n        }\n    }\n\n    function _defineProperties(target, props) {\n        for (var i = 0; i < props.length; i++) {\n            var descriptor = props[i];\n            descriptor.enumerable = descriptor.enumerable || false;\n            descriptor.configurable = true;\n            if ('value' in descriptor) descriptor.writable = true;\n            Object.defineProperty(target, descriptor.key, descriptor);\n        }\n    }\n\n    function _createClass(Constructor, protoProps, staticProps) {\n        if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n        if (staticProps) _defineProperties(Constructor, staticProps);\n        return Constructor;\n    }\n\n    function _defineEnumerableProperties(obj, descs) {\n        for (var key in descs) {\n            var desc = descs[key];\n            desc.configurable = desc.enumerable = true;\n            if ('value' in desc) desc.writable = true;\n            Object.defineProperty(obj, key, desc);\n        }\n\n        if (Object.getOwnPropertySymbols) {\n            var objectSymbols = Object.getOwnPropertySymbols(descs);\n\n            for (var i = 0; i < objectSymbols.length; i++) {\n                var sym = objectSymbols[i];\n                var desc = descs[sym];\n                desc.configurable = desc.enumerable = true;\n                if ('value' in desc) desc.writable = true;\n                Object.defineProperty(obj, sym, desc);\n            }\n        }\n\n        return obj;\n    }\n\n    function _defaults(obj, defaults) {\n        var keys = Object.getOwnPropertyNames(defaults);\n\n        for (var i = 0; i < keys.length; i++) {\n            var key = keys[i];\n            var value = Object.getOwnPropertyDescriptor(defaults, key);\n\n            if (value && value.configurable && obj[key] === undefined) {\n                Object.defineProperty(obj, key, value);\n            }\n        }\n\n        return obj;\n    }\n\n    function _defineProperty(obj, key, value) {\n        if (key in obj) {\n            Object.defineProperty(obj, key, {\n                value: value,\n                enumerable: true,\n                configurable: true,\n                writable: true,\n            });\n        } else {\n            obj[key] = value;\n        }\n\n        return obj;\n    }\n\n    function _extends() {\n        _extends =\n            Object.assign ||\n            function(target) {\n                for (var i = 1; i < arguments.length; i++) {\n                    var source = arguments[i];\n\n                    for (var key in source) {\n                        if (Object.prototype.hasOwnProperty.call(source, key)) {\n                            target[key] = source[key];\n                        }\n                    }\n                }\n\n                return target;\n            };\n\n        return _extends.apply(this, arguments);\n    }\n\n    function _objectSpread(target) {\n        for (var i = 1; i < arguments.length; i++) {\n            var source = arguments[i] != null ? arguments[i] : {};\n            var ownKeys = Object.keys(source);\n\n            if (typeof Object.getOwnPropertySymbols === 'function') {\n                ownKeys = ownKeys.concat(\n                    Object.getOwnPropertySymbols(source).filter(function(sym) {\n                        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n                    })\n                );\n            }\n\n            ownKeys.forEach(function(key) {\n                _defineProperty(target, key, source[key]);\n            });\n        }\n\n        return target;\n    }\n\n    function ownKeys(object, enumerableOnly) {\n        var keys = Object.keys(object);\n\n        if (Object.getOwnPropertySymbols) {\n            var symbols = Object.getOwnPropertySymbols(object);\n            if (enumerableOnly)\n                symbols = symbols.filter(function(sym) {\n                    return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n                });\n            keys.push.apply(keys, symbols);\n        }\n\n        return keys;\n    }\n\n    function _objectSpread2(target) {\n        for (var i = 1; i < arguments.length; i++) {\n            var source = arguments[i] != null ? arguments[i] : {};\n\n            if (i % 2) {\n                ownKeys(source, true).forEach(function(key) {\n                    _defineProperty(target, key, source[key]);\n                });\n            } else if (Object.getOwnPropertyDescriptors) {\n                Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n            } else {\n                ownKeys(source).forEach(function(key) {\n                    Object.defineProperty(\n                        target,\n                        key,\n                        Object.getOwnPropertyDescriptor(source, key)\n                    );\n                });\n            }\n        }\n\n        return target;\n    }\n\n    function _inherits(subClass, superClass) {\n        if (typeof superClass !== 'function' && superClass !== null) {\n            throw new TypeError('Super expression must either be null or a function');\n        }\n\n        subClass.prototype = Object.create(superClass && superClass.prototype, {\n            constructor: {\n                value: subClass,\n                writable: true,\n                configurable: true,\n            },\n        });\n        if (superClass) _setPrototypeOf(subClass, superClass);\n    }\n\n    function _inheritsLoose(subClass, superClass) {\n        subClass.prototype = Object.create(superClass.prototype);\n        subClass.prototype.constructor = subClass;\n        subClass.__proto__ = superClass;\n    }\n\n    function _getPrototypeOf(o) {\n        _getPrototypeOf = Object.setPrototypeOf\n            ? Object.getPrototypeOf\n            : function _getPrototypeOf(o) {\n                  return o.__proto__ || Object.getPrototypeOf(o);\n              };\n        return _getPrototypeOf(o);\n    }\n\n    function _setPrototypeOf(o, p) {\n        _setPrototypeOf =\n            Object.setPrototypeOf ||\n            function _setPrototypeOf(o, p) {\n                o.__proto__ = p;\n                return o;\n            };\n\n        return _setPrototypeOf(o, p);\n    }\n\n    function isNativeReflectConstruct() {\n        if (typeof Reflect === 'undefined' || !Reflect.construct) return false;\n        if (Reflect.construct.sham) return false;\n        if (typeof Proxy === 'function') return true;\n\n        try {\n            Date.prototype.toString.call(Reflect.construct(Date, [], function() {}));\n            return true;\n        } catch (e) {\n            return false;\n        }\n    }\n\n    function _construct(Parent, args, Class) {\n        if (isNativeReflectConstruct()) {\n            _construct = Reflect.construct;\n        } else {\n            _construct = function _construct(Parent, args, Class) {\n                var a = [null];\n                a.push.apply(a, args);\n                var Constructor = Function.bind.apply(Parent, a);\n                var instance = new Constructor();\n                if (Class) _setPrototypeOf(instance, Class.prototype);\n                return instance;\n            };\n        }\n\n        return _construct.apply(null, arguments);\n    }\n\n    function _isNativeFunction(fn) {\n        return Function.toString.call(fn).indexOf('[native code]') !== -1;\n    }\n\n    function _wrapNativeSuper(Class) {\n        var _cache = typeof Map === 'function' ? new Map() : undefined;\n\n        _wrapNativeSuper = function _wrapNativeSuper(Class) {\n            if (Class === null || !_isNativeFunction(Class)) return Class;\n\n            if (typeof Class !== 'function') {\n                throw new TypeError('Super expression must either be null or a function');\n            }\n\n            if (typeof _cache !== 'undefined') {\n                if (_cache.has(Class)) return _cache.get(Class);\n\n                _cache.set(Class, Wrapper);\n            }\n\n            function Wrapper() {\n                return _construct(Class, arguments, _getPrototypeOf(this).constructor);\n            }\n\n            Wrapper.prototype = Object.create(Class.prototype, {\n                constructor: {\n                    value: Wrapper,\n                    enumerable: false,\n                    writable: true,\n                    configurable: true,\n                },\n            });\n            return _setPrototypeOf(Wrapper, Class);\n        };\n\n        return _wrapNativeSuper(Class);\n    }\n\n    function _instanceof(left, right) {\n        if (right != null && typeof Symbol !== 'undefined' && right[Symbol.hasInstance]) {\n            return !!right[Symbol.hasInstance](left);\n        } else {\n            return left instanceof right;\n        }\n    }\n\n    function _interopRequireDefault(obj) {\n        return obj && obj.__esModule\n            ? obj\n            : {\n                  default: obj,\n              };\n    }\n\n    function _interopRequireWildcard(obj) {\n        if (obj && obj.__esModule) {\n            return obj;\n        } else {\n            var newObj = {};\n\n            if (obj != null) {\n                for (var key in obj) {\n                    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n                        var desc =\n                            Object.defineProperty && Object.getOwnPropertyDescriptor\n                                ? Object.getOwnPropertyDescriptor(obj, key)\n                                : {};\n\n                        if (desc.get || desc.set) {\n                            Object.defineProperty(newObj, key, desc);\n                        } else {\n                            newObj[key] = obj[key];\n                        }\n                    }\n                }\n            }\n\n            newObj.default = obj;\n            return newObj;\n        }\n    }\n\n    function _newArrowCheck(innerThis, boundThis) {\n        if (innerThis !== boundThis) {\n            throw new TypeError('Cannot instantiate an arrow function');\n        }\n    }\n\n    function _objectDestructuringEmpty(obj) {\n        if (obj == null) throw new TypeError('Cannot destructure undefined');\n    }\n\n    function _objectWithoutPropertiesLoose(source, excluded) {\n        if (source == null) return {};\n        var target = {};\n        var sourceKeys = Object.keys(source);\n        var key, i;\n\n        for (i = 0; i < sourceKeys.length; i++) {\n            key = sourceKeys[i];\n            if (excluded.indexOf(key) >= 0) continue;\n            target[key] = source[key];\n        }\n\n        return target;\n    }\n\n    function _objectWithoutProperties(source, excluded) {\n        if (source == null) return {};\n\n        var target = _objectWithoutPropertiesLoose(source, excluded);\n\n        var key, i;\n\n        if (Object.getOwnPropertySymbols) {\n            var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n            for (i = 0; i < sourceSymbolKeys.length; i++) {\n                key = sourceSymbolKeys[i];\n                if (excluded.indexOf(key) >= 0) continue;\n                if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n                target[key] = source[key];\n            }\n        }\n\n        return target;\n    }\n\n    function _assertThisInitialized(self) {\n        if (self === void 0) {\n            throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n        }\n\n        return self;\n    }\n\n    function _possibleConstructorReturn(self, call) {\n        if (call && (typeof call === 'object' || typeof call === 'function')) {\n            return call;\n        }\n\n        return _assertThisInitialized(self);\n    }\n\n    function _superPropBase(object, property) {\n        while (!Object.prototype.hasOwnProperty.call(object, property)) {\n            object = _getPrototypeOf(object);\n            if (object === null) break;\n        }\n\n        return object;\n    }\n\n    function _get(target, property, receiver) {\n        if (typeof Reflect !== 'undefined' && Reflect.get) {\n            _get = Reflect.get;\n        } else {\n            _get = function _get(target, property, receiver) {\n                var base = _superPropBase(target, property);\n\n                if (!base) return;\n                var desc = Object.getOwnPropertyDescriptor(base, property);\n\n                if (desc.get) {\n                    return desc.get.call(receiver);\n                }\n\n                return desc.value;\n            };\n        }\n\n        return _get(target, property, receiver || target);\n    }\n\n    function set(target, property, value, receiver) {\n        if (typeof Reflect !== 'undefined' && Reflect.set) {\n            set = Reflect.set;\n        } else {\n            set = function set(target, property, value, receiver) {\n                var base = _superPropBase(target, property);\n\n                var desc;\n\n                if (base) {\n                    desc = Object.getOwnPropertyDescriptor(base, property);\n\n                    if (desc.set) {\n                        desc.set.call(receiver, value);\n                        return true;\n                    } else if (!desc.writable) {\n                        return false;\n                    }\n                }\n\n                desc = Object.getOwnPropertyDescriptor(receiver, property);\n\n                if (desc) {\n                    if (!desc.writable) {\n                        return false;\n                    }\n\n                    desc.value = value;\n                    Object.defineProperty(receiver, property, desc);\n                } else {\n                    _defineProperty(receiver, property, value);\n                }\n\n                return true;\n            };\n        }\n\n        return set(target, property, value, receiver);\n    }\n\n    function _set(target, property, value, receiver, isStrict) {\n        var s = set(target, property, value, receiver || target);\n\n        if (!s && isStrict) {\n            throw new Error('failed to set property');\n        }\n\n        return value;\n    }\n\n    function _taggedTemplateLiteral(strings, raw) {\n        if (!raw) {\n            raw = strings.slice(0);\n        }\n\n        return Object.freeze(\n            Object.defineProperties(strings, {\n                raw: {\n                    value: Object.freeze(raw),\n                },\n            })\n        );\n    }\n\n    function _taggedTemplateLiteralLoose(strings, raw) {\n        if (!raw) {\n            raw = strings.slice(0);\n        }\n\n        strings.raw = raw;\n        return strings;\n    }\n\n    function _temporalRef(val, name) {\n        if (val === _temporalUndefined) {\n            throw new ReferenceError(name + ' is not defined - temporal dead zone');\n        } else {\n            return val;\n        }\n    }\n\n    function _readOnlyError(name) {\n        throw new Error('\"' + name + '\" is read-only');\n    }\n\n    function _classNameTDZError(name) {\n        throw new Error('Class \"' + name + '\" cannot be referenced in computed property keys.');\n    }\n\n    var _temporalUndefined = {};\n\n    function _slicedToArray(arr, i) {\n        return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest();\n    }\n\n    function _slicedToArrayLoose(arr, i) {\n        return _arrayWithHoles(arr) || _iterableToArrayLimitLoose(arr, i) || _nonIterableRest();\n    }\n\n    function _toArray(arr) {\n        return _arrayWithHoles(arr) || _iterableToArray(arr) || _nonIterableRest();\n    }\n\n    function _toConsumableArray(arr) {\n        return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();\n    }\n\n    function _arrayWithoutHoles(arr) {\n        if (Array.isArray(arr)) {\n            for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n            return arr2;\n        }\n    }\n\n    function _arrayWithHoles(arr) {\n        if (Array.isArray(arr)) return arr;\n    }\n\n    function _iterableToArray(iter) {\n        if (\n            Symbol.iterator in Object(iter) ||\n            Object.prototype.toString.call(iter) === '[object Arguments]'\n        )\n            return Array.from(iter);\n    }\n\n    function _iterableToArrayLimit(arr, i) {\n        var _arr = [];\n        var _n = true;\n        var _d = false;\n        var _e = undefined;\n\n        try {\n            for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n                _arr.push(_s.value);\n\n                if (i && _arr.length === i) break;\n            }\n        } catch (err) {\n            _d = true;\n            _e = err;\n        } finally {\n            try {\n                if (!_n && _i['return'] != null) _i['return']();\n            } finally {\n                if (_d) throw _e;\n            }\n        }\n\n        return _arr;\n    }\n\n    function _iterableToArrayLimitLoose(arr, i) {\n        var _arr = [];\n\n        for (var _iterator = arr[Symbol.iterator](), _step; !(_step = _iterator.next()).done; ) {\n            _arr.push(_step.value);\n\n            if (i && _arr.length === i) break;\n        }\n\n        return _arr;\n    }\n\n    function _nonIterableSpread() {\n        throw new TypeError('Invalid attempt to spread non-iterable instance');\n    }\n\n    function _nonIterableRest() {\n        throw new TypeError('Invalid attempt to destructure non-iterable instance');\n    }\n\n    function _skipFirstGeneratorNext(fn) {\n        return function() {\n            var it = fn.apply(this, arguments);\n            it.next();\n            return it;\n        };\n    }\n\n    function _toPrimitive(input, hint) {\n        if (typeof input !== 'object' || input === null) return input;\n        var prim = input[Symbol.toPrimitive];\n\n        if (prim !== undefined) {\n            var res = prim.call(input, hint || 'default');\n            if (typeof res !== 'object') return res;\n            throw new TypeError('@@toPrimitive must return a primitive value.');\n        }\n\n        return (hint === 'string' ? String : Number)(input);\n    }\n\n    function _toPropertyKey(arg) {\n        var key = _toPrimitive(arg, 'string');\n\n        return typeof key === 'symbol' ? key : String(key);\n    }\n\n    function _initializerWarningHelper(descriptor, context) {\n        throw new Error(\n            'Decorating class property failed. Please ensure that ' +\n                'proposal-class-properties is enabled and set to use loose mode. ' +\n                'To use proposal-class-properties in spec mode with decorators, wait for ' +\n                'the next major version of decorators in stage 2.'\n        );\n    }\n\n    function _initializerDefineProperty(target, property, descriptor, context) {\n        if (!descriptor) return;\n        Object.defineProperty(target, property, {\n            enumerable: descriptor.enumerable,\n            configurable: descriptor.configurable,\n            writable: descriptor.writable,\n            value: descriptor.initializer ? descriptor.initializer.call(context) : void 0,\n        });\n    }\n\n    function _applyDecoratedDescriptor(target, property, decorators, descriptor, context) {\n        var desc = {};\n        Object.keys(descriptor).forEach(function(key) {\n            desc[key] = descriptor[key];\n        });\n        desc.enumerable = !!desc.enumerable;\n        desc.configurable = !!desc.configurable;\n\n        if ('value' in desc || desc.initializer) {\n            desc.writable = true;\n        }\n\n        desc = decorators\n            .slice()\n            .reverse()\n            .reduce(function(desc, decorator) {\n                return decorator(target, property, desc) || desc;\n            }, desc);\n\n        if (context && desc.initializer !== void 0) {\n            desc.value = desc.initializer ? desc.initializer.call(context) : void 0;\n            desc.initializer = undefined;\n        }\n\n        if (desc.initializer === void 0) {\n            Object.defineProperty(target, property, desc);\n            desc = null;\n        }\n\n        return desc;\n    }\n\n    var id = 0;\n\n    function _classPrivateFieldLooseKey(name) {\n        return '__private_' + id++ + '_' + name;\n    }\n\n    function _classPrivateFieldLooseBase(receiver, privateKey) {\n        if (!Object.prototype.hasOwnProperty.call(receiver, privateKey)) {\n            throw new TypeError('attempted to use private field on non-instance');\n        }\n\n        return receiver;\n    }\n\n    function _classPrivateFieldGet(receiver, privateMap) {\n        var descriptor = privateMap.get(receiver);\n\n        if (!descriptor) {\n            throw new TypeError('attempted to get private field on non-instance');\n        }\n\n        if (descriptor.get) {\n            return descriptor.get.call(receiver);\n        }\n\n        return descriptor.value;\n    }\n\n    function _classPrivateFieldSet(receiver, privateMap, value) {\n        var descriptor = privateMap.get(receiver);\n\n        if (!descriptor) {\n            throw new TypeError('attempted to set private field on non-instance');\n        }\n\n        if (descriptor.set) {\n            descriptor.set.call(receiver, value);\n        } else {\n            if (!descriptor.writable) {\n                throw new TypeError('attempted to set read only private field');\n            }\n\n            descriptor.value = value;\n        }\n\n        return value;\n    }\n\n    function _classPrivateFieldDestructureSet(receiver, privateMap) {\n        if (!privateMap.has(receiver)) {\n            throw new TypeError('attempted to set private field on non-instance');\n        }\n\n        var descriptor = privateMap.get(receiver);\n\n        if (descriptor.set) {\n            if (!('__destrObj' in descriptor)) {\n                descriptor.__destrObj = {\n                    set value(v) {\n                        descriptor.set.call(receiver, v);\n                    },\n                };\n            }\n\n            return descriptor.__destrObj;\n        } else {\n            if (!descriptor.writable) {\n                throw new TypeError('attempted to set read only private field');\n            }\n\n            return descriptor;\n        }\n    }\n\n    function _classStaticPrivateFieldSpecGet(receiver, classConstructor, descriptor) {\n        if (receiver !== classConstructor) {\n            throw new TypeError('Private static access of wrong provenance');\n        }\n\n        return descriptor.value;\n    }\n\n    function _classStaticPrivateFieldSpecSet(receiver, classConstructor, descriptor, value) {\n        if (receiver !== classConstructor) {\n            throw new TypeError('Private static access of wrong provenance');\n        }\n\n        if (!descriptor.writable) {\n            throw new TypeError('attempted to set read only private field');\n        }\n\n        descriptor.value = value;\n        return value;\n    }\n\n    function _classStaticPrivateMethodGet(receiver, classConstructor, method) {\n        if (receiver !== classConstructor) {\n            throw new TypeError('Private static access of wrong provenance');\n        }\n\n        return method;\n    }\n\n    function _classStaticPrivateMethodSet() {\n        throw new TypeError('attempted to set read only static private field');\n    }\n\n    function _decorate(decorators, factory, superClass, mixins) {\n        var api = _getDecoratorsApi();\n\n        if (mixins) {\n            for (var i = 0; i < mixins.length; i++) {\n                api = mixins[i](api);\n            }\n        }\n\n        var r = factory(function initialize(O) {\n            api.initializeInstanceElements(O, decorated.elements);\n        }, superClass);\n        var decorated = api.decorateClass(\n            _coalesceClassElements(r.d.map(_createElementDescriptor)),\n            decorators\n        );\n        api.initializeClassElements(r.F, decorated.elements);\n        return api.runClassFinishers(r.F, decorated.finishers);\n    }\n\n    function _getDecoratorsApi() {\n        _getDecoratorsApi = function() {\n            return api;\n        };\n\n        var api = {\n            elementsDefinitionOrder: [['method'], ['field']],\n            initializeInstanceElements: function(O, elements) {\n                ['method', 'field'].forEach(function(kind) {\n                    elements.forEach(function(element) {\n                        if (element.kind === kind && element.placement === 'own') {\n                            this.defineClassElement(O, element);\n                        }\n                    }, this);\n                }, this);\n            },\n            initializeClassElements: function(F, elements) {\n                var proto = F.prototype;\n                ['method', 'field'].forEach(function(kind) {\n                    elements.forEach(function(element) {\n                        var placement = element.placement;\n\n                        if (\n                            element.kind === kind &&\n                            (placement === 'static' || placement === 'prototype')\n                        ) {\n                            var receiver = placement === 'static' ? F : proto;\n                            this.defineClassElement(receiver, element);\n                        }\n                    }, this);\n                }, this);\n            },\n            defineClassElement: function(receiver, element) {\n                var descriptor = element.descriptor;\n\n                if (element.kind === 'field') {\n                    var initializer = element.initializer;\n                    descriptor = {\n                        enumerable: descriptor.enumerable,\n                        writable: descriptor.writable,\n                        configurable: descriptor.configurable,\n                        value: initializer === void 0 ? void 0 : initializer.call(receiver),\n                    };\n                }\n\n                Object.defineProperty(receiver, element.key, descriptor);\n            },\n            decorateClass: function(elements, decorators) {\n                var newElements = [];\n                var finishers = [];\n                var placements = {\n                    static: [],\n                    prototype: [],\n                    own: [],\n                };\n                elements.forEach(function(element) {\n                    this.addElementPlacement(element, placements);\n                }, this);\n                elements.forEach(function(element) {\n                    if (!_hasDecorators(element)) return newElements.push(element);\n                    var elementFinishersExtras = this.decorateElement(element, placements);\n                    newElements.push(elementFinishersExtras.element);\n                    newElements.push.apply(newElements, elementFinishersExtras.extras);\n                    finishers.push.apply(finishers, elementFinishersExtras.finishers);\n                }, this);\n\n                if (!decorators) {\n                    return {\n                        elements: newElements,\n                        finishers: finishers,\n                    };\n                }\n\n                var result = this.decorateConstructor(newElements, decorators);\n                finishers.push.apply(finishers, result.finishers);\n                result.finishers = finishers;\n                return result;\n            },\n            addElementPlacement: function(element, placements, silent) {\n                var keys = placements[element.placement];\n\n                if (!silent && keys.indexOf(element.key) !== -1) {\n                    throw new TypeError('Duplicated element (' + element.key + ')');\n                }\n\n                keys.push(element.key);\n            },\n            decorateElement: function(element, placements) {\n                var extras = [];\n                var finishers = [];\n\n                for (var decorators = element.decorators, i = decorators.length - 1; i >= 0; i--) {\n                    var keys = placements[element.placement];\n                    keys.splice(keys.indexOf(element.key), 1);\n                    var elementObject = this.fromElementDescriptor(element);\n                    var elementFinisherExtras = this.toElementFinisherExtras(\n                        (0, decorators[i])(elementObject) || elementObject\n                    );\n                    element = elementFinisherExtras.element;\n                    this.addElementPlacement(element, placements);\n\n                    if (elementFinisherExtras.finisher) {\n                        finishers.push(elementFinisherExtras.finisher);\n                    }\n\n                    var newExtras = elementFinisherExtras.extras;\n\n                    if (newExtras) {\n                        for (var j = 0; j < newExtras.length; j++) {\n                            this.addElementPlacement(newExtras[j], placements);\n                        }\n\n                        extras.push.apply(extras, newExtras);\n                    }\n                }\n\n                return {\n                    element: element,\n                    finishers: finishers,\n                    extras: extras,\n                };\n            },\n            decorateConstructor: function(elements, decorators) {\n                var finishers = [];\n\n                for (var i = decorators.length - 1; i >= 0; i--) {\n                    var obj = this.fromClassDescriptor(elements);\n                    var elementsAndFinisher = this.toClassDescriptor(\n                        (0, decorators[i])(obj) || obj\n                    );\n\n                    if (elementsAndFinisher.finisher !== undefined) {\n                        finishers.push(elementsAndFinisher.finisher);\n                    }\n\n                    if (elementsAndFinisher.elements !== undefined) {\n                        elements = elementsAndFinisher.elements;\n\n                        for (var j = 0; j < elements.length - 1; j++) {\n                            for (var k = j + 1; k < elements.length; k++) {\n                                if (\n                                    elements[j].key === elements[k].key &&\n                                    elements[j].placement === elements[k].placement\n                                ) {\n                                    throw new TypeError(\n                                        'Duplicated element (' + elements[j].key + ')'\n                                    );\n                                }\n                            }\n                        }\n                    }\n                }\n\n                return {\n                    elements: elements,\n                    finishers: finishers,\n                };\n            },\n            fromElementDescriptor: function(element) {\n                var obj = {\n                    kind: element.kind,\n                    key: element.key,\n                    placement: element.placement,\n                    descriptor: element.descriptor,\n                };\n                var desc = {\n                    value: 'Descriptor',\n                    configurable: true,\n                };\n                Object.defineProperty(obj, Symbol.toStringTag, desc);\n                if (element.kind === 'field') obj.initializer = element.initializer;\n                return obj;\n            },\n            toElementDescriptors: function(elementObjects) {\n                if (elementObjects === undefined) return;\n                return _toArray(elementObjects).map(function(elementObject) {\n                    var element = this.toElementDescriptor(elementObject);\n                    this.disallowProperty(elementObject, 'finisher', 'An element descriptor');\n                    this.disallowProperty(elementObject, 'extras', 'An element descriptor');\n                    return element;\n                }, this);\n            },\n            toElementDescriptor: function(elementObject) {\n                var kind = String(elementObject.kind);\n\n                if (kind !== 'method' && kind !== 'field') {\n                    throw new TypeError(\n                        'An element descriptor\\'s .kind property must be either \"method\" or' +\n                            ' \"field\", but a decorator created an element descriptor with' +\n                            ' .kind \"' +\n                            kind +\n                            '\"'\n                    );\n                }\n\n                var key = _toPropertyKey(elementObject.key);\n\n                var placement = String(elementObject.placement);\n\n                if (placement !== 'static' && placement !== 'prototype' && placement !== 'own') {\n                    throw new TypeError(\n                        'An element descriptor\\'s .placement property must be one of \"static\",' +\n                            ' \"prototype\" or \"own\", but a decorator created an element descriptor' +\n                            ' with .placement \"' +\n                            placement +\n                            '\"'\n                    );\n                }\n\n                var descriptor = elementObject.descriptor;\n                this.disallowProperty(elementObject, 'elements', 'An element descriptor');\n                var element = {\n                    kind: kind,\n                    key: key,\n                    placement: placement,\n                    descriptor: Object.assign({}, descriptor),\n                };\n\n                if (kind !== 'field') {\n                    this.disallowProperty(elementObject, 'initializer', 'A method descriptor');\n                } else {\n                    this.disallowProperty(\n                        descriptor,\n                        'get',\n                        'The property descriptor of a field descriptor'\n                    );\n                    this.disallowProperty(\n                        descriptor,\n                        'set',\n                        'The property descriptor of a field descriptor'\n                    );\n                    this.disallowProperty(\n                        descriptor,\n                        'value',\n                        'The property descriptor of a field descriptor'\n                    );\n                    element.initializer = elementObject.initializer;\n                }\n\n                return element;\n            },\n            toElementFinisherExtras: function(elementObject) {\n                var element = this.toElementDescriptor(elementObject);\n\n                var finisher = _optionalCallableProperty(elementObject, 'finisher');\n\n                var extras = this.toElementDescriptors(elementObject.extras);\n                return {\n                    element: element,\n                    finisher: finisher,\n                    extras: extras,\n                };\n            },\n            fromClassDescriptor: function(elements) {\n                var obj = {\n                    kind: 'class',\n                    elements: elements.map(this.fromElementDescriptor, this),\n                };\n                var desc = {\n                    value: 'Descriptor',\n                    configurable: true,\n                };\n                Object.defineProperty(obj, Symbol.toStringTag, desc);\n                return obj;\n            },\n            toClassDescriptor: function(obj) {\n                var kind = String(obj.kind);\n\n                if (kind !== 'class') {\n                    throw new TypeError(\n                        'A class descriptor\\'s .kind property must be \"class\", but a decorator' +\n                            ' created a class descriptor with .kind \"' +\n                            kind +\n                            '\"'\n                    );\n                }\n\n                this.disallowProperty(obj, 'key', 'A class descriptor');\n                this.disallowProperty(obj, 'placement', 'A class descriptor');\n                this.disallowProperty(obj, 'descriptor', 'A class descriptor');\n                this.disallowProperty(obj, 'initializer', 'A class descriptor');\n                this.disallowProperty(obj, 'extras', 'A class descriptor');\n\n                var finisher = _optionalCallableProperty(obj, 'finisher');\n\n                var elements = this.toElementDescriptors(obj.elements);\n                return {\n                    elements: elements,\n                    finisher: finisher,\n                };\n            },\n            runClassFinishers: function(constructor, finishers) {\n                for (var i = 0; i < finishers.length; i++) {\n                    var newConstructor = (0, finishers[i])(constructor);\n\n                    if (newConstructor !== undefined) {\n                        if (typeof newConstructor !== 'function') {\n                            throw new TypeError('Finishers must return a constructor.');\n                        }\n\n                        constructor = newConstructor;\n                    }\n                }\n\n                return constructor;\n            },\n            disallowProperty: function(obj, name, objectType) {\n                if (obj[name] !== undefined) {\n                    throw new TypeError(objectType + \" can't have a .\" + name + ' property.');\n                }\n            },\n        };\n        return api;\n    }\n\n    function _createElementDescriptor(def) {\n        var key = _toPropertyKey(def.key);\n\n        var descriptor;\n\n        if (def.kind === 'method') {\n            descriptor = {\n                value: def.value,\n                writable: true,\n                configurable: true,\n                enumerable: false,\n            };\n        } else if (def.kind === 'get') {\n            descriptor = {\n                get: def.value,\n                configurable: true,\n                enumerable: false,\n            };\n        } else if (def.kind === 'set') {\n            descriptor = {\n                set: def.value,\n                configurable: true,\n                enumerable: false,\n            };\n        } else if (def.kind === 'field') {\n            descriptor = {\n                configurable: true,\n                writable: true,\n                enumerable: true,\n            };\n        }\n\n        var element = {\n            kind: def.kind === 'field' ? 'field' : 'method',\n            key: key,\n            placement: def.static ? 'static' : def.kind === 'field' ? 'own' : 'prototype',\n            descriptor: descriptor,\n        };\n        if (def.decorators) element.decorators = def.decorators;\n        if (def.kind === 'field') element.initializer = def.value;\n        return element;\n    }\n\n    function _coalesceGetterSetter(element, other) {\n        if (element.descriptor.get !== undefined) {\n            other.descriptor.get = element.descriptor.get;\n        } else {\n            other.descriptor.set = element.descriptor.set;\n        }\n    }\n\n    function _coalesceClassElements(elements) {\n        var newElements = [];\n\n        var isSameElement = function(other) {\n            return (\n                other.kind === 'method' &&\n                other.key === element.key &&\n                other.placement === element.placement\n            );\n        };\n\n        for (var i = 0; i < elements.length; i++) {\n            var element = elements[i];\n            var other;\n\n            if (element.kind === 'method' && (other = newElements.find(isSameElement))) {\n                if (_isDataDescriptor(element.descriptor) || _isDataDescriptor(other.descriptor)) {\n                    if (_hasDecorators(element) || _hasDecorators(other)) {\n                        throw new ReferenceError(\n                            'Duplicated methods (' + element.key + \") can't be decorated.\"\n                        );\n                    }\n\n                    other.descriptor = element.descriptor;\n                } else {\n                    if (_hasDecorators(element)) {\n                        if (_hasDecorators(other)) {\n                            throw new ReferenceError(\n                                \"Decorators can't be placed on different accessors with for \" +\n                                    'the same property (' +\n                                    element.key +\n                                    ').'\n                            );\n                        }\n\n                        other.decorators = element.decorators;\n                    }\n\n                    _coalesceGetterSetter(element, other);\n                }\n            } else {\n                newElements.push(element);\n            }\n        }\n\n        return newElements;\n    }\n\n    function _hasDecorators(element) {\n        return element.decorators && element.decorators.length;\n    }\n\n    function _isDataDescriptor(desc) {\n        return desc !== undefined && !(desc.value === undefined && desc.writable === undefined);\n    }\n\n    function _optionalCallableProperty(obj, name) {\n        var value = obj[name];\n\n        if (value !== undefined && typeof value !== 'function') {\n            throw new TypeError(\"Expected '\" + name + \"' to be a function\");\n        }\n\n        return value;\n    }\n\n    function _classPrivateMethodGet(receiver, privateSet, fn) {\n        if (!privateSet.has(receiver)) {\n            throw new TypeError('attempted to get private field on non-instance');\n        }\n\n        return fn;\n    }\n\n    function _classPrivateMethodSet() {\n        throw new TypeError('attempted to reassign private method');\n    }\n\n    function _wrapRegExp(re, groups) {\n        _wrapRegExp = function(re, groups) {\n            return new BabelRegExp(re, groups);\n        };\n\n        var _RegExp = _wrapNativeSuper(RegExp);\n\n        var _super = RegExp.prototype;\n\n        var _groups = new WeakMap();\n\n        function BabelRegExp(re, groups) {\n            var _this = _RegExp.call(this, re);\n\n            _groups.set(_this, groups);\n\n            return _this;\n        }\n\n        _inherits(BabelRegExp, _RegExp);\n\n        BabelRegExp.prototype.exec = function(str) {\n            var result = _super.exec.call(this, str);\n\n            if (result) result.groups = buildGroups(result, this);\n            return result;\n        };\n\n        BabelRegExp.prototype[Symbol.replace] = function(str, substitution) {\n            if (typeof substitution === 'string') {\n                var groups = _groups.get(this);\n\n                return _super[Symbol.replace].call(\n                    this,\n                    str,\n                    substitution.replace(/\\$<([^>]+)>/g, function(_, name) {\n                        return '$' + groups[name];\n                    })\n                );\n            } else if (typeof substitution === 'function') {\n                var _this = this;\n\n                return _super[Symbol.replace].call(this, str, function() {\n                    var args = [];\n                    args.push.apply(args, arguments);\n\n                    if (typeof args[args.length - 1] !== 'object') {\n                        args.push(buildGroups(args, _this));\n                    }\n\n                    return substitution.apply(this, args);\n                });\n            } else {\n                return _super[Symbol.replace].call(this, str, substitution);\n            }\n        };\n\n        function buildGroups(result, re) {\n            var g = _groups.get(re);\n\n            return Object.keys(g).reduce(function(groups, name) {\n                groups[name] = result[g[name]];\n                return groups;\n            }, Object.create(null));\n        }\n\n        return _wrapRegExp.apply(this, arguments);\n    }\n\n    var arrayRemove = function arrayRemove(arr, index) {\n        return arr.splice(index, 1);\n    };\n\n    var run = function run(cb, sync) {\n        if (sync) {\n            cb();\n        } else if (document.hidden) {\n            Promise.resolve(1).then(cb);\n        } else {\n            setTimeout(cb, 0);\n        }\n    };\n\n    var on = function on() {\n        var listeners = [];\n        var off = function off(event, cb) {\n            arrayRemove(\n                listeners,\n                listeners.findIndex(function(listener) {\n                    return listener.event === event && (listener.cb === cb || !cb);\n                })\n            );\n        };\n        var _fire = function fire(event, args, sync) {\n            listeners\n                .filter(function(listener) {\n                    return listener.event === event;\n                })\n                .map(function(listener) {\n                    return listener.cb;\n                })\n                .forEach(function(cb) {\n                    return run(function() {\n                        return cb.apply(void 0, _toConsumableArray(args));\n                    }, sync);\n                });\n        };\n        return {\n            fireSync: function fireSync(event) {\n                for (\n                    var _len = arguments.length,\n                        args = new Array(_len > 1 ? _len - 1 : 0),\n                        _key = 1;\n                    _key < _len;\n                    _key++\n                ) {\n                    args[_key - 1] = arguments[_key];\n                }\n                _fire(event, args, true);\n            },\n            fire: function fire(event) {\n                for (\n                    var _len2 = arguments.length,\n                        args = new Array(_len2 > 1 ? _len2 - 1 : 0),\n                        _key2 = 1;\n                    _key2 < _len2;\n                    _key2++\n                ) {\n                    args[_key2 - 1] = arguments[_key2];\n                }\n                _fire(event, args, false);\n            },\n            on: function on(event, cb) {\n                listeners.push({ event: event, cb: cb });\n            },\n            onOnce: function onOnce(event, _cb) {\n                listeners.push({\n                    event: event,\n                    cb: function cb() {\n                        off(event, _cb);\n                        _cb.apply(void 0, arguments);\n                    },\n                });\n            },\n            off: off,\n        };\n    };\n\n    var copyObjectPropertiesToObject = function copyObjectPropertiesToObject(\n        src,\n        target,\n        excluded\n    ) {\n        Object.getOwnPropertyNames(src)\n            .filter(function(property) {\n                return !excluded.includes(property);\n            })\n            .forEach(function(key) {\n                return Object.defineProperty(\n                    target,\n                    key,\n                    Object.getOwnPropertyDescriptor(src, key)\n                );\n            });\n    };\n\n    var PRIVATE = [\n        'fire',\n        'process',\n        'revert',\n        'load',\n        'on',\n        'off',\n        'onOnce',\n        'retryLoad',\n        'extend',\n        'archive',\n        'archived',\n        'release',\n        'released',\n        'requestProcessing',\n        'freeze',\n    ];\n\n    var createItemAPI = function createItemAPI(item) {\n        var api = {};\n        copyObjectPropertiesToObject(item, api, PRIVATE);\n        return api;\n    };\n\n    var removeReleasedItems = function removeReleasedItems(items) {\n        items.forEach(function(item, index) {\n            if (item.released) {\n                arrayRemove(items, index);\n            }\n        });\n    };\n\n    var ItemStatus = {\n        INIT: 1,\n        IDLE: 2,\n        PROCESSING_QUEUED: 9,\n        PROCESSING: 3,\n        PROCESSING_COMPLETE: 5,\n        PROCESSING_ERROR: 6,\n        PROCESSING_REVERT_ERROR: 10,\n        LOADING: 7,\n        LOAD_ERROR: 8,\n    };\n\n    var FileOrigin = {\n        INPUT: 1,\n        LIMBO: 2,\n        LOCAL: 3,\n    };\n\n    var getNonNumeric = function getNonNumeric(str) {\n        return /[^0-9]+/.exec(str);\n    };\n\n    var getDecimalSeparator = function getDecimalSeparator() {\n        return getNonNumeric((1.1).toLocaleString())[0];\n    };\n\n    var getThousandsSeparator = function getThousandsSeparator() {\n        // Added for browsers that do not return the thousands separator (happend on native browser Android 4.4.4)\n        // We check against the normal toString output and if they're the same return a comma when decimal separator is a dot\n        var decimalSeparator = getDecimalSeparator();\n        var thousandsStringWithSeparator = (1000.0).toLocaleString();\n        var thousandsStringWithoutSeparator = (1000.0).toString();\n        if (thousandsStringWithSeparator !== thousandsStringWithoutSeparator) {\n            return getNonNumeric(thousandsStringWithSeparator)[0];\n        }\n        return decimalSeparator === '.' ? ',' : '.';\n    };\n\n    var Type = {\n        BOOLEAN: 'boolean',\n        INT: 'int',\n        NUMBER: 'number',\n        STRING: 'string',\n        ARRAY: 'array',\n        OBJECT: 'object',\n        FUNCTION: 'function',\n        ACTION: 'action',\n        SERVER_API: 'serverapi',\n        REGEX: 'regex',\n    };\n\n    // all registered filters\n    var filters = [];\n\n    // loops over matching filters and passes options to each filter, returning the mapped results\n    var applyFilterChain = function applyFilterChain(key, value, utils) {\n        return new Promise(function(resolve, reject) {\n            // find matching filters for this key\n            var matchingFilters = filters\n                .filter(function(f) {\n                    return f.key === key;\n                })\n                .map(function(f) {\n                    return f.cb;\n                });\n\n            // resolve now\n            if (matchingFilters.length === 0) {\n                resolve(value);\n                return;\n            }\n\n            // first filter to kick things of\n            var initialFilter = matchingFilters.shift();\n\n            // chain filters\n            matchingFilters\n                .reduce(\n                    // loop over promises passing value to next promise\n                    function(current, next) {\n                        return current.then(function(value) {\n                            return next(value, utils);\n                        });\n                    },\n\n                    // call initial filter, will return a promise\n                    initialFilter(value, utils)\n\n                    // all executed\n                )\n                .then(function(value) {\n                    return resolve(value);\n                })\n                .catch(function(error) {\n                    return reject(error);\n                });\n        });\n    };\n\n    var applyFilters = function applyFilters(key, value, utils) {\n        return filters\n            .filter(function(f) {\n                return f.key === key;\n            })\n            .map(function(f) {\n                return f.cb(value, utils);\n            });\n    };\n\n    // adds a new filter to the list\n    var addFilter = function addFilter(key, cb) {\n        return filters.push({ key: key, cb: cb });\n    };\n\n    var extendDefaultOptions = function extendDefaultOptions(additionalOptions) {\n        return Object.assign(defaultOptions, additionalOptions);\n    };\n\n    var getOptions = function getOptions() {\n        return Object.assign({}, defaultOptions);\n    };\n\n    var setOptions = function setOptions(opts) {\n        forin(opts, function(key, value) {\n            // key does not exist, so this option cannot be set\n            if (!defaultOptions[key]) {\n                return;\n            }\n            defaultOptions[key][0] = getValueByType(\n                value,\n                defaultOptions[key][0],\n                defaultOptions[key][1]\n            );\n        });\n    };\n\n    // default options on app\n    var defaultOptions = {\n        // the id to add to the root element\n        id: [null, Type.STRING],\n\n        // input field name to use\n        name: ['filepond', Type.STRING],\n\n        // disable the field\n        disabled: [false, Type.BOOLEAN],\n\n        // classname to put on wrapper\n        className: [null, Type.STRING],\n\n        // is the field required\n        required: [false, Type.BOOLEAN],\n\n        // Allow media capture when value is set\n        captureMethod: [null, Type.STRING],\n        // - \"camera\", \"microphone\" or \"camcorder\",\n        // - Does not work with multiple on apple devices\n        // - If set, acceptedFileTypes must be made to match with media wildcard \"image/*\", \"audio/*\" or \"video/*\"\n\n        // sync `acceptedFileTypes` property with `accept` attribute\n        allowSyncAcceptAttribute: [true, Type.BOOLEAN],\n\n        // Feature toggles\n        allowDrop: [true, Type.BOOLEAN], // Allow dropping of files\n        allowBrowse: [true, Type.BOOLEAN], // Allow browsing the file system\n        allowPaste: [true, Type.BOOLEAN], // Allow pasting files\n        allowMultiple: [false, Type.BOOLEAN], // Allow multiple files (disabled by default, as multiple attribute is also required on input to allow multiple)\n        allowReplace: [true, Type.BOOLEAN], // Allow dropping a file on other file to replace it (only works when multiple is set to false)\n        allowRevert: [true, Type.BOOLEAN], // Allows user to revert file upload\n        allowRemove: [true, Type.BOOLEAN], // Allow user to remove a file\n        allowProcess: [true, Type.BOOLEAN], // Allows user to process a file, when set to false, this removes the file upload button\n        allowReorder: [false, Type.BOOLEAN], // Allow reordering of files\n        allowDirectoriesOnly: [false, Type.BOOLEAN], // Allow only selecting directories with browse (no support for filtering dnd at this point)\n\n        // Try store file if `server` not set\n        storeAsFile: [false, Type.BOOLEAN],\n\n        // Revert mode\n        forceRevert: [false, Type.BOOLEAN], // Set to 'force' to require the file to be reverted before removal\n\n        // Input requirements\n        maxFiles: [null, Type.INT], // Max number of files\n        checkValidity: [false, Type.BOOLEAN], // Enables custom validity messages\n\n        // Where to put file\n        itemInsertLocationFreedom: [true, Type.BOOLEAN], // Set to false to always add items to begin or end of list\n        itemInsertLocation: ['before', Type.STRING], // Default index in list to add items that have been dropped at the top of the list\n        itemInsertInterval: [75, Type.INT],\n\n        // Drag 'n Drop related\n        dropOnPage: [false, Type.BOOLEAN], // Allow dropping of files anywhere on page (prevents browser from opening file if dropped outside of Up)\n        dropOnElement: [true, Type.BOOLEAN], // Drop needs to happen on element (set to false to also load drops outside of Up)\n        dropValidation: [false, Type.BOOLEAN], // Enable or disable validating files on drop\n        ignoredFiles: [['.ds_store', 'thumbs.db', 'desktop.ini'], Type.ARRAY],\n\n        // Upload related\n        instantUpload: [true, Type.BOOLEAN], // Should upload files immediately on drop\n        maxParallelUploads: [2, Type.INT], // Maximum files to upload in parallel\n        allowMinimumUploadDuration: [true, Type.BOOLEAN], // if true uploads take at least 750 ms, this ensures the user sees the upload progress giving trust the upload actually happened\n\n        // Chunks\n        chunkUploads: [false, Type.BOOLEAN], // Enable chunked uploads\n        chunkForce: [false, Type.BOOLEAN], // Force use of chunk uploads even for files smaller than chunk size\n        chunkSize: [5000000, Type.INT], // Size of chunks (5MB default)\n        chunkRetryDelays: [[500, 1000, 3000], Type.ARRAY], // Amount of times to retry upload of a chunk when it fails\n\n        // The server api end points to use for uploading (see docs)\n        server: [null, Type.SERVER_API],\n\n        // File size calculations, can set to 1024, this is only used for display, properties use file size base 1000\n        fileSizeBase: [1000, Type.INT],\n\n        // Labels and status messages\n        labelDecimalSeparator: [getDecimalSeparator(), Type.STRING], // Default is locale separator\n        labelThousandsSeparator: [getThousandsSeparator(), Type.STRING], // Default is locale separator\n\n        labelIdle: [\n            'Drag & Drop your files or <span class=\"filepond--label-action\">Browse</span>',\n            Type.STRING,\n        ],\n\n        labelInvalidField: ['Field contains invalid files', Type.STRING],\n        labelFileWaitingForSize: ['Waiting for size', Type.STRING],\n        labelFileSizeNotAvailable: ['Size not available', Type.STRING],\n        labelFileCountSingular: ['file in list', Type.STRING],\n        labelFileCountPlural: ['files in list', Type.STRING],\n        labelFileLoading: ['Loading', Type.STRING],\n        labelFileAdded: ['Added', Type.STRING], // assistive only\n        labelFileLoadError: ['Error during load', Type.STRING],\n        labelFileRemoved: ['Removed', Type.STRING], // assistive only\n        labelFileRemoveError: ['Error during remove', Type.STRING],\n        labelFileProcessing: ['Uploading', Type.STRING],\n        labelFileProcessingComplete: ['Upload complete', Type.STRING],\n        labelFileProcessingAborted: ['Upload cancelled', Type.STRING],\n        labelFileProcessingError: ['Error during upload', Type.STRING],\n        labelFileProcessingRevertError: ['Error during revert', Type.STRING],\n\n        labelTapToCancel: ['tap to cancel', Type.STRING],\n        labelTapToRetry: ['tap to retry', Type.STRING],\n        labelTapToUndo: ['tap to undo', Type.STRING],\n\n        labelButtonRemoveItem: ['Remove', Type.STRING],\n        labelButtonAbortItemLoad: ['Abort', Type.STRING],\n        labelButtonRetryItemLoad: ['Retry', Type.STRING],\n        labelButtonAbortItemProcessing: ['Cancel', Type.STRING],\n        labelButtonUndoItemProcessing: ['Undo', Type.STRING],\n        labelButtonRetryItemProcessing: ['Retry', Type.STRING],\n        labelButtonProcessItem: ['Upload', Type.STRING],\n\n        // make sure width and height plus viewpox are even numbers so icons are nicely centered\n        iconRemove: [\n            '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n            Type.STRING,\n        ],\n\n        iconProcess: [\n            '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z\" fill=\"currentColor\" fill-rule=\"evenodd\"/></svg>',\n            Type.STRING,\n        ],\n\n        iconRetry: [\n            '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n            Type.STRING,\n        ],\n\n        iconUndo: [\n            '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n            Type.STRING,\n        ],\n\n        iconDone: [\n            '<svg width=\"26\" height=\"26\" viewBox=\"0 0 26 26\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z\" fill=\"currentColor\" fill-rule=\"nonzero\"/></svg>',\n            Type.STRING,\n        ],\n\n        // event handlers\n        oninit: [null, Type.FUNCTION],\n        onwarning: [null, Type.FUNCTION],\n        onerror: [null, Type.FUNCTION],\n        onactivatefile: [null, Type.FUNCTION],\n        oninitfile: [null, Type.FUNCTION],\n        onaddfilestart: [null, Type.FUNCTION],\n        onaddfileprogress: [null, Type.FUNCTION],\n        onaddfile: [null, Type.FUNCTION],\n        onprocessfilestart: [null, Type.FUNCTION],\n        onprocessfileprogress: [null, Type.FUNCTION],\n        onprocessfileabort: [null, Type.FUNCTION],\n        onprocessfilerevert: [null, Type.FUNCTION],\n        onprocessfile: [null, Type.FUNCTION],\n        onprocessfiles: [null, Type.FUNCTION],\n        onremovefile: [null, Type.FUNCTION],\n        onpreparefile: [null, Type.FUNCTION],\n        onupdatefiles: [null, Type.FUNCTION],\n        onreorderfiles: [null, Type.FUNCTION],\n\n        // hooks\n        beforeDropFile: [null, Type.FUNCTION],\n        beforeAddFile: [null, Type.FUNCTION],\n        beforeRemoveFile: [null, Type.FUNCTION],\n        beforePrepareFile: [null, Type.FUNCTION],\n\n        // styles\n        stylePanelLayout: [null, Type.STRING], // null 'integrated', 'compact', 'circle'\n        stylePanelAspectRatio: [null, Type.STRING], // null or '3:2' or 1\n        styleItemPanelAspectRatio: [null, Type.STRING],\n        styleButtonRemoveItemPosition: ['left', Type.STRING],\n        styleButtonProcessItemPosition: ['right', Type.STRING],\n        styleLoadIndicatorPosition: ['right', Type.STRING],\n        styleProgressIndicatorPosition: ['right', Type.STRING],\n        styleButtonRemoveItemAlign: [false, Type.BOOLEAN],\n\n        // custom initial files array\n        files: [[], Type.ARRAY],\n\n        // show support by displaying credits\n        credits: [['https://pqina.nl/', 'Powered by PQINA'], Type.ARRAY],\n    };\n\n    var getItemByQuery = function getItemByQuery(items, query) {\n        // just return first index\n        if (isEmpty(query)) {\n            return items[0] || null;\n        }\n\n        // query is index\n        if (isInt(query)) {\n            return items[query] || null;\n        }\n\n        // if query is item, get the id\n        if (typeof query === 'object') {\n            query = query.id;\n        }\n\n        // assume query is a string and return item by id\n        return (\n            items.find(function(item) {\n                return item.id === query;\n            }) || null\n        );\n    };\n\n    var getNumericAspectRatioFromString = function getNumericAspectRatioFromString(aspectRatio) {\n        if (isEmpty(aspectRatio)) {\n            return aspectRatio;\n        }\n        if (/:/.test(aspectRatio)) {\n            var parts = aspectRatio.split(':');\n            return parts[1] / parts[0];\n        }\n        return parseFloat(aspectRatio);\n    };\n\n    var getActiveItems = function getActiveItems(items) {\n        return items.filter(function(item) {\n            return !item.archived;\n        });\n    };\n\n    var Status = {\n        EMPTY: 0,\n        IDLE: 1, // waiting\n        ERROR: 2, // a file is in error state\n        BUSY: 3, // busy processing or loading\n        READY: 4, // all files uploaded\n    };\n\n    var res = null;\n    var canUpdateFileInput = function canUpdateFileInput() {\n        if (res === null) {\n            try {\n                var dataTransfer = new DataTransfer();\n                dataTransfer.items.add(new File(['hello world'], 'This_Works.txt'));\n                var el = document.createElement('input');\n                el.setAttribute('type', 'file');\n                el.files = dataTransfer.files;\n                res = el.files.length === 1;\n            } catch (err) {\n                res = false;\n            }\n        }\n        return res;\n    };\n\n    var ITEM_ERROR = [\n        ItemStatus.LOAD_ERROR,\n        ItemStatus.PROCESSING_ERROR,\n        ItemStatus.PROCESSING_REVERT_ERROR,\n    ];\n\n    var ITEM_BUSY = [\n        ItemStatus.LOADING,\n        ItemStatus.PROCESSING,\n        ItemStatus.PROCESSING_QUEUED,\n        ItemStatus.INIT,\n    ];\n\n    var ITEM_READY = [ItemStatus.PROCESSING_COMPLETE];\n\n    var isItemInErrorState = function isItemInErrorState(item) {\n        return ITEM_ERROR.includes(item.status);\n    };\n    var isItemInBusyState = function isItemInBusyState(item) {\n        return ITEM_BUSY.includes(item.status);\n    };\n    var isItemInReadyState = function isItemInReadyState(item) {\n        return ITEM_READY.includes(item.status);\n    };\n\n    var isAsync = function isAsync(state) {\n        return (\n            isObject(state.options.server) &&\n            (isObject(state.options.server.process) || isFunction(state.options.server.process))\n        );\n    };\n\n    var queries = function queries(state) {\n        return {\n            GET_STATUS: function GET_STATUS() {\n                var items = getActiveItems(state.items);\n                var EMPTY = Status.EMPTY,\n                    ERROR = Status.ERROR,\n                    BUSY = Status.BUSY,\n                    IDLE = Status.IDLE,\n                    READY = Status.READY;\n\n                if (items.length === 0) return EMPTY;\n\n                if (items.some(isItemInErrorState)) return ERROR;\n\n                if (items.some(isItemInBusyState)) return BUSY;\n\n                if (items.some(isItemInReadyState)) return READY;\n\n                return IDLE;\n            },\n\n            GET_ITEM: function GET_ITEM(query) {\n                return getItemByQuery(state.items, query);\n            },\n\n            GET_ACTIVE_ITEM: function GET_ACTIVE_ITEM(query) {\n                return getItemByQuery(getActiveItems(state.items), query);\n            },\n\n            GET_ACTIVE_ITEMS: function GET_ACTIVE_ITEMS() {\n                return getActiveItems(state.items);\n            },\n\n            GET_ITEMS: function GET_ITEMS() {\n                return state.items;\n            },\n\n            GET_ITEM_NAME: function GET_ITEM_NAME(query) {\n                var item = getItemByQuery(state.items, query);\n                return item ? item.filename : null;\n            },\n\n            GET_ITEM_SIZE: function GET_ITEM_SIZE(query) {\n                var item = getItemByQuery(state.items, query);\n                return item ? item.fileSize : null;\n            },\n\n            GET_STYLES: function GET_STYLES() {\n                return Object.keys(state.options)\n                    .filter(function(key) {\n                        return /^style/.test(key);\n                    })\n                    .map(function(option) {\n                        return {\n                            name: option,\n                            value: state.options[option],\n                        };\n                    });\n            },\n\n            GET_PANEL_ASPECT_RATIO: function GET_PANEL_ASPECT_RATIO() {\n                var isShapeCircle = /circle/.test(state.options.stylePanelLayout);\n                var aspectRatio = isShapeCircle\n                    ? 1\n                    : getNumericAspectRatioFromString(state.options.stylePanelAspectRatio);\n                return aspectRatio;\n            },\n\n            GET_ITEM_PANEL_ASPECT_RATIO: function GET_ITEM_PANEL_ASPECT_RATIO() {\n                return state.options.styleItemPanelAspectRatio;\n            },\n\n            GET_ITEMS_BY_STATUS: function GET_ITEMS_BY_STATUS(status) {\n                return getActiveItems(state.items).filter(function(item) {\n                    return item.status === status;\n                });\n            },\n\n            GET_TOTAL_ITEMS: function GET_TOTAL_ITEMS() {\n                return getActiveItems(state.items).length;\n            },\n\n            SHOULD_UPDATE_FILE_INPUT: function SHOULD_UPDATE_FILE_INPUT() {\n                return state.options.storeAsFile && canUpdateFileInput() && !isAsync(state);\n            },\n\n            IS_ASYNC: function IS_ASYNC() {\n                return isAsync(state);\n            },\n        };\n    };\n\n    var hasRoomForItem = function hasRoomForItem(state) {\n        var count = getActiveItems(state.items).length;\n\n        // if cannot have multiple items, to add one item it should currently not contain items\n        if (!state.options.allowMultiple) {\n            return count === 0;\n        }\n\n        // if allows multiple items, we check if a max item count has been set, if not, there's no limit\n        var maxFileCount = state.options.maxFiles;\n        if (maxFileCount === null) {\n            return true;\n        }\n\n        // we check if the current count is smaller than the max count, if so, another file can still be added\n        if (count < maxFileCount) {\n            return true;\n        }\n\n        // no more room for another file\n        return false;\n    };\n\n    var limit = function limit(value, min, max) {\n        return Math.max(Math.min(max, value), min);\n    };\n\n    var arrayInsert = function arrayInsert(arr, index, item) {\n        return arr.splice(index, 0, item);\n    };\n\n    var insertItem = function insertItem(items, item, index) {\n        if (isEmpty(item)) {\n            return null;\n        }\n\n        // if index is undefined, append\n        if (typeof index === 'undefined') {\n            items.push(item);\n            return item;\n        }\n\n        // limit the index to the size of the items array\n        index = limit(index, 0, items.length);\n\n        // add item to array\n        arrayInsert(items, index, item);\n\n        // expose\n        return item;\n    };\n\n    var isBase64DataURI = function isBase64DataURI(str) {\n        return /^\\s*data:([a-z]+\\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\\-._~:@\\/?%\\s]*)\\s*$/i.test(\n            str\n        );\n    };\n\n    var getFilenameFromURL = function getFilenameFromURL(url) {\n        return url\n            .split('/')\n            .pop()\n            .split('?')\n            .shift();\n    };\n\n    var getExtensionFromFilename = function getExtensionFromFilename(name) {\n        return name.split('.').pop();\n    };\n\n    var guesstimateExtension = function guesstimateExtension(type) {\n        // if no extension supplied, exit here\n        if (typeof type !== 'string') {\n            return '';\n        }\n\n        // get subtype\n        var subtype = type.split('/').pop();\n\n        // is svg subtype\n        if (/svg/.test(subtype)) {\n            return 'svg';\n        }\n\n        if (/zip|compressed/.test(subtype)) {\n            return 'zip';\n        }\n\n        if (/plain/.test(subtype)) {\n            return 'txt';\n        }\n\n        if (/msword/.test(subtype)) {\n            return 'doc';\n        }\n\n        // if is valid subtype\n        if (/[a-z]+/.test(subtype)) {\n            // always use jpg extension\n            if (subtype === 'jpeg') {\n                return 'jpg';\n            }\n\n            // return subtype\n            return subtype;\n        }\n\n        return '';\n    };\n\n    var leftPad = function leftPad(value) {\n        var padding = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n        return (padding + value).slice(-padding.length);\n    };\n\n    var getDateString = function getDateString() {\n        var date = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Date();\n        return (\n            date.getFullYear() +\n            '-' +\n            leftPad(date.getMonth() + 1, '00') +\n            '-' +\n            leftPad(date.getDate(), '00') +\n            '_' +\n            leftPad(date.getHours(), '00') +\n            '-' +\n            leftPad(date.getMinutes(), '00') +\n            '-' +\n            leftPad(date.getSeconds(), '00')\n        );\n    };\n\n    var getFileFromBlob = function getFileFromBlob(blob, filename) {\n        var type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n        var extension = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n        var file =\n            typeof type === 'string'\n                ? blob.slice(0, blob.size, type)\n                : blob.slice(0, blob.size, blob.type);\n        file.lastModifiedDate = new Date();\n\n        // copy relative path\n        if (blob._relativePath) file._relativePath = blob._relativePath;\n\n        // if blob has name property, use as filename if no filename supplied\n        if (!isString(filename)) {\n            filename = getDateString();\n        }\n\n        // if filename supplied but no extension and filename has extension\n        if (filename && extension === null && getExtensionFromFilename(filename)) {\n            file.name = filename;\n        } else {\n            extension = extension || guesstimateExtension(file.type);\n            file.name = filename + (extension ? '.' + extension : '');\n        }\n\n        return file;\n    };\n\n    var getBlobBuilder = function getBlobBuilder() {\n        return (window.BlobBuilder =\n            window.BlobBuilder ||\n            window.WebKitBlobBuilder ||\n            window.MozBlobBuilder ||\n            window.MSBlobBuilder);\n    };\n\n    var createBlob = function createBlob(arrayBuffer, mimeType) {\n        var BB = getBlobBuilder();\n\n        if (BB) {\n            var bb = new BB();\n            bb.append(arrayBuffer);\n            return bb.getBlob(mimeType);\n        }\n\n        return new Blob([arrayBuffer], {\n            type: mimeType,\n        });\n    };\n\n    var getBlobFromByteStringWithMimeType = function getBlobFromByteStringWithMimeType(\n        byteString,\n        mimeType\n    ) {\n        var ab = new ArrayBuffer(byteString.length);\n        var ia = new Uint8Array(ab);\n\n        for (var i = 0; i < byteString.length; i++) {\n            ia[i] = byteString.charCodeAt(i);\n        }\n\n        return createBlob(ab, mimeType);\n    };\n\n    var getMimeTypeFromBase64DataURI = function getMimeTypeFromBase64DataURI(dataURI) {\n        return (/^data:(.+);/.exec(dataURI) || [])[1] || null;\n    };\n\n    var getBase64DataFromBase64DataURI = function getBase64DataFromBase64DataURI(dataURI) {\n        // get data part of string (remove data:image/jpeg...,)\n        var data = dataURI.split(',')[1];\n\n        // remove any whitespace as that causes InvalidCharacterError in IE\n        return data.replace(/\\s/g, '');\n    };\n\n    var getByteStringFromBase64DataURI = function getByteStringFromBase64DataURI(dataURI) {\n        return atob(getBase64DataFromBase64DataURI(dataURI));\n    };\n\n    var getBlobFromBase64DataURI = function getBlobFromBase64DataURI(dataURI) {\n        var mimeType = getMimeTypeFromBase64DataURI(dataURI);\n        var byteString = getByteStringFromBase64DataURI(dataURI);\n\n        return getBlobFromByteStringWithMimeType(byteString, mimeType);\n    };\n\n    var getFileFromBase64DataURI = function getFileFromBase64DataURI(dataURI, filename, extension) {\n        return getFileFromBlob(getBlobFromBase64DataURI(dataURI), filename, null, extension);\n    };\n\n    var getFileNameFromHeader = function getFileNameFromHeader(header) {\n        // test if is content disposition header, if not exit\n        if (!/^content-disposition:/i.test(header)) return null;\n\n        // get filename parts\n        var matches = header\n            .split(/filename=|filename\\*=.+''/)\n            .splice(1)\n            .map(function(name) {\n                return name.trim().replace(/^[\"']|[;\"']{0,2}$/g, '');\n            })\n            .filter(function(name) {\n                return name.length;\n            });\n\n        return matches.length ? decodeURI(matches[matches.length - 1]) : null;\n    };\n\n    var getFileSizeFromHeader = function getFileSizeFromHeader(header) {\n        if (/content-length:/i.test(header)) {\n            var size = header.match(/[0-9]+/)[0];\n            return size ? parseInt(size, 10) : null;\n        }\n        return null;\n    };\n\n    var getTranfserIdFromHeader = function getTranfserIdFromHeader(header) {\n        if (/x-content-transfer-id:/i.test(header)) {\n            var id = (header.split(':')[1] || '').trim();\n            return id || null;\n        }\n        return null;\n    };\n\n    var getFileInfoFromHeaders = function getFileInfoFromHeaders(headers) {\n        var info = {\n            source: null,\n            name: null,\n            size: null,\n        };\n\n        var rows = headers.split('\\n');\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n        try {\n            for (\n                var _iterator = rows[Symbol.iterator](), _step;\n                !(_iteratorNormalCompletion = (_step = _iterator.next()).done);\n                _iteratorNormalCompletion = true\n            ) {\n                var header = _step.value;\n\n                var name = getFileNameFromHeader(header);\n                if (name) {\n                    info.name = name;\n                    continue;\n                }\n\n                var size = getFileSizeFromHeader(header);\n                if (size) {\n                    info.size = size;\n                    continue;\n                }\n\n                var source = getTranfserIdFromHeader(header);\n                if (source) {\n                    info.source = source;\n                    continue;\n                }\n            }\n        } catch (err) {\n            _didIteratorError = true;\n            _iteratorError = err;\n        } finally {\n            try {\n                if (!_iteratorNormalCompletion && _iterator.return != null) {\n                    _iterator.return();\n                }\n            } finally {\n                if (_didIteratorError) {\n                    throw _iteratorError;\n                }\n            }\n        }\n\n        return info;\n    };\n\n    var createFileLoader = function createFileLoader(fetchFn) {\n        var state = {\n            source: null,\n            complete: false,\n            progress: 0,\n            size: null,\n            timestamp: null,\n            duration: 0,\n            request: null,\n        };\n\n        var getProgress = function getProgress() {\n            return state.progress;\n        };\n        var abort = function abort() {\n            if (state.request && state.request.abort) {\n                state.request.abort();\n            }\n        };\n\n        // load source\n        var load = function load() {\n            // get quick reference\n            var source = state.source;\n\n            api.fire('init', source);\n\n            // Load Files\n            if (source instanceof File) {\n                api.fire('load', source);\n            } else if (source instanceof Blob) {\n                // Load blobs, set default name to current date\n                api.fire('load', getFileFromBlob(source, source.name));\n            } else if (isBase64DataURI(source)) {\n                // Load base 64, set default name to current date\n                api.fire('load', getFileFromBase64DataURI(source));\n            } else {\n                // Deal as if is external URL, let's load it!\n                loadURL(source);\n            }\n        };\n\n        // loads a url\n        var loadURL = function loadURL(url) {\n            // is remote url and no fetch method supplied\n            if (!fetchFn) {\n                api.fire('error', {\n                    type: 'error',\n                    body: \"Can't load URL\",\n                    code: 400,\n                });\n\n                return;\n            }\n\n            // set request start\n            state.timestamp = Date.now();\n\n            // load file\n            state.request = fetchFn(\n                url,\n                function(response) {\n                    // update duration\n                    state.duration = Date.now() - state.timestamp;\n\n                    // done!\n                    state.complete = true;\n\n                    // turn blob response into a file\n                    if (response instanceof Blob) {\n                        response = getFileFromBlob(\n                            response,\n                            response.name || getFilenameFromURL(url)\n                        );\n                    }\n\n                    api.fire(\n                        'load',\n                        // if has received blob, we go with blob, if no response, we return null\n                        response instanceof Blob ? response : response ? response.body : null\n                    );\n                },\n                function(error) {\n                    api.fire(\n                        'error',\n                        typeof error === 'string'\n                            ? {\n                                  type: 'error',\n                                  code: 0,\n                                  body: error,\n                              }\n                            : error\n                    );\n                },\n                function(computable, current, total) {\n                    // collected some meta data already\n                    if (total) {\n                        state.size = total;\n                    }\n\n                    // update duration\n                    state.duration = Date.now() - state.timestamp;\n\n                    // if we can't compute progress, we're not going to fire progress events\n                    if (!computable) {\n                        state.progress = null;\n                        return;\n                    }\n\n                    // update progress percentage\n                    state.progress = current / total;\n\n                    // expose\n                    api.fire('progress', state.progress);\n                },\n                function() {\n                    api.fire('abort');\n                },\n                function(response) {\n                    var fileinfo = getFileInfoFromHeaders(\n                        typeof response === 'string' ? response : response.headers\n                    );\n                    api.fire('meta', {\n                        size: state.size || fileinfo.size,\n                        filename: fileinfo.name,\n                        source: fileinfo.source,\n                    });\n                }\n            );\n        };\n\n        var api = Object.assign({}, on(), {\n            setSource: function setSource(source) {\n                return (state.source = source);\n            },\n            getProgress: getProgress, // file load progress\n            abort: abort, // abort file load\n            load: load, // start load\n        });\n\n        return api;\n    };\n\n    var isGet = function isGet(method) {\n        return /GET|HEAD/.test(method);\n    };\n\n    var sendRequest = function sendRequest(data, url, options) {\n        var api = {\n            onheaders: function onheaders() {},\n            onprogress: function onprogress() {},\n            onload: function onload() {},\n            ontimeout: function ontimeout() {},\n            onerror: function onerror() {},\n            onabort: function onabort() {},\n            abort: function abort() {\n                aborted = true;\n                xhr.abort();\n            },\n        };\n\n        // timeout identifier, only used when timeout is defined\n        var aborted = false;\n        var headersReceived = false;\n\n        // set default options\n        options = Object.assign(\n            {\n                method: 'POST',\n                headers: {},\n                withCredentials: false,\n            },\n            options\n        );\n\n        // encode url\n        url = encodeURI(url);\n\n        // if method is GET, add any received data to url\n\n        if (isGet(options.method) && data) {\n            url =\n                '' +\n                url +\n                encodeURIComponent(typeof data === 'string' ? data : JSON.stringify(data));\n        }\n\n        // create request\n        var xhr = new XMLHttpRequest();\n\n        // progress of load\n        var process = isGet(options.method) ? xhr : xhr.upload;\n        process.onprogress = function(e) {\n            // no progress event when aborted ( onprogress is called once after abort() )\n            if (aborted) {\n                return;\n            }\n\n            api.onprogress(e.lengthComputable, e.loaded, e.total);\n        };\n\n        // tries to get header info to the app as fast as possible\n        xhr.onreadystatechange = function() {\n            // not interesting in these states ('unsent' and 'openend' as they don't give us any additional info)\n            if (xhr.readyState < 2) {\n                return;\n            }\n\n            // no server response\n            if (xhr.readyState === 4 && xhr.status === 0) {\n                return;\n            }\n\n            if (headersReceived) {\n                return;\n            }\n\n            headersReceived = true;\n\n            // we've probably received some useful data in response headers\n            api.onheaders(xhr);\n        };\n\n        // load successful\n        xhr.onload = function() {\n            // is classified as valid response\n            if (xhr.status >= 200 && xhr.status < 300) {\n                api.onload(xhr);\n            } else {\n                api.onerror(xhr);\n            }\n        };\n\n        // error during load\n        xhr.onerror = function() {\n            return api.onerror(xhr);\n        };\n\n        // request aborted\n        xhr.onabort = function() {\n            aborted = true;\n            api.onabort();\n        };\n\n        // request timeout\n        xhr.ontimeout = function() {\n            return api.ontimeout(xhr);\n        };\n\n        // open up open up!\n        xhr.open(options.method, url, true);\n\n        // set timeout if defined (do it after open so IE11 plays ball)\n        if (isInt(options.timeout)) {\n            xhr.timeout = options.timeout;\n        }\n\n        // add headers\n        Object.keys(options.headers).forEach(function(key) {\n            var value = unescape(encodeURIComponent(options.headers[key]));\n            xhr.setRequestHeader(key, value);\n        });\n\n        // set type of response\n        if (options.responseType) {\n            xhr.responseType = options.responseType;\n        }\n\n        // set credentials\n        if (options.withCredentials) {\n            xhr.withCredentials = true;\n        }\n\n        // let's send our data\n        xhr.send(data);\n\n        return api;\n    };\n\n    var createResponse = function createResponse(type, code, body, headers) {\n        return {\n            type: type,\n            code: code,\n            body: body,\n            headers: headers,\n        };\n    };\n\n    var createTimeoutResponse = function createTimeoutResponse(cb) {\n        return function(xhr) {\n            cb(createResponse('error', 0, 'Timeout', xhr.getAllResponseHeaders()));\n        };\n    };\n\n    var hasQS = function hasQS(str) {\n        return /\\?/.test(str);\n    };\n    var buildURL = function buildURL() {\n        var url = '';\n        for (var _len = arguments.length, parts = new Array(_len), _key = 0; _key < _len; _key++) {\n            parts[_key] = arguments[_key];\n        }\n        parts.forEach(function(part) {\n            url += hasQS(url) && hasQS(part) ? part.replace(/\\?/, '&') : part;\n        });\n        return url;\n    };\n\n    var createFetchFunction = function createFetchFunction() {\n        var apiUrl = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n        var action = arguments.length > 1 ? arguments[1] : undefined;\n        // custom handler (should also handle file, load, error, progress and abort)\n        if (typeof action === 'function') {\n            return action;\n        }\n\n        // no action supplied\n        if (!action || !isString(action.url)) {\n            return null;\n        }\n\n        // set onload hanlder\n        var onload =\n            action.onload ||\n            function(res) {\n                return res;\n            };\n        var onerror =\n            action.onerror ||\n            function(res) {\n                return null;\n            };\n\n        // internal handler\n        return function(url, load, error, progress, abort, headers) {\n            // do local or remote request based on if the url is external\n            var request = sendRequest(\n                url,\n                buildURL(apiUrl, action.url),\n                Object.assign({}, action, {\n                    responseType: 'blob',\n                })\n            );\n\n            request.onload = function(xhr) {\n                // get headers\n                var headers = xhr.getAllResponseHeaders();\n\n                // get filename\n                var filename = getFileInfoFromHeaders(headers).name || getFilenameFromURL(url);\n\n                // create response\n                load(\n                    createResponse(\n                        'load',\n                        xhr.status,\n                        action.method === 'HEAD'\n                            ? null\n                            : getFileFromBlob(onload(xhr.response), filename),\n                        headers\n                    )\n                );\n            };\n\n            request.onerror = function(xhr) {\n                error(\n                    createResponse(\n                        'error',\n                        xhr.status,\n                        onerror(xhr.response) || xhr.statusText,\n                        xhr.getAllResponseHeaders()\n                    )\n                );\n            };\n\n            request.onheaders = function(xhr) {\n                headers(createResponse('headers', xhr.status, null, xhr.getAllResponseHeaders()));\n            };\n\n            request.ontimeout = createTimeoutResponse(error);\n            request.onprogress = progress;\n            request.onabort = abort;\n\n            // should return request\n            return request;\n        };\n    };\n\n    var ChunkStatus = {\n        QUEUED: 0,\n        COMPLETE: 1,\n        PROCESSING: 2,\n        ERROR: 3,\n        WAITING: 4,\n    };\n\n    /*\n                                                       function signature:\n                                                         (file, metadata, load, error, progress, abort, transfer, options) => {\n                                                           return {\n                                                           abort:() => {}\n                                                         }\n                                                       }\n                                                       */\n\n    // apiUrl, action, name, file, metadata, load, error, progress, abort, transfer, options\n    var processFileChunked = function processFileChunked(\n        apiUrl,\n        action,\n        name,\n        file,\n        metadata,\n        load,\n        error,\n        progress,\n        abort,\n        transfer,\n        options\n    ) {\n        // all chunks\n        var chunks = [];\n        var chunkTransferId = options.chunkTransferId,\n            chunkServer = options.chunkServer,\n            chunkSize = options.chunkSize,\n            chunkRetryDelays = options.chunkRetryDelays;\n\n        // default state\n        var state = {\n            serverId: chunkTransferId,\n            aborted: false,\n        };\n\n        // set onload handlers\n        var ondata =\n            action.ondata ||\n            function(fd) {\n                return fd;\n            };\n        var onload =\n            action.onload ||\n            function(xhr, method) {\n                return method === 'HEAD' ? xhr.getResponseHeader('Upload-Offset') : xhr.response;\n            };\n        var onerror =\n            action.onerror ||\n            function(res) {\n                return null;\n            };\n\n        // create server hook\n        var requestTransferId = function requestTransferId(cb) {\n            var formData = new FormData();\n\n            // add metadata under same name\n            if (isObject(metadata)) formData.append(name, JSON.stringify(metadata));\n\n            var headers =\n                typeof action.headers === 'function'\n                    ? action.headers(file, metadata)\n                    : Object.assign({}, action.headers, {\n                          'Upload-Length': file.size,\n                      });\n\n            var requestParams = Object.assign({}, action, {\n                headers: headers,\n            });\n\n            // send request object\n            var request = sendRequest(\n                ondata(formData),\n                buildURL(apiUrl, action.url),\n                requestParams\n            );\n\n            request.onload = function(xhr) {\n                return cb(onload(xhr, requestParams.method));\n            };\n\n            request.onerror = function(xhr) {\n                return error(\n                    createResponse(\n                        'error',\n                        xhr.status,\n                        onerror(xhr.response) || xhr.statusText,\n                        xhr.getAllResponseHeaders()\n                    )\n                );\n            };\n\n            request.ontimeout = createTimeoutResponse(error);\n        };\n\n        var requestTransferOffset = function requestTransferOffset(cb) {\n            var requestUrl = buildURL(apiUrl, chunkServer.url, state.serverId);\n\n            var headers =\n                typeof action.headers === 'function'\n                    ? action.headers(state.serverId)\n                    : Object.assign({}, action.headers);\n\n            var requestParams = {\n                headers: headers,\n                method: 'HEAD',\n            };\n\n            var request = sendRequest(null, requestUrl, requestParams);\n\n            request.onload = function(xhr) {\n                return cb(onload(xhr, requestParams.method));\n            };\n\n            request.onerror = function(xhr) {\n                return error(\n                    createResponse(\n                        'error',\n                        xhr.status,\n                        onerror(xhr.response) || xhr.statusText,\n                        xhr.getAllResponseHeaders()\n                    )\n                );\n            };\n\n            request.ontimeout = createTimeoutResponse(error);\n        };\n\n        // create chunks\n        var lastChunkIndex = Math.floor(file.size / chunkSize);\n        for (var i = 0; i <= lastChunkIndex; i++) {\n            var offset = i * chunkSize;\n            var data = file.slice(offset, offset + chunkSize, 'application/offset+octet-stream');\n            chunks[i] = {\n                index: i,\n                size: data.size,\n                offset: offset,\n                data: data,\n                file: file,\n                progress: 0,\n                retries: _toConsumableArray(chunkRetryDelays),\n                status: ChunkStatus.QUEUED,\n                error: null,\n                request: null,\n                timeout: null,\n            };\n        }\n\n        var completeProcessingChunks = function completeProcessingChunks() {\n            return load(state.serverId);\n        };\n\n        var canProcessChunk = function canProcessChunk(chunk) {\n            return chunk.status === ChunkStatus.QUEUED || chunk.status === ChunkStatus.ERROR;\n        };\n\n        var processChunk = function processChunk(chunk) {\n            // processing is paused, wait here\n            if (state.aborted) return;\n\n            // get next chunk to process\n            chunk = chunk || chunks.find(canProcessChunk);\n\n            // no more chunks to process\n            if (!chunk) {\n                // all done?\n                if (\n                    chunks.every(function(chunk) {\n                        return chunk.status === ChunkStatus.COMPLETE;\n                    })\n                ) {\n                    completeProcessingChunks();\n                }\n\n                // no chunk to handle\n                return;\n            }\n\n            // now processing this chunk\n            chunk.status = ChunkStatus.PROCESSING;\n            chunk.progress = null;\n\n            // allow parsing of formdata\n            var ondata =\n                chunkServer.ondata ||\n                function(fd) {\n                    return fd;\n                };\n            var onerror =\n                chunkServer.onerror ||\n                function(res) {\n                    return null;\n                };\n\n            // send request object\n            var requestUrl = buildURL(apiUrl, chunkServer.url, state.serverId);\n\n            var headers =\n                typeof chunkServer.headers === 'function'\n                    ? chunkServer.headers(chunk)\n                    : Object.assign({}, chunkServer.headers, {\n                          'Content-Type': 'application/offset+octet-stream',\n                          'Upload-Offset': chunk.offset,\n                          'Upload-Length': file.size,\n                          'Upload-Name': file.name,\n                      });\n\n            var request = (chunk.request = sendRequest(\n                ondata(chunk.data),\n                requestUrl,\n                Object.assign({}, chunkServer, {\n                    headers: headers,\n                })\n            ));\n\n            request.onload = function() {\n                // done!\n                chunk.status = ChunkStatus.COMPLETE;\n\n                // remove request reference\n                chunk.request = null;\n\n                // start processing more chunks\n                processChunks();\n            };\n\n            request.onprogress = function(lengthComputable, loaded, total) {\n                chunk.progress = lengthComputable ? loaded : null;\n                updateTotalProgress();\n            };\n\n            request.onerror = function(xhr) {\n                chunk.status = ChunkStatus.ERROR;\n                chunk.request = null;\n                chunk.error = onerror(xhr.response) || xhr.statusText;\n                if (!retryProcessChunk(chunk)) {\n                    error(\n                        createResponse(\n                            'error',\n                            xhr.status,\n                            onerror(xhr.response) || xhr.statusText,\n                            xhr.getAllResponseHeaders()\n                        )\n                    );\n                }\n            };\n\n            request.ontimeout = function(xhr) {\n                chunk.status = ChunkStatus.ERROR;\n                chunk.request = null;\n                if (!retryProcessChunk(chunk)) {\n                    createTimeoutResponse(error)(xhr);\n                }\n            };\n\n            request.onabort = function() {\n                chunk.status = ChunkStatus.QUEUED;\n                chunk.request = null;\n                abort();\n            };\n        };\n\n        var retryProcessChunk = function retryProcessChunk(chunk) {\n            // no more retries left\n            if (chunk.retries.length === 0) return false;\n\n            // new retry\n            chunk.status = ChunkStatus.WAITING;\n            clearTimeout(chunk.timeout);\n            chunk.timeout = setTimeout(function() {\n                processChunk(chunk);\n            }, chunk.retries.shift());\n\n            // we're going to retry\n            return true;\n        };\n\n        var updateTotalProgress = function updateTotalProgress() {\n            // calculate total progress fraction\n            var totalBytesTransfered = chunks.reduce(function(p, chunk) {\n                if (p === null || chunk.progress === null) return null;\n                return p + chunk.progress;\n            }, 0);\n\n            // can't compute progress\n            if (totalBytesTransfered === null) return progress(false, 0, 0);\n\n            // calculate progress values\n            var totalSize = chunks.reduce(function(total, chunk) {\n                return total + chunk.size;\n            }, 0);\n\n            // can update progress indicator\n            progress(true, totalBytesTransfered, totalSize);\n        };\n\n        // process new chunks\n        var processChunks = function processChunks() {\n            var totalProcessing = chunks.filter(function(chunk) {\n                return chunk.status === ChunkStatus.PROCESSING;\n            }).length;\n            if (totalProcessing >= 1) return;\n            processChunk();\n        };\n\n        var abortChunks = function abortChunks() {\n            chunks.forEach(function(chunk) {\n                clearTimeout(chunk.timeout);\n                if (chunk.request) {\n                    chunk.request.abort();\n                }\n            });\n        };\n\n        // let's go!\n        if (!state.serverId) {\n            requestTransferId(function(serverId) {\n                // stop here if aborted, might have happened in between request and callback\n                if (state.aborted) return;\n\n                // pass back to item so we can use it if something goes wrong\n                transfer(serverId);\n\n                // store internally\n                state.serverId = serverId;\n                processChunks();\n            });\n        } else {\n            requestTransferOffset(function(offset) {\n                // stop here if aborted, might have happened in between request and callback\n                if (state.aborted) return;\n\n                // mark chunks with lower offset as complete\n                chunks\n                    .filter(function(chunk) {\n                        return chunk.offset < offset;\n                    })\n                    .forEach(function(chunk) {\n                        chunk.status = ChunkStatus.COMPLETE;\n                        chunk.progress = chunk.size;\n                    });\n\n                // continue processing\n                processChunks();\n            });\n        }\n\n        return {\n            abort: function abort() {\n                state.aborted = true;\n                abortChunks();\n            },\n        };\n    };\n\n    /*\n                                                               function signature:\n                                                                 (file, metadata, load, error, progress, abort) => {\n                                                                   return {\n                                                                   abort:() => {}\n                                                                 }\n                                                               }\n                                                               */\n    var createFileProcessorFunction = function createFileProcessorFunction(\n        apiUrl,\n        action,\n        name,\n        options\n    ) {\n        return function(file, metadata, load, error, progress, abort, transfer) {\n            // no file received\n            if (!file) return;\n\n            // if was passed a file, and we can chunk it, exit here\n            var canChunkUpload = options.chunkUploads;\n            var shouldChunkUpload = canChunkUpload && file.size > options.chunkSize;\n            var willChunkUpload = canChunkUpload && (shouldChunkUpload || options.chunkForce);\n            if (file instanceof Blob && willChunkUpload)\n                return processFileChunked(\n                    apiUrl,\n                    action,\n                    name,\n                    file,\n                    metadata,\n                    load,\n                    error,\n                    progress,\n                    abort,\n                    transfer,\n                    options\n                );\n\n            // set handlers\n            var ondata =\n                action.ondata ||\n                function(fd) {\n                    return fd;\n                };\n            var onload =\n                action.onload ||\n                function(res) {\n                    return res;\n                };\n            var onerror =\n                action.onerror ||\n                function(res) {\n                    return null;\n                };\n\n            var headers =\n                typeof action.headers === 'function'\n                    ? action.headers(file, metadata) || {}\n                    : Object.assign(\n                          {},\n\n                          action.headers\n                      );\n\n            var requestParams = Object.assign({}, action, {\n                headers: headers,\n            });\n\n            // create formdata object\n            var formData = new FormData();\n\n            // add metadata under same name\n            if (isObject(metadata)) {\n                formData.append(name, JSON.stringify(metadata));\n            }\n\n            // Turn into an array of objects so no matter what the input, we can handle it the same way\n            (file instanceof Blob ? [{ name: null, file: file }] : file).forEach(function(item) {\n                formData.append(\n                    name,\n                    item.file,\n                    item.name === null ? item.file.name : '' + item.name + item.file.name\n                );\n            });\n\n            // send request object\n            var request = sendRequest(\n                ondata(formData),\n                buildURL(apiUrl, action.url),\n                requestParams\n            );\n            request.onload = function(xhr) {\n                load(\n                    createResponse(\n                        'load',\n                        xhr.status,\n                        onload(xhr.response),\n                        xhr.getAllResponseHeaders()\n                    )\n                );\n            };\n\n            request.onerror = function(xhr) {\n                error(\n                    createResponse(\n                        'error',\n                        xhr.status,\n                        onerror(xhr.response) || xhr.statusText,\n                        xhr.getAllResponseHeaders()\n                    )\n                );\n            };\n\n            request.ontimeout = createTimeoutResponse(error);\n            request.onprogress = progress;\n            request.onabort = abort;\n\n            // should return request\n            return request;\n        };\n    };\n\n    var createProcessorFunction = function createProcessorFunction() {\n        var apiUrl = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n        var action = arguments.length > 1 ? arguments[1] : undefined;\n        var name = arguments.length > 2 ? arguments[2] : undefined;\n        var options = arguments.length > 3 ? arguments[3] : undefined;\n\n        // custom handler (should also handle file, load, error, progress and abort)\n        if (typeof action === 'function')\n            return function() {\n                for (\n                    var _len = arguments.length, params = new Array(_len), _key = 0;\n                    _key < _len;\n                    _key++\n                ) {\n                    params[_key] = arguments[_key];\n                }\n                return action.apply(void 0, [name].concat(params, [options]));\n            };\n\n        // no action supplied\n        if (!action || !isString(action.url)) return null;\n\n        // internal handler\n        return createFileProcessorFunction(apiUrl, action, name, options);\n    };\n\n    /*\n                                                      function signature:\n                                                      (uniqueFileId, load, error) => { }\n                                                      */\n    var createRevertFunction = function createRevertFunction() {\n        var apiUrl = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n        var action = arguments.length > 1 ? arguments[1] : undefined;\n        // is custom implementation\n        if (typeof action === 'function') {\n            return action;\n        }\n\n        // no action supplied, return stub function, interface will work, but file won't be removed\n        if (!action || !isString(action.url)) {\n            return function(uniqueFileId, load) {\n                return load();\n            };\n        }\n\n        // set onload hanlder\n        var onload =\n            action.onload ||\n            function(res) {\n                return res;\n            };\n        var onerror =\n            action.onerror ||\n            function(res) {\n                return null;\n            };\n\n        // internal implementation\n        return function(uniqueFileId, load, error) {\n            var request = sendRequest(\n                uniqueFileId,\n                apiUrl + action.url,\n                action // contains method, headers and withCredentials properties\n            );\n            request.onload = function(xhr) {\n                load(\n                    createResponse(\n                        'load',\n                        xhr.status,\n                        onload(xhr.response),\n                        xhr.getAllResponseHeaders()\n                    )\n                );\n            };\n\n            request.onerror = function(xhr) {\n                error(\n                    createResponse(\n                        'error',\n                        xhr.status,\n                        onerror(xhr.response) || xhr.statusText,\n                        xhr.getAllResponseHeaders()\n                    )\n                );\n            };\n\n            request.ontimeout = createTimeoutResponse(error);\n\n            return request;\n        };\n    };\n\n    var getRandomNumber = function getRandomNumber() {\n        var min = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n        var max = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n        return min + Math.random() * (max - min);\n    };\n\n    var createPerceivedPerformanceUpdater = function createPerceivedPerformanceUpdater(cb) {\n        var duration = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1000;\n        var offset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n        var tickMin = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 25;\n        var tickMax = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 250;\n        var timeout = null;\n        var start = Date.now();\n\n        var tick = function tick() {\n            var runtime = Date.now() - start;\n            var delay = getRandomNumber(tickMin, tickMax);\n\n            if (runtime + delay > duration) {\n                delay = runtime + delay - duration;\n            }\n\n            var progress = runtime / duration;\n            if (progress >= 1 || document.hidden) {\n                cb(1);\n                return;\n            }\n\n            cb(progress);\n\n            timeout = setTimeout(tick, delay);\n        };\n\n        if (duration > 0) tick();\n\n        return {\n            clear: function clear() {\n                clearTimeout(timeout);\n            },\n        };\n    };\n\n    var createFileProcessor = function createFileProcessor(processFn, options) {\n        var state = {\n            complete: false,\n            perceivedProgress: 0,\n            perceivedPerformanceUpdater: null,\n            progress: null,\n            timestamp: null,\n            perceivedDuration: 0,\n            duration: 0,\n            request: null,\n            response: null,\n        };\n        var allowMinimumUploadDuration = options.allowMinimumUploadDuration;\n\n        var process = function process(file, metadata) {\n            var progressFn = function progressFn() {\n                // we've not yet started the real download, stop here\n                // the request might not go through, for instance, there might be some server trouble\n                // if state.progress is null, the server does not allow computing progress and we show the spinner instead\n                if (state.duration === 0 || state.progress === null) return;\n\n                // as we're now processing, fire the progress event\n                api.fire('progress', api.getProgress());\n            };\n\n            var completeFn = function completeFn() {\n                state.complete = true;\n                api.fire('load-perceived', state.response.body);\n            };\n\n            // let's start processing\n            api.fire('start');\n\n            // set request start\n            state.timestamp = Date.now();\n\n            // create perceived performance progress indicator\n            state.perceivedPerformanceUpdater = createPerceivedPerformanceUpdater(\n                function(progress) {\n                    state.perceivedProgress = progress;\n                    state.perceivedDuration = Date.now() - state.timestamp;\n\n                    progressFn();\n\n                    // if fake progress is done, and a response has been received,\n                    // and we've not yet called the complete method\n                    if (state.response && state.perceivedProgress === 1 && !state.complete) {\n                        // we done!\n                        completeFn();\n                    }\n                },\n                // random delay as in a list of files you start noticing\n                // files uploading at the exact same speed\n                allowMinimumUploadDuration ? getRandomNumber(750, 1500) : 0\n            );\n\n            // remember request so we can abort it later\n            state.request = processFn(\n                // the file to process\n                file,\n\n                // the metadata to send along\n                metadata,\n\n                // callbacks (load, error, progress, abort, transfer)\n                // load expects the body to be a server id if\n                // you want to make use of revert\n                function(response) {\n                    // we put the response in state so we can access\n                    // it outside of this method\n                    state.response = isObject(response)\n                        ? response\n                        : {\n                              type: 'load',\n                              code: 200,\n                              body: '' + response,\n                              headers: {},\n                          };\n\n                    // update duration\n                    state.duration = Date.now() - state.timestamp;\n\n                    // force progress to 1 as we're now done\n                    state.progress = 1;\n\n                    // actual load is done let's share results\n                    api.fire('load', state.response.body);\n\n                    // we are really done\n                    // if perceived progress is 1 ( wait for perceived progress to complete )\n                    // or if server does not support progress ( null )\n                    if (\n                        !allowMinimumUploadDuration ||\n                        (allowMinimumUploadDuration && state.perceivedProgress === 1)\n                    ) {\n                        completeFn();\n                    }\n                },\n\n                // error is expected to be an object with type, code, body\n                function(error) {\n                    // cancel updater\n                    state.perceivedPerformanceUpdater.clear();\n\n                    // update others about this error\n                    api.fire(\n                        'error',\n                        isObject(error)\n                            ? error\n                            : {\n                                  type: 'error',\n                                  code: 0,\n                                  body: '' + error,\n                              }\n                    );\n                },\n\n                // actual processing progress\n                function(computable, current, total) {\n                    // update actual duration\n                    state.duration = Date.now() - state.timestamp;\n\n                    // update actual progress\n                    state.progress = computable ? current / total : null;\n\n                    progressFn();\n                },\n\n                // abort does not expect a value\n                function() {\n                    // stop updater\n                    state.perceivedPerformanceUpdater.clear();\n\n                    // fire the abort event so we can switch visuals\n                    api.fire('abort', state.response ? state.response.body : null);\n                },\n\n                // register the id for this transfer\n                function(transferId) {\n                    api.fire('transfer', transferId);\n                }\n            );\n        };\n\n        var abort = function abort() {\n            // no request running, can't abort\n            if (!state.request) return;\n\n            // stop updater\n            state.perceivedPerformanceUpdater.clear();\n\n            // abort actual request\n            if (state.request.abort) state.request.abort();\n\n            // if has response object, we've completed the request\n            state.complete = true;\n        };\n\n        var reset = function reset() {\n            abort();\n            state.complete = false;\n            state.perceivedProgress = 0;\n            state.progress = 0;\n            state.timestamp = null;\n            state.perceivedDuration = 0;\n            state.duration = 0;\n            state.request = null;\n            state.response = null;\n        };\n\n        var getProgress = allowMinimumUploadDuration\n            ? function() {\n                  return state.progress ? Math.min(state.progress, state.perceivedProgress) : null;\n              }\n            : function() {\n                  return state.progress || null;\n              };\n\n        var getDuration = allowMinimumUploadDuration\n            ? function() {\n                  return Math.min(state.duration, state.perceivedDuration);\n              }\n            : function() {\n                  return state.duration;\n              };\n\n        var api = Object.assign({}, on(), {\n            process: process, // start processing file\n            abort: abort, // abort active process request\n            getProgress: getProgress,\n            getDuration: getDuration,\n            reset: reset,\n        });\n\n        return api;\n    };\n\n    var getFilenameWithoutExtension = function getFilenameWithoutExtension(name) {\n        return name.substr(0, name.lastIndexOf('.')) || name;\n    };\n\n    var createFileStub = function createFileStub(source) {\n        var data = [source.name, source.size, source.type];\n\n        // is blob or base64, then we need to set the name\n        if (source instanceof Blob || isBase64DataURI(source)) {\n            data[0] = source.name || getDateString();\n        } else if (isBase64DataURI(source)) {\n            // if is base64 data uri we need to determine the average size and type\n            data[1] = source.length;\n            data[2] = getMimeTypeFromBase64DataURI(source);\n        } else if (isString(source)) {\n            // url\n            data[0] = getFilenameFromURL(source);\n            data[1] = 0;\n            data[2] = 'application/octet-stream';\n        }\n\n        return {\n            name: data[0],\n            size: data[1],\n            type: data[2],\n        };\n    };\n\n    var isFile = function isFile(value) {\n        return !!(value instanceof File || (value instanceof Blob && value.name));\n    };\n\n    var deepCloneObject = function deepCloneObject(src) {\n        if (!isObject(src)) return src;\n        var target = isArray(src) ? [] : {};\n        for (var key in src) {\n            if (!src.hasOwnProperty(key)) continue;\n            var v = src[key];\n            target[key] = v && isObject(v) ? deepCloneObject(v) : v;\n        }\n        return target;\n    };\n\n    var createItem = function createItem() {\n        var origin = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n        var serverFileReference =\n            arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n        var file = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n        // unique id for this item, is used to identify the item across views\n        var id = getUniqueId();\n\n        /**\n         * Internal item state\n         */\n        var state = {\n            // is archived\n            archived: false,\n\n            // if is frozen, no longer fires events\n            frozen: false,\n\n            // removed from view\n            released: false,\n\n            // original source\n            source: null,\n\n            // file model reference\n            file: file,\n\n            // id of file on server\n            serverFileReference: serverFileReference,\n\n            // id of file transfer on server\n            transferId: null,\n\n            // is aborted\n            processingAborted: false,\n\n            // current item status\n            status: serverFileReference ? ItemStatus.PROCESSING_COMPLETE : ItemStatus.INIT,\n\n            // active processes\n            activeLoader: null,\n            activeProcessor: null,\n        };\n\n        // callback used when abort processing is called to link back to the resolve method\n        var abortProcessingRequestComplete = null;\n\n        /**\n         * Externally added item metadata\n         */\n        var metadata = {};\n\n        // item data\n        var setStatus = function setStatus(status) {\n            return (state.status = status);\n        };\n\n        // fire event unless the item has been archived\n        var fire = function fire(event) {\n            if (state.released || state.frozen) return;\n            for (\n                var _len = arguments.length, params = new Array(_len > 1 ? _len - 1 : 0), _key = 1;\n                _key < _len;\n                _key++\n            ) {\n                params[_key - 1] = arguments[_key];\n            }\n            api.fire.apply(api, [event].concat(params));\n        };\n\n        // file data\n        var getFileExtension = function getFileExtension() {\n            return getExtensionFromFilename(state.file.name);\n        };\n        var getFileType = function getFileType() {\n            return state.file.type;\n        };\n        var getFileSize = function getFileSize() {\n            return state.file.size;\n        };\n        var getFile = function getFile() {\n            return state.file;\n        };\n\n        //\n        // logic to load a file\n        //\n        var load = function load(source, loader, onload) {\n            // remember the original item source\n            state.source = source;\n\n            // source is known\n            api.fireSync('init');\n\n            // file stub is already there\n            if (state.file) {\n                api.fireSync('load-skip');\n                return;\n            }\n\n            // set a stub file object while loading the actual data\n            state.file = createFileStub(source);\n\n            // starts loading\n            loader.on('init', function() {\n                fire('load-init');\n            });\n\n            // we'eve received a size indication, let's update the stub\n            loader.on('meta', function(meta) {\n                // set size of file stub\n                state.file.size = meta.size;\n\n                // set name of file stub\n                state.file.filename = meta.filename;\n\n                // if has received source, we done\n                if (meta.source) {\n                    origin = FileOrigin.LIMBO;\n                    state.serverFileReference = meta.source;\n                    state.status = ItemStatus.PROCESSING_COMPLETE;\n                }\n\n                // size has been updated\n                fire('load-meta');\n            });\n\n            // the file is now loading we need to update the progress indicators\n            loader.on('progress', function(progress) {\n                setStatus(ItemStatus.LOADING);\n\n                fire('load-progress', progress);\n            });\n\n            // an error was thrown while loading the file, we need to switch to error state\n            loader.on('error', function(error) {\n                setStatus(ItemStatus.LOAD_ERROR);\n\n                fire('load-request-error', error);\n            });\n\n            // user or another process aborted the file load (cannot retry)\n            loader.on('abort', function() {\n                setStatus(ItemStatus.INIT);\n                fire('load-abort');\n            });\n\n            // done loading\n            loader.on('load', function(file) {\n                // as we've now loaded the file the loader is no longer required\n                state.activeLoader = null;\n\n                // called when file has loaded succesfully\n                var success = function success(result) {\n                    // set (possibly) transformed file\n                    state.file = isFile(result) ? result : state.file;\n\n                    // file received\n                    if (origin === FileOrigin.LIMBO && state.serverFileReference) {\n                        setStatus(ItemStatus.PROCESSING_COMPLETE);\n                    } else {\n                        setStatus(ItemStatus.IDLE);\n                    }\n\n                    fire('load');\n                };\n\n                var error = function error(result) {\n                    // set original file\n                    state.file = file;\n                    fire('load-meta');\n\n                    setStatus(ItemStatus.LOAD_ERROR);\n                    fire('load-file-error', result);\n                };\n\n                // if we already have a server file reference, we don't need to call the onload method\n                if (state.serverFileReference) {\n                    success(file);\n                    return;\n                }\n\n                // no server id, let's give this file the full treatment\n                onload(file, success, error);\n            });\n\n            // set loader source data\n            loader.setSource(source);\n\n            // set as active loader\n            state.activeLoader = loader;\n\n            // load the source data\n            loader.load();\n        };\n\n        var retryLoad = function retryLoad() {\n            if (!state.activeLoader) {\n                return;\n            }\n            state.activeLoader.load();\n        };\n\n        var abortLoad = function abortLoad() {\n            if (state.activeLoader) {\n                state.activeLoader.abort();\n                return;\n            }\n            setStatus(ItemStatus.INIT);\n            fire('load-abort');\n        };\n\n        //\n        // logic to process a file\n        //\n        var process = function process(processor, onprocess) {\n            // processing was aborted\n            if (state.processingAborted) {\n                state.processingAborted = false;\n                return;\n            }\n\n            // now processing\n            setStatus(ItemStatus.PROCESSING);\n\n            // reset abort callback\n            abortProcessingRequestComplete = null;\n\n            // if no file loaded we'll wait for the load event\n            if (!(state.file instanceof Blob)) {\n                api.on('load', function() {\n                    process(processor, onprocess);\n                });\n                return;\n            }\n\n            // setup processor\n            processor.on('load', function(serverFileReference) {\n                // need this id to be able to revert the upload\n                state.transferId = null;\n                state.serverFileReference = serverFileReference;\n            });\n\n            // register transfer id\n            processor.on('transfer', function(transferId) {\n                // need this id to be able to revert the upload\n                state.transferId = transferId;\n            });\n\n            processor.on('load-perceived', function(serverFileReference) {\n                // no longer required\n                state.activeProcessor = null;\n\n                // need this id to be able to rever the upload\n                state.transferId = null;\n                state.serverFileReference = serverFileReference;\n\n                setStatus(ItemStatus.PROCESSING_COMPLETE);\n                fire('process-complete', serverFileReference);\n            });\n\n            processor.on('start', function() {\n                fire('process-start');\n            });\n\n            processor.on('error', function(error) {\n                state.activeProcessor = null;\n                setStatus(ItemStatus.PROCESSING_ERROR);\n                fire('process-error', error);\n            });\n\n            processor.on('abort', function(serverFileReference) {\n                state.activeProcessor = null;\n\n                // if file was uploaded but processing was cancelled during perceived processor time store file reference\n                state.serverFileReference = serverFileReference;\n\n                setStatus(ItemStatus.IDLE);\n                fire('process-abort');\n\n                // has timeout so doesn't interfere with remove action\n                if (abortProcessingRequestComplete) {\n                    abortProcessingRequestComplete();\n                }\n            });\n\n            processor.on('progress', function(progress) {\n                fire('process-progress', progress);\n            });\n\n            // when successfully transformed\n            var success = function success(file) {\n                // if was archived in the mean time, don't process\n                if (state.archived) return;\n\n                // process file!\n                processor.process(file, Object.assign({}, metadata));\n            };\n\n            // something went wrong during transform phase\n            var error = console.error;\n\n            // start processing the file\n            onprocess(state.file, success, error);\n\n            // set as active processor\n            state.activeProcessor = processor;\n        };\n\n        var requestProcessing = function requestProcessing() {\n            state.processingAborted = false;\n            setStatus(ItemStatus.PROCESSING_QUEUED);\n        };\n\n        var abortProcessing = function abortProcessing() {\n            return new Promise(function(resolve) {\n                if (!state.activeProcessor) {\n                    state.processingAborted = true;\n\n                    setStatus(ItemStatus.IDLE);\n                    fire('process-abort');\n\n                    resolve();\n                    return;\n                }\n\n                abortProcessingRequestComplete = function abortProcessingRequestComplete() {\n                    resolve();\n                };\n\n                state.activeProcessor.abort();\n            });\n        };\n\n        //\n        // logic to revert a processed file\n        //\n        var revert = function revert(revertFileUpload, forceRevert) {\n            return new Promise(function(resolve, reject) {\n                // a completed upload will have a serverFileReference, a failed chunked upload where\n                // getting a serverId succeeded but >=0 chunks have been uploaded will have transferId set\n                var serverTransferId =\n                    state.serverFileReference !== null\n                        ? state.serverFileReference\n                        : state.transferId;\n\n                // cannot revert without a server id for this process\n                if (serverTransferId === null) {\n                    resolve();\n                    return;\n                }\n\n                // revert the upload (fire and forget)\n                revertFileUpload(\n                    serverTransferId,\n                    function() {\n                        // reset file server id and transfer id as now it's not available on the server\n                        state.serverFileReference = null;\n                        state.transferId = null;\n                        resolve();\n                    },\n                    function(error) {\n                        // don't set error state when reverting is optional, it will always resolve\n                        if (!forceRevert) {\n                            resolve();\n                            return;\n                        }\n\n                        // oh no errors\n                        setStatus(ItemStatus.PROCESSING_REVERT_ERROR);\n                        fire('process-revert-error');\n                        reject(error);\n                    }\n                );\n\n                // fire event\n                setStatus(ItemStatus.IDLE);\n                fire('process-revert');\n            });\n        };\n\n        // exposed methods\n        var _setMetadata = function setMetadata(key, value, silent) {\n            var keys = key.split('.');\n            var root = keys[0];\n            var last = keys.pop();\n            var data = metadata;\n            keys.forEach(function(key) {\n                return (data = data[key]);\n            });\n\n            // compare old value against new value, if they're the same, we're not updating\n            if (JSON.stringify(data[last]) === JSON.stringify(value)) return;\n\n            // update value\n            data[last] = value;\n\n            // fire update\n            fire('metadata-update', {\n                key: root,\n                value: metadata[root],\n                silent: silent,\n            });\n        };\n\n        var getMetadata = function getMetadata(key) {\n            return deepCloneObject(key ? metadata[key] : metadata);\n        };\n\n        var api = Object.assign(\n            {\n                id: {\n                    get: function get() {\n                        return id;\n                    },\n                },\n                origin: {\n                    get: function get() {\n                        return origin;\n                    },\n                    set: function set(value) {\n                        return (origin = value);\n                    },\n                },\n                serverId: {\n                    get: function get() {\n                        return state.serverFileReference;\n                    },\n                },\n                transferId: {\n                    get: function get() {\n                        return state.transferId;\n                    },\n                },\n                status: {\n                    get: function get() {\n                        return state.status;\n                    },\n                },\n                filename: {\n                    get: function get() {\n                        return state.file.name;\n                    },\n                },\n                filenameWithoutExtension: {\n                    get: function get() {\n                        return getFilenameWithoutExtension(state.file.name);\n                    },\n                },\n                fileExtension: { get: getFileExtension },\n                fileType: { get: getFileType },\n                fileSize: { get: getFileSize },\n                file: { get: getFile },\n                relativePath: {\n                    get: function get() {\n                        return state.file._relativePath;\n                    },\n                },\n\n                source: {\n                    get: function get() {\n                        return state.source;\n                    },\n                },\n\n                getMetadata: getMetadata,\n                setMetadata: function setMetadata(key, value, silent) {\n                    if (isObject(key)) {\n                        var data = key;\n                        Object.keys(data).forEach(function(key) {\n                            _setMetadata(key, data[key], value);\n                        });\n                        return key;\n                    }\n                    _setMetadata(key, value, silent);\n                    return value;\n                },\n\n                extend: function extend(name, handler) {\n                    return (itemAPI[name] = handler);\n                },\n\n                abortLoad: abortLoad,\n                retryLoad: retryLoad,\n                requestProcessing: requestProcessing,\n                abortProcessing: abortProcessing,\n\n                load: load,\n                process: process,\n                revert: revert,\n            },\n\n            on(),\n            {\n                freeze: function freeze() {\n                    return (state.frozen = true);\n                },\n\n                release: function release() {\n                    return (state.released = true);\n                },\n                released: {\n                    get: function get() {\n                        return state.released;\n                    },\n                },\n\n                archive: function archive() {\n                    return (state.archived = true);\n                },\n                archived: {\n                    get: function get() {\n                        return state.archived;\n                    },\n                },\n            }\n        );\n\n        // create it here instead of returning it instantly so we can extend it later\n        var itemAPI = createObject(api);\n\n        return itemAPI;\n    };\n\n    var getItemIndexByQuery = function getItemIndexByQuery(items, query) {\n        // just return first index\n        if (isEmpty(query)) {\n            return 0;\n        }\n\n        // invalid queries\n        if (!isString(query)) {\n            return -1;\n        }\n\n        // return item by id (or -1 if not found)\n        return items.findIndex(function(item) {\n            return item.id === query;\n        });\n    };\n\n    var getItemById = function getItemById(items, itemId) {\n        var index = getItemIndexByQuery(items, itemId);\n        if (index < 0) {\n            return;\n        }\n        return items[index] || null;\n    };\n\n    var fetchBlob = function fetchBlob(url, load, error, progress, abort, headers) {\n        var request = sendRequest(null, url, {\n            method: 'GET',\n            responseType: 'blob',\n        });\n\n        request.onload = function(xhr) {\n            // get headers\n            var headers = xhr.getAllResponseHeaders();\n\n            // get filename\n            var filename = getFileInfoFromHeaders(headers).name || getFilenameFromURL(url);\n\n            // create response\n            load(\n                createResponse('load', xhr.status, getFileFromBlob(xhr.response, filename), headers)\n            );\n        };\n\n        request.onerror = function(xhr) {\n            error(createResponse('error', xhr.status, xhr.statusText, xhr.getAllResponseHeaders()));\n        };\n\n        request.onheaders = function(xhr) {\n            headers(createResponse('headers', xhr.status, null, xhr.getAllResponseHeaders()));\n        };\n\n        request.ontimeout = createTimeoutResponse(error);\n        request.onprogress = progress;\n        request.onabort = abort;\n\n        // should return request\n        return request;\n    };\n\n    var getDomainFromURL = function getDomainFromURL(url) {\n        if (url.indexOf('//') === 0) {\n            url = location.protocol + url;\n        }\n        return url\n            .toLowerCase()\n            .replace('blob:', '')\n            .replace(/([a-z])?:\\/\\//, '$1')\n            .split('/')[0];\n    };\n\n    var isExternalURL = function isExternalURL(url) {\n        return (\n            (url.indexOf(':') > -1 || url.indexOf('//') > -1) &&\n            getDomainFromURL(location.href) !== getDomainFromURL(url)\n        );\n    };\n\n    var dynamicLabel = function dynamicLabel(label) {\n        return function() {\n            return isFunction(label) ? label.apply(void 0, arguments) : label;\n        };\n    };\n\n    var isMockItem = function isMockItem(item) {\n        return !isFile(item.file);\n    };\n\n    var listUpdated = function listUpdated(dispatch, state) {\n        clearTimeout(state.listUpdateTimeout);\n        state.listUpdateTimeout = setTimeout(function() {\n            dispatch('DID_UPDATE_ITEMS', { items: getActiveItems(state.items) });\n        }, 0);\n    };\n\n    var optionalPromise = function optionalPromise(fn) {\n        for (\n            var _len = arguments.length, params = new Array(_len > 1 ? _len - 1 : 0), _key = 1;\n            _key < _len;\n            _key++\n        ) {\n            params[_key - 1] = arguments[_key];\n        }\n        return new Promise(function(resolve) {\n            if (!fn) {\n                return resolve(true);\n            }\n\n            var result = fn.apply(void 0, params);\n\n            if (result == null) {\n                return resolve(true);\n            }\n\n            if (typeof result === 'boolean') {\n                return resolve(result);\n            }\n\n            if (typeof result.then === 'function') {\n                result.then(resolve);\n            }\n        });\n    };\n\n    var sortItems = function sortItems(state, compare) {\n        state.items.sort(function(a, b) {\n            return compare(createItemAPI(a), createItemAPI(b));\n        });\n    };\n\n    // returns item based on state\n    var getItemByQueryFromState = function getItemByQueryFromState(state, itemHandler) {\n        return function() {\n            var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n            var query = _ref.query,\n                _ref$success = _ref.success,\n                success = _ref$success === void 0 ? function() {} : _ref$success,\n                _ref$failure = _ref.failure,\n                failure = _ref$failure === void 0 ? function() {} : _ref$failure,\n                options = _objectWithoutProperties(_ref, ['query', 'success', 'failure']);\n            var item = getItemByQuery(state.items, query);\n            if (!item) {\n                failure({\n                    error: createResponse('error', 0, 'Item not found'),\n                    file: null,\n                });\n\n                return;\n            }\n            itemHandler(item, success, failure, options || {});\n        };\n    };\n\n    var actions = function actions(dispatch, query, state) {\n        return {\n            /**\n             * Aborts all ongoing processes\n             */\n            ABORT_ALL: function ABORT_ALL() {\n                getActiveItems(state.items).forEach(function(item) {\n                    item.freeze();\n                    item.abortLoad();\n                    item.abortProcessing();\n                });\n            },\n\n            /**\n             * Sets initial files\n             */\n            DID_SET_FILES: function DID_SET_FILES(_ref2) {\n                var _ref2$value = _ref2.value,\n                    value = _ref2$value === void 0 ? [] : _ref2$value;\n                // map values to file objects\n                var files = value.map(function(file) {\n                    return {\n                        source: file.source ? file.source : file,\n                        options: file.options,\n                    };\n                });\n\n                // loop over files, if file is in list, leave it be, if not, remove\n                // test if items should be moved\n                var activeItems = getActiveItems(state.items);\n\n                activeItems.forEach(function(item) {\n                    // if item not is in new value, remove\n                    if (\n                        !files.find(function(file) {\n                            return file.source === item.source || file.source === item.file;\n                        })\n                    ) {\n                        dispatch('REMOVE_ITEM', { query: item, remove: false });\n                    }\n                });\n\n                // add new files\n                activeItems = getActiveItems(state.items);\n                files.forEach(function(file, index) {\n                    // if file is already in list\n                    if (\n                        activeItems.find(function(item) {\n                            return item.source === file.source || item.file === file.source;\n                        })\n                    )\n                        return;\n\n                    // not in list, add\n                    dispatch(\n                        'ADD_ITEM',\n                        Object.assign({}, file, {\n                            interactionMethod: InteractionMethod.NONE,\n                            index: index,\n                        })\n                    );\n                });\n            },\n\n            DID_UPDATE_ITEM_METADATA: function DID_UPDATE_ITEM_METADATA(_ref3) {\n                var id = _ref3.id,\n                    action = _ref3.action,\n                    change = _ref3.change;\n                // don't do anything\n                if (change.silent) return;\n\n                // if is called multiple times in close succession we combined all calls together to save resources\n                clearTimeout(state.itemUpdateTimeout);\n                state.itemUpdateTimeout = setTimeout(function() {\n                    var item = getItemById(state.items, id);\n\n                    // only revert and attempt to upload when we're uploading to a server\n                    if (!query('IS_ASYNC')) {\n                        // should we update the output data\n                        applyFilterChain('SHOULD_PREPARE_OUTPUT', false, {\n                            item: item,\n                            query: query,\n                            action: action,\n                            change: change,\n                        }).then(function(shouldPrepareOutput) {\n                            // plugins determined the output data should be prepared (or not), can be adjusted with beforePrepareOutput hook\n                            var beforePrepareFile = query('GET_BEFORE_PREPARE_FILE');\n                            if (beforePrepareFile)\n                                shouldPrepareOutput = beforePrepareFile(item, shouldPrepareOutput);\n\n                            if (!shouldPrepareOutput) return;\n\n                            dispatch(\n                                'REQUEST_PREPARE_OUTPUT',\n                                {\n                                    query: id,\n                                    item: item,\n                                    success: function success(file) {\n                                        dispatch('DID_PREPARE_OUTPUT', { id: id, file: file });\n                                    },\n                                },\n\n                                true\n                            );\n                        });\n\n                        return;\n                    }\n\n                    // if is local item we need to enable upload button so change can be propagated to server\n                    if (item.origin === FileOrigin.LOCAL) {\n                        dispatch('DID_LOAD_ITEM', {\n                            id: item.id,\n                            error: null,\n                            serverFileReference: item.source,\n                        });\n                    }\n\n                    // for async scenarios\n                    var upload = function upload() {\n                        // we push this forward a bit so the interface is updated correctly\n                        setTimeout(function() {\n                            dispatch('REQUEST_ITEM_PROCESSING', { query: id });\n                        }, 32);\n                    };\n\n                    var revert = function revert(doUpload) {\n                        item.revert(\n                            createRevertFunction(\n                                state.options.server.url,\n                                state.options.server.revert\n                            ),\n                            query('GET_FORCE_REVERT')\n                        )\n                            .then(doUpload ? upload : function() {})\n                            .catch(function() {});\n                    };\n\n                    var abort = function abort(doUpload) {\n                        item.abortProcessing().then(doUpload ? upload : function() {});\n                    };\n\n                    // if we should re-upload the file immediately\n                    if (item.status === ItemStatus.PROCESSING_COMPLETE) {\n                        return revert(state.options.instantUpload);\n                    }\n\n                    // if currently uploading, cancel upload\n                    if (item.status === ItemStatus.PROCESSING) {\n                        return abort(state.options.instantUpload);\n                    }\n\n                    if (state.options.instantUpload) {\n                        upload();\n                    }\n                }, 0);\n            },\n\n            MOVE_ITEM: function MOVE_ITEM(_ref4) {\n                var query = _ref4.query,\n                    index = _ref4.index;\n                var item = getItemByQuery(state.items, query);\n                if (!item) return;\n                var currentIndex = state.items.indexOf(item);\n                index = limit(index, 0, state.items.length - 1);\n                if (currentIndex === index) return;\n                state.items.splice(index, 0, state.items.splice(currentIndex, 1)[0]);\n            },\n\n            SORT: function SORT(_ref5) {\n                var compare = _ref5.compare;\n                sortItems(state, compare);\n                dispatch('DID_SORT_ITEMS', {\n                    items: query('GET_ACTIVE_ITEMS'),\n                });\n            },\n\n            ADD_ITEMS: function ADD_ITEMS(_ref6) {\n                var items = _ref6.items,\n                    index = _ref6.index,\n                    interactionMethod = _ref6.interactionMethod,\n                    _ref6$success = _ref6.success,\n                    success = _ref6$success === void 0 ? function() {} : _ref6$success,\n                    _ref6$failure = _ref6.failure,\n                    failure = _ref6$failure === void 0 ? function() {} : _ref6$failure;\n                var currentIndex = index;\n\n                if (index === -1 || typeof index === 'undefined') {\n                    var insertLocation = query('GET_ITEM_INSERT_LOCATION');\n                    var totalItems = query('GET_TOTAL_ITEMS');\n                    currentIndex = insertLocation === 'before' ? 0 : totalItems;\n                }\n\n                var ignoredFiles = query('GET_IGNORED_FILES');\n                var isValidFile = function isValidFile(source) {\n                    return isFile(source)\n                        ? !ignoredFiles.includes(source.name.toLowerCase())\n                        : !isEmpty(source);\n                };\n                var validItems = items.filter(isValidFile);\n\n                var promises = validItems.map(function(source) {\n                    return new Promise(function(resolve, reject) {\n                        dispatch('ADD_ITEM', {\n                            interactionMethod: interactionMethod,\n                            source: source.source || source,\n                            success: resolve,\n                            failure: reject,\n                            index: currentIndex++,\n                            options: source.options || {},\n                        });\n                    });\n                });\n\n                Promise.all(promises)\n                    .then(success)\n                    .catch(failure);\n            },\n\n            /**\n             * @param source\n             * @param index\n             * @param interactionMethod\n             */\n            ADD_ITEM: function ADD_ITEM(_ref7) {\n                var source = _ref7.source,\n                    _ref7$index = _ref7.index,\n                    index = _ref7$index === void 0 ? -1 : _ref7$index,\n                    interactionMethod = _ref7.interactionMethod,\n                    _ref7$success = _ref7.success,\n                    success = _ref7$success === void 0 ? function() {} : _ref7$success,\n                    _ref7$failure = _ref7.failure,\n                    failure = _ref7$failure === void 0 ? function() {} : _ref7$failure,\n                    _ref7$options = _ref7.options,\n                    options = _ref7$options === void 0 ? {} : _ref7$options;\n                // if no source supplied\n                if (isEmpty(source)) {\n                    failure({\n                        error: createResponse('error', 0, 'No source'),\n                        file: null,\n                    });\n\n                    return;\n                }\n\n                // filter out invalid file items, used to filter dropped directory contents\n                if (\n                    isFile(source) &&\n                    state.options.ignoredFiles.includes(source.name.toLowerCase())\n                ) {\n                    // fail silently\n                    return;\n                }\n\n                // test if there's still room in the list of files\n                if (!hasRoomForItem(state)) {\n                    // if multiple allowed, we can't replace\n                    // or if only a single item is allowed but we're not allowed to replace it we exit\n                    if (\n                        state.options.allowMultiple ||\n                        (!state.options.allowMultiple && !state.options.allowReplace)\n                    ) {\n                        var error = createResponse('warning', 0, 'Max files');\n\n                        dispatch('DID_THROW_MAX_FILES', {\n                            source: source,\n                            error: error,\n                        });\n\n                        failure({ error: error, file: null });\n\n                        return;\n                    }\n\n                    // let's replace the item\n                    // id of first item we're about to remove\n                    var _item = getActiveItems(state.items)[0];\n\n                    // if has been processed remove it from the server as well\n                    if (\n                        _item.status === ItemStatus.PROCESSING_COMPLETE ||\n                        _item.status === ItemStatus.PROCESSING_REVERT_ERROR\n                    ) {\n                        var forceRevert = query('GET_FORCE_REVERT');\n                        _item\n                            .revert(\n                                createRevertFunction(\n                                    state.options.server.url,\n                                    state.options.server.revert\n                                ),\n                                forceRevert\n                            )\n                            .then(function() {\n                                if (!forceRevert) return;\n\n                                // try to add now\n                                dispatch('ADD_ITEM', {\n                                    source: source,\n                                    index: index,\n                                    interactionMethod: interactionMethod,\n                                    success: success,\n                                    failure: failure,\n                                    options: options,\n                                });\n                            })\n                            .catch(function() {}); // no need to handle this catch state for now\n\n                        if (forceRevert) return;\n                    }\n\n                    // remove first item as it will be replaced by this item\n                    dispatch('REMOVE_ITEM', { query: _item.id });\n                }\n\n                // where did the file originate\n                var origin =\n                    options.type === 'local'\n                        ? FileOrigin.LOCAL\n                        : options.type === 'limbo'\n                        ? FileOrigin.LIMBO\n                        : FileOrigin.INPUT;\n\n                // create a new blank item\n                var item = createItem(\n                    // where did this file come from\n                    origin,\n\n                    // an input file never has a server file reference\n                    origin === FileOrigin.INPUT ? null : source,\n\n                    // file mock data, if defined\n                    options.file\n                );\n\n                // set initial meta data\n                Object.keys(options.metadata || {}).forEach(function(key) {\n                    item.setMetadata(key, options.metadata[key]);\n                });\n\n                // created the item, let plugins add methods\n                applyFilters('DID_CREATE_ITEM', item, { query: query, dispatch: dispatch });\n\n                // where to insert new items\n                var itemInsertLocation = query('GET_ITEM_INSERT_LOCATION');\n\n                // adjust index if is not allowed to pick location\n                if (!state.options.itemInsertLocationFreedom) {\n                    index = itemInsertLocation === 'before' ? -1 : state.items.length;\n                }\n\n                // add item to list\n                insertItem(state.items, item, index);\n\n                // sort items in list\n                if (isFunction(itemInsertLocation) && source) {\n                    sortItems(state, itemInsertLocation);\n                }\n\n                // get a quick reference to the item id\n                var id = item.id;\n\n                // observe item events\n                item.on('init', function() {\n                    dispatch('DID_INIT_ITEM', { id: id });\n                });\n\n                item.on('load-init', function() {\n                    dispatch('DID_START_ITEM_LOAD', { id: id });\n                });\n\n                item.on('load-meta', function() {\n                    dispatch('DID_UPDATE_ITEM_META', { id: id });\n                });\n\n                item.on('load-progress', function(progress) {\n                    dispatch('DID_UPDATE_ITEM_LOAD_PROGRESS', { id: id, progress: progress });\n                });\n\n                item.on('load-request-error', function(error) {\n                    var mainStatus = dynamicLabel(state.options.labelFileLoadError)(error);\n\n                    // is client error, no way to recover\n                    if (error.code >= 400 && error.code < 500) {\n                        dispatch('DID_THROW_ITEM_INVALID', {\n                            id: id,\n                            error: error,\n                            status: {\n                                main: mainStatus,\n                                sub: error.code + ' (' + error.body + ')',\n                            },\n                        });\n\n                        // reject the file so can be dealt with through API\n                        failure({ error: error, file: createItemAPI(item) });\n                        return;\n                    }\n\n                    // is possible server error, so might be possible to retry\n                    dispatch('DID_THROW_ITEM_LOAD_ERROR', {\n                        id: id,\n                        error: error,\n                        status: {\n                            main: mainStatus,\n                            sub: state.options.labelTapToRetry,\n                        },\n                    });\n                });\n\n                item.on('load-file-error', function(error) {\n                    dispatch('DID_THROW_ITEM_INVALID', {\n                        id: id,\n                        error: error.status,\n                        status: error.status,\n                    });\n\n                    failure({ error: error.status, file: createItemAPI(item) });\n                });\n\n                item.on('load-abort', function() {\n                    dispatch('REMOVE_ITEM', { query: id });\n                });\n\n                item.on('load-skip', function() {\n                    dispatch('COMPLETE_LOAD_ITEM', {\n                        query: id,\n                        item: item,\n                        data: {\n                            source: source,\n                            success: success,\n                        },\n                    });\n                });\n\n                item.on('load', function() {\n                    var handleAdd = function handleAdd(shouldAdd) {\n                        // no should not add this file\n                        if (!shouldAdd) {\n                            dispatch('REMOVE_ITEM', {\n                                query: id,\n                            });\n\n                            return;\n                        }\n\n                        // now interested in metadata updates\n                        item.on('metadata-update', function(change) {\n                            dispatch('DID_UPDATE_ITEM_METADATA', { id: id, change: change });\n                        });\n\n                        // let plugins decide if the output data should be prepared at this point\n                        // means we'll do this and wait for idle state\n                        applyFilterChain('SHOULD_PREPARE_OUTPUT', false, {\n                            item: item,\n                            query: query,\n                        }).then(function(shouldPrepareOutput) {\n                            // plugins determined the output data should be prepared (or not), can be adjusted with beforePrepareOutput hook\n                            var beforePrepareFile = query('GET_BEFORE_PREPARE_FILE');\n                            if (beforePrepareFile)\n                                shouldPrepareOutput = beforePrepareFile(item, shouldPrepareOutput);\n\n                            var loadComplete = function loadComplete() {\n                                dispatch('COMPLETE_LOAD_ITEM', {\n                                    query: id,\n                                    item: item,\n                                    data: {\n                                        source: source,\n                                        success: success,\n                                    },\n                                });\n\n                                listUpdated(dispatch, state);\n                            };\n\n                            // exit\n                            if (shouldPrepareOutput) {\n                                // wait for idle state and then run PREPARE_OUTPUT\n                                dispatch(\n                                    'REQUEST_PREPARE_OUTPUT',\n                                    {\n                                        query: id,\n                                        item: item,\n                                        success: function success(file) {\n                                            dispatch('DID_PREPARE_OUTPUT', { id: id, file: file });\n                                            loadComplete();\n                                        },\n                                    },\n\n                                    true\n                                );\n\n                                return;\n                            }\n\n                            loadComplete();\n                        });\n                    };\n\n                    // item loaded, allow plugins to\n                    // - read data (quickly)\n                    // - add metadata\n                    applyFilterChain('DID_LOAD_ITEM', item, { query: query, dispatch: dispatch })\n                        .then(function() {\n                            optionalPromise(query('GET_BEFORE_ADD_FILE'), createItemAPI(item)).then(\n                                handleAdd\n                            );\n                        })\n                        .catch(function(e) {\n                            if (!e || !e.error || !e.status) return handleAdd(false);\n                            dispatch('DID_THROW_ITEM_INVALID', {\n                                id: id,\n                                error: e.error,\n                                status: e.status,\n                            });\n                        });\n                });\n\n                item.on('process-start', function() {\n                    dispatch('DID_START_ITEM_PROCESSING', { id: id });\n                });\n\n                item.on('process-progress', function(progress) {\n                    dispatch('DID_UPDATE_ITEM_PROCESS_PROGRESS', { id: id, progress: progress });\n                });\n\n                item.on('process-error', function(error) {\n                    dispatch('DID_THROW_ITEM_PROCESSING_ERROR', {\n                        id: id,\n                        error: error,\n                        status: {\n                            main: dynamicLabel(state.options.labelFileProcessingError)(error),\n                            sub: state.options.labelTapToRetry,\n                        },\n                    });\n                });\n\n                item.on('process-revert-error', function(error) {\n                    dispatch('DID_THROW_ITEM_PROCESSING_REVERT_ERROR', {\n                        id: id,\n                        error: error,\n                        status: {\n                            main: dynamicLabel(state.options.labelFileProcessingRevertError)(error),\n                            sub: state.options.labelTapToRetry,\n                        },\n                    });\n                });\n\n                item.on('process-complete', function(serverFileReference) {\n                    dispatch('DID_COMPLETE_ITEM_PROCESSING', {\n                        id: id,\n                        error: null,\n                        serverFileReference: serverFileReference,\n                    });\n\n                    dispatch('DID_DEFINE_VALUE', { id: id, value: serverFileReference });\n                });\n\n                item.on('process-abort', function() {\n                    dispatch('DID_ABORT_ITEM_PROCESSING', { id: id });\n                });\n\n                item.on('process-revert', function() {\n                    dispatch('DID_REVERT_ITEM_PROCESSING', { id: id });\n                    dispatch('DID_DEFINE_VALUE', { id: id, value: null });\n                });\n\n                // let view know the item has been inserted\n                dispatch('DID_ADD_ITEM', {\n                    id: id,\n                    index: index,\n                    interactionMethod: interactionMethod,\n                });\n\n                listUpdated(dispatch, state);\n\n                // start loading the source\n                var _ref8 = state.options.server || {},\n                    url = _ref8.url,\n                    load = _ref8.load,\n                    restore = _ref8.restore,\n                    fetch = _ref8.fetch;\n\n                item.load(\n                    source,\n\n                    // this creates a function that loads the file based on the type of file (string, base64, blob, file) and location of file (local, remote, limbo)\n                    createFileLoader(\n                        origin === FileOrigin.INPUT\n                            ? // input, if is remote, see if should use custom fetch, else use default fetchBlob\n                              isString(source) && isExternalURL(source)\n                                ? fetch\n                                    ? createFetchFunction(url, fetch)\n                                    : fetchBlob // remote url\n                                : fetchBlob // try to fetch url\n                            : // limbo or local\n                            origin === FileOrigin.LIMBO\n                            ? createFetchFunction(url, restore) // limbo\n                            : createFetchFunction(url, load) // local\n                    ),\n\n                    // called when the file is loaded so it can be piped through the filters\n                    function(file, success, error) {\n                        // let's process the file\n                        applyFilterChain('LOAD_FILE', file, { query: query })\n                            .then(success)\n                            .catch(error);\n                    }\n                );\n            },\n\n            REQUEST_PREPARE_OUTPUT: function REQUEST_PREPARE_OUTPUT(_ref9) {\n                var item = _ref9.item,\n                    success = _ref9.success,\n                    _ref9$failure = _ref9.failure,\n                    failure = _ref9$failure === void 0 ? function() {} : _ref9$failure;\n                // error response if item archived\n                var err = {\n                    error: createResponse('error', 0, 'Item not found'),\n                    file: null,\n                };\n\n                // don't handle archived items, an item could have been archived (load aborted) while waiting to be prepared\n                if (item.archived) return failure(err);\n\n                // allow plugins to alter the file data\n                applyFilterChain('PREPARE_OUTPUT', item.file, { query: query, item: item }).then(\n                    function(result) {\n                        applyFilterChain('COMPLETE_PREPARE_OUTPUT', result, {\n                            query: query,\n                            item: item,\n                        }).then(function(result) {\n                            // don't handle archived items, an item could have been archived (load aborted) while being prepared\n                            if (item.archived) return failure(err);\n\n                            // we done!\n                            success(result);\n                        });\n                    }\n                );\n            },\n\n            COMPLETE_LOAD_ITEM: function COMPLETE_LOAD_ITEM(_ref10) {\n                var item = _ref10.item,\n                    data = _ref10.data;\n                var success = data.success,\n                    source = data.source;\n\n                // sort items in list\n                var itemInsertLocation = query('GET_ITEM_INSERT_LOCATION');\n                if (isFunction(itemInsertLocation) && source) {\n                    sortItems(state, itemInsertLocation);\n                }\n\n                // let interface know the item has loaded\n                dispatch('DID_LOAD_ITEM', {\n                    id: item.id,\n                    error: null,\n                    serverFileReference: item.origin === FileOrigin.INPUT ? null : source,\n                });\n\n                // item has been successfully loaded and added to the\n                // list of items so can now be safely returned for use\n                success(createItemAPI(item));\n\n                // if this is a local server file we need to show a different state\n                if (item.origin === FileOrigin.LOCAL) {\n                    dispatch('DID_LOAD_LOCAL_ITEM', { id: item.id });\n                    return;\n                }\n\n                // if is a temp server file we prevent async upload call here (as the file is already on the server)\n                if (item.origin === FileOrigin.LIMBO) {\n                    dispatch('DID_COMPLETE_ITEM_PROCESSING', {\n                        id: item.id,\n                        error: null,\n                        serverFileReference: source,\n                    });\n\n                    dispatch('DID_DEFINE_VALUE', {\n                        id: item.id,\n                        value: item.serverId || source,\n                    });\n\n                    return;\n                }\n\n                // id we are allowed to upload the file immediately, lets do it\n                if (query('IS_ASYNC') && state.options.instantUpload) {\n                    dispatch('REQUEST_ITEM_PROCESSING', { query: item.id });\n                }\n            },\n\n            RETRY_ITEM_LOAD: getItemByQueryFromState(state, function(item) {\n                // try loading the source one more time\n                item.retryLoad();\n            }),\n\n            REQUEST_ITEM_PREPARE: getItemByQueryFromState(state, function(item, _success, failure) {\n                dispatch(\n                    'REQUEST_PREPARE_OUTPUT',\n                    {\n                        query: item.id,\n                        item: item,\n                        success: function success(file) {\n                            dispatch('DID_PREPARE_OUTPUT', { id: item.id, file: file });\n                            _success({\n                                file: item,\n                                output: file,\n                            });\n                        },\n                        failure: failure,\n                    },\n\n                    true\n                );\n            }),\n\n            REQUEST_ITEM_PROCESSING: getItemByQueryFromState(state, function(\n                item,\n                success,\n                failure\n            ) {\n                // cannot be queued (or is already queued)\n                var itemCanBeQueuedForProcessing =\n                    // waiting for something\n                    item.status === ItemStatus.IDLE ||\n                    // processing went wrong earlier\n                    item.status === ItemStatus.PROCESSING_ERROR;\n\n                // not ready to be processed\n                if (!itemCanBeQueuedForProcessing) {\n                    var processNow = function processNow() {\n                        return dispatch('REQUEST_ITEM_PROCESSING', {\n                            query: item,\n                            success: success,\n                            failure: failure,\n                        });\n                    };\n\n                    var process = function process() {\n                        return document.hidden ? processNow() : setTimeout(processNow, 32);\n                    };\n\n                    // if already done processing or tried to revert but didn't work, try again\n                    if (\n                        item.status === ItemStatus.PROCESSING_COMPLETE ||\n                        item.status === ItemStatus.PROCESSING_REVERT_ERROR\n                    ) {\n                        item.revert(\n                            createRevertFunction(\n                                state.options.server.url,\n                                state.options.server.revert\n                            ),\n                            query('GET_FORCE_REVERT')\n                        )\n                            .then(process)\n                            .catch(function() {}); // don't continue with processing if something went wrong\n                    } else if (item.status === ItemStatus.PROCESSING) {\n                        item.abortProcessing().then(process);\n                    }\n\n                    return;\n                }\n\n                // already queued for processing\n                if (item.status === ItemStatus.PROCESSING_QUEUED) return;\n\n                item.requestProcessing();\n\n                dispatch('DID_REQUEST_ITEM_PROCESSING', { id: item.id });\n\n                dispatch('PROCESS_ITEM', { query: item, success: success, failure: failure }, true);\n            }),\n\n            PROCESS_ITEM: getItemByQueryFromState(state, function(item, success, failure) {\n                var maxParallelUploads = query('GET_MAX_PARALLEL_UPLOADS');\n                var totalCurrentUploads = query('GET_ITEMS_BY_STATUS', ItemStatus.PROCESSING)\n                    .length;\n\n                // queue and wait till queue is freed up\n                if (totalCurrentUploads === maxParallelUploads) {\n                    // queue for later processing\n                    state.processingQueue.push({\n                        id: item.id,\n                        success: success,\n                        failure: failure,\n                    });\n\n                    // stop it!\n                    return;\n                }\n\n                // if was not queued or is already processing exit here\n                if (item.status === ItemStatus.PROCESSING) return;\n\n                var processNext = function processNext() {\n                    // process queueud items\n                    var queueEntry = state.processingQueue.shift();\n\n                    // no items left\n                    if (!queueEntry) return;\n\n                    // get item reference\n                    var id = queueEntry.id,\n                        success = queueEntry.success,\n                        failure = queueEntry.failure;\n                    var itemReference = getItemByQuery(state.items, id);\n\n                    // if item was archived while in queue, jump to next\n                    if (!itemReference || itemReference.archived) {\n                        processNext();\n                        return;\n                    }\n\n                    // process queued item\n                    dispatch(\n                        'PROCESS_ITEM',\n                        { query: id, success: success, failure: failure },\n                        true\n                    );\n                };\n\n                // we done function\n                item.onOnce('process-complete', function() {\n                    success(createItemAPI(item));\n                    processNext();\n\n                    // if origin is local, and we're instant uploading, trigger remove of original\n                    // as revert will remove file from list\n                    var server = state.options.server;\n                    var instantUpload = state.options.instantUpload;\n                    if (\n                        instantUpload &&\n                        item.origin === FileOrigin.LOCAL &&\n                        isFunction(server.remove)\n                    ) {\n                        var noop = function noop() {};\n                        item.origin = FileOrigin.LIMBO;\n                        state.options.server.remove(item.source, noop, noop);\n                    }\n\n                    // All items processed? No errors?\n                    var allItemsProcessed =\n                        query('GET_ITEMS_BY_STATUS', ItemStatus.PROCESSING_COMPLETE).length ===\n                        state.items.length;\n                    if (allItemsProcessed) {\n                        dispatch('DID_COMPLETE_ITEM_PROCESSING_ALL');\n                    }\n                });\n\n                // we error function\n                item.onOnce('process-error', function(error) {\n                    failure({ error: error, file: createItemAPI(item) });\n                    processNext();\n                });\n\n                // start file processing\n                var options = state.options;\n                item.process(\n                    createFileProcessor(\n                        createProcessorFunction(\n                            options.server.url,\n                            options.server.process,\n                            options.name,\n                            {\n                                chunkTransferId: item.transferId,\n                                chunkServer: options.server.patch,\n                                chunkUploads: options.chunkUploads,\n                                chunkForce: options.chunkForce,\n                                chunkSize: options.chunkSize,\n                                chunkRetryDelays: options.chunkRetryDelays,\n                            }\n                        ),\n\n                        {\n                            allowMinimumUploadDuration: query('GET_ALLOW_MINIMUM_UPLOAD_DURATION'),\n                        }\n                    ),\n\n                    // called when the file is about to be processed so it can be piped through the transform filters\n                    function(file, success, error) {\n                        // allow plugins to alter the file data\n                        applyFilterChain('PREPARE_OUTPUT', file, { query: query, item: item })\n                            .then(function(file) {\n                                dispatch('DID_PREPARE_OUTPUT', { id: item.id, file: file });\n\n                                success(file);\n                            })\n                            .catch(error);\n                    }\n                );\n            }),\n\n            RETRY_ITEM_PROCESSING: getItemByQueryFromState(state, function(item) {\n                dispatch('REQUEST_ITEM_PROCESSING', { query: item });\n            }),\n\n            REQUEST_REMOVE_ITEM: getItemByQueryFromState(state, function(item) {\n                optionalPromise(query('GET_BEFORE_REMOVE_FILE'), createItemAPI(item)).then(function(\n                    shouldRemove\n                ) {\n                    if (!shouldRemove) {\n                        return;\n                    }\n                    dispatch('REMOVE_ITEM', { query: item });\n                });\n            }),\n\n            RELEASE_ITEM: getItemByQueryFromState(state, function(item) {\n                item.release();\n            }),\n\n            REMOVE_ITEM: getItemByQueryFromState(state, function(item, success, failure, options) {\n                var removeFromView = function removeFromView() {\n                    // get id reference\n                    var id = item.id;\n\n                    // archive the item, this does not remove it from the list\n                    getItemById(state.items, id).archive();\n\n                    // tell the view the item has been removed\n                    dispatch('DID_REMOVE_ITEM', { error: null, id: id, item: item });\n\n                    // now the list has been modified\n                    listUpdated(dispatch, state);\n\n                    // correctly removed\n                    success(createItemAPI(item));\n                };\n\n                // if this is a local file and the `server.remove` function has been configured,\n                // send source there so dev can remove file from server\n                var server = state.options.server;\n                if (\n                    item.origin === FileOrigin.LOCAL &&\n                    server &&\n                    isFunction(server.remove) &&\n                    options.remove !== false\n                ) {\n                    dispatch('DID_START_ITEM_REMOVE', { id: item.id });\n\n                    server.remove(\n                        item.source,\n                        function() {\n                            return removeFromView();\n                        },\n                        function(status) {\n                            dispatch('DID_THROW_ITEM_REMOVE_ERROR', {\n                                id: item.id,\n                                error: createResponse('error', 0, status, null),\n                                status: {\n                                    main: dynamicLabel(state.options.labelFileRemoveError)(status),\n                                    sub: state.options.labelTapToRetry,\n                                },\n                            });\n                        }\n                    );\n                } else {\n                    // if is requesting revert and can revert need to call revert handler (not calling request_ because that would also trigger beforeRemoveHook)\n                    if (\n                        (options.revert &&\n                            item.origin !== FileOrigin.LOCAL &&\n                            item.serverId !== null) ||\n                        // if chunked uploads are enabled and we're uploading in chunks for this specific file\n                        // or if the file isn't big enough for chunked uploads but chunkForce is set then call\n                        // revert before removing from the view...\n                        (state.options.chunkUploads && item.file.size > state.options.chunkSize) ||\n                        (state.options.chunkUploads && state.options.chunkForce)\n                    ) {\n                        item.revert(\n                            createRevertFunction(\n                                state.options.server.url,\n                                state.options.server.revert\n                            ),\n                            query('GET_FORCE_REVERT')\n                        );\n                    }\n\n                    // can now safely remove from view\n                    removeFromView();\n                }\n            }),\n\n            ABORT_ITEM_LOAD: getItemByQueryFromState(state, function(item) {\n                item.abortLoad();\n            }),\n\n            ABORT_ITEM_PROCESSING: getItemByQueryFromState(state, function(item) {\n                // test if is already processed\n                if (item.serverId) {\n                    dispatch('REVERT_ITEM_PROCESSING', { id: item.id });\n                    return;\n                }\n\n                // abort\n                item.abortProcessing().then(function() {\n                    var shouldRemove = state.options.instantUpload;\n                    if (shouldRemove) {\n                        dispatch('REMOVE_ITEM', { query: item.id });\n                    }\n                });\n            }),\n\n            REQUEST_REVERT_ITEM_PROCESSING: getItemByQueryFromState(state, function(item) {\n                // not instant uploading, revert immediately\n                if (!state.options.instantUpload) {\n                    dispatch('REVERT_ITEM_PROCESSING', { query: item });\n                    return;\n                }\n\n                // if we're instant uploading the file will also be removed if we revert,\n                // so if a before remove file hook is defined we need to run it now\n                var handleRevert = function handleRevert(shouldRevert) {\n                    if (!shouldRevert) return;\n                    dispatch('REVERT_ITEM_PROCESSING', { query: item });\n                };\n\n                var fn = query('GET_BEFORE_REMOVE_FILE');\n                if (!fn) {\n                    return handleRevert(true);\n                }\n\n                var requestRemoveResult = fn(createItemAPI(item));\n                if (requestRemoveResult == null) {\n                    // undefined or null\n                    return handleRevert(true);\n                }\n\n                if (typeof requestRemoveResult === 'boolean') {\n                    return handleRevert(requestRemoveResult);\n                }\n\n                if (typeof requestRemoveResult.then === 'function') {\n                    requestRemoveResult.then(handleRevert);\n                }\n            }),\n\n            REVERT_ITEM_PROCESSING: getItemByQueryFromState(state, function(item) {\n                item.revert(\n                    createRevertFunction(state.options.server.url, state.options.server.revert),\n                    query('GET_FORCE_REVERT')\n                )\n                    .then(function() {\n                        var shouldRemove = state.options.instantUpload || isMockItem(item);\n                        if (shouldRemove) {\n                            dispatch('REMOVE_ITEM', { query: item.id });\n                        }\n                    })\n                    .catch(function() {});\n            }),\n\n            SET_OPTIONS: function SET_OPTIONS(_ref11) {\n                var options = _ref11.options;\n                forin(options, function(key, value) {\n                    dispatch('SET_' + fromCamels(key, '_').toUpperCase(), { value: value });\n                });\n            },\n        };\n    };\n\n    var formatFilename = function formatFilename(name) {\n        return name;\n    };\n\n    var createElement$1 = function createElement(tagName) {\n        return document.createElement(tagName);\n    };\n\n    var text = function text(node, value) {\n        var textNode = node.childNodes[0];\n        if (!textNode) {\n            textNode = document.createTextNode(value);\n            node.appendChild(textNode);\n        } else if (value !== textNode.nodeValue) {\n            textNode.nodeValue = value;\n        }\n    };\n\n    var polarToCartesian = function polarToCartesian(centerX, centerY, radius, angleInDegrees) {\n        var angleInRadians = (((angleInDegrees % 360) - 90) * Math.PI) / 180.0;\n        return {\n            x: centerX + radius * Math.cos(angleInRadians),\n            y: centerY + radius * Math.sin(angleInRadians),\n        };\n    };\n\n    var describeArc = function describeArc(x, y, radius, startAngle, endAngle, arcSweep) {\n        var start = polarToCartesian(x, y, radius, endAngle);\n        var end = polarToCartesian(x, y, radius, startAngle);\n        return ['M', start.x, start.y, 'A', radius, radius, 0, arcSweep, 0, end.x, end.y].join(' ');\n    };\n\n    var percentageArc = function percentageArc(x, y, radius, from, to) {\n        var arcSweep = 1;\n        if (to > from && to - from <= 0.5) {\n            arcSweep = 0;\n        }\n        if (from > to && from - to >= 0.5) {\n            arcSweep = 0;\n        }\n        return describeArc(\n            x,\n            y,\n            radius,\n            Math.min(0.9999, from) * 360,\n            Math.min(0.9999, to) * 360,\n            arcSweep\n        );\n    };\n\n    var create = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n        // start at 0\n        props.spin = false;\n        props.progress = 0;\n        props.opacity = 0;\n\n        // svg\n        var svg = createElement('svg');\n        root.ref.path = createElement('path', {\n            'stroke-width': 2,\n            'stroke-linecap': 'round',\n        });\n\n        svg.appendChild(root.ref.path);\n\n        root.ref.svg = svg;\n\n        root.appendChild(svg);\n    };\n\n    var write = function write(_ref2) {\n        var root = _ref2.root,\n            props = _ref2.props;\n        if (props.opacity === 0) {\n            return;\n        }\n\n        if (props.align) {\n            root.element.dataset.align = props.align;\n        }\n\n        // get width of stroke\n        var ringStrokeWidth = parseInt(attr(root.ref.path, 'stroke-width'), 10);\n\n        // calculate size of ring\n        var size = root.rect.element.width * 0.5;\n\n        // ring state\n        var ringFrom = 0;\n        var ringTo = 0;\n\n        // now in busy mode\n        if (props.spin) {\n            ringFrom = 0;\n            ringTo = 0.5;\n        } else {\n            ringFrom = 0;\n            ringTo = props.progress;\n        }\n\n        // get arc path\n        var coordinates = percentageArc(size, size, size - ringStrokeWidth, ringFrom, ringTo);\n\n        // update progress bar\n        attr(root.ref.path, 'd', coordinates);\n\n        // hide while contains 0 value\n        attr(root.ref.path, 'stroke-opacity', props.spin || props.progress > 0 ? 1 : 0);\n    };\n\n    var progressIndicator = createView({\n        tag: 'div',\n        name: 'progress-indicator',\n        ignoreRectUpdate: true,\n        ignoreRect: true,\n        create: create,\n        write: write,\n        mixins: {\n            apis: ['progress', 'spin', 'align'],\n            styles: ['opacity'],\n            animations: {\n                opacity: { type: 'tween', duration: 500 },\n                progress: {\n                    type: 'spring',\n                    stiffness: 0.95,\n                    damping: 0.65,\n                    mass: 10,\n                },\n            },\n        },\n    });\n\n    var create$1 = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n        root.element.innerHTML = (props.icon || '') + ('<span>' + props.label + '</span>');\n\n        props.isDisabled = false;\n    };\n\n    var write$1 = function write(_ref2) {\n        var root = _ref2.root,\n            props = _ref2.props;\n        var isDisabled = props.isDisabled;\n        var shouldDisable = root.query('GET_DISABLED') || props.opacity === 0;\n\n        if (shouldDisable && !isDisabled) {\n            props.isDisabled = true;\n            attr(root.element, 'disabled', 'disabled');\n        } else if (!shouldDisable && isDisabled) {\n            props.isDisabled = false;\n            root.element.removeAttribute('disabled');\n        }\n    };\n\n    var fileActionButton = createView({\n        tag: 'button',\n        attributes: {\n            type: 'button',\n        },\n\n        ignoreRect: true,\n        ignoreRectUpdate: true,\n        name: 'file-action-button',\n        mixins: {\n            apis: ['label'],\n            styles: ['translateX', 'translateY', 'scaleX', 'scaleY', 'opacity'],\n            animations: {\n                scaleX: 'spring',\n                scaleY: 'spring',\n                translateX: 'spring',\n                translateY: 'spring',\n                opacity: { type: 'tween', duration: 250 },\n            },\n\n            listeners: true,\n        },\n\n        create: create$1,\n        write: write$1,\n    });\n\n    var toNaturalFileSize = function toNaturalFileSize(bytes) {\n        var decimalSeparator =\n            arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '.';\n        var base = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1000;\n        // no negative byte sizes\n        bytes = Math.round(Math.abs(bytes));\n\n        var KB = base;\n        var MB = base * base;\n        var GB = base * base * base;\n\n        // just bytes\n        if (bytes < KB) {\n            return bytes + ' bytes';\n        }\n\n        // kilobytes\n        if (bytes < MB) {\n            return Math.floor(bytes / KB) + ' KB';\n        }\n\n        // megabytes\n        if (bytes < GB) {\n            return removeDecimalsWhenZero(bytes / MB, 1, decimalSeparator) + ' MB';\n        }\n\n        // gigabytes\n        return removeDecimalsWhenZero(bytes / GB, 2, decimalSeparator) + ' GB';\n    };\n\n    var removeDecimalsWhenZero = function removeDecimalsWhenZero(value, decimalCount, separator) {\n        return value\n            .toFixed(decimalCount)\n            .split('.')\n            .filter(function(part) {\n                return part !== '0';\n            })\n            .join(separator);\n    };\n\n    var create$2 = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n        // filename\n        var fileName = createElement$1('span');\n        fileName.className = 'filepond--file-info-main';\n        // hide for screenreaders\n        // the file is contained in a fieldset with legend that contains the filename\n        // no need to read it twice\n        attr(fileName, 'aria-hidden', 'true');\n        root.appendChild(fileName);\n        root.ref.fileName = fileName;\n\n        // filesize\n        var fileSize = createElement$1('span');\n        fileSize.className = 'filepond--file-info-sub';\n        root.appendChild(fileSize);\n        root.ref.fileSize = fileSize;\n\n        // set initial values\n        text(fileSize, root.query('GET_LABEL_FILE_WAITING_FOR_SIZE'));\n        text(fileName, formatFilename(root.query('GET_ITEM_NAME', props.id)));\n    };\n\n    var updateFile = function updateFile(_ref2) {\n        var root = _ref2.root,\n            props = _ref2.props;\n        text(\n            root.ref.fileSize,\n            toNaturalFileSize(\n                root.query('GET_ITEM_SIZE', props.id),\n                '.',\n                root.query('GET_FILE_SIZE_BASE')\n            )\n        );\n\n        text(root.ref.fileName, formatFilename(root.query('GET_ITEM_NAME', props.id)));\n    };\n\n    var updateFileSizeOnError = function updateFileSizeOnError(_ref3) {\n        var root = _ref3.root,\n            props = _ref3.props;\n        // if size is available don't fallback to unknown size message\n        if (isInt(root.query('GET_ITEM_SIZE', props.id))) {\n            updateFile({ root: root, props: props });\n            return;\n        }\n\n        text(root.ref.fileSize, root.query('GET_LABEL_FILE_SIZE_NOT_AVAILABLE'));\n    };\n\n    var fileInfo = createView({\n        name: 'file-info',\n        ignoreRect: true,\n        ignoreRectUpdate: true,\n        write: createRoute({\n            DID_LOAD_ITEM: updateFile,\n            DID_UPDATE_ITEM_META: updateFile,\n            DID_THROW_ITEM_LOAD_ERROR: updateFileSizeOnError,\n            DID_THROW_ITEM_INVALID: updateFileSizeOnError,\n        }),\n\n        didCreateView: function didCreateView(root) {\n            applyFilters('CREATE_VIEW', Object.assign({}, root, { view: root }));\n        },\n        create: create$2,\n        mixins: {\n            styles: ['translateX', 'translateY'],\n            animations: {\n                translateX: 'spring',\n                translateY: 'spring',\n            },\n        },\n    });\n\n    var toPercentage = function toPercentage(value) {\n        return Math.round(value * 100);\n    };\n\n    var create$3 = function create(_ref) {\n        var root = _ref.root;\n\n        // main status\n        var main = createElement$1('span');\n        main.className = 'filepond--file-status-main';\n        root.appendChild(main);\n        root.ref.main = main;\n\n        // sub status\n        var sub = createElement$1('span');\n        sub.className = 'filepond--file-status-sub';\n        root.appendChild(sub);\n        root.ref.sub = sub;\n\n        didSetItemLoadProgress({ root: root, action: { progress: null } });\n    };\n\n    var didSetItemLoadProgress = function didSetItemLoadProgress(_ref2) {\n        var root = _ref2.root,\n            action = _ref2.action;\n        var title =\n            action.progress === null\n                ? root.query('GET_LABEL_FILE_LOADING')\n                : root.query('GET_LABEL_FILE_LOADING') + ' ' + toPercentage(action.progress) + '%';\n\n        text(root.ref.main, title);\n        text(root.ref.sub, root.query('GET_LABEL_TAP_TO_CANCEL'));\n    };\n\n    var didSetItemProcessProgress = function didSetItemProcessProgress(_ref3) {\n        var root = _ref3.root,\n            action = _ref3.action;\n        var title =\n            action.progress === null\n                ? root.query('GET_LABEL_FILE_PROCESSING')\n                : root.query('GET_LABEL_FILE_PROCESSING') +\n                  ' ' +\n                  toPercentage(action.progress) +\n                  '%';\n\n        text(root.ref.main, title);\n        text(root.ref.sub, root.query('GET_LABEL_TAP_TO_CANCEL'));\n    };\n\n    var didRequestItemProcessing = function didRequestItemProcessing(_ref4) {\n        var root = _ref4.root;\n        text(root.ref.main, root.query('GET_LABEL_FILE_PROCESSING'));\n        text(root.ref.sub, root.query('GET_LABEL_TAP_TO_CANCEL'));\n    };\n\n    var didAbortItemProcessing = function didAbortItemProcessing(_ref5) {\n        var root = _ref5.root;\n        text(root.ref.main, root.query('GET_LABEL_FILE_PROCESSING_ABORTED'));\n        text(root.ref.sub, root.query('GET_LABEL_TAP_TO_RETRY'));\n    };\n\n    var didCompleteItemProcessing = function didCompleteItemProcessing(_ref6) {\n        var root = _ref6.root;\n        text(root.ref.main, root.query('GET_LABEL_FILE_PROCESSING_COMPLETE'));\n        text(root.ref.sub, root.query('GET_LABEL_TAP_TO_UNDO'));\n    };\n\n    var clear = function clear(_ref7) {\n        var root = _ref7.root;\n        text(root.ref.main, '');\n        text(root.ref.sub, '');\n    };\n\n    var error = function error(_ref8) {\n        var root = _ref8.root,\n            action = _ref8.action;\n        text(root.ref.main, action.status.main);\n        text(root.ref.sub, action.status.sub);\n    };\n\n    var fileStatus = createView({\n        name: 'file-status',\n        ignoreRect: true,\n        ignoreRectUpdate: true,\n        write: createRoute({\n            DID_LOAD_ITEM: clear,\n            DID_REVERT_ITEM_PROCESSING: clear,\n            DID_REQUEST_ITEM_PROCESSING: didRequestItemProcessing,\n            DID_ABORT_ITEM_PROCESSING: didAbortItemProcessing,\n            DID_COMPLETE_ITEM_PROCESSING: didCompleteItemProcessing,\n            DID_UPDATE_ITEM_PROCESS_PROGRESS: didSetItemProcessProgress,\n            DID_UPDATE_ITEM_LOAD_PROGRESS: didSetItemLoadProgress,\n            DID_THROW_ITEM_LOAD_ERROR: error,\n            DID_THROW_ITEM_INVALID: error,\n            DID_THROW_ITEM_PROCESSING_ERROR: error,\n            DID_THROW_ITEM_PROCESSING_REVERT_ERROR: error,\n            DID_THROW_ITEM_REMOVE_ERROR: error,\n        }),\n\n        didCreateView: function didCreateView(root) {\n            applyFilters('CREATE_VIEW', Object.assign({}, root, { view: root }));\n        },\n        create: create$3,\n        mixins: {\n            styles: ['translateX', 'translateY', 'opacity'],\n            animations: {\n                opacity: { type: 'tween', duration: 250 },\n                translateX: 'spring',\n                translateY: 'spring',\n            },\n        },\n    });\n\n    /**\n     * Button definitions for the file view\n     */\n\n    var Buttons = {\n        AbortItemLoad: {\n            label: 'GET_LABEL_BUTTON_ABORT_ITEM_LOAD',\n            action: 'ABORT_ITEM_LOAD',\n            className: 'filepond--action-abort-item-load',\n            align: 'LOAD_INDICATOR_POSITION', // right\n        },\n        RetryItemLoad: {\n            label: 'GET_LABEL_BUTTON_RETRY_ITEM_LOAD',\n            action: 'RETRY_ITEM_LOAD',\n            icon: 'GET_ICON_RETRY',\n            className: 'filepond--action-retry-item-load',\n            align: 'BUTTON_PROCESS_ITEM_POSITION', // right\n        },\n        RemoveItem: {\n            label: 'GET_LABEL_BUTTON_REMOVE_ITEM',\n            action: 'REQUEST_REMOVE_ITEM',\n            icon: 'GET_ICON_REMOVE',\n            className: 'filepond--action-remove-item',\n            align: 'BUTTON_REMOVE_ITEM_POSITION', // left\n        },\n        ProcessItem: {\n            label: 'GET_LABEL_BUTTON_PROCESS_ITEM',\n            action: 'REQUEST_ITEM_PROCESSING',\n            icon: 'GET_ICON_PROCESS',\n            className: 'filepond--action-process-item',\n            align: 'BUTTON_PROCESS_ITEM_POSITION', // right\n        },\n        AbortItemProcessing: {\n            label: 'GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING',\n            action: 'ABORT_ITEM_PROCESSING',\n            className: 'filepond--action-abort-item-processing',\n            align: 'BUTTON_PROCESS_ITEM_POSITION', // right\n        },\n        RetryItemProcessing: {\n            label: 'GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING',\n            action: 'RETRY_ITEM_PROCESSING',\n            icon: 'GET_ICON_RETRY',\n            className: 'filepond--action-retry-item-processing',\n            align: 'BUTTON_PROCESS_ITEM_POSITION', // right\n        },\n        RevertItemProcessing: {\n            label: 'GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING',\n            action: 'REQUEST_REVERT_ITEM_PROCESSING',\n            icon: 'GET_ICON_UNDO',\n            className: 'filepond--action-revert-item-processing',\n            align: 'BUTTON_PROCESS_ITEM_POSITION', // right\n        },\n    };\n\n    // make a list of buttons, we can then remove buttons from this list if they're disabled\n    var ButtonKeys = [];\n    forin(Buttons, function(key) {\n        ButtonKeys.push(key);\n    });\n\n    var calculateFileInfoOffset = function calculateFileInfoOffset(root) {\n        if (getRemoveIndicatorAligment(root) === 'right') return 0;\n        var buttonRect = root.ref.buttonRemoveItem.rect.element;\n        return buttonRect.hidden ? null : buttonRect.width + buttonRect.left;\n    };\n\n    var calculateButtonWidth = function calculateButtonWidth(root) {\n        var buttonRect = root.ref.buttonAbortItemLoad.rect.element;\n        return buttonRect.width;\n    };\n\n    // Force on full pixels so text stays crips\n    var calculateFileVerticalCenterOffset = function calculateFileVerticalCenterOffset(root) {\n        return Math.floor(root.ref.buttonRemoveItem.rect.element.height / 4);\n    };\n    var calculateFileHorizontalCenterOffset = function calculateFileHorizontalCenterOffset(root) {\n        return Math.floor(root.ref.buttonRemoveItem.rect.element.left / 2);\n    };\n\n    var getLoadIndicatorAlignment = function getLoadIndicatorAlignment(root) {\n        return root.query('GET_STYLE_LOAD_INDICATOR_POSITION');\n    };\n    var getProcessIndicatorAlignment = function getProcessIndicatorAlignment(root) {\n        return root.query('GET_STYLE_PROGRESS_INDICATOR_POSITION');\n    };\n    var getRemoveIndicatorAligment = function getRemoveIndicatorAligment(root) {\n        return root.query('GET_STYLE_BUTTON_REMOVE_ITEM_POSITION');\n    };\n\n    var DefaultStyle = {\n        buttonAbortItemLoad: { opacity: 0 },\n        buttonRetryItemLoad: { opacity: 0 },\n        buttonRemoveItem: { opacity: 0 },\n        buttonProcessItem: { opacity: 0 },\n        buttonAbortItemProcessing: { opacity: 0 },\n        buttonRetryItemProcessing: { opacity: 0 },\n        buttonRevertItemProcessing: { opacity: 0 },\n        loadProgressIndicator: { opacity: 0, align: getLoadIndicatorAlignment },\n        processProgressIndicator: { opacity: 0, align: getProcessIndicatorAlignment },\n        processingCompleteIndicator: { opacity: 0, scaleX: 0.75, scaleY: 0.75 },\n        info: { translateX: 0, translateY: 0, opacity: 0 },\n        status: { translateX: 0, translateY: 0, opacity: 0 },\n    };\n\n    var IdleStyle = {\n        buttonRemoveItem: { opacity: 1 },\n        buttonProcessItem: { opacity: 1 },\n        info: { translateX: calculateFileInfoOffset },\n        status: { translateX: calculateFileInfoOffset },\n    };\n\n    var ProcessingStyle = {\n        buttonAbortItemProcessing: { opacity: 1 },\n        processProgressIndicator: { opacity: 1 },\n        status: { opacity: 1 },\n    };\n\n    var StyleMap = {\n        DID_THROW_ITEM_INVALID: {\n            buttonRemoveItem: { opacity: 1 },\n            info: { translateX: calculateFileInfoOffset },\n            status: { translateX: calculateFileInfoOffset, opacity: 1 },\n        },\n\n        DID_START_ITEM_LOAD: {\n            buttonAbortItemLoad: { opacity: 1 },\n            loadProgressIndicator: { opacity: 1 },\n            status: { opacity: 1 },\n        },\n\n        DID_THROW_ITEM_LOAD_ERROR: {\n            buttonRetryItemLoad: { opacity: 1 },\n            buttonRemoveItem: { opacity: 1 },\n            info: { translateX: calculateFileInfoOffset },\n            status: { opacity: 1 },\n        },\n\n        DID_START_ITEM_REMOVE: {\n            processProgressIndicator: { opacity: 1, align: getRemoveIndicatorAligment },\n            info: { translateX: calculateFileInfoOffset },\n            status: { opacity: 0 },\n        },\n\n        DID_THROW_ITEM_REMOVE_ERROR: {\n            processProgressIndicator: { opacity: 0, align: getRemoveIndicatorAligment },\n            buttonRemoveItem: { opacity: 1 },\n            info: { translateX: calculateFileInfoOffset },\n            status: { opacity: 1, translateX: calculateFileInfoOffset },\n        },\n\n        DID_LOAD_ITEM: IdleStyle,\n        DID_LOAD_LOCAL_ITEM: {\n            buttonRemoveItem: { opacity: 1 },\n            info: { translateX: calculateFileInfoOffset },\n            status: { translateX: calculateFileInfoOffset },\n        },\n\n        DID_START_ITEM_PROCESSING: ProcessingStyle,\n        DID_REQUEST_ITEM_PROCESSING: ProcessingStyle,\n        DID_UPDATE_ITEM_PROCESS_PROGRESS: ProcessingStyle,\n        DID_COMPLETE_ITEM_PROCESSING: {\n            buttonRevertItemProcessing: { opacity: 1 },\n            info: { opacity: 1 },\n            status: { opacity: 1 },\n        },\n\n        DID_THROW_ITEM_PROCESSING_ERROR: {\n            buttonRemoveItem: { opacity: 1 },\n            buttonRetryItemProcessing: { opacity: 1 },\n            status: { opacity: 1 },\n            info: { translateX: calculateFileInfoOffset },\n        },\n\n        DID_THROW_ITEM_PROCESSING_REVERT_ERROR: {\n            buttonRevertItemProcessing: { opacity: 1 },\n            status: { opacity: 1 },\n            info: { opacity: 1 },\n        },\n\n        DID_ABORT_ITEM_PROCESSING: {\n            buttonRemoveItem: { opacity: 1 },\n            buttonProcessItem: { opacity: 1 },\n            info: { translateX: calculateFileInfoOffset },\n            status: { opacity: 1 },\n        },\n\n        DID_REVERT_ITEM_PROCESSING: IdleStyle,\n    };\n\n    // complete indicator view\n    var processingCompleteIndicatorView = createView({\n        create: function create(_ref) {\n            var root = _ref.root;\n            root.element.innerHTML = root.query('GET_ICON_DONE');\n        },\n        name: 'processing-complete-indicator',\n        ignoreRect: true,\n        mixins: {\n            styles: ['scaleX', 'scaleY', 'opacity'],\n            animations: {\n                scaleX: 'spring',\n                scaleY: 'spring',\n                opacity: { type: 'tween', duration: 250 },\n            },\n        },\n    });\n\n    /**\n     * Creates the file view\n     */\n    var create$4 = function create(_ref2) {\n        var root = _ref2.root,\n            props = _ref2.props;\n        // copy Buttons object\n        var LocalButtons = Object.keys(Buttons).reduce(function(prev, curr) {\n            prev[curr] = Object.assign({}, Buttons[curr]);\n            return prev;\n        }, {});\n        var id = props.id;\n\n        // allow reverting upload\n        var allowRevert = root.query('GET_ALLOW_REVERT');\n\n        // allow remove file\n        var allowRemove = root.query('GET_ALLOW_REMOVE');\n\n        // allow processing upload\n        var allowProcess = root.query('GET_ALLOW_PROCESS');\n\n        // is instant uploading, need this to determine the icon of the undo button\n        var instantUpload = root.query('GET_INSTANT_UPLOAD');\n\n        // is async set up\n        var isAsync = root.query('IS_ASYNC');\n\n        // should align remove item buttons\n        var alignRemoveItemButton = root.query('GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN');\n\n        // enabled buttons array\n        var buttonFilter;\n        if (isAsync) {\n            if (allowProcess && !allowRevert) {\n                // only remove revert button\n                buttonFilter = function buttonFilter(key) {\n                    return !/RevertItemProcessing/.test(key);\n                };\n            } else if (!allowProcess && allowRevert) {\n                // only remove process button\n                buttonFilter = function buttonFilter(key) {\n                    return !/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(key);\n                };\n            } else if (!allowProcess && !allowRevert) {\n                // remove all process buttons\n                buttonFilter = function buttonFilter(key) {\n                    return !/Process/.test(key);\n                };\n            }\n        } else {\n            // no process controls available\n            buttonFilter = function buttonFilter(key) {\n                return !/Process/.test(key);\n            };\n        }\n\n        var enabledButtons = buttonFilter ? ButtonKeys.filter(buttonFilter) : ButtonKeys.concat();\n\n        // update icon and label for revert button when instant uploading\n        if (instantUpload && allowRevert) {\n            LocalButtons['RevertItemProcessing'].label = 'GET_LABEL_BUTTON_REMOVE_ITEM';\n            LocalButtons['RevertItemProcessing'].icon = 'GET_ICON_REMOVE';\n        }\n\n        // remove last button (revert) if not allowed\n        if (isAsync && !allowRevert) {\n            var map = StyleMap['DID_COMPLETE_ITEM_PROCESSING'];\n            map.info.translateX = calculateFileHorizontalCenterOffset;\n            map.info.translateY = calculateFileVerticalCenterOffset;\n            map.status.translateY = calculateFileVerticalCenterOffset;\n            map.processingCompleteIndicator = { opacity: 1, scaleX: 1, scaleY: 1 };\n        }\n\n        // should align center\n        if (isAsync && !allowProcess) {\n            [\n                'DID_START_ITEM_PROCESSING',\n                'DID_REQUEST_ITEM_PROCESSING',\n                'DID_UPDATE_ITEM_PROCESS_PROGRESS',\n                'DID_THROW_ITEM_PROCESSING_ERROR',\n            ].forEach(function(key) {\n                StyleMap[key].status.translateY = calculateFileVerticalCenterOffset;\n            });\n            StyleMap['DID_THROW_ITEM_PROCESSING_ERROR'].status.translateX = calculateButtonWidth;\n        }\n\n        // move remove button to right\n        if (alignRemoveItemButton && allowRevert) {\n            LocalButtons['RevertItemProcessing'].align = 'BUTTON_REMOVE_ITEM_POSITION';\n            var _map = StyleMap['DID_COMPLETE_ITEM_PROCESSING'];\n            _map.info.translateX = calculateFileInfoOffset;\n            _map.status.translateY = calculateFileVerticalCenterOffset;\n            _map.processingCompleteIndicator = { opacity: 1, scaleX: 1, scaleY: 1 };\n        }\n\n        // show/hide RemoveItem button\n        if (!allowRemove) {\n            LocalButtons['RemoveItem'].disabled = true;\n        }\n\n        // create the button views\n        forin(LocalButtons, function(key, definition) {\n            // create button\n            var buttonView = root.createChildView(fileActionButton, {\n                label: root.query(definition.label),\n                icon: root.query(definition.icon),\n                opacity: 0,\n            });\n\n            // should be appended?\n            if (enabledButtons.includes(key)) {\n                root.appendChildView(buttonView);\n            }\n\n            // toggle\n            if (definition.disabled) {\n                buttonView.element.setAttribute('disabled', 'disabled');\n                buttonView.element.setAttribute('hidden', 'hidden');\n            }\n\n            // add position attribute\n            buttonView.element.dataset.align = root.query('GET_STYLE_' + definition.align);\n\n            // add class\n            buttonView.element.classList.add(definition.className);\n\n            // handle interactions\n            buttonView.on('click', function(e) {\n                e.stopPropagation();\n                if (definition.disabled) return;\n                root.dispatch(definition.action, { query: id });\n            });\n\n            // set reference\n            root.ref['button' + key] = buttonView;\n        });\n\n        // checkmark\n        root.ref.processingCompleteIndicator = root.appendChildView(\n            root.createChildView(processingCompleteIndicatorView)\n        );\n\n        root.ref.processingCompleteIndicator.element.dataset.align = root.query(\n            'GET_STYLE_BUTTON_PROCESS_ITEM_POSITION'\n        );\n\n        // create file info view\n        root.ref.info = root.appendChildView(root.createChildView(fileInfo, { id: id }));\n\n        // create file status view\n        root.ref.status = root.appendChildView(root.createChildView(fileStatus, { id: id }));\n\n        // add progress indicators\n        var loadIndicatorView = root.appendChildView(\n            root.createChildView(progressIndicator, {\n                opacity: 0,\n                align: root.query('GET_STYLE_LOAD_INDICATOR_POSITION'),\n            })\n        );\n\n        loadIndicatorView.element.classList.add('filepond--load-indicator');\n        root.ref.loadProgressIndicator = loadIndicatorView;\n\n        var progressIndicatorView = root.appendChildView(\n            root.createChildView(progressIndicator, {\n                opacity: 0,\n                align: root.query('GET_STYLE_PROGRESS_INDICATOR_POSITION'),\n            })\n        );\n\n        progressIndicatorView.element.classList.add('filepond--process-indicator');\n        root.ref.processProgressIndicator = progressIndicatorView;\n\n        // current active styles\n        root.ref.activeStyles = [];\n    };\n\n    var write$2 = function write(_ref3) {\n        var root = _ref3.root,\n            actions = _ref3.actions,\n            props = _ref3.props;\n        // route actions\n        route({ root: root, actions: actions, props: props });\n\n        // select last state change action\n        var action = actions\n            .concat()\n            .filter(function(action) {\n                return /^DID_/.test(action.type);\n            })\n            .reverse()\n            .find(function(action) {\n                return StyleMap[action.type];\n            });\n\n        // a new action happened, let's get the matching styles\n        if (action) {\n            // define new active styles\n            root.ref.activeStyles = [];\n\n            var stylesToApply = StyleMap[action.type];\n            forin(DefaultStyle, function(name, defaultStyles) {\n                // get reference to control\n                var control = root.ref[name];\n\n                // loop over all styles for this control\n                forin(defaultStyles, function(key, defaultValue) {\n                    var value =\n                        stylesToApply[name] && typeof stylesToApply[name][key] !== 'undefined'\n                            ? stylesToApply[name][key]\n                            : defaultValue;\n                    root.ref.activeStyles.push({ control: control, key: key, value: value });\n                });\n            });\n        }\n\n        // apply active styles to element\n        root.ref.activeStyles.forEach(function(_ref4) {\n            var control = _ref4.control,\n                key = _ref4.key,\n                value = _ref4.value;\n            control[key] = typeof value === 'function' ? value(root) : value;\n        });\n    };\n\n    var route = createRoute({\n        DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING: function DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING(\n            _ref5\n        ) {\n            var root = _ref5.root,\n                action = _ref5.action;\n            root.ref.buttonAbortItemProcessing.label = action.value;\n        },\n        DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD: function DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD(_ref6) {\n            var root = _ref6.root,\n                action = _ref6.action;\n            root.ref.buttonAbortItemLoad.label = action.value;\n        },\n        DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL: function DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL(\n            _ref7\n        ) {\n            var root = _ref7.root,\n                action = _ref7.action;\n            root.ref.buttonAbortItemRemoval.label = action.value;\n        },\n        DID_REQUEST_ITEM_PROCESSING: function DID_REQUEST_ITEM_PROCESSING(_ref8) {\n            var root = _ref8.root;\n            root.ref.processProgressIndicator.spin = true;\n            root.ref.processProgressIndicator.progress = 0;\n        },\n        DID_START_ITEM_LOAD: function DID_START_ITEM_LOAD(_ref9) {\n            var root = _ref9.root;\n            root.ref.loadProgressIndicator.spin = true;\n            root.ref.loadProgressIndicator.progress = 0;\n        },\n        DID_START_ITEM_REMOVE: function DID_START_ITEM_REMOVE(_ref10) {\n            var root = _ref10.root;\n            root.ref.processProgressIndicator.spin = true;\n            root.ref.processProgressIndicator.progress = 0;\n        },\n        DID_UPDATE_ITEM_LOAD_PROGRESS: function DID_UPDATE_ITEM_LOAD_PROGRESS(_ref11) {\n            var root = _ref11.root,\n                action = _ref11.action;\n            root.ref.loadProgressIndicator.spin = false;\n            root.ref.loadProgressIndicator.progress = action.progress;\n        },\n        DID_UPDATE_ITEM_PROCESS_PROGRESS: function DID_UPDATE_ITEM_PROCESS_PROGRESS(_ref12) {\n            var root = _ref12.root,\n                action = _ref12.action;\n            root.ref.processProgressIndicator.spin = false;\n            root.ref.processProgressIndicator.progress = action.progress;\n        },\n    });\n\n    var file = createView({\n        create: create$4,\n        write: write$2,\n        didCreateView: function didCreateView(root) {\n            applyFilters('CREATE_VIEW', Object.assign({}, root, { view: root }));\n        },\n        name: 'file',\n    });\n\n    /**\n     * Creates the file view\n     */\n    var create$5 = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n\n        // filename\n        root.ref.fileName = createElement$1('legend');\n        root.appendChild(root.ref.fileName);\n\n        // file appended\n        root.ref.file = root.appendChildView(root.createChildView(file, { id: props.id }));\n\n        // data has moved to data.js\n        root.ref.data = false;\n    };\n\n    /**\n     * Data storage\n     */\n    var didLoadItem = function didLoadItem(_ref2) {\n        var root = _ref2.root,\n            props = _ref2.props;\n        // updates the legend of the fieldset so screenreaders can better group buttons\n        text(root.ref.fileName, formatFilename(root.query('GET_ITEM_NAME', props.id)));\n    };\n\n    var fileWrapper = createView({\n        create: create$5,\n        ignoreRect: true,\n        write: createRoute({\n            DID_LOAD_ITEM: didLoadItem,\n        }),\n\n        didCreateView: function didCreateView(root) {\n            applyFilters('CREATE_VIEW', Object.assign({}, root, { view: root }));\n        },\n        tag: 'fieldset',\n        name: 'file-wrapper',\n    });\n\n    var PANEL_SPRING_PROPS = { type: 'spring', damping: 0.6, mass: 7 };\n\n    var create$6 = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n        [\n            {\n                name: 'top',\n            },\n\n            {\n                name: 'center',\n                props: {\n                    translateY: null,\n                    scaleY: null,\n                },\n\n                mixins: {\n                    animations: {\n                        scaleY: PANEL_SPRING_PROPS,\n                    },\n\n                    styles: ['translateY', 'scaleY'],\n                },\n            },\n\n            {\n                name: 'bottom',\n                props: {\n                    translateY: null,\n                },\n\n                mixins: {\n                    animations: {\n                        translateY: PANEL_SPRING_PROPS,\n                    },\n\n                    styles: ['translateY'],\n                },\n            },\n        ].forEach(function(section) {\n            createSection(root, section, props.name);\n        });\n\n        root.element.classList.add('filepond--' + props.name);\n\n        root.ref.scalable = null;\n    };\n\n    var createSection = function createSection(root, section, className) {\n        var viewConstructor = createView({\n            name: 'panel-' + section.name + ' filepond--' + className,\n            mixins: section.mixins,\n            ignoreRectUpdate: true,\n        });\n\n        var view = root.createChildView(viewConstructor, section.props);\n\n        root.ref[section.name] = root.appendChildView(view);\n    };\n\n    var write$3 = function write(_ref2) {\n        var root = _ref2.root,\n            props = _ref2.props;\n\n        // update scalable state\n        if (root.ref.scalable === null || props.scalable !== root.ref.scalable) {\n            root.ref.scalable = isBoolean(props.scalable) ? props.scalable : true;\n            root.element.dataset.scalable = root.ref.scalable;\n        }\n\n        // no height, can't set\n        if (!props.height) return;\n\n        // get child rects\n        var topRect = root.ref.top.rect.element;\n        var bottomRect = root.ref.bottom.rect.element;\n\n        // make sure height never is smaller than bottom and top seciton heights combined (will probably never happen, but who knows)\n        var height = Math.max(topRect.height + bottomRect.height, props.height);\n\n        // offset center part\n        root.ref.center.translateY = topRect.height;\n\n        // scale center part\n        // use math ceil to prevent transparent lines because of rounding errors\n        root.ref.center.scaleY = (height - topRect.height - bottomRect.height) / 100;\n\n        // offset bottom part\n        root.ref.bottom.translateY = height - bottomRect.height;\n    };\n\n    var panel = createView({\n        name: 'panel',\n        read: function read(_ref3) {\n            var root = _ref3.root,\n                props = _ref3.props;\n            return (props.heightCurrent = root.ref.bottom.translateY);\n        },\n        write: write$3,\n        create: create$6,\n        ignoreRect: true,\n        mixins: {\n            apis: ['height', 'heightCurrent', 'scalable'],\n        },\n    });\n\n    var createDragHelper = function createDragHelper(items) {\n        var itemIds = items.map(function(item) {\n            return item.id;\n        });\n        var prevIndex = undefined;\n        return {\n            setIndex: function setIndex(index) {\n                prevIndex = index;\n            },\n            getIndex: function getIndex() {\n                return prevIndex;\n            },\n            getItemIndex: function getItemIndex(item) {\n                return itemIds.indexOf(item.id);\n            },\n        };\n    };\n\n    var ITEM_TRANSLATE_SPRING = {\n        type: 'spring',\n        stiffness: 0.75,\n        damping: 0.45,\n        mass: 10,\n    };\n\n    var ITEM_SCALE_SPRING = 'spring';\n\n    var StateMap = {\n        DID_START_ITEM_LOAD: 'busy',\n        DID_UPDATE_ITEM_LOAD_PROGRESS: 'loading',\n        DID_THROW_ITEM_INVALID: 'load-invalid',\n        DID_THROW_ITEM_LOAD_ERROR: 'load-error',\n        DID_LOAD_ITEM: 'idle',\n        DID_THROW_ITEM_REMOVE_ERROR: 'remove-error',\n        DID_START_ITEM_REMOVE: 'busy',\n        DID_START_ITEM_PROCESSING: 'busy processing',\n        DID_REQUEST_ITEM_PROCESSING: 'busy processing',\n        DID_UPDATE_ITEM_PROCESS_PROGRESS: 'processing',\n        DID_COMPLETE_ITEM_PROCESSING: 'processing-complete',\n        DID_THROW_ITEM_PROCESSING_ERROR: 'processing-error',\n        DID_THROW_ITEM_PROCESSING_REVERT_ERROR: 'processing-revert-error',\n        DID_ABORT_ITEM_PROCESSING: 'cancelled',\n        DID_REVERT_ITEM_PROCESSING: 'idle',\n    };\n\n    /**\n     * Creates the file view\n     */\n    var create$7 = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n\n        // select\n        root.ref.handleClick = function(e) {\n            return root.dispatch('DID_ACTIVATE_ITEM', { id: props.id });\n        };\n\n        // set id\n        root.element.id = 'filepond--item-' + props.id;\n        root.element.addEventListener('click', root.ref.handleClick);\n\n        // file view\n        root.ref.container = root.appendChildView(\n            root.createChildView(fileWrapper, { id: props.id })\n        );\n\n        // file panel\n        root.ref.panel = root.appendChildView(root.createChildView(panel, { name: 'item-panel' }));\n\n        // default start height\n        root.ref.panel.height = null;\n\n        // by default not marked for removal\n        props.markedForRemoval = false;\n\n        // if not allowed to reorder file items, exit here\n        if (!root.query('GET_ALLOW_REORDER')) return;\n\n        // set to idle so shows grab cursor\n        root.element.dataset.dragState = 'idle';\n\n        var grab = function grab(e) {\n            if (!e.isPrimary) return;\n\n            var removedActivateListener = false;\n\n            var origin = {\n                x: e.pageX,\n                y: e.pageY,\n            };\n\n            props.dragOrigin = {\n                x: root.translateX,\n                y: root.translateY,\n            };\n\n            props.dragCenter = {\n                x: e.offsetX,\n                y: e.offsetY,\n            };\n\n            var dragState = createDragHelper(root.query('GET_ACTIVE_ITEMS'));\n\n            root.dispatch('DID_GRAB_ITEM', { id: props.id, dragState: dragState });\n\n            var drag = function drag(e) {\n                if (!e.isPrimary) return;\n\n                e.stopPropagation();\n                e.preventDefault();\n\n                props.dragOffset = {\n                    x: e.pageX - origin.x,\n                    y: e.pageY - origin.y,\n                };\n\n                // if dragged stop listening to clicks, will re-add when done dragging\n                var dist =\n                    props.dragOffset.x * props.dragOffset.x +\n                    props.dragOffset.y * props.dragOffset.y;\n                if (dist > 16 && !removedActivateListener) {\n                    removedActivateListener = true;\n                    root.element.removeEventListener('click', root.ref.handleClick);\n                }\n\n                root.dispatch('DID_DRAG_ITEM', { id: props.id, dragState: dragState });\n            };\n\n            var drop = function drop(e) {\n                if (!e.isPrimary) return;\n\n                document.removeEventListener('pointermove', drag);\n                document.removeEventListener('pointerup', drop);\n\n                props.dragOffset = {\n                    x: e.pageX - origin.x,\n                    y: e.pageY - origin.y,\n                };\n\n                root.dispatch('DID_DROP_ITEM', { id: props.id, dragState: dragState });\n\n                // start listening to clicks again\n                if (removedActivateListener) {\n                    setTimeout(function() {\n                        return root.element.addEventListener('click', root.ref.handleClick);\n                    }, 0);\n                }\n            };\n\n            document.addEventListener('pointermove', drag);\n            document.addEventListener('pointerup', drop);\n        };\n\n        root.element.addEventListener('pointerdown', grab);\n    };\n\n    var route$1 = createRoute({\n        DID_UPDATE_PANEL_HEIGHT: function DID_UPDATE_PANEL_HEIGHT(_ref2) {\n            var root = _ref2.root,\n                action = _ref2.action;\n            root.height = action.height;\n        },\n    });\n\n    var write$4 = createRoute(\n        {\n            DID_GRAB_ITEM: function DID_GRAB_ITEM(_ref3) {\n                var root = _ref3.root,\n                    props = _ref3.props;\n                props.dragOrigin = {\n                    x: root.translateX,\n                    y: root.translateY,\n                };\n            },\n            DID_DRAG_ITEM: function DID_DRAG_ITEM(_ref4) {\n                var root = _ref4.root;\n                root.element.dataset.dragState = 'drag';\n            },\n            DID_DROP_ITEM: function DID_DROP_ITEM(_ref5) {\n                var root = _ref5.root,\n                    props = _ref5.props;\n                props.dragOffset = null;\n                props.dragOrigin = null;\n                root.element.dataset.dragState = 'drop';\n            },\n        },\n        function(_ref6) {\n            var root = _ref6.root,\n                actions = _ref6.actions,\n                props = _ref6.props,\n                shouldOptimize = _ref6.shouldOptimize;\n\n            if (root.element.dataset.dragState === 'drop') {\n                if (root.scaleX <= 1) {\n                    root.element.dataset.dragState = 'idle';\n                }\n            }\n\n            // select last state change action\n            var action = actions\n                .concat()\n                .filter(function(action) {\n                    return /^DID_/.test(action.type);\n                })\n                .reverse()\n                .find(function(action) {\n                    return StateMap[action.type];\n                });\n\n            // no need to set same state twice\n            if (action && action.type !== props.currentState) {\n                // set current state\n                props.currentState = action.type;\n\n                // set state\n                root.element.dataset.filepondItemState = StateMap[props.currentState] || '';\n            }\n\n            // route actions\n            var aspectRatio =\n                root.query('GET_ITEM_PANEL_ASPECT_RATIO') || root.query('GET_PANEL_ASPECT_RATIO');\n            if (!aspectRatio) {\n                route$1({ root: root, actions: actions, props: props });\n                if (!root.height && root.ref.container.rect.element.height > 0) {\n                    root.height = root.ref.container.rect.element.height;\n                }\n            } else if (!shouldOptimize) {\n                root.height = root.rect.element.width * aspectRatio;\n            }\n\n            // sync panel height with item height\n            if (shouldOptimize) {\n                root.ref.panel.height = null;\n            }\n\n            root.ref.panel.height = root.height;\n        }\n    );\n\n    var item = createView({\n        create: create$7,\n        write: write$4,\n        destroy: function destroy(_ref7) {\n            var root = _ref7.root,\n                props = _ref7.props;\n            root.element.removeEventListener('click', root.ref.handleClick);\n            root.dispatch('RELEASE_ITEM', { query: props.id });\n        },\n        tag: 'li',\n        name: 'item',\n        mixins: {\n            apis: [\n                'id',\n                'interactionMethod',\n                'markedForRemoval',\n                'spawnDate',\n                'dragCenter',\n                'dragOrigin',\n                'dragOffset',\n            ],\n            styles: ['translateX', 'translateY', 'scaleX', 'scaleY', 'opacity', 'height'],\n\n            animations: {\n                scaleX: ITEM_SCALE_SPRING,\n                scaleY: ITEM_SCALE_SPRING,\n                translateX: ITEM_TRANSLATE_SPRING,\n                translateY: ITEM_TRANSLATE_SPRING,\n                opacity: { type: 'tween', duration: 150 },\n            },\n        },\n    });\n\n    var getItemsPerRow = function(horizontalSpace, itemWidth) {\n        // add one pixel leeway, when using percentages for item width total items can be 1.99 per row\n\n        return Math.max(1, Math.floor((horizontalSpace + 1) / itemWidth));\n    };\n\n    var getItemIndexByPosition = function getItemIndexByPosition(view, children, positionInView) {\n        if (!positionInView) return;\n\n        var horizontalSpace = view.rect.element.width;\n        // const children = view.childViews;\n        var l = children.length;\n        var last = null;\n\n        // -1, don't move items to accomodate (either add to top or bottom)\n        if (l === 0 || positionInView.top < children[0].rect.element.top) return -1;\n\n        // let's get the item width\n        var item = children[0];\n        var itemRect = item.rect.element;\n        var itemHorizontalMargin = itemRect.marginLeft + itemRect.marginRight;\n        var itemWidth = itemRect.width + itemHorizontalMargin;\n        var itemsPerRow = getItemsPerRow(horizontalSpace, itemWidth);\n\n        // stack\n        if (itemsPerRow === 1) {\n            for (var index = 0; index < l; index++) {\n                var child = children[index];\n                var childMid = child.rect.outer.top + child.rect.element.height * 0.5;\n                if (positionInView.top < childMid) {\n                    return index;\n                }\n            }\n            return l;\n        }\n\n        // grid\n        var itemVerticalMargin = itemRect.marginTop + itemRect.marginBottom;\n        var itemHeight = itemRect.height + itemVerticalMargin;\n        for (var _index = 0; _index < l; _index++) {\n            var indexX = _index % itemsPerRow;\n            var indexY = Math.floor(_index / itemsPerRow);\n\n            var offsetX = indexX * itemWidth;\n            var offsetY = indexY * itemHeight;\n\n            var itemTop = offsetY - itemRect.marginTop;\n            var itemRight = offsetX + itemWidth;\n            var itemBottom = offsetY + itemHeight + itemRect.marginBottom;\n\n            if (positionInView.top < itemBottom && positionInView.top > itemTop) {\n                if (positionInView.left < itemRight) {\n                    return _index;\n                } else if (_index !== l - 1) {\n                    last = _index;\n                } else {\n                    last = null;\n                }\n            }\n        }\n\n        if (last !== null) {\n            return last;\n        }\n\n        return l;\n    };\n\n    var dropAreaDimensions = {\n        height: 0,\n        width: 0,\n        get getHeight() {\n            return this.height;\n        },\n        set setHeight(val) {\n            if (this.height === 0 || val === 0) this.height = val;\n        },\n        get getWidth() {\n            return this.width;\n        },\n        set setWidth(val) {\n            if (this.width === 0 || val === 0) this.width = val;\n        },\n        setDimensions: function setDimensions(height, width) {\n            if (this.height === 0 || height === 0) this.height = height;\n            if (this.width === 0 || width === 0) this.width = width;\n        },\n    };\n\n    var create$8 = function create(_ref) {\n        var root = _ref.root;\n        // need to set role to list as otherwise it won't be read as a list by VoiceOver\n        attr(root.element, 'role', 'list');\n\n        root.ref.lastItemSpanwDate = Date.now();\n    };\n\n    /**\n     * Inserts a new item\n     * @param root\n     * @param action\n     */\n    var addItemView = function addItemView(_ref2) {\n        var root = _ref2.root,\n            action = _ref2.action;\n        var id = action.id,\n            index = action.index,\n            interactionMethod = action.interactionMethod;\n\n        root.ref.addIndex = index;\n\n        var now = Date.now();\n        var spawnDate = now;\n        var opacity = 1;\n\n        if (interactionMethod !== InteractionMethod.NONE) {\n            opacity = 0;\n            var cooldown = root.query('GET_ITEM_INSERT_INTERVAL');\n            var dist = now - root.ref.lastItemSpanwDate;\n            spawnDate = dist < cooldown ? now + (cooldown - dist) : now;\n        }\n\n        root.ref.lastItemSpanwDate = spawnDate;\n\n        root.appendChildView(\n            root.createChildView(\n                // view type\n                item,\n\n                // props\n                {\n                    spawnDate: spawnDate,\n                    id: id,\n                    opacity: opacity,\n                    interactionMethod: interactionMethod,\n                }\n            ),\n\n            index\n        );\n    };\n\n    var moveItem = function moveItem(item, x, y) {\n        var vx = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n        var vy = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n        // set to null to remove animation while dragging\n        if (item.dragOffset) {\n            item.translateX = null;\n            item.translateY = null;\n            item.translateX = item.dragOrigin.x + item.dragOffset.x;\n            item.translateY = item.dragOrigin.y + item.dragOffset.y;\n            item.scaleX = 1.025;\n            item.scaleY = 1.025;\n        } else {\n            item.translateX = x;\n            item.translateY = y;\n\n            if (Date.now() > item.spawnDate) {\n                // reveal element\n                if (item.opacity === 0) {\n                    introItemView(item, x, y, vx, vy);\n                }\n\n                // make sure is default scale every frame\n                item.scaleX = 1;\n                item.scaleY = 1;\n                item.opacity = 1;\n            }\n        }\n    };\n\n    var introItemView = function introItemView(item, x, y, vx, vy) {\n        if (item.interactionMethod === InteractionMethod.NONE) {\n            item.translateX = null;\n            item.translateX = x;\n            item.translateY = null;\n            item.translateY = y;\n        } else if (item.interactionMethod === InteractionMethod.DROP) {\n            item.translateX = null;\n            item.translateX = x - vx * 20;\n\n            item.translateY = null;\n            item.translateY = y - vy * 10;\n\n            item.scaleX = 0.8;\n            item.scaleY = 0.8;\n        } else if (item.interactionMethod === InteractionMethod.BROWSE) {\n            item.translateY = null;\n            item.translateY = y - 30;\n        } else if (item.interactionMethod === InteractionMethod.API) {\n            item.translateX = null;\n            item.translateX = x - 30;\n            item.translateY = null;\n        }\n    };\n\n    /**\n     * Removes an existing item\n     * @param root\n     * @param action\n     */\n    var removeItemView = function removeItemView(_ref3) {\n        var root = _ref3.root,\n            action = _ref3.action;\n        var id = action.id;\n\n        // get the view matching the given id\n        var view = root.childViews.find(function(child) {\n            return child.id === id;\n        });\n\n        // if no view found, exit\n        if (!view) {\n            return;\n        }\n\n        // animate view out of view\n        view.scaleX = 0.9;\n        view.scaleY = 0.9;\n        view.opacity = 0;\n\n        // mark for removal\n        view.markedForRemoval = true;\n    };\n\n    var getItemHeight = function getItemHeight(child) {\n        return (\n            child.rect.element.height +\n            child.rect.element.marginBottom * 0.5 +\n            child.rect.element.marginTop * 0.5\n        );\n    };\n    var getItemWidth = function getItemWidth(child) {\n        return (\n            child.rect.element.width +\n            child.rect.element.marginLeft * 0.5 +\n            child.rect.element.marginRight * 0.5\n        );\n    };\n\n    var dragItem = function dragItem(_ref4) {\n        var root = _ref4.root,\n            action = _ref4.action;\n        var id = action.id,\n            dragState = action.dragState;\n\n        // reference to item\n        var item = root.query('GET_ITEM', { id: id });\n\n        // get the view matching the given id\n        var view = root.childViews.find(function(child) {\n            return child.id === id;\n        });\n\n        var numItems = root.childViews.length;\n        var oldIndex = dragState.getItemIndex(item);\n\n        // if no view found, exit\n        if (!view) return;\n\n        var dragPosition = {\n            x: view.dragOrigin.x + view.dragOffset.x + view.dragCenter.x,\n            y: view.dragOrigin.y + view.dragOffset.y + view.dragCenter.y,\n        };\n\n        // get drag area dimensions\n        var dragHeight = getItemHeight(view);\n        var dragWidth = getItemWidth(view);\n\n        // get rows and columns (There will always be at least one row and one column if a file is present)\n        var cols = Math.floor(root.rect.outer.width / dragWidth);\n        if (cols > numItems) cols = numItems;\n\n        // rows are used to find when we have left the preview area bounding box\n        var rows = Math.floor(numItems / cols + 1);\n\n        dropAreaDimensions.setHeight = dragHeight * rows;\n        dropAreaDimensions.setWidth = dragWidth * cols;\n\n        // get new index of dragged item\n        var location = {\n            y: Math.floor(dragPosition.y / dragHeight),\n            x: Math.floor(dragPosition.x / dragWidth),\n            getGridIndex: function getGridIndex() {\n                if (\n                    dragPosition.y > dropAreaDimensions.getHeight ||\n                    dragPosition.y < 0 ||\n                    dragPosition.x > dropAreaDimensions.getWidth ||\n                    dragPosition.x < 0\n                )\n                    return oldIndex;\n                return this.y * cols + this.x;\n            },\n            getColIndex: function getColIndex() {\n                var items = root.query('GET_ACTIVE_ITEMS');\n                var visibleChildren = root.childViews.filter(function(child) {\n                    return child.rect.element.height;\n                });\n                var children = items.map(function(item) {\n                    return visibleChildren.find(function(childView) {\n                        return childView.id === item.id;\n                    });\n                });\n\n                var currentIndex = children.findIndex(function(child) {\n                    return child === view;\n                });\n                var dragHeight = getItemHeight(view);\n                var l = children.length;\n                var idx = l;\n                var childHeight = 0;\n                var childBottom = 0;\n                var childTop = 0;\n                for (var i = 0; i < l; i++) {\n                    childHeight = getItemHeight(children[i]);\n                    childTop = childBottom;\n                    childBottom = childTop + childHeight;\n                    if (dragPosition.y < childBottom) {\n                        if (currentIndex > i) {\n                            if (dragPosition.y < childTop + dragHeight) {\n                                idx = i;\n                                break;\n                            }\n                            continue;\n                        }\n                        idx = i;\n                        break;\n                    }\n                }\n                return idx;\n            },\n        };\n\n        // get new index\n        var index = cols > 1 ? location.getGridIndex() : location.getColIndex();\n        root.dispatch('MOVE_ITEM', { query: view, index: index });\n\n        // if the index of the item changed, dispatch reorder action\n        var currentIndex = dragState.getIndex();\n\n        if (currentIndex === undefined || currentIndex !== index) {\n            dragState.setIndex(index);\n\n            if (currentIndex === undefined) return;\n\n            root.dispatch('DID_REORDER_ITEMS', {\n                items: root.query('GET_ACTIVE_ITEMS'),\n                origin: oldIndex,\n                target: index,\n            });\n        }\n    };\n\n    /**\n     * Setup action routes\n     */\n    var route$2 = createRoute({\n        DID_ADD_ITEM: addItemView,\n        DID_REMOVE_ITEM: removeItemView,\n        DID_DRAG_ITEM: dragItem,\n    });\n\n    /**\n     * Write to view\n     * @param root\n     * @param actions\n     * @param props\n     */\n    var write$5 = function write(_ref5) {\n        var root = _ref5.root,\n            props = _ref5.props,\n            actions = _ref5.actions,\n            shouldOptimize = _ref5.shouldOptimize;\n        // route actions\n        route$2({ root: root, props: props, actions: actions });\n        var dragCoordinates = props.dragCoordinates;\n\n        // available space on horizontal axis\n        var horizontalSpace = root.rect.element.width;\n\n        // only draw children that have dimensions\n        var visibleChildren = root.childViews.filter(function(child) {\n            return child.rect.element.height;\n        });\n\n        // sort based on current active items\n        var children = root\n            .query('GET_ACTIVE_ITEMS')\n            .map(function(item) {\n                return visibleChildren.find(function(child) {\n                    return child.id === item.id;\n                });\n            })\n            .filter(function(item) {\n                return item;\n            });\n\n        // get index\n        var dragIndex = dragCoordinates\n            ? getItemIndexByPosition(root, children, dragCoordinates)\n            : null;\n\n        // add index is used to reserve the dropped/added item index till the actual item is rendered\n        var addIndex = root.ref.addIndex || null;\n\n        // add index no longer needed till possibly next draw\n        root.ref.addIndex = null;\n\n        var dragIndexOffset = 0;\n        var removeIndexOffset = 0;\n        var addIndexOffset = 0;\n\n        if (children.length === 0) return;\n\n        var childRect = children[0].rect.element;\n        var itemVerticalMargin = childRect.marginTop + childRect.marginBottom;\n        var itemHorizontalMargin = childRect.marginLeft + childRect.marginRight;\n        var itemWidth = childRect.width + itemHorizontalMargin;\n        var itemHeight = childRect.height + itemVerticalMargin;\n        var itemsPerRow = getItemsPerRow(horizontalSpace, itemWidth);\n\n        // stack\n        if (itemsPerRow === 1) {\n            var offsetY = 0;\n            var dragOffset = 0;\n\n            children.forEach(function(child, index) {\n                if (dragIndex) {\n                    var dist = index - dragIndex;\n                    if (dist === -2) {\n                        dragOffset = -itemVerticalMargin * 0.25;\n                    } else if (dist === -1) {\n                        dragOffset = -itemVerticalMargin * 0.75;\n                    } else if (dist === 0) {\n                        dragOffset = itemVerticalMargin * 0.75;\n                    } else if (dist === 1) {\n                        dragOffset = itemVerticalMargin * 0.25;\n                    } else {\n                        dragOffset = 0;\n                    }\n                }\n\n                if (shouldOptimize) {\n                    child.translateX = null;\n                    child.translateY = null;\n                }\n\n                if (!child.markedForRemoval) {\n                    moveItem(child, 0, offsetY + dragOffset);\n                }\n\n                var itemHeight = child.rect.element.height + itemVerticalMargin;\n\n                var visualHeight = itemHeight * (child.markedForRemoval ? child.opacity : 1);\n\n                offsetY += visualHeight;\n            });\n        }\n        // grid\n        else {\n            var prevX = 0;\n            var prevY = 0;\n\n            children.forEach(function(child, index) {\n                if (index === dragIndex) {\n                    dragIndexOffset = 1;\n                }\n\n                if (index === addIndex) {\n                    addIndexOffset += 1;\n                }\n\n                if (child.markedForRemoval && child.opacity < 0.5) {\n                    removeIndexOffset -= 1;\n                }\n\n                var visualIndex = index + addIndexOffset + dragIndexOffset + removeIndexOffset;\n\n                var indexX = visualIndex % itemsPerRow;\n                var indexY = Math.floor(visualIndex / itemsPerRow);\n\n                var offsetX = indexX * itemWidth;\n                var offsetY = indexY * itemHeight;\n\n                var vectorX = Math.sign(offsetX - prevX);\n                var vectorY = Math.sign(offsetY - prevY);\n\n                prevX = offsetX;\n                prevY = offsetY;\n\n                if (child.markedForRemoval) return;\n\n                if (shouldOptimize) {\n                    child.translateX = null;\n                    child.translateY = null;\n                }\n\n                moveItem(child, offsetX, offsetY, vectorX, vectorY);\n            });\n        }\n    };\n\n    /**\n     * Filters actions that are meant specifically for a certain child of the list\n     * @param child\n     * @param actions\n     */\n    var filterSetItemActions = function filterSetItemActions(child, actions) {\n        return actions.filter(function(action) {\n            // if action has an id, filter out actions that don't have this child id\n            if (action.data && action.data.id) {\n                return child.id === action.data.id;\n            }\n\n            // allow all other actions\n            return true;\n        });\n    };\n\n    var list = createView({\n        create: create$8,\n        write: write$5,\n        tag: 'ul',\n        name: 'list',\n        didWriteView: function didWriteView(_ref6) {\n            var root = _ref6.root;\n            root.childViews\n                .filter(function(view) {\n                    return view.markedForRemoval && view.opacity === 0 && view.resting;\n                })\n                .forEach(function(view) {\n                    view._destroy();\n                    root.removeChildView(view);\n                });\n        },\n        filterFrameActionsForChild: filterSetItemActions,\n        mixins: {\n            apis: ['dragCoordinates'],\n        },\n    });\n\n    var create$9 = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n        root.ref.list = root.appendChildView(root.createChildView(list));\n        props.dragCoordinates = null;\n        props.overflowing = false;\n    };\n\n    var storeDragCoordinates = function storeDragCoordinates(_ref2) {\n        var root = _ref2.root,\n            props = _ref2.props,\n            action = _ref2.action;\n        if (!root.query('GET_ITEM_INSERT_LOCATION_FREEDOM')) return;\n        props.dragCoordinates = {\n            left: action.position.scopeLeft - root.ref.list.rect.element.left,\n            top:\n                action.position.scopeTop -\n                (root.rect.outer.top + root.rect.element.marginTop + root.rect.element.scrollTop),\n        };\n    };\n\n    var clearDragCoordinates = function clearDragCoordinates(_ref3) {\n        var props = _ref3.props;\n        props.dragCoordinates = null;\n    };\n\n    var route$3 = createRoute({\n        DID_DRAG: storeDragCoordinates,\n        DID_END_DRAG: clearDragCoordinates,\n    });\n\n    var write$6 = function write(_ref4) {\n        var root = _ref4.root,\n            props = _ref4.props,\n            actions = _ref4.actions;\n\n        // route actions\n        route$3({ root: root, props: props, actions: actions });\n\n        // current drag position\n        root.ref.list.dragCoordinates = props.dragCoordinates;\n\n        // if currently overflowing but no longer received overflow\n        if (props.overflowing && !props.overflow) {\n            props.overflowing = false;\n\n            // reset overflow state\n            root.element.dataset.state = '';\n            root.height = null;\n        }\n\n        // if is not overflowing currently but does receive overflow value\n        if (props.overflow) {\n            var newHeight = Math.round(props.overflow);\n            if (newHeight !== root.height) {\n                props.overflowing = true;\n                root.element.dataset.state = 'overflow';\n                root.height = newHeight;\n            }\n        }\n    };\n\n    var listScroller = createView({\n        create: create$9,\n        write: write$6,\n        name: 'list-scroller',\n        mixins: {\n            apis: ['overflow', 'dragCoordinates'],\n            styles: ['height', 'translateY'],\n            animations: {\n                translateY: 'spring',\n            },\n        },\n    });\n\n    var attrToggle = function attrToggle(element, name, state) {\n        var enabledValue = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';\n        if (state) {\n            attr(element, name, enabledValue);\n        } else {\n            element.removeAttribute(name);\n        }\n    };\n\n    var resetFileInput = function resetFileInput(input) {\n        // no value, no need to reset\n        if (!input || input.value === '') {\n            return;\n        }\n\n        try {\n            // for modern browsers\n            input.value = '';\n        } catch (err) {}\n\n        // for IE10\n        if (input.value) {\n            // quickly append input to temp form and reset form\n            var form = createElement$1('form');\n            var parentNode = input.parentNode;\n            var ref = input.nextSibling;\n            form.appendChild(input);\n            form.reset();\n\n            // re-inject input where it originally was\n            if (ref) {\n                parentNode.insertBefore(input, ref);\n            } else {\n                parentNode.appendChild(input);\n            }\n        }\n    };\n\n    var create$a = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n\n        // set id so can be referenced from outside labels\n        root.element.id = 'filepond--browser-' + props.id;\n\n        // set name of element (is removed when a value is set)\n        attr(root.element, 'name', root.query('GET_NAME'));\n\n        // we have to link this element to the status element\n        attr(root.element, 'aria-controls', 'filepond--assistant-' + props.id);\n\n        // set label, we use labelled by as otherwise the screenreader does not read the \"browse\" text in the label (as it has tabindex: 0)\n        attr(root.element, 'aria-labelledby', 'filepond--drop-label-' + props.id);\n\n        // set configurable props\n        setAcceptedFileTypes({\n            root: root,\n            action: { value: root.query('GET_ACCEPTED_FILE_TYPES') },\n        });\n        toggleAllowMultiple({ root: root, action: { value: root.query('GET_ALLOW_MULTIPLE') } });\n        toggleDirectoryFilter({\n            root: root,\n            action: { value: root.query('GET_ALLOW_DIRECTORIES_ONLY') },\n        });\n        toggleDisabled({ root: root });\n        toggleRequired({ root: root, action: { value: root.query('GET_REQUIRED') } });\n        setCaptureMethod({ root: root, action: { value: root.query('GET_CAPTURE_METHOD') } });\n\n        // handle changes to the input field\n        root.ref.handleChange = function(e) {\n            if (!root.element.value) {\n                return;\n            }\n\n            // extract files and move value of webkitRelativePath path to _relativePath\n            var files = Array.from(root.element.files).map(function(file) {\n                file._relativePath = file.webkitRelativePath;\n                return file;\n            });\n\n            // we add a little delay so the OS file select window can move out of the way before we add our file\n            setTimeout(function() {\n                // load files\n                props.onload(files);\n\n                // reset input, it's just for exposing a method to drop files, should not retain any state\n                resetFileInput(root.element);\n            }, 250);\n        };\n\n        root.element.addEventListener('change', root.ref.handleChange);\n    };\n\n    var setAcceptedFileTypes = function setAcceptedFileTypes(_ref2) {\n        var root = _ref2.root,\n            action = _ref2.action;\n        if (!root.query('GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE')) return;\n        attrToggle(\n            root.element,\n            'accept',\n            !!action.value,\n            action.value ? action.value.join(',') : ''\n        );\n    };\n\n    var toggleAllowMultiple = function toggleAllowMultiple(_ref3) {\n        var root = _ref3.root,\n            action = _ref3.action;\n        attrToggle(root.element, 'multiple', action.value);\n    };\n\n    var toggleDirectoryFilter = function toggleDirectoryFilter(_ref4) {\n        var root = _ref4.root,\n            action = _ref4.action;\n        attrToggle(root.element, 'webkitdirectory', action.value);\n    };\n\n    var toggleDisabled = function toggleDisabled(_ref5) {\n        var root = _ref5.root;\n        var isDisabled = root.query('GET_DISABLED');\n        var doesAllowBrowse = root.query('GET_ALLOW_BROWSE');\n        var disableField = isDisabled || !doesAllowBrowse;\n        attrToggle(root.element, 'disabled', disableField);\n    };\n\n    var toggleRequired = function toggleRequired(_ref6) {\n        var root = _ref6.root,\n            action = _ref6.action;\n        // want to remove required, always possible\n        if (!action.value) {\n            attrToggle(root.element, 'required', false);\n        }\n        // if want to make required, only possible when zero items\n        else if (root.query('GET_TOTAL_ITEMS') === 0) {\n            attrToggle(root.element, 'required', true);\n        }\n    };\n\n    var setCaptureMethod = function setCaptureMethod(_ref7) {\n        var root = _ref7.root,\n            action = _ref7.action;\n        attrToggle(\n            root.element,\n            'capture',\n            !!action.value,\n            action.value === true ? '' : action.value\n        );\n    };\n\n    var updateRequiredStatus = function updateRequiredStatus(_ref8) {\n        var root = _ref8.root;\n        var element = root.element;\n        // always remove the required attribute when more than zero items\n        if (root.query('GET_TOTAL_ITEMS') > 0) {\n            attrToggle(element, 'required', false);\n            attrToggle(element, 'name', false);\n        } else {\n            // add name attribute\n            attrToggle(element, 'name', true, root.query('GET_NAME'));\n\n            // remove any validation messages\n            var shouldCheckValidity = root.query('GET_CHECK_VALIDITY');\n            if (shouldCheckValidity) {\n                element.setCustomValidity('');\n            }\n\n            // we only add required if the field has been deemed required\n            if (root.query('GET_REQUIRED')) {\n                attrToggle(element, 'required', true);\n            }\n        }\n    };\n\n    var updateFieldValidityStatus = function updateFieldValidityStatus(_ref9) {\n        var root = _ref9.root;\n        var shouldCheckValidity = root.query('GET_CHECK_VALIDITY');\n        if (!shouldCheckValidity) return;\n        root.element.setCustomValidity(root.query('GET_LABEL_INVALID_FIELD'));\n    };\n\n    var browser = createView({\n        tag: 'input',\n        name: 'browser',\n        ignoreRect: true,\n        ignoreRectUpdate: true,\n        attributes: {\n            type: 'file',\n        },\n\n        create: create$a,\n        destroy: function destroy(_ref10) {\n            var root = _ref10.root;\n            root.element.removeEventListener('change', root.ref.handleChange);\n        },\n        write: createRoute({\n            DID_LOAD_ITEM: updateRequiredStatus,\n            DID_REMOVE_ITEM: updateRequiredStatus,\n            DID_THROW_ITEM_INVALID: updateFieldValidityStatus,\n\n            DID_SET_DISABLED: toggleDisabled,\n            DID_SET_ALLOW_BROWSE: toggleDisabled,\n            DID_SET_ALLOW_DIRECTORIES_ONLY: toggleDirectoryFilter,\n            DID_SET_ALLOW_MULTIPLE: toggleAllowMultiple,\n            DID_SET_ACCEPTED_FILE_TYPES: setAcceptedFileTypes,\n            DID_SET_CAPTURE_METHOD: setCaptureMethod,\n            DID_SET_REQUIRED: toggleRequired,\n        }),\n    });\n\n    var Key = {\n        ENTER: 13,\n        SPACE: 32,\n    };\n\n    var create$b = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n\n        // create the label and link it to the file browser\n        var label = createElement$1('label');\n        attr(label, 'for', 'filepond--browser-' + props.id);\n\n        // use for labeling file input (aria-labelledby on file input)\n        attr(label, 'id', 'filepond--drop-label-' + props.id);\n\n        // hide the label for screenreaders, the input element will read the contents of the label when it's focussed. If we don't set aria-hidden the screenreader will also navigate the contents of the label separately from the input.\n        attr(label, 'aria-hidden', 'true');\n\n        // handle keys\n        root.ref.handleKeyDown = function(e) {\n            var isActivationKey = e.keyCode === Key.ENTER || e.keyCode === Key.SPACE;\n            if (!isActivationKey) return;\n            // stops from triggering the element a second time\n            e.preventDefault();\n\n            // click link (will then in turn activate file input)\n            root.ref.label.click();\n        };\n\n        root.ref.handleClick = function(e) {\n            var isLabelClick = e.target === label || label.contains(e.target);\n\n            // don't want to click twice\n            if (isLabelClick) return;\n\n            // click link (will then in turn activate file input)\n            root.ref.label.click();\n        };\n\n        // attach events\n        label.addEventListener('keydown', root.ref.handleKeyDown);\n        root.element.addEventListener('click', root.ref.handleClick);\n\n        // update\n        updateLabelValue(label, props.caption);\n\n        // add!\n        root.appendChild(label);\n        root.ref.label = label;\n    };\n\n    var updateLabelValue = function updateLabelValue(label, value) {\n        label.innerHTML = value;\n        var clickable = label.querySelector('.filepond--label-action');\n        if (clickable) {\n            attr(clickable, 'tabindex', '0');\n        }\n        return value;\n    };\n\n    var dropLabel = createView({\n        name: 'drop-label',\n        ignoreRect: true,\n        create: create$b,\n        destroy: function destroy(_ref2) {\n            var root = _ref2.root;\n            root.ref.label.addEventListener('keydown', root.ref.handleKeyDown);\n            root.element.removeEventListener('click', root.ref.handleClick);\n        },\n        write: createRoute({\n            DID_SET_LABEL_IDLE: function DID_SET_LABEL_IDLE(_ref3) {\n                var root = _ref3.root,\n                    action = _ref3.action;\n                updateLabelValue(root.ref.label, action.value);\n            },\n        }),\n\n        mixins: {\n            styles: ['opacity', 'translateX', 'translateY'],\n            animations: {\n                opacity: { type: 'tween', duration: 150 },\n                translateX: 'spring',\n                translateY: 'spring',\n            },\n        },\n    });\n\n    var blob = createView({\n        name: 'drip-blob',\n        ignoreRect: true,\n        mixins: {\n            styles: ['translateX', 'translateY', 'scaleX', 'scaleY', 'opacity'],\n            animations: {\n                scaleX: 'spring',\n                scaleY: 'spring',\n                translateX: 'spring',\n                translateY: 'spring',\n                opacity: { type: 'tween', duration: 250 },\n            },\n        },\n    });\n\n    var addBlob = function addBlob(_ref) {\n        var root = _ref.root;\n        var centerX = root.rect.element.width * 0.5;\n        var centerY = root.rect.element.height * 0.5;\n\n        root.ref.blob = root.appendChildView(\n            root.createChildView(blob, {\n                opacity: 0,\n                scaleX: 2.5,\n                scaleY: 2.5,\n                translateX: centerX,\n                translateY: centerY,\n            })\n        );\n    };\n\n    var moveBlob = function moveBlob(_ref2) {\n        var root = _ref2.root,\n            action = _ref2.action;\n        if (!root.ref.blob) {\n            addBlob({ root: root });\n            return;\n        }\n\n        root.ref.blob.translateX = action.position.scopeLeft;\n        root.ref.blob.translateY = action.position.scopeTop;\n        root.ref.blob.scaleX = 1;\n        root.ref.blob.scaleY = 1;\n        root.ref.blob.opacity = 1;\n    };\n\n    var hideBlob = function hideBlob(_ref3) {\n        var root = _ref3.root;\n        if (!root.ref.blob) {\n            return;\n        }\n        root.ref.blob.opacity = 0;\n    };\n\n    var explodeBlob = function explodeBlob(_ref4) {\n        var root = _ref4.root;\n        if (!root.ref.blob) {\n            return;\n        }\n        root.ref.blob.scaleX = 2.5;\n        root.ref.blob.scaleY = 2.5;\n        root.ref.blob.opacity = 0;\n    };\n\n    var write$7 = function write(_ref5) {\n        var root = _ref5.root,\n            props = _ref5.props,\n            actions = _ref5.actions;\n        route$4({ root: root, props: props, actions: actions });\n        var blob = root.ref.blob;\n\n        if (actions.length === 0 && blob && blob.opacity === 0) {\n            root.removeChildView(blob);\n            root.ref.blob = null;\n        }\n    };\n\n    var route$4 = createRoute({\n        DID_DRAG: moveBlob,\n        DID_DROP: explodeBlob,\n        DID_END_DRAG: hideBlob,\n    });\n\n    var drip = createView({\n        ignoreRect: true,\n        ignoreRectUpdate: true,\n        name: 'drip',\n        write: write$7,\n    });\n\n    var setInputFiles = function setInputFiles(element, files) {\n        try {\n            // Create a DataTransfer instance and add a newly created file\n            var dataTransfer = new DataTransfer();\n            files.forEach(function(file) {\n                if (file instanceof File) {\n                    dataTransfer.items.add(file);\n                } else {\n                    dataTransfer.items.add(\n                        new File([file], file.name, {\n                            type: file.type,\n                        })\n                    );\n                }\n            });\n\n            // Assign the DataTransfer files list to the file input\n            element.files = dataTransfer.files;\n        } catch (err) {\n            return false;\n        }\n        return true;\n    };\n\n    var create$c = function create(_ref) {\n        var root = _ref.root;\n        return (root.ref.fields = {});\n    };\n\n    var getField = function getField(root, id) {\n        return root.ref.fields[id];\n    };\n\n    var syncFieldPositionsWithItems = function syncFieldPositionsWithItems(root) {\n        root.query('GET_ACTIVE_ITEMS').forEach(function(item) {\n            if (!root.ref.fields[item.id]) return;\n            root.element.appendChild(root.ref.fields[item.id]);\n        });\n    };\n\n    var didReorderItems = function didReorderItems(_ref2) {\n        var root = _ref2.root;\n        return syncFieldPositionsWithItems(root);\n    };\n\n    var didAddItem = function didAddItem(_ref3) {\n        var root = _ref3.root,\n            action = _ref3.action;\n        var fileItem = root.query('GET_ITEM', action.id);\n        var isLocalFile = fileItem.origin === FileOrigin.LOCAL;\n        var shouldUseFileInput = !isLocalFile && root.query('SHOULD_UPDATE_FILE_INPUT');\n        var dataContainer = createElement$1('input');\n        dataContainer.type = shouldUseFileInput ? 'file' : 'hidden';\n        dataContainer.name = root.query('GET_NAME');\n        dataContainer.disabled = root.query('GET_DISABLED');\n        root.ref.fields[action.id] = dataContainer;\n        syncFieldPositionsWithItems(root);\n    };\n\n    var didLoadItem$1 = function didLoadItem(_ref4) {\n        var root = _ref4.root,\n            action = _ref4.action;\n        var field = getField(root, action.id);\n        if (!field) return;\n\n        // store server ref in hidden input\n        if (action.serverFileReference !== null) field.value = action.serverFileReference;\n\n        // store file item in file input\n        if (!root.query('SHOULD_UPDATE_FILE_INPUT')) return;\n\n        var fileItem = root.query('GET_ITEM', action.id);\n        setInputFiles(field, [fileItem.file]);\n    };\n\n    var didPrepareOutput = function didPrepareOutput(_ref5) {\n        var root = _ref5.root,\n            action = _ref5.action;\n        // this timeout pushes the handler after 'load'\n        if (!root.query('SHOULD_UPDATE_FILE_INPUT')) return;\n        setTimeout(function() {\n            var field = getField(root, action.id);\n            if (!field) return;\n            setInputFiles(field, [action.file]);\n        }, 0);\n    };\n\n    var didSetDisabled = function didSetDisabled(_ref6) {\n        var root = _ref6.root;\n        root.element.disabled = root.query('GET_DISABLED');\n    };\n\n    var didRemoveItem = function didRemoveItem(_ref7) {\n        var root = _ref7.root,\n            action = _ref7.action;\n        var field = getField(root, action.id);\n        if (!field) return;\n        if (field.parentNode) field.parentNode.removeChild(field);\n        delete root.ref.fields[action.id];\n    };\n\n    // only runs for server files (so doesn't deal with file input)\n    var didDefineValue = function didDefineValue(_ref8) {\n        var root = _ref8.root,\n            action = _ref8.action;\n        var field = getField(root, action.id);\n        if (!field) return;\n        if (action.value === null) {\n            // clear field value\n            field.removeAttribute('value');\n        } else {\n            // set field value\n            field.value = action.value;\n        }\n        syncFieldPositionsWithItems(root);\n    };\n\n    var write$8 = createRoute({\n        DID_SET_DISABLED: didSetDisabled,\n        DID_ADD_ITEM: didAddItem,\n        DID_LOAD_ITEM: didLoadItem$1,\n        DID_REMOVE_ITEM: didRemoveItem,\n        DID_DEFINE_VALUE: didDefineValue,\n        DID_PREPARE_OUTPUT: didPrepareOutput,\n        DID_REORDER_ITEMS: didReorderItems,\n        DID_SORT_ITEMS: didReorderItems,\n    });\n\n    var data = createView({\n        tag: 'fieldset',\n        name: 'data',\n        create: create$c,\n        write: write$8,\n        ignoreRect: true,\n    });\n\n    var getRootNode = function getRootNode(element) {\n        return 'getRootNode' in element ? element.getRootNode() : document;\n    };\n\n    var images = ['jpg', 'jpeg', 'png', 'gif', 'bmp', 'webp', 'svg', 'tiff'];\n    var text$1 = ['css', 'csv', 'html', 'txt'];\n    var map = {\n        zip: 'zip|compressed',\n        epub: 'application/epub+zip',\n    };\n\n    var guesstimateMimeType = function guesstimateMimeType() {\n        var extension = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n        extension = extension.toLowerCase();\n        if (images.includes(extension)) {\n            return (\n                'image/' +\n                (extension === 'jpg' ? 'jpeg' : extension === 'svg' ? 'svg+xml' : extension)\n            );\n        }\n        if (text$1.includes(extension)) {\n            return 'text/' + extension;\n        }\n\n        return map[extension] || '';\n    };\n\n    var requestDataTransferItems = function requestDataTransferItems(dataTransfer) {\n        return new Promise(function(resolve, reject) {\n            // try to get links from transfer, if found we'll exit immediately (unless a file is in the dataTransfer as well, this is because Firefox could represent the file as a URL and a file object at the same time)\n            var links = getLinks(dataTransfer);\n            if (links.length && !hasFiles(dataTransfer)) {\n                return resolve(links);\n            }\n            // try to get files from the transfer\n            getFiles(dataTransfer).then(resolve);\n        });\n    };\n\n    /**\n     * Test if datatransfer has files\n     */\n    var hasFiles = function hasFiles(dataTransfer) {\n        if (dataTransfer.files) return dataTransfer.files.length > 0;\n        return false;\n    };\n\n    /**\n     * Extracts files from a DataTransfer object\n     */\n    var getFiles = function getFiles(dataTransfer) {\n        return new Promise(function(resolve, reject) {\n            // get the transfer items as promises\n            var promisedFiles = (dataTransfer.items ? Array.from(dataTransfer.items) : [])\n                // only keep file system items (files and directories)\n                .filter(function(item) {\n                    return isFileSystemItem(item);\n                })\n\n                // map each item to promise\n                .map(function(item) {\n                    return getFilesFromItem(item);\n                });\n\n            // if is empty, see if we can extract some info from the files property as a fallback\n            if (!promisedFiles.length) {\n                // TODO: test for directories (should not be allowed)\n                // Use FileReader, problem is that the files property gets lost in the process\n                resolve(dataTransfer.files ? Array.from(dataTransfer.files) : []);\n                return;\n            }\n\n            // done!\n            Promise.all(promisedFiles)\n                .then(function(returnedFileGroups) {\n                    // flatten groups\n                    var files = [];\n                    returnedFileGroups.forEach(function(group) {\n                        files.push.apply(files, group);\n                    });\n\n                    // done (filter out empty files)!\n                    resolve(\n                        files\n                            .filter(function(file) {\n                                return file;\n                            })\n                            .map(function(file) {\n                                if (!file._relativePath)\n                                    file._relativePath = file.webkitRelativePath;\n                                return file;\n                            })\n                    );\n                })\n                .catch(console.error);\n        });\n    };\n\n    var isFileSystemItem = function isFileSystemItem(item) {\n        if (isEntry(item)) {\n            var entry = getAsEntry(item);\n            if (entry) {\n                return entry.isFile || entry.isDirectory;\n            }\n        }\n        return item.kind === 'file';\n    };\n\n    var getFilesFromItem = function getFilesFromItem(item) {\n        return new Promise(function(resolve, reject) {\n            if (isDirectoryEntry(item)) {\n                getFilesInDirectory(getAsEntry(item))\n                    .then(resolve)\n                    .catch(reject);\n                return;\n            }\n\n            resolve([item.getAsFile()]);\n        });\n    };\n\n    var getFilesInDirectory = function getFilesInDirectory(entry) {\n        return new Promise(function(resolve, reject) {\n            var files = [];\n\n            // the total entries to read\n            var dirCounter = 0;\n            var fileCounter = 0;\n\n            var resolveIfDone = function resolveIfDone() {\n                if (fileCounter === 0 && dirCounter === 0) {\n                    resolve(files);\n                }\n            };\n\n            // the recursive function\n            var readEntries = function readEntries(dirEntry) {\n                dirCounter++;\n\n                var directoryReader = dirEntry.createReader();\n\n                // directories are returned in batches, we need to process all batches before we're done\n                var readBatch = function readBatch() {\n                    directoryReader.readEntries(function(entries) {\n                        if (entries.length === 0) {\n                            dirCounter--;\n                            resolveIfDone();\n                            return;\n                        }\n\n                        entries.forEach(function(entry) {\n                            // recursively read more directories\n                            if (entry.isDirectory) {\n                                readEntries(entry);\n                            } else {\n                                // read as file\n                                fileCounter++;\n\n                                entry.file(function(file) {\n                                    var correctedFile = correctMissingFileType(file);\n                                    if (entry.fullPath)\n                                        correctedFile._relativePath = entry.fullPath;\n                                    files.push(correctedFile);\n                                    fileCounter--;\n                                    resolveIfDone();\n                                });\n                            }\n                        });\n\n                        // try to get next batch of files\n                        readBatch();\n                    }, reject);\n                };\n\n                // read first batch of files\n                readBatch();\n            };\n\n            // go!\n            readEntries(entry);\n        });\n    };\n\n    var correctMissingFileType = function correctMissingFileType(file) {\n        if (file.type.length) return file;\n        var date = file.lastModifiedDate;\n        var name = file.name;\n        var type = guesstimateMimeType(getExtensionFromFilename(file.name));\n        if (!type.length) return file;\n        file = file.slice(0, file.size, type);\n        file.name = name;\n        file.lastModifiedDate = date;\n        return file;\n    };\n\n    var isDirectoryEntry = function isDirectoryEntry(item) {\n        return isEntry(item) && (getAsEntry(item) || {}).isDirectory;\n    };\n\n    var isEntry = function isEntry(item) {\n        return 'webkitGetAsEntry' in item;\n    };\n\n    var getAsEntry = function getAsEntry(item) {\n        return item.webkitGetAsEntry();\n    };\n\n    /**\n     * Extracts links from a DataTransfer object\n     */\n    var getLinks = function getLinks(dataTransfer) {\n        var links = [];\n        try {\n            // look in meta data property\n            links = getLinksFromTransferMetaData(dataTransfer);\n            if (links.length) {\n                return links;\n            }\n            links = getLinksFromTransferURLData(dataTransfer);\n        } catch (e) {\n            // nope nope nope (probably IE trouble)\n        }\n        return links;\n    };\n\n    var getLinksFromTransferURLData = function getLinksFromTransferURLData(dataTransfer) {\n        var data = dataTransfer.getData('url');\n        if (typeof data === 'string' && data.length) {\n            return [data];\n        }\n        return [];\n    };\n\n    var getLinksFromTransferMetaData = function getLinksFromTransferMetaData(dataTransfer) {\n        var data = dataTransfer.getData('text/html');\n        if (typeof data === 'string' && data.length) {\n            var matches = data.match(/src\\s*=\\s*\"(.+?)\"/);\n            if (matches) {\n                return [matches[1]];\n            }\n        }\n        return [];\n    };\n\n    var dragNDropObservers = [];\n\n    var eventPosition = function eventPosition(e) {\n        return {\n            pageLeft: e.pageX,\n            pageTop: e.pageY,\n            scopeLeft: e.offsetX || e.layerX,\n            scopeTop: e.offsetY || e.layerY,\n        };\n    };\n\n    var createDragNDropClient = function createDragNDropClient(\n        element,\n        scopeToObserve,\n        filterElement\n    ) {\n        var observer = getDragNDropObserver(scopeToObserve);\n\n        var client = {\n            element: element,\n            filterElement: filterElement,\n            state: null,\n            ondrop: function ondrop() {},\n            onenter: function onenter() {},\n            ondrag: function ondrag() {},\n            onexit: function onexit() {},\n            onload: function onload() {},\n            allowdrop: function allowdrop() {},\n        };\n\n        client.destroy = observer.addListener(client);\n\n        return client;\n    };\n\n    var getDragNDropObserver = function getDragNDropObserver(element) {\n        // see if already exists, if so, return\n        var observer = dragNDropObservers.find(function(item) {\n            return item.element === element;\n        });\n        if (observer) {\n            return observer;\n        }\n\n        // create new observer, does not yet exist for this element\n        var newObserver = createDragNDropObserver(element);\n        dragNDropObservers.push(newObserver);\n        return newObserver;\n    };\n\n    var createDragNDropObserver = function createDragNDropObserver(element) {\n        var clients = [];\n\n        var routes = {\n            dragenter: dragenter,\n            dragover: dragover,\n            dragleave: dragleave,\n            drop: drop,\n        };\n\n        var handlers = {};\n\n        forin(routes, function(event, createHandler) {\n            handlers[event] = createHandler(element, clients);\n            element.addEventListener(event, handlers[event], false);\n        });\n\n        var observer = {\n            element: element,\n            addListener: function addListener(client) {\n                // add as client\n                clients.push(client);\n\n                // return removeListener function\n                return function() {\n                    // remove client\n                    clients.splice(clients.indexOf(client), 1);\n\n                    // if no more clients, clean up observer\n                    if (clients.length === 0) {\n                        dragNDropObservers.splice(dragNDropObservers.indexOf(observer), 1);\n\n                        forin(routes, function(event) {\n                            element.removeEventListener(event, handlers[event], false);\n                        });\n                    }\n                };\n            },\n        };\n\n        return observer;\n    };\n\n    var elementFromPoint = function elementFromPoint(root, point) {\n        if (!('elementFromPoint' in root)) {\n            root = document;\n        }\n        return root.elementFromPoint(point.x, point.y);\n    };\n\n    var isEventTarget = function isEventTarget(e, target) {\n        // get root\n        var root = getRootNode(target);\n\n        // get element at position\n        // if root is not actual shadow DOM and does not have elementFromPoint method, use the one on document\n        var elementAtPosition = elementFromPoint(root, {\n            x: e.pageX - window.pageXOffset,\n            y: e.pageY - window.pageYOffset,\n        });\n\n        // test if target is the element or if one of its children is\n        return elementAtPosition === target || target.contains(elementAtPosition);\n    };\n\n    var initialTarget = null;\n\n    var setDropEffect = function setDropEffect(dataTransfer, effect) {\n        // is in try catch as IE11 will throw error if not\n        try {\n            dataTransfer.dropEffect = effect;\n        } catch (e) {}\n    };\n\n    var dragenter = function dragenter(root, clients) {\n        return function(e) {\n            e.preventDefault();\n\n            initialTarget = e.target;\n\n            clients.forEach(function(client) {\n                var element = client.element,\n                    onenter = client.onenter;\n\n                if (isEventTarget(e, element)) {\n                    client.state = 'enter';\n\n                    // fire enter event\n                    onenter(eventPosition(e));\n                }\n            });\n        };\n    };\n\n    var dragover = function dragover(root, clients) {\n        return function(e) {\n            e.preventDefault();\n\n            var dataTransfer = e.dataTransfer;\n\n            requestDataTransferItems(dataTransfer).then(function(items) {\n                var overDropTarget = false;\n\n                clients.some(function(client) {\n                    var filterElement = client.filterElement,\n                        element = client.element,\n                        onenter = client.onenter,\n                        onexit = client.onexit,\n                        ondrag = client.ondrag,\n                        allowdrop = client.allowdrop;\n\n                    // by default we can drop\n                    setDropEffect(dataTransfer, 'copy');\n\n                    // allow transfer of these items\n                    var allowsTransfer = allowdrop(items);\n\n                    // only used when can be dropped on page\n                    if (!allowsTransfer) {\n                        setDropEffect(dataTransfer, 'none');\n                        return;\n                    }\n\n                    // targetting this client\n                    if (isEventTarget(e, element)) {\n                        overDropTarget = true;\n\n                        // had no previous state, means we are entering this client\n                        if (client.state === null) {\n                            client.state = 'enter';\n                            onenter(eventPosition(e));\n                            return;\n                        }\n\n                        // now over element (no matter if it allows the drop or not)\n                        client.state = 'over';\n\n                        // needs to allow transfer\n                        if (filterElement && !allowsTransfer) {\n                            setDropEffect(dataTransfer, 'none');\n                            return;\n                        }\n\n                        // dragging\n                        ondrag(eventPosition(e));\n                    } else {\n                        // should be over an element to drop\n                        if (filterElement && !overDropTarget) {\n                            setDropEffect(dataTransfer, 'none');\n                        }\n\n                        // might have just left this client?\n                        if (client.state) {\n                            client.state = null;\n                            onexit(eventPosition(e));\n                        }\n                    }\n                });\n            });\n        };\n    };\n\n    var drop = function drop(root, clients) {\n        return function(e) {\n            e.preventDefault();\n\n            var dataTransfer = e.dataTransfer;\n\n            requestDataTransferItems(dataTransfer).then(function(items) {\n                clients.forEach(function(client) {\n                    var filterElement = client.filterElement,\n                        element = client.element,\n                        ondrop = client.ondrop,\n                        onexit = client.onexit,\n                        allowdrop = client.allowdrop;\n\n                    client.state = null;\n\n                    // if we're filtering on element we need to be over the element to drop\n                    if (filterElement && !isEventTarget(e, element)) return;\n\n                    // no transfer for this client\n                    if (!allowdrop(items)) return onexit(eventPosition(e));\n\n                    // we can drop these items on this client\n                    ondrop(eventPosition(e), items);\n                });\n            });\n        };\n    };\n\n    var dragleave = function dragleave(root, clients) {\n        return function(e) {\n            if (initialTarget !== e.target) {\n                return;\n            }\n\n            clients.forEach(function(client) {\n                var onexit = client.onexit;\n\n                client.state = null;\n\n                onexit(eventPosition(e));\n            });\n        };\n    };\n\n    var createHopper = function createHopper(scope, validateItems, options) {\n        // is now hopper scope\n        scope.classList.add('filepond--hopper');\n\n        // shortcuts\n        var catchesDropsOnPage = options.catchesDropsOnPage,\n            requiresDropOnElement = options.requiresDropOnElement,\n            _options$filterItems = options.filterItems,\n            filterItems =\n                _options$filterItems === void 0\n                    ? function(items) {\n                          return items;\n                      }\n                    : _options$filterItems;\n\n        // create a dnd client\n        var client = createDragNDropClient(\n            scope,\n            catchesDropsOnPage ? document.documentElement : scope,\n            requiresDropOnElement\n        );\n\n        // current client state\n        var lastState = '';\n        var currentState = '';\n\n        // determines if a file may be dropped\n        client.allowdrop = function(items) {\n            // TODO: if we can, throw error to indicate the items cannot by dropped\n\n            return validateItems(filterItems(items));\n        };\n\n        client.ondrop = function(position, items) {\n            var filteredItems = filterItems(items);\n\n            if (!validateItems(filteredItems)) {\n                api.ondragend(position);\n                return;\n            }\n\n            currentState = 'drag-drop';\n\n            api.onload(filteredItems, position);\n        };\n\n        client.ondrag = function(position) {\n            api.ondrag(position);\n        };\n\n        client.onenter = function(position) {\n            currentState = 'drag-over';\n\n            api.ondragstart(position);\n        };\n\n        client.onexit = function(position) {\n            currentState = 'drag-exit';\n\n            api.ondragend(position);\n        };\n\n        var api = {\n            updateHopperState: function updateHopperState() {\n                if (lastState !== currentState) {\n                    scope.dataset.hopperState = currentState;\n                    lastState = currentState;\n                }\n            },\n            onload: function onload() {},\n            ondragstart: function ondragstart() {},\n            ondrag: function ondrag() {},\n            ondragend: function ondragend() {},\n            destroy: function destroy() {\n                // destroy client\n                client.destroy();\n            },\n        };\n\n        return api;\n    };\n\n    var listening = false;\n    var listeners$1 = [];\n\n    var handlePaste = function handlePaste(e) {\n        // if is pasting in input or textarea and the target is outside of a filepond scope, ignore\n        var activeEl = document.activeElement;\n        if (activeEl && /textarea|input/i.test(activeEl.nodeName)) {\n            // test textarea or input is contained in filepond root\n            var inScope = false;\n            var element = activeEl;\n            while (element !== document.body) {\n                if (element.classList.contains('filepond--root')) {\n                    inScope = true;\n                    break;\n                }\n                element = element.parentNode;\n            }\n\n            if (!inScope) return;\n        }\n\n        requestDataTransferItems(e.clipboardData).then(function(files) {\n            // no files received\n            if (!files.length) {\n                return;\n            }\n\n            // notify listeners of received files\n            listeners$1.forEach(function(listener) {\n                return listener(files);\n            });\n        });\n    };\n\n    var listen = function listen(cb) {\n        // can't add twice\n        if (listeners$1.includes(cb)) {\n            return;\n        }\n\n        // add initial listener\n        listeners$1.push(cb);\n\n        // setup paste listener for entire page\n        if (listening) {\n            return;\n        }\n\n        listening = true;\n        document.addEventListener('paste', handlePaste);\n    };\n\n    var unlisten = function unlisten(listener) {\n        arrayRemove(listeners$1, listeners$1.indexOf(listener));\n\n        // clean up\n        if (listeners$1.length === 0) {\n            document.removeEventListener('paste', handlePaste);\n            listening = false;\n        }\n    };\n\n    var createPaster = function createPaster() {\n        var cb = function cb(files) {\n            api.onload(files);\n        };\n\n        var api = {\n            destroy: function destroy() {\n                unlisten(cb);\n            },\n            onload: function onload() {},\n        };\n\n        listen(cb);\n\n        return api;\n    };\n\n    /**\n     * Creates the file view\n     */\n    var create$d = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n        root.element.id = 'filepond--assistant-' + props.id;\n        attr(root.element, 'role', 'status');\n        attr(root.element, 'aria-live', 'polite');\n        attr(root.element, 'aria-relevant', 'additions');\n    };\n\n    var addFilesNotificationTimeout = null;\n    var notificationClearTimeout = null;\n\n    var filenames = [];\n\n    var assist = function assist(root, message) {\n        root.element.textContent = message;\n    };\n\n    var clear$1 = function clear(root) {\n        root.element.textContent = '';\n    };\n\n    var listModified = function listModified(root, filename, label) {\n        var total = root.query('GET_TOTAL_ITEMS');\n        assist(\n            root,\n            label +\n                ' ' +\n                filename +\n                ', ' +\n                total +\n                ' ' +\n                (total === 1\n                    ? root.query('GET_LABEL_FILE_COUNT_SINGULAR')\n                    : root.query('GET_LABEL_FILE_COUNT_PLURAL'))\n        );\n\n        // clear group after set amount of time so the status is not read twice\n        clearTimeout(notificationClearTimeout);\n        notificationClearTimeout = setTimeout(function() {\n            clear$1(root);\n        }, 1500);\n    };\n\n    var isUsingFilePond = function isUsingFilePond(root) {\n        return root.element.parentNode.contains(document.activeElement);\n    };\n\n    var itemAdded = function itemAdded(_ref2) {\n        var root = _ref2.root,\n            action = _ref2.action;\n        if (!isUsingFilePond(root)) {\n            return;\n        }\n\n        root.element.textContent = '';\n        var item = root.query('GET_ITEM', action.id);\n        filenames.push(item.filename);\n\n        clearTimeout(addFilesNotificationTimeout);\n        addFilesNotificationTimeout = setTimeout(function() {\n            listModified(root, filenames.join(', '), root.query('GET_LABEL_FILE_ADDED'));\n\n            filenames.length = 0;\n        }, 750);\n    };\n\n    var itemRemoved = function itemRemoved(_ref3) {\n        var root = _ref3.root,\n            action = _ref3.action;\n        if (!isUsingFilePond(root)) {\n            return;\n        }\n\n        var item = action.item;\n        listModified(root, item.filename, root.query('GET_LABEL_FILE_REMOVED'));\n    };\n\n    var itemProcessed = function itemProcessed(_ref4) {\n        var root = _ref4.root,\n            action = _ref4.action;\n        // will also notify the user when FilePond is not being used, as the user might be occupied with other activities while uploading a file\n\n        var item = root.query('GET_ITEM', action.id);\n        var filename = item.filename;\n        var label = root.query('GET_LABEL_FILE_PROCESSING_COMPLETE');\n\n        assist(root, filename + ' ' + label);\n    };\n\n    var itemProcessedUndo = function itemProcessedUndo(_ref5) {\n        var root = _ref5.root,\n            action = _ref5.action;\n        var item = root.query('GET_ITEM', action.id);\n        var filename = item.filename;\n        var label = root.query('GET_LABEL_FILE_PROCESSING_ABORTED');\n\n        assist(root, filename + ' ' + label);\n    };\n\n    var itemError = function itemError(_ref6) {\n        var root = _ref6.root,\n            action = _ref6.action;\n        var item = root.query('GET_ITEM', action.id);\n        var filename = item.filename;\n\n        // will also notify the user when FilePond is not being used, as the user might be occupied with other activities while uploading a file\n\n        assist(root, action.status.main + ' ' + filename + ' ' + action.status.sub);\n    };\n\n    var assistant = createView({\n        create: create$d,\n        ignoreRect: true,\n        ignoreRectUpdate: true,\n        write: createRoute({\n            DID_LOAD_ITEM: itemAdded,\n            DID_REMOVE_ITEM: itemRemoved,\n            DID_COMPLETE_ITEM_PROCESSING: itemProcessed,\n\n            DID_ABORT_ITEM_PROCESSING: itemProcessedUndo,\n            DID_REVERT_ITEM_PROCESSING: itemProcessedUndo,\n\n            DID_THROW_ITEM_REMOVE_ERROR: itemError,\n            DID_THROW_ITEM_LOAD_ERROR: itemError,\n            DID_THROW_ITEM_INVALID: itemError,\n            DID_THROW_ITEM_PROCESSING_ERROR: itemError,\n        }),\n\n        tag: 'span',\n        name: 'assistant',\n    });\n\n    var toCamels = function toCamels(string) {\n        var separator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '-';\n        return string.replace(new RegExp(separator + '.', 'g'), function(sub) {\n            return sub.charAt(1).toUpperCase();\n        });\n    };\n\n    var debounce = function debounce(func) {\n        var interval = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 16;\n        var immidiateOnly =\n            arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n        var last = Date.now();\n        var timeout = null;\n\n        return function() {\n            for (\n                var _len = arguments.length, args = new Array(_len), _key = 0;\n                _key < _len;\n                _key++\n            ) {\n                args[_key] = arguments[_key];\n            }\n            clearTimeout(timeout);\n\n            var dist = Date.now() - last;\n\n            var fn = function fn() {\n                last = Date.now();\n                func.apply(void 0, args);\n            };\n\n            if (dist < interval) {\n                // we need to delay by the difference between interval and dist\n                // for example: if distance is 10 ms and interval is 16 ms,\n                // we need to wait an additional 6ms before calling the function)\n                if (!immidiateOnly) {\n                    timeout = setTimeout(fn, interval - dist);\n                }\n            } else {\n                // go!\n                fn();\n            }\n        };\n    };\n\n    var MAX_FILES_LIMIT = 1000000;\n\n    var prevent = function prevent(e) {\n        return e.preventDefault();\n    };\n\n    var create$e = function create(_ref) {\n        var root = _ref.root,\n            props = _ref.props;\n        // Add id\n        var id = root.query('GET_ID');\n        if (id) {\n            root.element.id = id;\n        }\n\n        // Add className\n        var className = root.query('GET_CLASS_NAME');\n        if (className) {\n            className\n                .split(' ')\n                .filter(function(name) {\n                    return name.length;\n                })\n                .forEach(function(name) {\n                    root.element.classList.add(name);\n                });\n        }\n\n        // Field label\n        root.ref.label = root.appendChildView(\n            root.createChildView(\n                dropLabel,\n                Object.assign({}, props, {\n                    translateY: null,\n                    caption: root.query('GET_LABEL_IDLE'),\n                })\n            )\n        );\n\n        // List of items\n        root.ref.list = root.appendChildView(\n            root.createChildView(listScroller, { translateY: null })\n        );\n\n        // Background panel\n        root.ref.panel = root.appendChildView(root.createChildView(panel, { name: 'panel-root' }));\n\n        // Assistant notifies assistive tech when content changes\n        root.ref.assistant = root.appendChildView(\n            root.createChildView(assistant, Object.assign({}, props))\n        );\n\n        // Data\n        root.ref.data = root.appendChildView(root.createChildView(data, Object.assign({}, props)));\n\n        // Measure (tests if fixed height was set)\n        // DOCTYPE needs to be set for this to work\n        root.ref.measure = createElement$1('div');\n        root.ref.measure.style.height = '100%';\n        root.element.appendChild(root.ref.measure);\n\n        // information on the root height or fixed height status\n        root.ref.bounds = null;\n\n        // apply initial style properties\n        root.query('GET_STYLES')\n            .filter(function(style) {\n                return !isEmpty(style.value);\n            })\n            .map(function(_ref2) {\n                var name = _ref2.name,\n                    value = _ref2.value;\n                root.element.dataset[name] = value;\n            });\n\n        // determine if width changed\n        root.ref.widthPrevious = null;\n        root.ref.widthUpdated = debounce(function() {\n            root.ref.updateHistory = [];\n            root.dispatch('DID_RESIZE_ROOT');\n        }, 250);\n\n        // history of updates\n        root.ref.previousAspectRatio = null;\n        root.ref.updateHistory = [];\n\n        // prevent scrolling and zooming on iOS (only if supports pointer events, for then we can enable reorder)\n        var canHover = window.matchMedia('(pointer: fine) and (hover: hover)').matches;\n        var hasPointerEvents = 'PointerEvent' in window;\n        if (root.query('GET_ALLOW_REORDER') && hasPointerEvents && !canHover) {\n            root.element.addEventListener('touchmove', prevent, { passive: false });\n            root.element.addEventListener('gesturestart', prevent);\n        }\n\n        // add credits\n        var credits = root.query('GET_CREDITS');\n        var hasCredits = credits.length === 2;\n        if (hasCredits) {\n            var frag = document.createElement('a');\n            frag.className = 'filepond--credits';\n            frag.setAttribute('aria-hidden', 'true');\n            frag.href = credits[0];\n            frag.tabindex = -1;\n            frag.target = '_blank';\n            frag.rel = 'noopener noreferrer';\n            frag.textContent = credits[1];\n            root.element.appendChild(frag);\n            root.ref.credits = frag;\n        }\n    };\n\n    var write$9 = function write(_ref3) {\n        var root = _ref3.root,\n            props = _ref3.props,\n            actions = _ref3.actions;\n        // route actions\n        route$5({ root: root, props: props, actions: actions });\n\n        // apply style properties\n        actions\n            .filter(function(action) {\n                return /^DID_SET_STYLE_/.test(action.type);\n            })\n            .filter(function(action) {\n                return !isEmpty(action.data.value);\n            })\n            .map(function(_ref4) {\n                var type = _ref4.type,\n                    data = _ref4.data;\n                var name = toCamels(type.substr(8).toLowerCase(), '_');\n                root.element.dataset[name] = data.value;\n                root.invalidateLayout();\n            });\n\n        if (root.rect.element.hidden) return;\n\n        if (root.rect.element.width !== root.ref.widthPrevious) {\n            root.ref.widthPrevious = root.rect.element.width;\n            root.ref.widthUpdated();\n        }\n\n        // get box bounds, we do this only once\n        var bounds = root.ref.bounds;\n        if (!bounds) {\n            bounds = root.ref.bounds = calculateRootBoundingBoxHeight(root);\n\n            // destroy measure element\n            root.element.removeChild(root.ref.measure);\n            root.ref.measure = null;\n        }\n\n        // get quick references to various high level parts of the upload tool\n        var _root$ref = root.ref,\n            hopper = _root$ref.hopper,\n            label = _root$ref.label,\n            list = _root$ref.list,\n            panel = _root$ref.panel;\n\n        // sets correct state to hopper scope\n        if (hopper) {\n            hopper.updateHopperState();\n        }\n\n        // bool to indicate if we're full or not\n        var aspectRatio = root.query('GET_PANEL_ASPECT_RATIO');\n        var isMultiItem = root.query('GET_ALLOW_MULTIPLE');\n        var totalItems = root.query('GET_TOTAL_ITEMS');\n        var maxItems = isMultiItem ? root.query('GET_MAX_FILES') || MAX_FILES_LIMIT : 1;\n        var atMaxCapacity = totalItems === maxItems;\n\n        // action used to add item\n        var addAction = actions.find(function(action) {\n            return action.type === 'DID_ADD_ITEM';\n        });\n\n        // if reached max capacity and we've just reached it\n        if (atMaxCapacity && addAction) {\n            // get interaction type\n            var interactionMethod = addAction.data.interactionMethod;\n\n            // hide label\n            label.opacity = 0;\n\n            if (isMultiItem) {\n                label.translateY = -40;\n            } else {\n                if (interactionMethod === InteractionMethod.API) {\n                    label.translateX = 40;\n                } else if (interactionMethod === InteractionMethod.BROWSE) {\n                    label.translateY = 40;\n                } else {\n                    label.translateY = 30;\n                }\n            }\n        } else if (!atMaxCapacity) {\n            label.opacity = 1;\n            label.translateX = 0;\n            label.translateY = 0;\n        }\n\n        var listItemMargin = calculateListItemMargin(root);\n\n        var listHeight = calculateListHeight(root);\n\n        var labelHeight = label.rect.element.height;\n        var currentLabelHeight = !isMultiItem || atMaxCapacity ? 0 : labelHeight;\n\n        var listMarginTop = atMaxCapacity ? list.rect.element.marginTop : 0;\n        var listMarginBottom = totalItems === 0 ? 0 : list.rect.element.marginBottom;\n\n        var visualHeight =\n            currentLabelHeight + listMarginTop + listHeight.visual + listMarginBottom;\n        var boundsHeight =\n            currentLabelHeight + listMarginTop + listHeight.bounds + listMarginBottom;\n\n        // link list to label bottom position\n        list.translateY =\n            Math.max(0, currentLabelHeight - list.rect.element.marginTop) - listItemMargin.top;\n\n        if (aspectRatio) {\n            // fixed aspect ratio\n\n            // calculate height based on width\n            var width = root.rect.element.width;\n            var height = width * aspectRatio;\n\n            // clear history if aspect ratio has changed\n            if (aspectRatio !== root.ref.previousAspectRatio) {\n                root.ref.previousAspectRatio = aspectRatio;\n                root.ref.updateHistory = [];\n            }\n\n            // remember this width\n            var history = root.ref.updateHistory;\n            history.push(width);\n\n            var MAX_BOUNCES = 2;\n            if (history.length > MAX_BOUNCES * 2) {\n                var l = history.length;\n                var bottom = l - 10;\n                var bounces = 0;\n                for (var i = l; i >= bottom; i--) {\n                    if (history[i] === history[i - 2]) {\n                        bounces++;\n                    }\n\n                    if (bounces >= MAX_BOUNCES) {\n                        // dont adjust height\n                        return;\n                    }\n                }\n            }\n\n            // fix height of panel so it adheres to aspect ratio\n            panel.scalable = false;\n            panel.height = height;\n\n            // available height for list\n            var listAvailableHeight =\n                // the height of the panel minus the label height\n                height -\n                currentLabelHeight -\n                // the room we leave open between the end of the list and the panel bottom\n                (listMarginBottom - listItemMargin.bottom) -\n                // if we're full we need to leave some room between the top of the panel and the list\n                (atMaxCapacity ? listMarginTop : 0);\n\n            if (listHeight.visual > listAvailableHeight) {\n                list.overflow = listAvailableHeight;\n            } else {\n                list.overflow = null;\n            }\n\n            // set container bounds (so pushes siblings downwards)\n            root.height = height;\n        } else if (bounds.fixedHeight) {\n            // fixed height\n\n            // fix height of panel\n            panel.scalable = false;\n\n            // available height for list\n            var _listAvailableHeight =\n                // the height of the panel minus the label height\n                bounds.fixedHeight -\n                currentLabelHeight -\n                // the room we leave open between the end of the list and the panel bottom\n                (listMarginBottom - listItemMargin.bottom) -\n                // if we're full we need to leave some room between the top of the panel and the list\n                (atMaxCapacity ? listMarginTop : 0);\n\n            // set list height\n            if (listHeight.visual > _listAvailableHeight) {\n                list.overflow = _listAvailableHeight;\n            } else {\n                list.overflow = null;\n            }\n\n            // no need to set container bounds as these are handles by CSS fixed height\n        } else if (bounds.cappedHeight) {\n            // max-height\n\n            // not a fixed height panel\n            var isCappedHeight = visualHeight >= bounds.cappedHeight;\n            var panelHeight = Math.min(bounds.cappedHeight, visualHeight);\n            panel.scalable = true;\n            panel.height = isCappedHeight\n                ? panelHeight\n                : panelHeight - listItemMargin.top - listItemMargin.bottom;\n\n            // available height for list\n            var _listAvailableHeight2 =\n                // the height of the panel minus the label height\n                panelHeight -\n                currentLabelHeight -\n                // the room we leave open between the end of the list and the panel bottom\n                (listMarginBottom - listItemMargin.bottom) -\n                // if we're full we need to leave some room between the top of the panel and the list\n                (atMaxCapacity ? listMarginTop : 0);\n\n            // set list height (if is overflowing)\n            if (visualHeight > bounds.cappedHeight && listHeight.visual > _listAvailableHeight2) {\n                list.overflow = _listAvailableHeight2;\n            } else {\n                list.overflow = null;\n            }\n\n            // set container bounds (so pushes siblings downwards)\n            root.height = Math.min(\n                bounds.cappedHeight,\n                boundsHeight - listItemMargin.top - listItemMargin.bottom\n            );\n        } else {\n            // flexible height\n\n            // not a fixed height panel\n            var itemMargin = totalItems > 0 ? listItemMargin.top + listItemMargin.bottom : 0;\n            panel.scalable = true;\n            panel.height = Math.max(labelHeight, visualHeight - itemMargin);\n\n            // set container bounds (so pushes siblings downwards)\n            root.height = Math.max(labelHeight, boundsHeight - itemMargin);\n        }\n\n        // move credits to bottom\n        if (root.ref.credits && panel.heightCurrent)\n            root.ref.credits.style.transform = 'translateY(' + panel.heightCurrent + 'px)';\n    };\n\n    var calculateListItemMargin = function calculateListItemMargin(root) {\n        var item = root.ref.list.childViews[0].childViews[0];\n        return item\n            ? {\n                  top: item.rect.element.marginTop,\n                  bottom: item.rect.element.marginBottom,\n              }\n            : {\n                  top: 0,\n                  bottom: 0,\n              };\n    };\n\n    var calculateListHeight = function calculateListHeight(root) {\n        var visual = 0;\n        var bounds = 0;\n\n        // get file list reference\n        var scrollList = root.ref.list;\n        var itemList = scrollList.childViews[0];\n        var visibleChildren = itemList.childViews.filter(function(child) {\n            return child.rect.element.height;\n        });\n        var children = root\n            .query('GET_ACTIVE_ITEMS')\n            .map(function(item) {\n                return visibleChildren.find(function(child) {\n                    return child.id === item.id;\n                });\n            })\n            .filter(function(item) {\n                return item;\n            });\n\n        // no children, done!\n        if (children.length === 0) return { visual: visual, bounds: bounds };\n\n        var horizontalSpace = itemList.rect.element.width;\n        var dragIndex = getItemIndexByPosition(itemList, children, scrollList.dragCoordinates);\n\n        var childRect = children[0].rect.element;\n\n        var itemVerticalMargin = childRect.marginTop + childRect.marginBottom;\n        var itemHorizontalMargin = childRect.marginLeft + childRect.marginRight;\n\n        var itemWidth = childRect.width + itemHorizontalMargin;\n        var itemHeight = childRect.height + itemVerticalMargin;\n\n        var newItem = typeof dragIndex !== 'undefined' && dragIndex >= 0 ? 1 : 0;\n        var removedItem = children.find(function(child) {\n            return child.markedForRemoval && child.opacity < 0.45;\n        })\n            ? -1\n            : 0;\n        var verticalItemCount = children.length + newItem + removedItem;\n        var itemsPerRow = getItemsPerRow(horizontalSpace, itemWidth);\n\n        // stack\n        if (itemsPerRow === 1) {\n            children.forEach(function(item) {\n                var height = item.rect.element.height + itemVerticalMargin;\n                bounds += height;\n                visual += height * item.opacity;\n            });\n        }\n        // grid\n        else {\n            bounds = Math.ceil(verticalItemCount / itemsPerRow) * itemHeight;\n            visual = bounds;\n        }\n\n        return { visual: visual, bounds: bounds };\n    };\n\n    var calculateRootBoundingBoxHeight = function calculateRootBoundingBoxHeight(root) {\n        var height = root.ref.measureHeight || null;\n        var cappedHeight = parseInt(root.style.maxHeight, 10) || null;\n        var fixedHeight = height === 0 ? null : height;\n\n        return {\n            cappedHeight: cappedHeight,\n            fixedHeight: fixedHeight,\n        };\n    };\n\n    var exceedsMaxFiles = function exceedsMaxFiles(root, items) {\n        var allowReplace = root.query('GET_ALLOW_REPLACE');\n        var allowMultiple = root.query('GET_ALLOW_MULTIPLE');\n        var totalItems = root.query('GET_TOTAL_ITEMS');\n        var maxItems = root.query('GET_MAX_FILES');\n\n        // total amount of items being dragged\n        var totalBrowseItems = items.length;\n\n        // if does not allow multiple items and dragging more than one item\n        if (!allowMultiple && totalBrowseItems > 1) {\n            return true;\n        }\n\n        // limit max items to one if not allowed to drop multiple items\n        maxItems = allowMultiple ? maxItems : allowReplace ? maxItems : 1;\n\n        // no more room?\n        var hasMaxItems = isInt(maxItems);\n        if (hasMaxItems && totalItems + totalBrowseItems > maxItems) {\n            root.dispatch('DID_THROW_MAX_FILES', {\n                source: items,\n                error: createResponse('warning', 0, 'Max files'),\n            });\n\n            return true;\n        }\n\n        return false;\n    };\n\n    var getDragIndex = function getDragIndex(list, children, position) {\n        var itemList = list.childViews[0];\n        return getItemIndexByPosition(itemList, children, {\n            left: position.scopeLeft - itemList.rect.element.left,\n            top:\n                position.scopeTop -\n                (list.rect.outer.top + list.rect.element.marginTop + list.rect.element.scrollTop),\n        });\n    };\n\n    /**\n     * Enable or disable file drop functionality\n     */\n    var toggleDrop = function toggleDrop(root) {\n        var isAllowed = root.query('GET_ALLOW_DROP');\n        var isDisabled = root.query('GET_DISABLED');\n        var enabled = isAllowed && !isDisabled;\n        if (enabled && !root.ref.hopper) {\n            var hopper = createHopper(\n                root.element,\n                function(items) {\n                    // allow quick validation of dropped items\n                    var beforeDropFile =\n                        root.query('GET_BEFORE_DROP_FILE') ||\n                        function() {\n                            return true;\n                        };\n\n                    // all items should be validated by all filters as valid\n                    var dropValidation = root.query('GET_DROP_VALIDATION');\n                    return dropValidation\n                        ? items.every(function(item) {\n                              return (\n                                  applyFilters('ALLOW_HOPPER_ITEM', item, {\n                                      query: root.query,\n                                  }).every(function(result) {\n                                      return result === true;\n                                  }) && beforeDropFile(item)\n                              );\n                          })\n                        : true;\n                },\n                {\n                    filterItems: function filterItems(items) {\n                        var ignoredFiles = root.query('GET_IGNORED_FILES');\n                        return items.filter(function(item) {\n                            if (isFile(item)) {\n                                return !ignoredFiles.includes(item.name.toLowerCase());\n                            }\n                            return true;\n                        });\n                    },\n                    catchesDropsOnPage: root.query('GET_DROP_ON_PAGE'),\n                    requiresDropOnElement: root.query('GET_DROP_ON_ELEMENT'),\n                }\n            );\n\n            hopper.onload = function(items, position) {\n                // get item children elements and sort based on list sort\n                var list = root.ref.list.childViews[0];\n                var visibleChildren = list.childViews.filter(function(child) {\n                    return child.rect.element.height;\n                });\n                var children = root\n                    .query('GET_ACTIVE_ITEMS')\n                    .map(function(item) {\n                        return visibleChildren.find(function(child) {\n                            return child.id === item.id;\n                        });\n                    })\n                    .filter(function(item) {\n                        return item;\n                    });\n\n                applyFilterChain('ADD_ITEMS', items, { dispatch: root.dispatch }).then(function(\n                    queue\n                ) {\n                    // these files don't fit so stop here\n                    if (exceedsMaxFiles(root, queue)) return false;\n\n                    // go\n                    root.dispatch('ADD_ITEMS', {\n                        items: queue,\n                        index: getDragIndex(root.ref.list, children, position),\n                        interactionMethod: InteractionMethod.DROP,\n                    });\n                });\n\n                root.dispatch('DID_DROP', { position: position });\n\n                root.dispatch('DID_END_DRAG', { position: position });\n            };\n\n            hopper.ondragstart = function(position) {\n                root.dispatch('DID_START_DRAG', { position: position });\n            };\n\n            hopper.ondrag = debounce(function(position) {\n                root.dispatch('DID_DRAG', { position: position });\n            });\n\n            hopper.ondragend = function(position) {\n                root.dispatch('DID_END_DRAG', { position: position });\n            };\n\n            root.ref.hopper = hopper;\n\n            root.ref.drip = root.appendChildView(root.createChildView(drip));\n        } else if (!enabled && root.ref.hopper) {\n            root.ref.hopper.destroy();\n            root.ref.hopper = null;\n            root.removeChildView(root.ref.drip);\n        }\n    };\n\n    /**\n     * Enable or disable browse functionality\n     */\n    var toggleBrowse = function toggleBrowse(root, props) {\n        var isAllowed = root.query('GET_ALLOW_BROWSE');\n        var isDisabled = root.query('GET_DISABLED');\n        var enabled = isAllowed && !isDisabled;\n        if (enabled && !root.ref.browser) {\n            root.ref.browser = root.appendChildView(\n                root.createChildView(\n                    browser,\n                    Object.assign({}, props, {\n                        onload: function onload(items) {\n                            applyFilterChain('ADD_ITEMS', items, {\n                                dispatch: root.dispatch,\n                            }).then(function(queue) {\n                                // these files don't fit so stop here\n                                if (exceedsMaxFiles(root, queue)) return false;\n\n                                // add items!\n                                root.dispatch('ADD_ITEMS', {\n                                    items: queue,\n                                    index: -1,\n                                    interactionMethod: InteractionMethod.BROWSE,\n                                });\n                            });\n                        },\n                    })\n                ),\n\n                0\n            );\n        } else if (!enabled && root.ref.browser) {\n            root.removeChildView(root.ref.browser);\n            root.ref.browser = null;\n        }\n    };\n\n    /**\n     * Enable or disable paste functionality\n     */\n    var togglePaste = function togglePaste(root) {\n        var isAllowed = root.query('GET_ALLOW_PASTE');\n        var isDisabled = root.query('GET_DISABLED');\n        var enabled = isAllowed && !isDisabled;\n        if (enabled && !root.ref.paster) {\n            root.ref.paster = createPaster();\n            root.ref.paster.onload = function(items) {\n                applyFilterChain('ADD_ITEMS', items, { dispatch: root.dispatch }).then(function(\n                    queue\n                ) {\n                    // these files don't fit so stop here\n                    if (exceedsMaxFiles(root, queue)) return false;\n\n                    // add items!\n                    root.dispatch('ADD_ITEMS', {\n                        items: queue,\n                        index: -1,\n                        interactionMethod: InteractionMethod.PASTE,\n                    });\n                });\n            };\n        } else if (!enabled && root.ref.paster) {\n            root.ref.paster.destroy();\n            root.ref.paster = null;\n        }\n    };\n\n    /**\n     * Route actions\n     */\n    var route$5 = createRoute({\n        DID_SET_ALLOW_BROWSE: function DID_SET_ALLOW_BROWSE(_ref5) {\n            var root = _ref5.root,\n                props = _ref5.props;\n            toggleBrowse(root, props);\n        },\n        DID_SET_ALLOW_DROP: function DID_SET_ALLOW_DROP(_ref6) {\n            var root = _ref6.root;\n            toggleDrop(root);\n        },\n        DID_SET_ALLOW_PASTE: function DID_SET_ALLOW_PASTE(_ref7) {\n            var root = _ref7.root;\n            togglePaste(root);\n        },\n        DID_SET_DISABLED: function DID_SET_DISABLED(_ref8) {\n            var root = _ref8.root,\n                props = _ref8.props;\n            toggleDrop(root);\n            togglePaste(root);\n            toggleBrowse(root, props);\n            var isDisabled = root.query('GET_DISABLED');\n            if (isDisabled) {\n                root.element.dataset.disabled = 'disabled';\n            } else {\n                // delete root.element.dataset.disabled; <= this does not work on iOS 10\n                root.element.removeAttribute('data-disabled');\n            }\n        },\n    });\n\n    var root = createView({\n        name: 'root',\n        read: function read(_ref9) {\n            var root = _ref9.root;\n            if (root.ref.measure) {\n                root.ref.measureHeight = root.ref.measure.offsetHeight;\n            }\n        },\n        create: create$e,\n        write: write$9,\n        destroy: function destroy(_ref10) {\n            var root = _ref10.root;\n            if (root.ref.paster) {\n                root.ref.paster.destroy();\n            }\n            if (root.ref.hopper) {\n                root.ref.hopper.destroy();\n            }\n            root.element.removeEventListener('touchmove', prevent);\n            root.element.removeEventListener('gesturestart', prevent);\n        },\n        mixins: {\n            styles: ['height'],\n        },\n    });\n\n    // creates the app\n    var createApp = function createApp() {\n        var initialOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        // let element\n        var originalElement = null;\n\n        // get default options\n        var defaultOptions = getOptions();\n\n        // create the data store, this will contain all our app info\n        var store = createStore(\n            // initial state (should be serializable)\n            createInitialState(defaultOptions),\n\n            // queries\n            [queries, createOptionQueries(defaultOptions)],\n\n            // action handlers\n            [actions, createOptionActions(defaultOptions)]\n        );\n\n        // set initial options\n        store.dispatch('SET_OPTIONS', { options: initialOptions });\n\n        // kick thread if visibility changes\n        var visibilityHandler = function visibilityHandler() {\n            if (document.hidden) return;\n            store.dispatch('KICK');\n        };\n        document.addEventListener('visibilitychange', visibilityHandler);\n\n        // re-render on window resize start and finish\n        var resizeDoneTimer = null;\n        var isResizing = false;\n        var isResizingHorizontally = false;\n        var initialWindowWidth = null;\n        var currentWindowWidth = null;\n        var resizeHandler = function resizeHandler() {\n            if (!isResizing) {\n                isResizing = true;\n            }\n            clearTimeout(resizeDoneTimer);\n            resizeDoneTimer = setTimeout(function() {\n                isResizing = false;\n                initialWindowWidth = null;\n                currentWindowWidth = null;\n                if (isResizingHorizontally) {\n                    isResizingHorizontally = false;\n                    store.dispatch('DID_STOP_RESIZE');\n                }\n            }, 500);\n        };\n        window.addEventListener('resize', resizeHandler);\n\n        // render initial view\n        var view = root(store, { id: getUniqueId() });\n\n        //\n        // PRIVATE API -------------------------------------------------------------------------------------\n        //\n        var isResting = false;\n        var isHidden = false;\n\n        var readWriteApi = {\n            // necessary for update loop\n\n            /**\n             * Reads from dom (never call manually)\n             * @private\n             */\n            _read: function _read() {\n                // test if we're resizing horizontally\n                // TODO: see if we can optimize this by measuring root rect\n                if (isResizing) {\n                    currentWindowWidth = window.innerWidth;\n                    if (!initialWindowWidth) {\n                        initialWindowWidth = currentWindowWidth;\n                    }\n\n                    if (!isResizingHorizontally && currentWindowWidth !== initialWindowWidth) {\n                        store.dispatch('DID_START_RESIZE');\n                        isResizingHorizontally = true;\n                    }\n                }\n\n                if (isHidden && isResting) {\n                    // test if is no longer hidden\n                    isResting = view.element.offsetParent === null;\n                }\n\n                // if resting, no need to read as numbers will still all be correct\n                if (isResting) return;\n\n                // read view data\n                view._read();\n\n                // if is hidden we need to know so we exit rest mode when revealed\n                isHidden = view.rect.element.hidden;\n            },\n\n            /**\n             * Writes to dom (never call manually)\n             * @private\n             */\n            _write: function _write(ts) {\n                // get all actions from store\n                var actions = store\n                    .processActionQueue()\n\n                    // filter out set actions (these will automatically trigger DID_SET)\n                    .filter(function(action) {\n                        return !/^SET_/.test(action.type);\n                    });\n\n                // if was idling and no actions stop here\n                if (isResting && !actions.length) return;\n\n                // some actions might trigger events\n                routeActionsToEvents(actions);\n\n                // update the view\n                isResting = view._write(ts, actions, isResizingHorizontally);\n\n                // will clean up all archived items\n                removeReleasedItems(store.query('GET_ITEMS'));\n\n                // now idling\n                if (isResting) {\n                    store.processDispatchQueue();\n                }\n            },\n        };\n\n        //\n        // EXPOSE EVENTS -------------------------------------------------------------------------------------\n        //\n        var createEvent = function createEvent(name) {\n            return function(data) {\n                // create default event\n                var event = {\n                    type: name,\n                };\n\n                // no data to add\n                if (!data) {\n                    return event;\n                }\n\n                // copy relevant props\n                if (data.hasOwnProperty('error')) {\n                    event.error = data.error ? Object.assign({}, data.error) : null;\n                }\n\n                if (data.status) {\n                    event.status = Object.assign({}, data.status);\n                }\n\n                if (data.file) {\n                    event.output = data.file;\n                }\n\n                // only source is available, else add item if possible\n                if (data.source) {\n                    event.file = data.source;\n                } else if (data.item || data.id) {\n                    var item = data.item ? data.item : store.query('GET_ITEM', data.id);\n                    event.file = item ? createItemAPI(item) : null;\n                }\n\n                // map all items in a possible items array\n                if (data.items) {\n                    event.items = data.items.map(createItemAPI);\n                }\n\n                // if this is a progress event add the progress amount\n                if (/progress/.test(name)) {\n                    event.progress = data.progress;\n                }\n\n                // copy relevant props\n                if (data.hasOwnProperty('origin') && data.hasOwnProperty('target')) {\n                    event.origin = data.origin;\n                    event.target = data.target;\n                }\n\n                return event;\n            };\n        };\n\n        var eventRoutes = {\n            DID_DESTROY: createEvent('destroy'),\n\n            DID_INIT: createEvent('init'),\n\n            DID_THROW_MAX_FILES: createEvent('warning'),\n\n            DID_INIT_ITEM: createEvent('initfile'),\n            DID_START_ITEM_LOAD: createEvent('addfilestart'),\n            DID_UPDATE_ITEM_LOAD_PROGRESS: createEvent('addfileprogress'),\n            DID_LOAD_ITEM: createEvent('addfile'),\n\n            DID_THROW_ITEM_INVALID: [createEvent('error'), createEvent('addfile')],\n\n            DID_THROW_ITEM_LOAD_ERROR: [createEvent('error'), createEvent('addfile')],\n\n            DID_THROW_ITEM_REMOVE_ERROR: [createEvent('error'), createEvent('removefile')],\n\n            DID_PREPARE_OUTPUT: createEvent('preparefile'),\n\n            DID_START_ITEM_PROCESSING: createEvent('processfilestart'),\n            DID_UPDATE_ITEM_PROCESS_PROGRESS: createEvent('processfileprogress'),\n            DID_ABORT_ITEM_PROCESSING: createEvent('processfileabort'),\n            DID_COMPLETE_ITEM_PROCESSING: createEvent('processfile'),\n            DID_COMPLETE_ITEM_PROCESSING_ALL: createEvent('processfiles'),\n            DID_REVERT_ITEM_PROCESSING: createEvent('processfilerevert'),\n\n            DID_THROW_ITEM_PROCESSING_ERROR: [createEvent('error'), createEvent('processfile')],\n\n            DID_REMOVE_ITEM: createEvent('removefile'),\n\n            DID_UPDATE_ITEMS: createEvent('updatefiles'),\n\n            DID_ACTIVATE_ITEM: createEvent('activatefile'),\n\n            DID_REORDER_ITEMS: createEvent('reorderfiles'),\n        };\n\n        var exposeEvent = function exposeEvent(event) {\n            // create event object to be dispatched\n            var detail = Object.assign({ pond: exports }, event);\n            delete detail.type;\n            view.element.dispatchEvent(\n                new CustomEvent('FilePond:' + event.type, {\n                    // event info\n                    detail: detail,\n\n                    // event behaviour\n                    bubbles: true,\n                    cancelable: true,\n                    composed: true, // triggers listeners outside of shadow root\n                })\n            );\n\n            // event object to params used for `on()` event handlers and callbacks `oninit()`\n            var params = [];\n\n            // if is possible error event, make it the first param\n            if (event.hasOwnProperty('error')) {\n                params.push(event.error);\n            }\n\n            // file is always section\n            if (event.hasOwnProperty('file')) {\n                params.push(event.file);\n            }\n\n            // append other props\n            var filtered = ['type', 'error', 'file'];\n            Object.keys(event)\n                .filter(function(key) {\n                    return !filtered.includes(key);\n                })\n                .forEach(function(key) {\n                    return params.push(event[key]);\n                });\n\n            // on(type, () => { })\n            exports.fire.apply(exports, [event.type].concat(params));\n\n            // oninit = () => {}\n            var handler = store.query('GET_ON' + event.type.toUpperCase());\n            if (handler) {\n                handler.apply(void 0, params);\n            }\n        };\n\n        var routeActionsToEvents = function routeActionsToEvents(actions) {\n            if (!actions.length) return;\n            actions\n                .filter(function(action) {\n                    return eventRoutes[action.type];\n                })\n                .forEach(function(action) {\n                    var routes = eventRoutes[action.type];\n                    (Array.isArray(routes) ? routes : [routes]).forEach(function(route) {\n                        // this isn't fantastic, but because of the stacking of settimeouts plugins can handle the did_load before the did_init\n                        if (action.type === 'DID_INIT_ITEM') {\n                            exposeEvent(route(action.data));\n                        } else {\n                            setTimeout(function() {\n                                exposeEvent(route(action.data));\n                            }, 0);\n                        }\n                    });\n                });\n        };\n\n        //\n        // PUBLIC API -------------------------------------------------------------------------------------\n        //\n        var setOptions = function setOptions(options) {\n            return store.dispatch('SET_OPTIONS', { options: options });\n        };\n\n        var getFile = function getFile(query) {\n            return store.query('GET_ACTIVE_ITEM', query);\n        };\n\n        var prepareFile = function prepareFile(query) {\n            return new Promise(function(resolve, reject) {\n                store.dispatch('REQUEST_ITEM_PREPARE', {\n                    query: query,\n                    success: function success(item) {\n                        resolve(item);\n                    },\n                    failure: function failure(error) {\n                        reject(error);\n                    },\n                });\n            });\n        };\n\n        var addFile = function addFile(source) {\n            var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n            return new Promise(function(resolve, reject) {\n                addFiles([{ source: source, options: options }], { index: options.index })\n                    .then(function(items) {\n                        return resolve(items && items[0]);\n                    })\n                    .catch(reject);\n            });\n        };\n\n        var isFilePondFile = function isFilePondFile(obj) {\n            return obj.file && obj.id;\n        };\n\n        var removeFile = function removeFile(query, options) {\n            // if only passed options\n            if (typeof query === 'object' && !isFilePondFile(query) && !options) {\n                options = query;\n                query = undefined;\n            }\n\n            // request item removal\n            store.dispatch('REMOVE_ITEM', Object.assign({}, options, { query: query }));\n\n            // see if item has been removed\n            return store.query('GET_ACTIVE_ITEM', query) === null;\n        };\n\n        var addFiles = function addFiles() {\n            for (\n                var _len = arguments.length, args = new Array(_len), _key = 0;\n                _key < _len;\n                _key++\n            ) {\n                args[_key] = arguments[_key];\n            }\n            return new Promise(function(resolve, reject) {\n                var sources = [];\n                var options = {};\n\n                // user passed a sources array\n                if (isArray(args[0])) {\n                    sources.push.apply(sources, args[0]);\n                    Object.assign(options, args[1] || {});\n                } else {\n                    // user passed sources as arguments, last one might be options object\n                    var lastArgument = args[args.length - 1];\n                    if (typeof lastArgument === 'object' && !(lastArgument instanceof Blob)) {\n                        Object.assign(options, args.pop());\n                    }\n\n                    // add rest to sources\n                    sources.push.apply(sources, args);\n                }\n\n                store.dispatch('ADD_ITEMS', {\n                    items: sources,\n                    index: options.index,\n                    interactionMethod: InteractionMethod.API,\n                    success: resolve,\n                    failure: reject,\n                });\n            });\n        };\n\n        var getFiles = function getFiles() {\n            return store.query('GET_ACTIVE_ITEMS');\n        };\n\n        var processFile = function processFile(query) {\n            return new Promise(function(resolve, reject) {\n                store.dispatch('REQUEST_ITEM_PROCESSING', {\n                    query: query,\n                    success: function success(item) {\n                        resolve(item);\n                    },\n                    failure: function failure(error) {\n                        reject(error);\n                    },\n                });\n            });\n        };\n\n        var prepareFiles = function prepareFiles() {\n            for (\n                var _len2 = arguments.length, args = new Array(_len2), _key2 = 0;\n                _key2 < _len2;\n                _key2++\n            ) {\n                args[_key2] = arguments[_key2];\n            }\n            var queries = Array.isArray(args[0]) ? args[0] : args;\n            var items = queries.length ? queries : getFiles();\n            return Promise.all(items.map(prepareFile));\n        };\n\n        var processFiles = function processFiles() {\n            for (\n                var _len3 = arguments.length, args = new Array(_len3), _key3 = 0;\n                _key3 < _len3;\n                _key3++\n            ) {\n                args[_key3] = arguments[_key3];\n            }\n            var queries = Array.isArray(args[0]) ? args[0] : args;\n            if (!queries.length) {\n                var files = getFiles().filter(function(item) {\n                    return (\n                        !(item.status === ItemStatus.IDLE && item.origin === FileOrigin.LOCAL) &&\n                        item.status !== ItemStatus.PROCESSING &&\n                        item.status !== ItemStatus.PROCESSING_COMPLETE &&\n                        item.status !== ItemStatus.PROCESSING_REVERT_ERROR\n                    );\n                });\n\n                return Promise.all(files.map(processFile));\n            }\n            return Promise.all(queries.map(processFile));\n        };\n\n        var removeFiles = function removeFiles() {\n            for (\n                var _len4 = arguments.length, args = new Array(_len4), _key4 = 0;\n                _key4 < _len4;\n                _key4++\n            ) {\n                args[_key4] = arguments[_key4];\n            }\n\n            var queries = Array.isArray(args[0]) ? args[0] : args;\n\n            var options;\n            if (typeof queries[queries.length - 1] === 'object') {\n                options = queries.pop();\n            } else if (Array.isArray(args[0])) {\n                options = args[1];\n            }\n\n            var files = getFiles();\n\n            if (!queries.length)\n                return Promise.all(\n                    files.map(function(file) {\n                        return removeFile(file, options);\n                    })\n                );\n\n            // when removing by index the indexes shift after each file removal so we need to convert indexes to ids\n            var mappedQueries = queries\n                .map(function(query) {\n                    return isNumber(query) ? (files[query] ? files[query].id : null) : query;\n                })\n                .filter(function(query) {\n                    return query;\n                });\n\n            return mappedQueries.map(function(q) {\n                return removeFile(q, options);\n            });\n        };\n\n        var exports = Object.assign(\n            {},\n\n            on(),\n            {},\n\n            readWriteApi,\n            {},\n\n            createOptionAPI(store, defaultOptions),\n            {\n                /**\n                 * Override options defined in options object\n                 * @param options\n                 */\n                setOptions: setOptions,\n\n                /**\n                 * Load the given file\n                 * @param source - the source of the file (either a File, base64 data uri or url)\n                 * @param options - object, { index: 0 }\n                 */\n                addFile: addFile,\n\n                /**\n                 * Load the given files\n                 * @param sources - the sources of the files to load\n                 * @param options - object, { index: 0 }\n                 */\n                addFiles: addFiles,\n\n                /**\n                 * Returns the file objects matching the given query\n                 * @param query { string, number, null }\n                 */\n                getFile: getFile,\n\n                /**\n                 * Upload file with given name\n                 * @param query { string, number, null  }\n                 */\n                processFile: processFile,\n\n                /**\n                 * Request prepare output for file with given name\n                 * @param query { string, number, null  }\n                 */\n                prepareFile: prepareFile,\n\n                /**\n                 * Removes a file by its name\n                 * @param query { string, number, null  }\n                 */\n                removeFile: removeFile,\n\n                /**\n                 * Moves a file to a new location in the files list\n                 */\n                moveFile: function moveFile(query, index) {\n                    return store.dispatch('MOVE_ITEM', { query: query, index: index });\n                },\n\n                /**\n                 * Returns all files (wrapped in public api)\n                 */\n                getFiles: getFiles,\n\n                /**\n                 * Starts uploading all files\n                 */\n                processFiles: processFiles,\n\n                /**\n                 * Clears all files from the files list\n                 */\n                removeFiles: removeFiles,\n\n                /**\n                 * Starts preparing output of all files\n                 */\n                prepareFiles: prepareFiles,\n\n                /**\n                 * Sort list of files\n                 */\n                sort: function sort(compare) {\n                    return store.dispatch('SORT', { compare: compare });\n                },\n\n                /**\n                 * Browse the file system for a file\n                 */\n                browse: function browse() {\n                    // needs to be trigger directly as user action needs to be traceable (is not traceable in requestAnimationFrame)\n                    var input = view.element.querySelector('input[type=file]');\n                    if (input) {\n                        input.click();\n                    }\n                },\n\n                /**\n                 * Destroys the app\n                 */\n                destroy: function destroy() {\n                    // request destruction\n                    exports.fire('destroy', view.element);\n\n                    // stop active processes (file uploads, fetches, stuff like that)\n                    // loop over items and depending on states call abort for ongoing processes\n                    store.dispatch('ABORT_ALL');\n\n                    // destroy view\n                    view._destroy();\n\n                    // stop listening to resize\n                    window.removeEventListener('resize', resizeHandler);\n\n                    // stop listening to the visiblitychange event\n                    document.removeEventListener('visibilitychange', visibilityHandler);\n\n                    // dispatch destroy\n                    store.dispatch('DID_DESTROY');\n                },\n\n                /**\n                 * Inserts the plugin before the target element\n                 */\n                insertBefore: function insertBefore$1(element) {\n                    return insertBefore(view.element, element);\n                },\n\n                /**\n                 * Inserts the plugin after the target element\n                 */\n                insertAfter: function insertAfter$1(element) {\n                    return insertAfter(view.element, element);\n                },\n\n                /**\n                 * Appends the plugin to the target element\n                 */\n                appendTo: function appendTo(element) {\n                    return element.appendChild(view.element);\n                },\n\n                /**\n                 * Replaces an element with the app\n                 */\n                replaceElement: function replaceElement(element) {\n                    // insert the app before the element\n                    insertBefore(view.element, element);\n\n                    // remove the original element\n                    element.parentNode.removeChild(element);\n\n                    // remember original element\n                    originalElement = element;\n                },\n\n                /**\n                 * Restores the original element\n                 */\n                restoreElement: function restoreElement() {\n                    if (!originalElement) {\n                        return; // no element to restore\n                    }\n\n                    // restore original element\n                    insertAfter(originalElement, view.element);\n\n                    // remove our element\n                    view.element.parentNode.removeChild(view.element);\n\n                    // remove reference\n                    originalElement = null;\n                },\n\n                /**\n                 * Returns true if the app root is attached to given element\n                 * @param element\n                 */\n                isAttachedTo: function isAttachedTo(element) {\n                    return view.element === element || originalElement === element;\n                },\n\n                /**\n                 * Returns the root element\n                 */\n                element: {\n                    get: function get() {\n                        return view.element;\n                    },\n                },\n\n                /**\n                 * Returns the current pond status\n                 */\n                status: {\n                    get: function get() {\n                        return store.query('GET_STATUS');\n                    },\n                },\n            }\n        );\n\n        // Done!\n        store.dispatch('DID_INIT');\n\n        // create actual api object\n        return createObject(exports);\n    };\n\n    var createAppObject = function createAppObject() {\n        var customOptions = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        // default options\n        var defaultOptions = {};\n        forin(getOptions(), function(key, value) {\n            defaultOptions[key] = value[0];\n        });\n\n        // set app options\n        var app = createApp(\n            Object.assign(\n                {},\n\n                defaultOptions,\n                {},\n\n                customOptions\n            )\n        );\n\n        // return the plugin instance\n        return app;\n    };\n\n    var lowerCaseFirstLetter = function lowerCaseFirstLetter(string) {\n        return string.charAt(0).toLowerCase() + string.slice(1);\n    };\n\n    var attributeNameToPropertyName = function attributeNameToPropertyName(attributeName) {\n        return toCamels(attributeName.replace(/^data-/, ''));\n    };\n\n    var mapObject = function mapObject(object, propertyMap) {\n        // remove unwanted\n        forin(propertyMap, function(selector, mapping) {\n            forin(object, function(property, value) {\n                // create regexp shortcut\n                var selectorRegExp = new RegExp(selector);\n\n                // tests if\n                var matches = selectorRegExp.test(property);\n\n                // no match, skip\n                if (!matches) {\n                    return;\n                }\n\n                // if there's a mapping, the original property is always removed\n                delete object[property];\n\n                // should only remove, we done!\n                if (mapping === false) {\n                    return;\n                }\n\n                // move value to new property\n                if (isString(mapping)) {\n                    object[mapping] = value;\n                    return;\n                }\n\n                // move to group\n                var group = mapping.group;\n                if (isObject(mapping) && !object[group]) {\n                    object[group] = {};\n                }\n\n                object[group][lowerCaseFirstLetter(property.replace(selectorRegExp, ''))] = value;\n            });\n\n            // do submapping\n            if (mapping.mapping) {\n                mapObject(object[mapping.group], mapping.mapping);\n            }\n        });\n    };\n\n    var getAttributesAsObject = function getAttributesAsObject(node) {\n        var attributeMapping =\n            arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        // turn attributes into object\n        var attributes = [];\n        forin(node.attributes, function(index) {\n            attributes.push(node.attributes[index]);\n        });\n\n        var output = attributes\n            .filter(function(attribute) {\n                return attribute.name;\n            })\n            .reduce(function(obj, attribute) {\n                var value = attr(node, attribute.name);\n\n                obj[attributeNameToPropertyName(attribute.name)] =\n                    value === attribute.name ? true : value;\n                return obj;\n            }, {});\n\n        // do mapping of object properties\n        mapObject(output, attributeMapping);\n\n        return output;\n    };\n\n    var createAppAtElement = function createAppAtElement(element) {\n        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n        // how attributes of the input element are mapped to the options for the plugin\n        var attributeMapping = {\n            // translate to other name\n            '^class$': 'className',\n            '^multiple$': 'allowMultiple',\n            '^capture$': 'captureMethod',\n            '^webkitdirectory$': 'allowDirectoriesOnly',\n\n            // group under single property\n            '^server': {\n                group: 'server',\n                mapping: {\n                    '^process': {\n                        group: 'process',\n                    },\n\n                    '^revert': {\n                        group: 'revert',\n                    },\n\n                    '^fetch': {\n                        group: 'fetch',\n                    },\n\n                    '^restore': {\n                        group: 'restore',\n                    },\n\n                    '^load': {\n                        group: 'load',\n                    },\n                },\n            },\n\n            // don't include in object\n            '^type$': false,\n            '^files$': false,\n        };\n\n        // add additional option translators\n        applyFilters('SET_ATTRIBUTE_TO_OPTION_MAP', attributeMapping);\n\n        // create final options object by setting options object and then overriding options supplied on element\n        var mergedOptions = Object.assign({}, options);\n\n        var attributeOptions = getAttributesAsObject(\n            element.nodeName === 'FIELDSET' ? element.querySelector('input[type=file]') : element,\n            attributeMapping\n        );\n\n        // merge with options object\n        Object.keys(attributeOptions).forEach(function(key) {\n            if (isObject(attributeOptions[key])) {\n                if (!isObject(mergedOptions[key])) {\n                    mergedOptions[key] = {};\n                }\n                Object.assign(mergedOptions[key], attributeOptions[key]);\n            } else {\n                mergedOptions[key] = attributeOptions[key];\n            }\n        });\n\n        // if parent is a fieldset, get files from parent by selecting all input fields that are not file upload fields\n        // these will then be automatically set to the initial files\n        mergedOptions.files = (options.files || []).concat(\n            Array.from(element.querySelectorAll('input:not([type=file])')).map(function(input) {\n                return {\n                    source: input.value,\n                    options: {\n                        type: input.dataset.type,\n                    },\n                };\n            })\n        );\n\n        // build plugin\n        var app = createAppObject(mergedOptions);\n\n        // add already selected files\n        if (element.files) {\n            Array.from(element.files).forEach(function(file) {\n                app.addFile(file);\n            });\n        }\n\n        // replace the target element\n        app.replaceElement(element);\n\n        // expose\n        return app;\n    };\n\n    // if an element is passed, we create the instance at that element, if not, we just create an up object\n    var createApp$1 = function createApp() {\n        return isNode(arguments.length <= 0 ? undefined : arguments[0])\n            ? createAppAtElement.apply(void 0, arguments)\n            : createAppObject.apply(void 0, arguments);\n    };\n\n    var PRIVATE_METHODS = ['fire', '_read', '_write'];\n\n    var createAppAPI = function createAppAPI(app) {\n        var api = {};\n\n        copyObjectPropertiesToObject(app, api, PRIVATE_METHODS);\n\n        return api;\n    };\n\n    /**\n     * Replaces placeholders in given string with replacements\n     * @param string - \"Foo {bar}\"\"\n     * @param replacements - { \"bar\": 10 }\n     */\n    var replaceInString = function replaceInString(string, replacements) {\n        return string.replace(/(?:{([a-zA-Z]+)})/g, function(match, group) {\n            return replacements[group];\n        });\n    };\n\n    var createWorker = function createWorker(fn) {\n        var workerBlob = new Blob(['(', fn.toString(), ')()'], {\n            type: 'application/javascript',\n        });\n\n        var workerURL = URL.createObjectURL(workerBlob);\n        var worker = new Worker(workerURL);\n\n        return {\n            transfer: function transfer(message, cb) {},\n            post: function post(message, cb, transferList) {\n                var id = getUniqueId();\n\n                worker.onmessage = function(e) {\n                    if (e.data.id === id) {\n                        cb(e.data.message);\n                    }\n                };\n\n                worker.postMessage(\n                    {\n                        id: id,\n                        message: message,\n                    },\n\n                    transferList\n                );\n            },\n            terminate: function terminate() {\n                worker.terminate();\n                URL.revokeObjectURL(workerURL);\n            },\n        };\n    };\n\n    var loadImage = function loadImage(url) {\n        return new Promise(function(resolve, reject) {\n            var img = new Image();\n            img.onload = function() {\n                resolve(img);\n            };\n            img.onerror = function(e) {\n                reject(e);\n            };\n            img.src = url;\n        });\n    };\n\n    var renameFile = function renameFile(file, name) {\n        var renamedFile = file.slice(0, file.size, file.type);\n        renamedFile.lastModifiedDate = file.lastModifiedDate;\n        renamedFile.name = name;\n        return renamedFile;\n    };\n\n    var copyFile = function copyFile(file) {\n        return renameFile(file, file.name);\n    };\n\n    // already registered plugins (can't register twice)\n    var registeredPlugins = [];\n\n    // pass utils to plugin\n    var createAppPlugin = function createAppPlugin(plugin) {\n        // already registered\n        if (registeredPlugins.includes(plugin)) {\n            return;\n        }\n\n        // remember this plugin\n        registeredPlugins.push(plugin);\n\n        // setup!\n        var pluginOutline = plugin({\n            addFilter: addFilter,\n            utils: {\n                Type: Type,\n                forin: forin,\n                isString: isString,\n                isFile: isFile,\n                toNaturalFileSize: toNaturalFileSize,\n                replaceInString: replaceInString,\n                getExtensionFromFilename: getExtensionFromFilename,\n                getFilenameWithoutExtension: getFilenameWithoutExtension,\n                guesstimateMimeType: guesstimateMimeType,\n                getFileFromBlob: getFileFromBlob,\n                getFilenameFromURL: getFilenameFromURL,\n                createRoute: createRoute,\n                createWorker: createWorker,\n                createView: createView,\n                createItemAPI: createItemAPI,\n                loadImage: loadImage,\n                copyFile: copyFile,\n                renameFile: renameFile,\n                createBlob: createBlob,\n                applyFilterChain: applyFilterChain,\n                text: text,\n                getNumericAspectRatioFromString: getNumericAspectRatioFromString,\n            },\n\n            views: {\n                fileActionButton: fileActionButton,\n            },\n        });\n\n        // add plugin options to default options\n        extendDefaultOptions(pluginOutline.options);\n    };\n\n    // feature detection used by supported() method\n    var isOperaMini = function isOperaMini() {\n        return Object.prototype.toString.call(window.operamini) === '[object OperaMini]';\n    };\n    var hasPromises = function hasPromises() {\n        return 'Promise' in window;\n    };\n    var hasBlobSlice = function hasBlobSlice() {\n        return 'slice' in Blob.prototype;\n    };\n    var hasCreateObjectURL = function hasCreateObjectURL() {\n        return 'URL' in window && 'createObjectURL' in window.URL;\n    };\n    var hasVisibility = function hasVisibility() {\n        return 'visibilityState' in document;\n    };\n    var hasTiming = function hasTiming() {\n        return 'performance' in window;\n    }; // iOS 8.x\n    var hasCSSSupports = function hasCSSSupports() {\n        return 'supports' in (window.CSS || {});\n    }; // use to detect Safari 9+\n    var isIE11 = function isIE11() {\n        return /MSIE|Trident/.test(window.navigator.userAgent);\n    };\n\n    var supported = (function() {\n        // Runs immediately and then remembers result for subsequent calls\n        var isSupported =\n            // Has to be a browser\n            isBrowser() &&\n            // Can't run on Opera Mini due to lack of everything\n            !isOperaMini() &&\n            // Require these APIs to feature detect a modern browser\n            hasVisibility() &&\n            hasPromises() &&\n            hasBlobSlice() &&\n            hasCreateObjectURL() &&\n            hasTiming() &&\n            // doesn't need CSSSupports but is a good way to detect Safari 9+ (we do want to support IE11 though)\n            (hasCSSSupports() || isIE11());\n\n        return function() {\n            return isSupported;\n        };\n    })();\n\n    /**\n     * Plugin internal state (over all instances)\n     */\n    var state = {\n        // active app instances, used to redraw the apps and to find the later\n        apps: [],\n    };\n\n    // plugin name\n    var name = 'filepond';\n\n    /**\n     * Public Plugin methods\n     */\n    var fn = function fn() {};\n    exports.Status = {};\n    exports.FileStatus = {};\n    exports.FileOrigin = {};\n    exports.OptionTypes = {};\n    exports.create = fn;\n    exports.destroy = fn;\n    exports.parse = fn;\n    exports.find = fn;\n    exports.registerPlugin = fn;\n    exports.getOptions = fn;\n    exports.setOptions = fn;\n\n    // if not supported, no API\n    if (supported()) {\n        // start painter and fire load event\n        createPainter(\n            function() {\n                state.apps.forEach(function(app) {\n                    return app._read();\n                });\n            },\n            function(ts) {\n                state.apps.forEach(function(app) {\n                    return app._write(ts);\n                });\n            }\n        );\n\n        // fire loaded event so we know when FilePond is available\n        var dispatch = function dispatch() {\n            // let others know we have area ready\n            document.dispatchEvent(\n                new CustomEvent('FilePond:loaded', {\n                    detail: {\n                        supported: supported,\n                        create: exports.create,\n                        destroy: exports.destroy,\n                        parse: exports.parse,\n                        find: exports.find,\n                        registerPlugin: exports.registerPlugin,\n                        setOptions: exports.setOptions,\n                    },\n                })\n            );\n\n            // clean up event\n            document.removeEventListener('DOMContentLoaded', dispatch);\n        };\n\n        if (document.readyState !== 'loading') {\n            // move to back of execution queue, FilePond should have been exported by then\n            setTimeout(function() {\n                return dispatch();\n            }, 0);\n        } else {\n            document.addEventListener('DOMContentLoaded', dispatch);\n        }\n\n        // updates the OptionTypes object based on the current options\n        var updateOptionTypes = function updateOptionTypes() {\n            return forin(getOptions(), function(key, value) {\n                exports.OptionTypes[key] = value[1];\n            });\n        };\n\n        exports.Status = Object.assign({}, Status);\n        exports.FileOrigin = Object.assign({}, FileOrigin);\n        exports.FileStatus = Object.assign({}, ItemStatus);\n\n        exports.OptionTypes = {};\n        updateOptionTypes();\n\n        // create method, creates apps and adds them to the app array\n        exports.create = function create() {\n            var app = createApp$1.apply(void 0, arguments);\n            app.on('destroy', exports.destroy);\n            state.apps.push(app);\n            return createAppAPI(app);\n        };\n\n        // destroys apps and removes them from the app array\n        exports.destroy = function destroy(hook) {\n            // returns true if the app was destroyed successfully\n            var indexToRemove = state.apps.findIndex(function(app) {\n                return app.isAttachedTo(hook);\n            });\n            if (indexToRemove >= 0) {\n                // remove from apps\n                var app = state.apps.splice(indexToRemove, 1)[0];\n\n                // restore original dom element\n                app.restoreElement();\n\n                return true;\n            }\n\n            return false;\n        };\n\n        // parses the given context for plugins (does not include the context element itself)\n        exports.parse = function parse(context) {\n            // get all possible hooks\n            var matchedHooks = Array.from(context.querySelectorAll('.' + name));\n\n            // filter out already active hooks\n            var newHooks = matchedHooks.filter(function(newHook) {\n                return !state.apps.find(function(app) {\n                    return app.isAttachedTo(newHook);\n                });\n            });\n\n            // create new instance for each hook\n            return newHooks.map(function(hook) {\n                return exports.create(hook);\n            });\n        };\n\n        // returns an app based on the given element hook\n        exports.find = function find(hook) {\n            var app = state.apps.find(function(app) {\n                return app.isAttachedTo(hook);\n            });\n            if (!app) {\n                return null;\n            }\n            return createAppAPI(app);\n        };\n\n        // adds a plugin extension\n        exports.registerPlugin = function registerPlugin() {\n            for (\n                var _len = arguments.length, plugins = new Array(_len), _key = 0;\n                _key < _len;\n                _key++\n            ) {\n                plugins[_key] = arguments[_key];\n            }\n\n            // register plugins\n            plugins.forEach(createAppPlugin);\n\n            // update OptionTypes, each plugin might have extended the default options\n            updateOptionTypes();\n        };\n\n        exports.getOptions = function getOptions$1() {\n            var opts = {};\n            forin(getOptions(), function(key, value) {\n                opts[key] = value[0];\n            });\n            return opts;\n        };\n\n        exports.setOptions = function setOptions$1(opts) {\n            if (isObject(opts)) {\n                // update existing plugins\n                state.apps.forEach(function(app) {\n                    app.setOptions(opts);\n                });\n\n                // override defaults\n                setOptions(opts);\n            }\n\n            // return new options\n            return exports.getOptions();\n        };\n    }\n\n    exports.supported = supported;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n});\n","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","import api from \"!../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../css-loader/dist/cjs.js??clonedRuleSet-13[0].rules[0].use[1]!../../postcss-loader/dist/cjs.js??clonedRuleSet-13[0].rules[0].use[2]!./filepond-plugin-image-preview.css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import api from \"!../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../css-loader/dist/cjs.js??clonedRuleSet-13[0].rules[0].use[1]!../../postcss-loader/dist/cjs.js??clonedRuleSet-13[0].rules[0].use[2]!./filepond-plugin-image-edit.css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","// Import FilePond\nimport * as FilePond from 'filepond';\n\n// Import the plugin code\nimport FilePondPluginFileValidateType from 'filepond-plugin-file-validate-type';\nimport FilePondPluginFileValidateSize from 'filepond-plugin-file-validate-size';\nimport FilePondPluginImageExifOrientation from 'filepond-plugin-image-exif-orientation';\nimport FilePondPluginImagePreview from 'filepond-plugin-image-preview';\nimport FilePondPluginImageCrop from 'filepond-plugin-image-crop';\nimport FilePondPluginImageResize from 'filepond-plugin-image-resize';\nimport FilePondPluginImageTransform from 'filepond-plugin-image-transform';\nimport FilePondPluginImageEdit from 'filepond-plugin-image-edit';\nimport FilePondPluginFileEncode from 'filepond-plugin-file-encode';\n\n// Import the plugin styles\nimport 'filepond-plugin-image-preview/dist/filepond-plugin-image-preview.css';\nimport 'filepond-plugin-image-edit/dist/filepond-plugin-image-edit.css';\n\n\n// Import the plugin styles\n\n$(document).ready(function (){\nvar dataUrl;\n// Register the plugin\n    FilePond.registerPlugin(\n        FilePondPluginFileValidateSize,\n        FilePondPluginFileValidateType,\n        FilePondPluginImageExifOrientation,\n        FilePondPluginImagePreview,\n        FilePondPluginImageCrop,\n        FilePondPluginImageResize,\n        FilePondPluginImageTransform,\n        FilePondPluginImageEdit,\n        FilePondPluginFileEncode\n    );\n\n    // Portfolio\n    const portfolioPond = FilePond.create( document.querySelector('#portfolioFiles'));\n    sessionStorage.setItem(\"portfolioUpload\", 0);\n\n    portfolioPond.setOptions({\n        labelIdle: 'Hineinziehen oder <span class=\"filepond--label-action\">durchsuchen</span>',\n        maxFiles: 6,\n        required: false,\n        allowMultiple: true,\n        allowFileEncode:true,\n        allowFileTypeValidation: true,\n        allowProcess:false,\n        maxFileSize:\"100MB\",\n        labelMaxFileSizeExceeded: \"Die Datei ist zu gross.\",\n        labelMaxTotalFileSize: 'maximal erlaubte Dateigrsse: {filesize}',\n        acceptedFileTypes:[\"image/*\"],\n    });\n\n\n    // wenn eine Datei dem Upload hinzugefgt wird\n    portfolioPond.onaddfile = (err, item) => {\n        if (err) {\n            return;\n        } else {\n            var dataUrl = item.getFileEncodeDataURL();\n            var filename = item.filename;\n            $.ajax({\n                url : '/addTempPortfolioUpload',\n                headers: {'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')},\n                type : 'POST',\n                data : { 'file': dataUrl, 'filename': filename },\n                success: function (res) {/*console.log(res);*/ },\n                failure: function(res) {/*console.log(res);*/}\n            });\n\n            sessionStorage.setItem(\"portfolioUpload\", 1);\n        }\n    }\n\n    // wenn eine Datei vom Upload entfernt wird\n    portfolioPond.onremovefile= (err, item) => {\n        var files = portfolioPond.getFiles();\n        if (err) {\n            return;\n        } else {\n            var filename = item.filename;\n            $.ajax({\n                url : '/deleteTempPortfolioUpload',\n                headers: {'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')},\n                type : 'POST',\n                data : {'filename': filename },\n                success: function (res) {/*console.log(res);*/ },\n                failure: function(res) {/*console.log(res);*/}\n            });\n\n            if(files == 0){\n                sessionStorage.setItem(\"portfolioUpload\", 0);\n            }\n        }\n    }\n\n    // Job Anhang\n    const jobAttachmentPond = FilePond.create( document.querySelector('#jobFiles'));\n    jobAttachmentPond.setOptions({\n        labelIdle: 'Hineinziehen oder <span class=\"filepond--label-action\">durchsuchen</span>',\n        maxFiles: 6,\n        required: false,\n        allowMultiple: true,\n        allowFileEncode:true,\n        allowFileTypeValidation: true,\n        allowProcess:true,\n        maxFileSize:\"100MB\",\n        labelMaxFileSizeExceeded: \"Die Datei ist zu gross.\",\n        labelMaxTotalFileSize: 'maximal erlaubte Dateigrsse: {filesize}',\n        acceptedFileTypes:[\"application/docx\",\"application/pdf\",\"application/doc\", \"image/*\"],\n    });\n\n    sessionStorage.setItem(\"jobAttachmentUpload\", 0);\n\n    // wenn eine Datei dem Upload hinzugefgt wird\n    jobAttachmentPond.onaddfile = (err, item) => {\n        if (err) {\n            return;\n        } else {\n            var dataUrl = item.getFileEncodeDataURL();\n            var filename = item.filename;\n            $.ajax({\n                url : '/storeTempJobAttachments',\n                headers: {'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')},\n                type : 'POST',\n                data : { 'file': dataUrl, 'filename': filename },\n                success: function (res) {/*console.log(res);*/ },\n                failure: function(res) {/*console.log(res);*/}\n            });\n\n            sessionStorage.setItem(\"jobAttachmentUpload\", 1);\n        }\n    }\n\n    // wenn eine Datei vom Upload entfernt wird\n    jobAttachmentPond.onremovefile= (err, item) => {\n        var files = jobAttachmentPond.getFiles();\n        if (err) {\n            return;\n        } else {\n            var filename = item.filename;\n            $.ajax({\n                url : '/deleteTempJobAttachments',\n                headers: {'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')},\n                type : 'POST',\n                data : {'filename': filename },\n                success: function (res) {/*console.log(res);*/ },\n                failure: function(res) {/*console.log(res);*/}\n            });\n\n            if(files == 0){\n                sessionStorage.setItem(\"jobAttachmentUpload\", 0);\n            }\n        }\n    }\n\n    // Profilbild\n    sessionStorage.setItem(\"profileUpload\", 0);\n    const profileImagePond = FilePond.create( document.querySelector('#image'));\n    profileImagePond.setOptions({\n        labelIdle: 'Hineinziehen oder <span class=\"filepond--label-action\">durchsuchen</span>',\n        allowImageCrop:true,\n        allowMultiple:false,\n        imagePreviewHeight: 50,\n        imageCropAspectRatio: '1:1',\n        imageResizeTargetWidth: 200,\n        imageResizeTargetHeight: 200,\n        imageResizeMode:'cover',\n        stylePanelLayout: 'compact circle',\n        styleLoadIndicatorPosition: 'center bottom',\n        styleProgressIndicatorPosition: 'right bottom',\n        styleButtonRemoveItemPosition: 'right top',\n        styleButtonProcessItemPosition: 'right bottom',\n        allowImageEdit:true,\n        styleImageEditButtonEditItemPosition:'\tbottom center',\n        allowFileEncode:true,\n        server: {\n            url: '/profileImage',\n            headers: {\n                'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n            }\n        },\n        headers: {\n            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n        }\n    });\n\n\n    // Request encoded data\n    profileImagePond.onaddfile = (err, item) => {\n\n        if (err) {\n            $(\"button[type='submit']\").attr(\"disabled\", true);\n            //console.warn(err);\n            $(\"#image-feedback\").fadeIn();\n            return;\n        } else {\n            $(\"button[type='submit']\").removeAttr(\"disabled\");\n            $(\"#image-feedback\").fadeOut();\n            dataUrl = item.getFileEncodeDataURL();\n            sessionStorage.setItem(\"profileUpload\", 1);\n        }\n\n    }\n\n    // Request encoded data\n    profileImagePond.onremovefile= (err, item) => {\n        if (err) {\n            //console.warn(err);\n            $(\"button[type='submit']\").attr(\"disabled\", true);\n            return;\n        } else {\n            $(\"button[type='submit']\").removeAttr(\"disabled\");\n            $(\"#image-feedback\").fadeOut();\n            sessionStorage.setItem(\"profileUpload\", 0);\n        }\n\n    }\n\n    // SVA\n    const svaPond = FilePond.create( document.querySelector('#sva'));\n    svaPond.setOptions({\n        labelIdle: 'Hineinziehen oder <span class=\"filepond--label-action\">durchsuchen</span>',\n        allowMultiple:false,\n        allowFileEncode:true,\n        required: true,\n        allowFileTypeValidation: true,\n        maxFileSize:\"100MB\",\n        labelMaxFileSizeExceeded: \"Die Datei ist zu gross.\",\n        labelMaxTotalFileSize: 'maximal erlaubte Dateigrsse: {filesize}',\n        acceptedFileTypes:[\"application/pdf\"],\n        server: {\n            url: '/sva',\n            headers: {\n                'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n            }\n        },\n        headers: {\n            'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n        }\n    });\n\n\n    // Request encoded data\n    svaPond.onaddfile = (err, item) => {\n\n        if (err) {\n            $(\"button[type='submit']\").attr(\"disabled\", true);\n            //console.warn(err);\n            $(\"#sva-feedback\").fadeIn();\n            return;\n        } else {\n            $(\"button[type='submit']\").removeAttr(\"disabled\");\n            $(\"#sva-feedback\").fadeOut();\n            dataUrl = item.getFileEncodeDataURL();\n            $(\"#svaBase64String\").val(dataUrl);\n        }\n    }\n\n    // Request encoded data\n    svaPond.onremovefile= (err, item) => {\n        if (err) {\n            //console.warn(err);\n            $(\"button[type='submit']\").attr(\"disabled\", true);\n            return;\n        } else {\n            $(\"button[type='submit']\").removeAttr(\"disabled\");\n            $(\"#sva-feedback\").fadeOut();\n            $(\"#svaBase64String\").val(\"\");\n        }\n    }\n\n})\n"],"names":["___CSS_LOADER_EXPORT___","push","module","id","exports","cssWithMappingToString","list","toString","this","map","item","content","concat","join","i","modules","mediaQuery","dedupe","alreadyImportedModules","length","_i","_slicedToArray","arr","Array","isArray","_arrayWithHoles","Symbol","iterator","_s","_e","_arr","_n","_d","call","next","done","value","err","_iterableToArrayLimit","o","minLen","_arrayLikeToArray","n","Object","prototype","slice","constructor","name","from","test","_unsupportedIterableToArray","TypeError","_nonIterableRest","len","arr2","_item","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","sourceURLs","sources","source","sourceRoot","DataURIWorker","self","onmessage","e","convert","message","response","postMessage","options","cb","file","reader","FileReader","onloadend","result","replace","readAsDataURL","plugin","_ref","addFilter","utils","Type","createWorker","createRoute","isFile","encode","_ref2","Promise","resolve","worker","post","terminate","base64Cache","_ref3","query","extend","fileType","shouldPrepareOutput","_ref4","_ref5","metadata","getMetadata","all","Blob","then","dataItems","viewAPI","is","view","registerWriter","DID_PREPARE_OUTPUT","_ref6","root","action","cache","type","size","ref","dispatch","DID_REMOVE_ITEM","_ref7","allowFileEncode","BOOLEAN","window","document","dispatchEvent","CustomEvent","detail","factory","replaceInString","toNaturalFileSize","sizeMax","sizeMin","reject","fileFilter","status","main","sub","filesize","totalSizeMax","reduce","total","fileSize","allowFileSizeValidation","maxFileSize","INT","minFileSize","maxTotalFileSize","fileValidateSizeFilter","FUNCTION","labelMinFileSizeExceeded","STRING","labelMinFileSize","labelMaxFileSizeExceeded","labelMaxFileSize","labelMaxTotalFileSizeExceeded","labelMaxTotalFileSize","isString","guesstimateMimeType","getExtensionFromFilename","getFilenameFromURL","mimeTypeMatchesWildCard","mimeType","wildcard","exec","pop","isValidMimeType","acceptedTypes","userInputType","some","acceptedType","getItemType","filename","extension","validateFile","acceptedFileTypes","typeDetector","detectedType","catch","applyMimeTypeMap","acceptedFileType","assign","accept","validationResult","handleRejection","acceptedFileTypesMapped","filter","label","allTypes","allButLastType","lastType","allowFileTypeValidation","ARRAY","labelFileTypeNotAllowed","fileValidateTypeLabelExpectedTypes","fileValidateTypeLabelExpectedTypesMap","OBJECT","fileValidateTypeDetectType","isImage","getNumericAspectRatioFromString","allowCrop","isObject","isNumber","updateCrop","obj","setMetadata","crop","center","zoom","Math","max","rotation","flip","newAspectRatio","currentCrop","aspectRatio","newCrop","x","y","horizontal","vertical","humanAspectRatio","allowImageCrop","imageCropAspectRatio","isPreviewableImage","_","views","_utils$createItemAPI","createItemAPI","fileActionButton","shouldRemove","origin","createEditorResponseHandler","userDidConfirm","editRequestQueue","shift","requestEdit","_editRequestQueue$","handleEditorResponse","queueEditRequest","editRequest","canShowImagePreview","editor","filepondCallbackBridge","outputData","outputFile","onconfirm","oncancel","openEditor","props","cropAspectRatio","outputCanvasBackgroundColor","cropDefault","resize","filters","colors","markup","imageParameters","upscale","mode","width","height","matrix","color","colorMatrix","initialSize","targetSize","onclose","open","didLoadItem","handleEdit","stopPropagation","buttonView","createChildView","icon","opacity","element","classList","add","dataset","align","on","buttonEditItem","appendChildView","filenameElement","querySelector","editButton","createElement","className","innerHTML","addEventListener","appendChild","registerDestroyer","off","removeEventListener","routes","EDIT_ITEM","DID_LOAD_ITEM","didPreviewUpdate","_ref8","DID_IMAGE_PREVIEW_SHOW","allowImageEdit","styleImageEditButtonEditItemPosition","imageEditInstantEdit","imageEditAllowEdit","imageEditIconEdit","imageEditEditor","isJPEG","Marker","JPEG","APP1","EXIF","TIFF","Orientation","Unknown","getUint16","offset","little","arguments","undefined","getUint32","getImageOrientation","onload","DataView","target","byteLength","marker","tags","readAsArrayBuffer","IS_BROWSER","testSrc","shouldCorrect","testImage","Image","naturalWidth","naturalHeight","src","shouldCorrectImageExifOrientation","orientation","allowImageExifOrientation","_AwaitValue","wrapped","_AsyncGenerator","gen","front","back","send","key","arg","request","resume","wrappedAwait","settle","_invoke","return","asyncIterator","throw","vectorMultiply","v","amount","createVector","vectorAdd","a","b","vectorNormalize","l","sqrt","vectorRotate","radians","cos","sin","t","getMarkupValue","scalar","axis","parseFloat","min","getMarkupStyles","scale","lineStyle","borderStyle","fill","backgroundColor","fontColor","stroke","borderColor","lineColor","strokeWidth","borderWidth","lineWidth","lineCap","lineJoin","isDefined","getMarkupRect","rect","left","top","right","bottom","pointsToPathShape","points","point","index","setAttributes","attr","keys","forEach","setAttribute","ns","svg","tag","createElementNS","updateRect","styles","updateEllipse","cx","cy","rx","ry","IMAGE_FIT_STYLE","contain","cover","updateImage","preserveAspectRatio","fit","TEXT_ANCHOR","updateText","fontSize","fontFamily","fontWeight","textAlign","text","textContent","updateLine","line","childNodes","begin","end","x1","y1","x2","y2","lineDecoration","style","display","indexOf","arrowBeginRotationPoint","arrowBeginCenter","arrowBeginA","arrowBeginB","d","arrowEndRotationPoint","arrowEndCenter","arrowEndA","arrowEndB","updatePath","createShape","node","createLine","shape","CREATE_TYPE_ROUTES","image","setAttributeNS","ellipse","path","UPDATE_TYPE_ROUTES","createMarkupByType","updateMarkupByType","MARKUP_RECT","toOptionalFraction","prepareMarkup","_markup","prev","curr","zIndex","sortMarkupByZIndex","createMarkupView","createView","ignoreRect","mixins","apis","write","dirty","viewWidth","viewHeight","cropWidth","cropHeight","_size","outputWidth","outputHeight","outputFit","outputUpscale","shouldUpscale","scalarWidth","scalarHeight","markupFilter","sort","settings","createVector$1","vectorDot","vectorSubtract","vectorDistanceSquared","vectorDistance","getOffsetPointOnEdge","A","B","C","sinA","sinB","sinC","cosC","ratio","getRotatedRectSize","w","h","hor","ver","tl","abs","tr","bl","calculateCanvasSize","canvasAspectRatio","imageAspectRatio","canvasWidth","canvasHeight","imgWidth","imgHeight","getImageRectZoomFactor","imageRect","cropRect","imageWidth","imageHeight","rotatedCropSize","getCenteredCropRect","container","getCurrentCropSize","imageSize","canvasSize","canvasCenter","stage","shouldLimit","scaleToFit","widthFloat","heightFloat","round","IMAGE_SCALE_SPRING_PROPS","stiffness","damping","mass","createBitmapView","create","createImageCanvasWrapper","animations","originX","originY","scaleX","scaleY","translateX","translateY","rotateZ","bitmap","createClipView","duration","didWriteView","background","createMarkup","destroyMarkup","removeChildView","transparencyIndicator","shouldOptimize","translation","PI","stageZoomFactor","imageView","createImageView","clip","hidden","containerWidth","inner","containerHeight","fixedPreviewHeight","minPreviewHeight","maxPreviewHeight","panelAspectRatio","allowMultiple","clipHeight","clipWidth","SVG_MASK","SVGMaskUniqueId","createImageOverlayView","fpAPI","mask","url","location","href","hash","BitmapWorker","createImageBitmap","ColorMatrixWorker","imageData","m11","m12","m13","m14","m15","m21","m22","m23","m24","m25","m31","m32","m33","m34","m35","m41","m42","m43","m44","m45","r","g","buffer","getImageSize","transforms","fixImageOrientation","ctx","transform","apply","createPreviewImage","canvas","getContext","drawImage","isBitmap","MAX_WIDTH","MAX_HEIGHT","calculateAverageColor","ceil","getImageData","averageColor","c","floor","cloneCanvas","cloneImageData","ImageData","createImageData","set","Uint8ClampedArray","loadImage","img","crossOrigin","onerror","createImageWrapperView","OverlayView","ImageView","applyFilter","putImageData","removeImageView","_destroy","shiftImage","images","imageViewBin","pushImage","childViews","setTimeout","didUpdateItemMetadata","change","_imageView","canCreateImageBitmap","isFirefox","navigator","userAgent","match","parseInt","didCreatePreviewContainer","fileURL","URL","createObjectURL","drawPreview","loadPreviewFallback","previewImageLoaded","revokeObjectURL","pixelDensityFactor","devicePixelRatio","scaleFactor","previewImageRatio","previewContainerWidth","previewContainerHeight","previewImage","close","overlayShadow","imageBitmap","didDrawPreview","restoreOverlay","_ref9","overlayError","overlaySuccess","didThrowError","_ref10","didCompleteProcessing","_ref11","_ref12","destroy","_ref13","_ref14","DID_IMAGE_PREVIEW_DRAW","DID_IMAGE_PREVIEW_CONTAINER_CREATE","DID_FINISH_CALCULATE_PREVIEWSIZE","DID_UPDATE_ITEM_METADATA","DID_THROW_ITEM_LOAD_ERROR","DID_THROW_ITEM_PROCESSING_ERROR","DID_THROW_ITEM_INVALID","DID_COMPLETE_ITEM_PROCESSING","DID_START_ITEM_PROCESSING","DID_REVERT_ITEM_PROCESSING","_ref15","viewsToRemove","imagePreviewView","archived","supportsCreateImageBitmap","maxPreviewFileSize","imagePreview","queue","rescaleItem","itemPanelAspectRatio","fixedHeight","_root$ref","previewAspectRatio","previewHeightMax","itemWidth","previewHeight","didResizeView","shouldRescale","didCalculatePreviewSize","shouldDrawPreview","DID_RESIZE_ROOT","DID_STOP_RESIZE","DID_IMAGE_PREVIEW_CALCULATE_SIZE","requestAnimationFrame","allowImagePreview","imagePreviewFilterItem","imagePreviewHeight","imagePreviewMinHeight","imagePreviewMaxHeight","imagePreviewMaxFileSize","imagePreviewZoomFactor","imagePreviewUpscale","imagePreviewMaxInstantPreviewFileSize","imagePreviewTransparencyIndicator","imagePreviewCalculateAverageImageColor","imagePreviewMarkupShow","imagePreviewMarkupFilter","targetWidth","targetHeight","allowImageResize","imageResizeMode","imageResizeUpscale","imageResizeTargetWidth","imageResizeTargetHeight","getFilenameWithoutExtension","substr","lastIndexOf","ExtensionMap","jpeg","renameFileToMatchMimeType","split","getValidOutputMimeType","isImage$1","MATRICES","getImageOrientationMatrix","canvasRelease","clearRect","isFlipped","getBitmap","swapped","imageToImageData","imageElement","canvasMemoryLimit","_options$background","requiredMemory","imageOffset","fillStyle","fillRect","translate","rotate","HTMLCanvasElement","toBlob","defineProperty","callback","quality","dataURL","toDataURL","binStr","atob","Uint8Array","charCodeAt","canvasToBlob","beforeCreateBlob","promisedImage","cropSVG","blob","fr","original","cssText","originalNode","body","bBox","getBBox","parentNode","removeChild","titleNode","viewBoxAttribute","getAttribute","widthAttribute","heightAttribute","widthUnits","heightUnits","viewBoxList","viewBox","overflow","markupSVG","el","removeAttribute","outerHTML","cropCenterX","cropCenterY","canvasZoomFactor","cropTransforms","cropFlipHorizontal","cropFlipVertical","flipTransforms","transformed","readAsText","objectToImageData","TransformWorker","TRANSFORMS","applyTransforms","filterTransform","resizeTransform","br","bg","bb","applyFilterMatrix","m","ir","ig","ib","ia","mr","mg","mb","ma","or","og","ob","identityMatrix","isIdentityMatrix","_data$mode","_data$upscale","originWidth","originHeight","inputData","ratioWidth","ratioHeight","ratioWidthHalf","ratioHeightHalf","j","weight","weights","weightsAlpha","centerY","yy","dy","centerX","w0","xx","dx","correctOrientation","intelByteAligned","setUint16","readData","markerLength","orientationCorrected","getImageHead","getBlobBuilder","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","createBlob","arrayBuffer","BB","append","getBlob","getUniqueId","random","fn","workerBlob","workerURL","Worker","trips","transfer","transferList","chain","funcs","promise","func","bind","canvasApplyMarkup","drawers","TYPE_DRAW_ROUTES","applyMarkupStyles","beginPath","setLineDash","strokeStyle","globalAlpha","drawMarkupStyles","kappa","ox","oy","xe","ye","xm","ym","moveTo","bezierCurveTo","ar","_width","_height","_x","_y","font","fillText","lineTo","imageDataToCanvas","transformImage","instructions","stripImageHead","afterCreateBlob","output","qualityAsPercentage","resolveWithBlob","promisedBlob","promisedCanvas","imageHead","outputFormat","measure","clearInterval","intervalId","setInterval","isBrowser","isIOS","MSStream","forin","getFileFromBlob","TRANSFORM_LIST","createVariantCreator","updateMetadata","isDefaultCrop","shouldTransformFile","filterResult","handleRevert","success","failure","shouldTransform","variants","variantsDefinition","createVariant","qualityMode","clientTransforms","client","filteredMetadata","instruction","exif","willChangeType","canChangeQuality","willChangeQuality","out","variantPromises","files","allowImageTransform","imageTransformImageFilter","imageTransformOutputMimeType","imageTransformOutputQuality","imageTransformOutputStripImageHead","imageTransformClientTransforms","imageTransformOutputQualityMode","imageTransformVariants","imageTransformVariantsIncludeDefault","imageTransformVariantsDefaultName","imageTransformVariantsIncludeOriginal","imageTransformVariantsOriginalName","imageTransformBeforeCreateBlob","imageTransformAfterCreateBlob","imageTransformCanvasMemoryLimit","imageTransformCanvasBackgroundColor","isNode","HTMLElement","createStore","initialState","queries","actions","state","actionQueue","dispatchQueue","processDispatchQueue","isBlocking","actionHandlers","str","_queryHandles","_len","args","_key","queryHandles","api","getState","processActionQueue","property","definition","hasOwnProperty","createObject","hasAttribute","svgElements","isSVGElement","includes","attributes","parent","child","children","insertBefore","splice","getChildCount","getViewRect","elementRect","outer","childView","isRectIgnored","childViewRect","expandRect","calculateRectSize","marginBottom","marginRight","thereYet","position","destination","velocity","errorMargin","spring","_ref$stiffness","_ref$damping","_ref$mass","resting","interpolate","ts","skipToEndState","onupdate","oncomplete","get","easeInOutQuad","tween","p","_ref$duration","_ref$easing","easing","_ref$delay","delay","start","reverse","animator","createAnimator","category","def","addGetSet","overwrite","getter","setter","mixinConfig","viewProps","viewInternalAPI","viewExternalAPI","initialProps","animation","addEvent","removeEvent","listeners","viewState","events","remove","findIndex","event","defaults","rotateX","rotateY","currentProps","getOffset","getScale","getRect","propsHaveChanged","applyStyles","newProps","prop","perspective","elementCurrentStyle","Mixins","layoutCalculated","paddingTop","marginTop","marginLeft","offsetLeft","offsetTop","offsetWidth","offsetHeight","scrollTop","offsetParent","_ref$tag","_ref$name","_ref$attributes","_ref$read","read","_ref$write","_ref$create","_ref$destroy","_ref$filterFrameActio","filterFrameActionsForChild","_ref$didCreateView","didCreateView","_ref$didWriteView","_ref$ignoreRect","_ref$ignoreRectUpdate","ignoreRectUpdate","_ref$mixins","store","getComputedStyle","frameRect","isResting","activeMixins","writers","readers","destroyers","getElement","getChildViews","getReference","_read","internalAPI","_write","frameActions","writer","timestamp","mixin","destroyer","sharedAPIDefinition","internalAPIDefinition","needle","linkView","unlinkView","registerReader","invalidateLayout","externalAPIDefinition","mixinAPIDefinition","mixinAPI","childCount","createPainter","fps","painter","interval","last","requestTick","cancelTick","setTimerType","tick","performance","now","clearTimeout","cancelAnimationFrame","delta","pause","_ref$actions","newNode","referenceNode","insertAfter","nextSibling","isEmpty","trim","toArray","splitter","isBoolean","toBoolean","toNumber","toInt","toFloat","isInt","isFinite","toBytes","base","naturalFileSize","isFunction","toFunctionReference","string","levels","level","methods","process","patch","revert","fetch","restore","load","createServerAPI","outline","timeout","headers","createAction","method","withCredentials","ondata","parts","header","isNull","isAPI","getType","replaceSingleQuotes","conversionTable","array","boolean","int","number","float","bytes","function","serverapi","object","parse","convertTo","getValueByType","newValue","defaultValue","valueType","newValueType","convertedValue","option","createOption","currentValue","enumerable","createOptions","optionDefinition","createInitialState","items","listUpdateTimeout","itemUpdateTimeout","processingQueue","fromCamels","separator","part","toLowerCase","createOptionAPI","toUpperCase","createOptionActions","createOptionQueries","InteractionMethod","API","DROP","BROWSE","PASTE","NONE","_objectWithoutPropertiesLoose","excluded","sourceKeys","_objectWithoutProperties","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","iter","arrayRemove","run","sync","listener","_fire","fireSync","fire","_len2","_key2","onOnce","_cb","copyObjectPropertiesToObject","getOwnPropertyNames","getOwnPropertyDescriptor","PRIVATE","removeReleasedItems","released","ItemStatus","INIT","IDLE","PROCESSING_QUEUED","PROCESSING","PROCESSING_COMPLETE","PROCESSING_ERROR","PROCESSING_REVERT_ERROR","LOADING","LOAD_ERROR","FileOrigin","INPUT","LIMBO","LOCAL","getNonNumeric","getDecimalSeparator","toLocaleString","getThousandsSeparator","decimalSeparator","thousandsStringWithSeparator","NUMBER","ACTION","SERVER_API","REGEX","applyFilterChain","matchingFilters","f","initialFilter","current","error","applyFilters","extendDefaultOptions","additionalOptions","defaultOptions","getOptions","setOptions","opts","disabled","required","captureMethod","allowSyncAcceptAttribute","allowDrop","allowBrowse","allowPaste","allowReplace","allowRevert","allowRemove","allowProcess","allowReorder","allowDirectoriesOnly","storeAsFile","forceRevert","maxFiles","checkValidity","itemInsertLocationFreedom","itemInsertLocation","itemInsertInterval","dropOnPage","dropOnElement","dropValidation","ignoredFiles","instantUpload","maxParallelUploads","allowMinimumUploadDuration","chunkUploads","chunkForce","chunkSize","chunkRetryDelays","server","fileSizeBase","labelDecimalSeparator","labelThousandsSeparator","labelIdle","labelInvalidField","labelFileWaitingForSize","labelFileSizeNotAvailable","labelFileCountSingular","labelFileCountPlural","labelFileLoading","labelFileAdded","labelFileLoadError","labelFileRemoved","labelFileRemoveError","labelFileProcessing","labelFileProcessingComplete","labelFileProcessingAborted","labelFileProcessingError","labelFileProcessingRevertError","labelTapToCancel","labelTapToRetry","labelTapToUndo","labelButtonRemoveItem","labelButtonAbortItemLoad","labelButtonRetryItemLoad","labelButtonAbortItemProcessing","labelButtonUndoItemProcessing","labelButtonRetryItemProcessing","labelButtonProcessItem","iconRemove","iconProcess","iconRetry","iconUndo","iconDone","oninit","onwarning","onactivatefile","oninitfile","onaddfilestart","onaddfileprogress","onaddfile","onprocessfilestart","onprocessfileprogress","onprocessfileabort","onprocessfilerevert","onprocessfile","onprocessfiles","onremovefile","onpreparefile","onupdatefiles","onreorderfiles","beforeDropFile","beforeAddFile","beforeRemoveFile","beforePrepareFile","stylePanelLayout","stylePanelAspectRatio","styleItemPanelAspectRatio","styleButtonRemoveItemPosition","styleButtonProcessItemPosition","styleLoadIndicatorPosition","styleProgressIndicatorPosition","styleButtonRemoveItemAlign","credits","getItemByQuery","find","getActiveItems","Status","EMPTY","ERROR","BUSY","READY","res","canUpdateFileInput","dataTransfer","DataTransfer","File","ITEM_ERROR","ITEM_BUSY","ITEM_READY","isItemInErrorState","isItemInBusyState","isItemInReadyState","isAsync","GET_STATUS","GET_ITEM","GET_ACTIVE_ITEM","GET_ACTIVE_ITEMS","GET_ITEMS","GET_ITEM_NAME","GET_ITEM_SIZE","GET_STYLES","GET_PANEL_ASPECT_RATIO","GET_ITEM_PANEL_ASPECT_RATIO","GET_ITEMS_BY_STATUS","GET_TOTAL_ITEMS","SHOULD_UPDATE_FILE_INPUT","IS_ASYNC","hasRoomForItem","count","maxFileCount","limit","arrayInsert","insertItem","isBase64DataURI","guesstimateExtension","subtype","leftPad","padding","getDateString","date","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","lastModifiedDate","_relativePath","getBlobFromByteStringWithMimeType","byteString","ab","ArrayBuffer","getMimeTypeFromBase64DataURI","dataURI","getBase64DataFromBase64DataURI","getByteStringFromBase64DataURI","getBlobFromBase64DataURI","getFileFromBase64DataURI","getFileNameFromHeader","matches","decodeURI","getFileSizeFromHeader","getTranfserIdFromHeader","getFileInfoFromHeaders","info","rows","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","createFileLoader","fetchFn","complete","progress","getProgress","abort","loadURL","code","computable","fileinfo","setSource","isGet","sendRequest","onheaders","onprogress","ontimeout","onabort","aborted","xhr","headersReceived","encodeURI","XMLHttpRequest","upload","lengthComputable","loaded","onreadystatechange","readyState","setRequestHeader","responseType","createResponse","createTimeoutResponse","getAllResponseHeaders","hasQS","buildURL","createFetchFunction","apiUrl","statusText","ChunkStatus","QUEUED","COMPLETE","WAITING","processFileChunked","chunks","chunkTransferId","chunkServer","serverId","fd","getResponseHeader","requestTransferId","formData","FormData","requestParams","requestTransferOffset","requestUrl","lastChunkIndex","retries","completeProcessingChunks","canProcessChunk","chunk","processChunk","processChunks","updateTotalProgress","retryProcessChunk","every","totalBytesTransfered","totalSize","abortChunks","createFileProcessorFunction","canChunkUpload","shouldChunkUpload","willChunkUpload","createProcessorFunction","params","createRevertFunction","uniqueFileId","getRandomNumber","createPerceivedPerformanceUpdater","tickMin","tickMax","runtime","clear","createFileProcessor","processFn","perceivedProgress","perceivedPerformanceUpdater","perceivedDuration","progressFn","completeFn","transferId","reset","getDuration","createFileStub","deepCloneObject","createItem","serverFileReference","frozen","processingAborted","activeLoader","activeProcessor","abortProcessingRequestComplete","setStatus","getFileExtension","getFileType","getFileSize","getFile","loader","meta","retryLoad","abortLoad","processor","onprocess","console","requestProcessing","abortProcessing","revertFileUpload","serverTransferId","_setMetadata","silent","filenameWithoutExtension","fileExtension","relativePath","handler","itemAPI","freeze","release","archive","getItemIndexByQuery","getItemById","itemId","fetchBlob","getDomainFromURL","protocol","isExternalURL","dynamicLabel","isMockItem","listUpdated","optionalPromise","sortItems","compare","getItemByQueryFromState","itemHandler","_ref$success","_ref$failure","ABORT_ALL","DID_SET_FILES","_ref2$value","activeItems","interactionMethod","doUpload","MOVE_ITEM","currentIndex","SORT","ADD_ITEMS","_ref6$success","_ref6$failure","insertLocation","totalItems","isValidFile","promises","ADD_ITEM","_ref7$index","_ref7$success","_ref7$failure","_ref7$options","mainStatus","handleAdd","shouldAdd","loadComplete","REQUEST_PREPARE_OUTPUT","_ref9$failure","COMPLETE_LOAD_ITEM","RETRY_ITEM_LOAD","REQUEST_ITEM_PREPARE","_success","REQUEST_ITEM_PROCESSING","processNow","PROCESS_ITEM","processNext","queueEntry","itemReference","noop","RETRY_ITEM_PROCESSING","REQUEST_REMOVE_ITEM","RELEASE_ITEM","REMOVE_ITEM","removeFromView","ABORT_ITEM_LOAD","ABORT_ITEM_PROCESSING","REQUEST_REVERT_ITEM_PROCESSING","shouldRevert","requestRemoveResult","REVERT_ITEM_PROCESSING","SET_OPTIONS","formatFilename","createElement$1","tagName","textNode","nodeValue","createTextNode","polarToCartesian","radius","angleInDegrees","angleInRadians","describeArc","startAngle","endAngle","arcSweep","percentageArc","to","spin","ringStrokeWidth","ringFrom","ringTo","coordinates","progressIndicator","create$1","isDisabled","write$1","shouldDisable","KB","MB","GB","removeDecimalsWhenZero","decimalCount","toFixed","create$2","fileName","updateFile","updateFileSizeOnError","fileInfo","DID_UPDATE_ITEM_META","toPercentage","create$3","didSetItemLoadProgress","title","didSetItemProcessProgress","didRequestItemProcessing","didAbortItemProcessing","didCompleteItemProcessing","fileStatus","DID_REQUEST_ITEM_PROCESSING","DID_ABORT_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_UPDATE_ITEM_LOAD_PROGRESS","DID_THROW_ITEM_PROCESSING_REVERT_ERROR","DID_THROW_ITEM_REMOVE_ERROR","Buttons","AbortItemLoad","RetryItemLoad","RemoveItem","ProcessItem","AbortItemProcessing","RetryItemProcessing","RevertItemProcessing","ButtonKeys","isSupported","calculateFileInfoOffset","getRemoveIndicatorAligment","buttonRect","buttonRemoveItem","calculateButtonWidth","buttonAbortItemLoad","calculateFileVerticalCenterOffset","calculateFileHorizontalCenterOffset","getLoadIndicatorAlignment","getProcessIndicatorAlignment","DefaultStyle","buttonRetryItemLoad","buttonProcessItem","buttonAbortItemProcessing","buttonRetryItemProcessing","buttonRevertItemProcessing","loadProgressIndicator","processProgressIndicator","processingCompleteIndicator","IdleStyle","ProcessingStyle","StyleMap","DID_START_ITEM_LOAD","DID_START_ITEM_REMOVE","DID_LOAD_LOCAL_ITEM","processingCompleteIndicatorView","create$4","buttonFilter","LocalButtons","alignRemoveItemButton","enabledButtons","_map","loadIndicatorView","progressIndicatorView","activeStyles","write$2","route","stylesToApply","defaultStyles","control","DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING","DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD","DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL","buttonAbortItemRemoval","create$5","fileWrapper","PANEL_SPRING_PROPS","create$6","section","createSection","scalable","viewConstructor","write$3","topRect","bottomRect","panel","heightCurrent","createDragHelper","itemIds","prevIndex","setIndex","getIndex","getItemIndex","ITEM_TRANSLATE_SPRING","ITEM_SCALE_SPRING","StateMap","create$7","handleClick","markedForRemoval","dragState","grab","isPrimary","removedActivateListener","pageX","pageY","dragOrigin","dragCenter","offsetX","offsetY","drag","preventDefault","dragOffset","drop","route$1","DID_UPDATE_PANEL_HEIGHT","write$4","DID_GRAB_ITEM","DID_DRAG_ITEM","DID_DROP_ITEM","currentState","filepondItemState","getItemsPerRow","horizontalSpace","getItemIndexByPosition","positionInView","itemRect","itemHorizontalMargin","itemsPerRow","childMid","itemVerticalMargin","itemHeight","_index","itemTop","itemRight","itemBottom","dropAreaDimensions","getHeight","setHeight","val","getWidth","setWidth","setDimensions","create$8","lastItemSpanwDate","addItemView","addIndex","spawnDate","cooldown","dist","moveItem","vx","vy","introItemView","removeItemView","getItemHeight","getItemWidth","dragItem","numItems","oldIndex","dragPosition","dragHeight","dragWidth","cols","getGridIndex","getColIndex","visibleChildren","idx","childBottom","childTop","route$2","DID_ADD_ITEM","write$5","dragCoordinates","dragIndex","dragIndexOffset","removeIndexOffset","addIndexOffset","childRect","visualHeight","prevX","prevY","visualIndex","indexX","indexY","vectorX","sign","vectorY","filterSetItemActions","create$9","overflowing","storeDragCoordinates","scopeLeft","scopeTop","route$3","DID_DRAG","DID_END_DRAG","write$6","newHeight","listScroller","attrToggle","resetFileInput","input","form","create$a","setAcceptedFileTypes","toggleAllowMultiple","toggleDirectoryFilter","toggleDisabled","toggleRequired","setCaptureMethod","handleChange","webkitRelativePath","doesAllowBrowse","disableField","updateRequiredStatus","setCustomValidity","updateFieldValidityStatus","browser","DID_SET_DISABLED","DID_SET_ALLOW_BROWSE","DID_SET_ALLOW_DIRECTORIES_ONLY","DID_SET_ALLOW_MULTIPLE","DID_SET_ACCEPTED_FILE_TYPES","DID_SET_CAPTURE_METHOD","DID_SET_REQUIRED","Key","ENTER","SPACE","create$b","handleKeyDown","keyCode","click","contains","updateLabelValue","caption","clickable","dropLabel","DID_SET_LABEL_IDLE","addBlob","moveBlob","hideBlob","explodeBlob","write$7","route$4","DID_DROP","drip","setInputFiles","create$c","fields","getField","syncFieldPositionsWithItems","didReorderItems","didAddItem","shouldUseFileInput","dataContainer","didLoadItem$1","field","fileItem","didPrepareOutput","didSetDisabled","didRemoveItem","didDefineValue","write$8","DID_DEFINE_VALUE","DID_REORDER_ITEMS","DID_SORT_ITEMS","getRootNode","text$1","zip","epub","requestDataTransferItems","links","getLinks","hasFiles","getFiles","promisedFiles","isFileSystemItem","getFilesFromItem","returnedFileGroups","group","isEntry","entry","getAsEntry","isDirectory","kind","isDirectoryEntry","getFilesInDirectory","getAsFile","dirCounter","fileCounter","resolveIfDone","readEntries","dirEntry","directoryReader","createReader","readBatch","entries","correctedFile","correctMissingFileType","fullPath","webkitGetAsEntry","getLinksFromTransferMetaData","getLinksFromTransferURLData","getData","dragNDropObservers","eventPosition","pageLeft","pageTop","layerX","layerY","createDragNDropClient","scopeToObserve","filterElement","observer","getDragNDropObserver","ondrop","onenter","ondrag","onexit","allowdrop","addListener","newObserver","createDragNDropObserver","clients","dragenter","dragover","dragleave","handlers","createHandler","elementFromPoint","isEventTarget","elementAtPosition","pageXOffset","pageYOffset","initialTarget","setDropEffect","effect","dropEffect","overDropTarget","allowsTransfer","createHopper","scope","validateItems","catchesDropsOnPage","requiresDropOnElement","_options$filterItems","filterItems","documentElement","lastState","filteredItems","ondragend","ondragstart","updateHopperState","hopperState","listening","listeners$1","handlePaste","activeEl","activeElement","nodeName","inScope","clipboardData","listen","unlisten","createPaster","create$d","addFilesNotificationTimeout","notificationClearTimeout","filenames","assist","clear$1","listModified","isUsingFilePond","itemAdded","itemRemoved","itemProcessed","itemProcessedUndo","itemError","assistant","toCamels","RegExp","charAt","debounce","immidiateOnly","MAX_FILES_LIMIT","prevent","create$e","bounds","widthPrevious","widthUpdated","updateHistory","previousAspectRatio","canHover","matchMedia","hasPointerEvents","passive","frag","tabindex","rel","write$9","route$5","calculateRootBoundingBoxHeight","hopper","isMultiItem","atMaxCapacity","addAction","listItemMargin","calculateListItemMargin","listHeight","calculateListHeight","labelHeight","currentLabelHeight","listMarginTop","listMarginBottom","visual","boundsHeight","history","MAX_BOUNCES","bounces","listAvailableHeight","_listAvailableHeight","cappedHeight","isCappedHeight","panelHeight","_listAvailableHeight2","itemMargin","scrollList","itemList","newItem","removedItem","verticalItemCount","measureHeight","maxHeight","exceedsMaxFiles","maxItems","totalBrowseItems","getDragIndex","toggleDrop","isAllowed","enabled","toggleBrowse","togglePaste","paster","DID_SET_ALLOW_DROP","DID_SET_ALLOW_PASTE","createApp","initialOptions","originalElement","visibilityHandler","resizeDoneTimer","isResizing","isResizingHorizontally","initialWindowWidth","currentWindowWidth","resizeHandler","isHidden","readWriteApi","innerWidth","routeActionsToEvents","createEvent","eventRoutes","DID_DESTROY","DID_INIT","DID_THROW_MAX_FILES","DID_INIT_ITEM","DID_COMPLETE_ITEM_PROCESSING_ALL","DID_UPDATE_ITEMS","DID_ACTIVATE_ITEM","exposeEvent","pond","bubbles","cancelable","composed","filtered","prepareFile","addFile","addFiles","isFilePondFile","removeFile","lastArgument","processFile","prepareFiles","processFiles","_len3","_key3","removeFiles","_len4","_key4","q","moveFile","browse","appendTo","replaceElement","restoreElement","isAttachedTo","createAppObject","customOptions","lowerCaseFirstLetter","attributeNameToPropertyName","attributeName","mapObject","propertyMap","selector","mapping","selectorRegExp","getAttributesAsObject","attributeMapping","attribute","createAppAtElement","mergedOptions","attributeOptions","querySelectorAll","app","createApp$1","PRIVATE_METHODS","createAppAPI","replacements","renameFile","renamedFile","copyFile","registeredPlugins","createAppPlugin","pluginOutline","isOperaMini","operamini","hasPromises","hasBlobSlice","hasCreateObjectURL","hasVisibility","hasTiming","hasCSSSupports","CSS","isIE11","supported","apps","FileStatus","OptionTypes","registerPlugin","updateOptionTypes","hook","indexToRemove","context","newHook","plugins","memo","isOldIE","Boolean","getTarget","styleTarget","HTMLIFrameElement","contentDocument","head","stylesInDom","getIndexByIdentifier","identifier","modulesToDom","idCountMap","identifiers","css","media","sourceMap","references","updater","addStyle","insertStyleElement","nonce","insert","Error","textStore","replaceText","replacement","applyToSingletonTag","styleSheet","cssNode","applyToTag","firstChild","singleton","singletonCounter","update","styleIndex","removeStyleElement","newObj","lastIdentifiers","newList","newLastIdentifiers","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","__esModule","$","ready","dataUrl","FilePond","FilePondPluginFileValidateSize","FilePondPluginFileValidateType","FilePondPluginImageExifOrientation","FilePondPluginImagePreview","FilePondPluginImageCrop","FilePondPluginImageResize","FilePondPluginImageTransform","FilePondPluginImageEdit","FilePondPluginFileEncode","portfolioPond","sessionStorage","setItem","getFileEncodeDataURL","ajax","jobAttachmentPond","profileImagePond","fadeIn","removeAttr","fadeOut","svaPond"],"sourceRoot":""}